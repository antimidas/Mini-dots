import{a as St}from"./chunk-67GETEJS.js";import{a as Ht,b as Ut,c as Ii,d as Ni,e as Di}from"./chunk-Z6KOSB5X.js";import{a as Xt}from"./chunk-IQFNOK3G.js";import{a as Ei}from"./chunk-NUCLT2FJ.js";import{b as j}from"./chunk-2IU7RY3W.js";import{a as Ci,c as Oi}from"./chunk-542QW3ZK.js";import{a as Ri,e as Ti}from"./chunk-JNO5G2QC.js";import{a as Si}from"./chunk-AZABECDO.js";import{i as Ct}from"./chunk-AJE3NLZ4.js";import{a as ve}from"./chunk-TOX56BBT.js";import{a as lt}from"./chunk-KWORSN6K.js";import{c as Pi,d as we,e as k,g as Gt,k as Qt,p as Kt}from"./chunk-TXXCCNWI.js";import{m as st,r as ki,s as N,t as E,w as xi}from"./chunk-CHZKSFGE.js";import{a as yi,d as ge}from"./chunk-JLZNCAMO.js";import{a as vi,b as ye}from"./chunk-PVPCVBPO.js";import{a as wi,c as be}from"./chunk-Z4H6U7OH.js";import{z as L}from"./chunk-T5WNPH4X.js";import{a as U,c as Yt}from"./chunk-IUWVXOWN.js";import{b as me,c as Pt}from"./chunk-HPNQXUCM.js";import{c as he,e as b}from"./chunk-3GYLW4KZ.js";var zi=he((dt,ai)=>{(function(o,e){typeof dt=="object"&&typeof ai=="object"?ai.exports=e(L()):typeof define=="function"&&define.amd?define(["react"],e):typeof dt=="object"?dt.ReactConfetti=e(L()):o.ReactConfetti=e(o.React)})(typeof self<"u"?self:dt,function(o){return function(e){var n={};function r(c){if(n[c])return n[c].exports;var t=n[c]={i:c,l:!1,exports:{}};return e[c].call(t.exports,t,t.exports,r),t.l=!0,t.exports}return r.m=e,r.c=n,r.d=function(c,t,i){r.o(c,t)||Object.defineProperty(c,t,{enumerable:!0,get:i})},r.r=function(c){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})},r.t=function(c,t){if(1&t&&(c=r(c)),8&t||4&t&&typeof c=="object"&&c&&c.__esModule)return c;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:c}),2&t&&typeof c!="string")for(var l in c)r.d(i,l,function(s){return c[s]}.bind(null,l));return i},r.n=function(c){var t=c&&c.__esModule?function(){return c.default}:function(){return c};return r.d(t,"a",t),t},r.o=function(c,t){return Object.prototype.hasOwnProperty.call(c,t)},r.p="",r(r.s=2)}([function(e,n){e.exports=o},function(e,n,r){"use strict";var c={linear:function(t,i,l,s){return(l-i)*t/s+i},easeInQuad:function(t,i,l,s){return(l-i)*(t/=s)*t+i},easeOutQuad:function(t,i,l,s){return-(l-i)*(t/=s)*(t-2)+i},easeInOutQuad:function(t,i,l,s){var p=l-i;return(t/=s/2)<1?p/2*t*t+i:-p/2*(--t*(t-2)-1)+i},easeInCubic:function(t,i,l,s){return(l-i)*(t/=s)*t*t+i},easeOutCubic:function(t,i,l,s){return(l-i)*((t=t/s-1)*t*t+1)+i},easeInOutCubic:function(t,i,l,s){var p=l-i;return(t/=s/2)<1?p/2*t*t*t+i:p/2*((t-=2)*t*t+2)+i},easeInQuart:function(t,i,l,s){return(l-i)*(t/=s)*t*t*t+i},easeOutQuart:function(t,i,l,s){return-(l-i)*((t=t/s-1)*t*t*t-1)+i},easeInOutQuart:function(t,i,l,s){var p=l-i;return(t/=s/2)<1?p/2*t*t*t*t+i:-p/2*((t-=2)*t*t*t-2)+i},easeInQuint:function(t,i,l,s){return(l-i)*(t/=s)*t*t*t*t+i},easeOutQuint:function(t,i,l,s){return(l-i)*((t=t/s-1)*t*t*t*t+1)+i},easeInOutQuint:function(t,i,l,s){var p=l-i;return(t/=s/2)<1?p/2*t*t*t*t*t+i:p/2*((t-=2)*t*t*t*t+2)+i},easeInSine:function(t,i,l,s){var p=l-i;return-p*Math.cos(t/s*(Math.PI/2))+p+i},easeOutSine:function(t,i,l,s){return(l-i)*Math.sin(t/s*(Math.PI/2))+i},easeInOutSine:function(t,i,l,s){return-(l-i)/2*(Math.cos(Math.PI*t/s)-1)+i},easeInExpo:function(t,i,l,s){return t==0?i:(l-i)*Math.pow(2,10*(t/s-1))+i},easeOutExpo:function(t,i,l,s){var p=l-i;return t==s?i+p:p*(1-Math.pow(2,-10*t/s))+i},easeInOutExpo:function(t,i,l,s){var p=l-i;return t===0?i:t===s?i+p:(t/=s/2)<1?p/2*Math.pow(2,10*(t-1))+i:p/2*(2-Math.pow(2,-10*--t))+i},easeInCirc:function(t,i,l,s){return-(l-i)*(Math.sqrt(1-(t/=s)*t)-1)+i},easeOutCirc:function(t,i,l,s){return(l-i)*Math.sqrt(1-(t=t/s-1)*t)+i},easeInOutCirc:function(t,i,l,s){var p=l-i;return(t/=s/2)<1?-p/2*(Math.sqrt(1-t*t)-1)+i:p/2*(Math.sqrt(1-(t-=2)*t)+1)+i},easeInElastic:function(t,i,l,s){var p,f,y,g=l-i;return y=1.70158,t===0?i:(t/=s)==1?i+g:((f=0)||(f=.3*s),(p=g)<Math.abs(g)?(p=g,y=f/4):y=f/(2*Math.PI)*Math.asin(g/p),-p*Math.pow(2,10*(t-=1))*Math.sin((t*s-y)*(2*Math.PI)/f)+i)},easeOutElastic:function(t,i,l,s){var p,f,y,g=l-i;return y=1.70158,t===0?i:(t/=s)==1?i+g:((f=0)||(f=.3*s),(p=g)<Math.abs(g)?(p=g,y=f/4):y=f/(2*Math.PI)*Math.asin(g/p),p*Math.pow(2,-10*t)*Math.sin((t*s-y)*(2*Math.PI)/f)+g+i)},easeInOutElastic:function(t,i,l,s){var p,f,y,g=l-i;return y=1.70158,t===0?i:(t/=s/2)==2?i+g:((f=0)||(f=s*.44999999999999996),(p=g)<Math.abs(g)?(p=g,y=f/4):y=f/(2*Math.PI)*Math.asin(g/p),t<1?p*Math.pow(2,10*(t-=1))*Math.sin((t*s-y)*(2*Math.PI)/f)*-.5+i:p*Math.pow(2,-10*(t-=1))*Math.sin((t*s-y)*(2*Math.PI)/f)*.5+g+i)},easeInBack:function(t,i,l,s,p){return p===void 0&&(p=1.70158),(l-i)*(t/=s)*t*((p+1)*t-p)+i},easeOutBack:function(t,i,l,s,p){return p===void 0&&(p=1.70158),(l-i)*((t=t/s-1)*t*((p+1)*t+p)+1)+i},easeInOutBack:function(t,i,l,s,p){var f=l-i;return p===void 0&&(p=1.70158),(t/=s/2)<1?f/2*(t*t*((1+(p*=1.525))*t-p))+i:f/2*((t-=2)*t*((1+(p*=1.525))*t+p)+2)+i},easeInBounce:function(t,i,l,s){var p=l-i;return p-c.easeOutBounce(s-t,0,p,s)+i},easeOutBounce:function(t,i,l,s){var p=l-i;return(t/=s)<.36363636363636365?p*(7.5625*t*t)+i:t<.7272727272727273?p*(7.5625*(t-=.5454545454545454)*t+.75)+i:t<.9090909090909091?p*(7.5625*(t-=.8181818181818182)*t+.9375)+i:p*(7.5625*(t-=.9545454545454546)*t+.984375)+i},easeInOutBounce:function(t,i,l,s){var p=l-i;return t<s/2?.5*c.easeInBounce(2*t,0,p,s)+i:.5*c.easeOutBounce(2*t-s,0,p,s)+.5*p+i}};e.exports=c},function(e,n,r){e.exports=r(3)},function(e,n,r){"use strict";r.r(n),r.d(n,"ReactConfetti",function(){return fi});var c,t,i=r(0),l=r.n(i),s=r(1),p=r.n(s);function f(a,u){return a+Math.random()*(u-a)}function y(a,u){for(var _=0;_<u.length;_++){var d=u[_];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}function g(a,u,_){return u in a?Object.defineProperty(a,u,{value:_,enumerable:!0,configurable:!0,writable:!0}):a[u]=_,a}(function(a){a[a.Circle=0]="Circle",a[a.Square=1]="Square",a[a.Strip=2]="Strip"})(c||(c={})),function(a){a[a.Positive=1]="Positive",a[a.Negative=-1]="Negative"}(t||(t={}));var M=function(){function a(v,w,m,S){(function(Vt,nt){if(!(Vt instanceof nt))throw new TypeError("Cannot call a class as a function")})(this,a),g(this,"context",void 0),g(this,"radius",void 0),g(this,"x",void 0),g(this,"y",void 0),g(this,"w",void 0),g(this,"h",void 0),g(this,"vx",void 0),g(this,"vy",void 0),g(this,"shape",void 0),g(this,"angle",void 0),g(this,"angularSpin",void 0),g(this,"color",void 0),g(this,"rotateY",void 0),g(this,"rotationDirection",void 0),g(this,"getOptions",void 0),this.getOptions=w;var O,P,I=this.getOptions(),V=I.colors,B=I.initialVelocityX,tt=I.initialVelocityY;this.context=v,this.x=m,this.y=S,this.w=f(5,20),this.h=f(5,20),this.radius=f(5,10),this.vx=typeof B=="number"?f(-B,B):f(B.min,B.max),this.vy=typeof tt=="number"?f(-tt,0):f(tt.min,tt.max),this.shape=(O=0,P=2,Math.floor(O+Math.random()*(P-O+1))),this.angle=f(0,360)*Math.PI/180,this.angularSpin=f(-.2,.2),this.color=V[Math.floor(Math.random()*V.length)],this.rotateY=f(0,1),this.rotationDirection=f(0,1)?t.Positive:t.Negative}var u,_,d;return u=a,(_=[{key:"update",value:function(){var v=this.getOptions(),w=v.gravity,m=v.wind,S=v.friction,O=v.opacity,P=v.drawShape;this.x+=this.vx,this.y+=this.vy,this.vy+=w,this.vx+=m,this.vx*=S,this.vy*=S,this.rotateY>=1&&this.rotationDirection===t.Positive?this.rotationDirection=t.Negative:this.rotateY<=-1&&this.rotationDirection===t.Negative&&(this.rotationDirection=t.Positive);var I=.1*this.rotationDirection;if(this.rotateY+=I,this.angle+=this.angularSpin,this.context.save(),this.context.translate(this.x,this.y),this.context.rotate(this.angle),this.context.scale(1,this.rotateY),this.context.rotate(this.angle),this.context.beginPath(),this.context.fillStyle=this.color,this.context.strokeStyle=this.color,this.context.globalAlpha=O,this.context.lineCap="round",this.context.lineWidth=2,P&&typeof P=="function")P.call(this,this.context);else switch(this.shape){case c.Circle:this.context.beginPath(),this.context.arc(0,0,this.radius,0,2*Math.PI),this.context.fill();break;case c.Square:this.context.fillRect(-this.w/2,-this.h/2,this.w,this.h);break;case c.Strip:this.context.fillRect(-this.w/6,-this.h/2,this.w/3,this.h)}this.context.closePath(),this.context.restore()}}])&&y(u.prototype,_),d&&y(u,d),a}();function R(a,u,_){return u in a?Object.defineProperty(a,u,{value:_,enumerable:!0,configurable:!0,writable:!0}):a[u]=_,a}var $=function a(u,_){var d=this;(function(w,m){if(!(w instanceof m))throw new TypeError("Cannot call a class as a function")})(this,a),R(this,"canvas",void 0),R(this,"context",void 0),R(this,"getOptions",void 0),R(this,"x",0),R(this,"y",0),R(this,"w",0),R(this,"h",0),R(this,"lastNumberOfPieces",0),R(this,"tweenInitTime",Date.now()),R(this,"particles",[]),R(this,"particlesGenerated",0),R(this,"removeParticleAt",function(w){d.particles.splice(w,1)}),R(this,"getParticle",function(){var w=f(d.x,d.w+d.x),m=f(d.y,d.h+d.y);return new M(d.context,d.getOptions,w,m)}),R(this,"animate",function(){var w=d.canvas,m=d.context,S=d.particlesGenerated,O=d.lastNumberOfPieces,P=d.getOptions(),I=P.run,V=P.recycle,B=P.numberOfPieces,tt=P.debug,Vt=P.tweenFunction,nt=P.tweenDuration;if(!I)return!1;var qt=d.particles.length,at=V?qt:S,zt=Date.now();if(at<B){O!==B&&(d.tweenInitTime=zt,d.lastNumberOfPieces=B);for(var hi=d.tweenInitTime,fe=Vt(zt-hi>nt?nt:Math.max(0,zt-hi),at,B,nt),mi=Math.round(fe-at),gi=0;gi<mi;gi++)d.particles.push(d.getParticle());d.particlesGenerated+=mi}return tt&&(m.font="12px sans-serif",m.fillStyle="#333",m.textAlign="right",m.fillText("Particles: ".concat(qt),w.width-10,w.height-20)),d.particles.forEach(function(rt,bi){rt.update(),(rt.y>w.height||rt.y<-100||rt.x>w.width+100||rt.x<-100)&&(V&&at<=B?d.particles[bi]=d.getParticle():d.removeParticleAt(bi))}),qt>0||at<B}),this.canvas=u;var v=this.canvas.getContext("2d");if(!v)throw new Error("Could not get canvas context");this.context=v,this.getOptions=_};function W(a,u){var _=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);u&&(d=d.filter(function(v){return Object.getOwnPropertyDescriptor(a,v).enumerable})),_.push.apply(_,d)}return _}function q(a){for(var u=1;u<arguments.length;u++){var _=arguments[u]!=null?arguments[u]:{};u%2?W(Object(_),!0).forEach(function(d){A(a,d,_[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(_)):W(Object(_)).forEach(function(d){Object.defineProperty(a,d,Object.getOwnPropertyDescriptor(_,d))})}return a}function yt(a,u){for(var _=0;_<u.length;_++){var d=u[_];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}function A(a,u,_){return u in a?Object.defineProperty(a,u,{value:_,enumerable:!0,configurable:!0,writable:!0}):a[u]=_,a}var et={width:typeof window<"u"?window.innerWidth:300,height:typeof window<"u"?window.innerHeight:200,numberOfPieces:200,friction:.99,wind:0,gravity:.1,initialVelocityX:4,initialVelocityY:10,colors:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722","#795548"],opacity:1,debug:!1,tweenFunction:p.a.easeInOutQuad,tweenDuration:5e3,recycle:!0,run:!0},Bt=function(){function a(v,w){var m=this;(function(O,P){if(!(O instanceof P))throw new TypeError("Cannot call a class as a function")})(this,a),A(this,"canvas",void 0),A(this,"context",void 0),A(this,"_options",void 0),A(this,"generator",void 0),A(this,"rafId",void 0),A(this,"setOptionsWithDefaults",function(O){var P={confettiSource:{x:0,y:0,w:m.canvas.width,h:0}};m._options=q(q(q({},P),et),O),Object.assign(m,O.confettiSource)}),A(this,"update",function(){var O=m.options,P=O.run,I=O.onConfettiComplete,V=m.canvas,B=m.context;P&&(B.fillStyle="white",B.clearRect(0,0,V.width,V.height)),m.generator.animate()?m.rafId=requestAnimationFrame(m.update):(I&&typeof I=="function"&&m.generator.particlesGenerated>0&&I.call(m,m),m._options.run=!1)}),A(this,"reset",function(){m.generator&&m.generator.particlesGenerated>0&&(m.generator.particlesGenerated=0,m.generator.particles=[],m.generator.lastNumberOfPieces=0)}),A(this,"stop",function(){m.options={run:!1},m.rafId&&(cancelAnimationFrame(m.rafId),m.rafId=void 0)}),this.canvas=v;var S=this.canvas.getContext("2d");if(!S)throw new Error("Could not get canvas context");this.context=S,this.generator=new $(this.canvas,function(){return m.options}),this.options=w,this.update()}var u,_,d;return u=a,(_=[{key:"options",get:function(){return this._options},set:function(v){var w=this._options&&this._options.run,m=this._options&&this._options.recycle;this.setOptionsWithDefaults(v),this.generator&&(Object.assign(this.generator,this.options.confettiSource),typeof v.recycle=="boolean"&&v.recycle&&m===!1&&(this.generator.lastNumberOfPieces=this.generator.particles.length)),typeof v.run=="boolean"&&v.run&&w===!1&&this.update()}}])&&yt(u.prototype,_),d&&yt(u,d),a}();function At(a){return function(u){if(Array.isArray(u))return J(u)}(a)||function(u){if(typeof Symbol<"u"&&Symbol.iterator in Object(u))return Array.from(u)}(a)||Y(a)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function z(a){return(z=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(a)}function K(){return(K=Object.assign||function(a){for(var u=1;u<arguments.length;u++){var _=arguments[u];for(var d in _)Object.prototype.hasOwnProperty.call(_,d)&&(a[d]=_[d])}return a}).apply(this,arguments)}function wt(a,u){var _=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);u&&(d=d.filter(function(v){return Object.getOwnPropertyDescriptor(a,v).enumerable})),_.push.apply(_,d)}return _}function vt(a){for(var u=1;u<arguments.length;u++){var _=arguments[u]!=null?arguments[u]:{};u%2?wt(Object(_),!0).forEach(function(d){ot(a,d,_[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(_)):wt(Object(_)).forEach(function(d){Object.defineProperty(a,d,Object.getOwnPropertyDescriptor(_,d))})}return a}function kt(a,u){return function(_){if(Array.isArray(_))return _}(a)||function(_,d){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(_)))){var v=[],w=!0,m=!1,S=void 0;try{for(var O,P=_[Symbol.iterator]();!(w=(O=P.next()).done)&&(v.push(O.value),!d||v.length!==d);w=!0);}catch(I){m=!0,S=I}finally{try{w||P.return==null||P.return()}finally{if(m)throw S}}return v}}(a,u)||Y(a,u)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Y(a,u){if(a){if(typeof a=="string")return J(a,u);var _=Object.prototype.toString.call(a).slice(8,-1);return _==="Object"&&a.constructor&&(_=a.constructor.name),_==="Map"||_==="Set"?Array.from(a):_==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_)?J(a,u):void 0}}function J(a,u){(u==null||u>a.length)&&(u=a.length);for(var _=0,d=new Array(u);_<u;_++)d[_]=a[_];return d}function xt(a,u){if(!(a instanceof u))throw new TypeError("Cannot call a class as a function")}function H(a,u){for(var _=0;_<u.length;_++){var d=u[_];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}function Z(a,u){return(Z=Object.setPrototypeOf||function(_,d){return _.__proto__=d,_})(a,u)}function Mt(a){var u=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var _,d=jt(a);if(u){var v=jt(this).constructor;_=Reflect.construct(d,arguments,v)}else _=d.apply(this,arguments);return Ft(this,_)}}function Ft(a,u){return!u||z(u)!=="object"&&typeof u!="function"?Lt(a):u}function Lt(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function jt(a){return(jt=Object.setPrototypeOf?Object.getPrototypeOf:function(u){return u.__proto__||Object.getPrototypeOf(u)})(a)}function ot(a,u,_){return u in a?Object.defineProperty(a,u,{value:_,enumerable:!0,configurable:!0,writable:!0}):a[u]=_,a}var _e=l.a.createRef(),$t=function(a){(function(m,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function");m.prototype=Object.create(S&&S.prototype,{constructor:{value:m,writable:!0,configurable:!0}}),S&&Z(m,S)})(w,a);var u,_,d,v=Mt(w);function w(m){var S;xt(this,w);for(var O=arguments.length,P=new Array(O>1?O-1:0),I=1;I<O;I++)P[I-1]=arguments[I];return ot(Lt(S=v.call.apply(v,[this,m].concat(P))),"canvas",l.a.createRef()),ot(Lt(S),"confetti",void 0),S.canvas=m.canvasRef||_e,S}return u=w,(_=[{key:"componentDidMount",value:function(){if(this.canvas.current){var m=Wt(this.props)[0];this.confetti=new Bt(this.canvas.current,m)}}},{key:"componentDidUpdate",value:function(){var m=Wt(this.props)[0];this.confetti&&(this.confetti.options=m)}},{key:"componentWillUnmount",value:function(){this.confetti&&this.confetti.stop(),this.confetti=void 0}},{key:"render",value:function(){var m=kt(Wt(this.props),2),S=m[0],O=m[1],P=vt({zIndex:2,position:"absolute",pointerEvents:"none",top:0,left:0,bottom:0,right:0},O.style);return l.a.createElement("canvas",K({width:S.width,height:S.height,ref:this.canvas},O,{style:P}))}}])&&H(u.prototype,_),d&&H(u,d),w}(i.Component);function Wt(a){var u={},_={},d=[].concat(At(Object.keys(et)),["confettiSource","drawShape","onConfettiComplete"]),v=["canvasRef"];for(var w in a){var m=a[w];d.includes(w)?u[w]=m:v.includes(w)?v[w]=m:_[w]=m}return[u,_,{}]}ot($t,"defaultProps",vt({},et)),ot($t,"displayName","ReactConfetti");var fi=l.a.forwardRef(function(a,u){return l.a.createElement($t,K({canvasRef:u},a))});n.default=fi}]).default})});Yt();function Jt(o=0,e=0,n="disable_price_run"){return N(n)&&e>0&&o<=e?(U(`***price run is disabled for items <= $${Math.round(e)/100}***`),!0):!1}var Ue={productPage:"productPage",cartPage:"cartPage",checkoutPage:"checkoutPage"};var _i=b(Pt());var ce=b(L()),ue=b(me()),h=b(Pt());be();ye();var Ot=b(L()),Bi=b(we());var ct=o=>{let{containerNamespace:e,children:n}=o,r=st.get(["additionalContentNamespace",e])();if(!r)return null;let c=".__wikibuy",t=(0,Ot.useRef)();return t.current||(t.current=document.createElement("div"),r.querySelector(c).appendChild(t.current)),(0,Ot.useEffect)(()=>()=>r.querySelector(c).removeChild(t.current),[]),Bi.default.createPortal(n,t.current)};var Fi=b(L()),Li=b(Pt());function Zt(o){return xi("showFollow",o)}Yt();function G(){return N("retail_pc_blocks")}async function Ai(o){if(G())try{let e=Ci(o);if(e)return await Oi(e)}catch(e){U("getBlocksContent error",e)}}var Mi=b(L());var Q=b(k()),ti=class extends Mi.Component{render(){return(0,Q.jsx)("div",{className:`annotation-tooltip-component ${this.props.classes||""}`,onClick:e=>{e.stopPropagation()},children:(0,Q.jsxs)("div",{className:"annotation-tooltip-container",children:[(0,Q.jsxs)("div",{className:"header",children:[(0,Q.jsx)(lt,{}),(0,Q.jsx)(Si,{onClick:this.props.onCloseTooltip.bind(this,"x")})]}),this.props.children]})})}},ut=ti;var Tt=b(k());function Rt(o){return o.content?(0,Tt.jsxs)("div",{className:o.classes,onClick:e=>e.stopPropagation(),children:[(0,Tt.jsx)(Ti,{client:Ri.DESKTOP_WEB,config:{rootEl:"div",logLevel:null},content:o.content,data:o.data,onEvent:e=>{let n=e?.eventName;if(n==="retail_pc_dismiss_popover")o.onCloseTooltip?.();else if(n==="retail_pc_visit_merchant"){let c=o.data?.results?.find(t=>t.match.id===e?.data?.propsData?.resultid);c&&o.visitMerchant?.(c.match)}else n==="retail_pc_view_c1_pdp"&&o.viewProductPage?.()}}),o.children]}):null}var C=b(k()),ke={"amazon.com":"Amazon","homedepot.com":"Home Depot","bestbuy.com":"Best Buy","target.com":"Target"};function xe(o){if(!o)return{};let e=o.product?.vendor,n=o.product?.vendorName||ke[e]||e;o.meta?.paymentsSupport&&(n="Capital One Shopping"),n=n==="Amazon"&&!o.origin?"Amz. Marketplace":n;let r={},c=o.pricing?.coupons?.length?"use code":"",t=o.pricing?.reward||{};c&&!o.meta?.paymentsSupport?(r.isCoupon=!0,r.value=c):t.amount&&t.type==="percentage"?(r.isReward=!0,r.type=t.type,r.value=t.amount/100):t.amount&&(r.isReward=!0,r.value=j(t.amount,{currency:t.amountCurrency||t.currency}));let i=o.meta?.verificationClassifierOutput?.verified,l=o.details?.estimatedDeliveryMinDays,s=o.details?.estimatedDeliveryMaxDays,p=l===s?s?`${s} days`:"":`${l} - ${s} days`;return{match:o,seller:n,delivery:p,specialOffer:r,total:j(o.pricing?.afterRewardTotal||o.pricing?.total),isSellerVerified:i}}var it=class extends Fi.Component{componentDidMount(){E("page",`offersListAnnotationTooltip${this.props.deweyPC?"_runv4":""}`,{view:this.props.view,type:"notificationHover",searchIndex:this.props.searchIndex})}render(){let e=Li.default.get(this.props,"showViewAllOffers",!0)&&this.props.wbid,n=this.props?.filteredResults.map(xe),r=n.find(i=>i.specialOffer.isCoupon||i.specialOffer.isReward),c=N("notif_rounded_border")?"rounded-btn":"",t=!this.props.fullRunComplete;return G()?(0,C.jsx)(Rt,{classes:"retail-pc-savings-list-blocks",content:this.props.blocksContent,data:{results:n,findingMoreOffers:t,showViewAllOffers:e},onCloseTooltip:this.props.hideSavingsDetails,visitMerchant:this.visitMerchant.bind(this),viewProductPage:()=>this.props.viewProductPage("view")}):(0,C.jsx)(ut,{classes:`result-table-tooltip ${(this.props.originVendor||"").replace(".com","")}`,onCloseTooltip:()=>this.props.hideSavingsDetails(),children:(0,C.jsxs)("div",{className:`${r?"special-offers":""} result-list`,children:[(0,C.jsxs)("div",{className:"list-header",children:[(0,C.jsx)("h3",{className:"seller",children:"Seller"}),(0,C.jsx)("h3",{className:"delivery",children:"Delivery"}),(0,C.jsx)("h3",{className:"offer",children:"Special Offer"}),(0,C.jsx)("h3",{className:"total",children:"Est. Total"})]}),n.map(i=>{let{match:l,seller:s,delivery:p,specialOffer:f,total:y,isSellerVerified:g}=i;return(0,C.jsxs)("div",{className:"result-list-item",onClick:M=>{M.stopPropagation(),this.visitMerchant(l)},children:[(0,C.jsx)("h3",{className:`seller ${g?"verified":""}`,children:s}),(0,C.jsx)("h3",{className:"delivery",children:(0,C.jsx)("span",{children:p})}),(0,C.jsx)("h3",{className:"offer",children:f.isCoupon?(0,C.jsx)("span",{className:"icon-coupon coupon",children:f.value}):f.isReward&&f.type==="percentage"?(0,C.jsxs)("span",{className:"palmetto",children:[`+${f.value}% `," ",(0,C.jsx)("span",{className:"reward-break",children:"back"})]}):f.isReward?(0,C.jsxs)("span",{className:"palmetto",children:[`+${f.value}`," ",(0,C.jsx)("span",{className:"reward-break",children:"in Rewards"})]}):null}),(0,C.jsx)("h3",{className:`total primary-btn-large ${c}`,children:y})]},l.id)}),t?(0,C.jsx)("h5",{className:"finding-more bold",children:"Finding more offers"}):null,e?(0,C.jsxs)("span",{children:[(0,C.jsx)("div",{className:"rule"}),(0,C.jsx)("h5",{style:{textAlign:"center",marginTop:"10px"},children:(0,C.jsx)("span",{className:"primary-link",onClick:i=>{i.preventDefault(),this.props.viewProductPage("view")},children:"View all offers"})})]}):null]})})}visitMerchant(e){Zt({details:e,run:this.props.run,productData:e.product}),this.props.visitMerchant(e,!0)}};var ji=b(L());var F=b(k()),$i=({data:o,onCloseTooltip:e})=>{let{ctaText:n,deviceType:r,image:c,link:t,reward:i,subheaderText:l}=o,s=()=>{E("track","wirelessDevicePcExperience",{view:name,label:n,deviceType:r}),window.open(t,"_blank")},p=()=>{e&&(E("page","wirelessTooltip",{type:"notificationDismiss",label:r}),e())};return(0,ji.useEffect)(()=>{E("page","wirelessTooltip",{type:"notificationHover",label:r})},[]),(0,F.jsx)(ut,{onCloseTooltip:p,classes:"wireless-pc-annotation",children:(0,F.jsxs)("div",{className:"wireless-pc-annotation-main align-center",children:[(0,F.jsxs)("p",{children:[(0,F.jsxs)("div",{className:"wireless-header",children:[(0,F.jsx)("span",{className:"favorable",children:i})," in Rewards"]}),l]}),(0,F.jsx)("p",{children:(0,F.jsx)("img",{src:c,alt:"Wireless Price Comparison"})}),(0,F.jsx)("span",{className:"text"}),(0,F.jsx)("button",{className:"primary-btn-large full-button",onClick:s,children:n})]})})};var Wi=o=>St("getCart",o);var ii=o=>St("getEstimate",o);var ei=b(Pt());Yt();function pt(o){let e=ei.default.get(o,"savingsWithRewards")||ei.default.get(o,"savings")||0;return Math.max(0,e)}function Pe(o,e){if(N("disable_pc_savings_alert")){U("PC savings alert is disabled.");return}E("track","priceRunSavings",{quoteId:o,pageType:e})}function Vi(o,e,n,r,c){if(o&&!e.has(o)&&n&&r){e.add(o);try{Pe(o,c)}catch(i){U("*** failure to send savings alert ***",i)}}return e}var gt=b(L()),bt=b(ve());var qi=b(L());ge();function oi(){let o=document.querySelector("#honeyContainer"),e=document.querySelector("#piggyWrapper");if(o){let n=o.shadowRoot.querySelector("#honey-shadow").style;if(o.shadowRoot.querySelector("#cornerContent")&&(n.opacity==="1"||n.visibility==="visible"))return{updated:!0,offset:"455px"}}return e&&(e.offsetWidth>0||e.offsetHeight>0)?{updated:!0,offset:"340px"}:document.querySelector(".ebates-notification")||document.querySelector(".ebates-hover.ebates-hover-top")?{updated:!0,offset:"420px"}:{updated:!1,offset:"0"}}function ni(o,e=200,n={}){let{maxBackoff:r=7e3,maxTries:c=25}=n,t=async()=>{let i=1;for(;e<r;){let l=oi();l.updated&&o(l.offset),await yi(e),i>c&&(e*=1.5),i+=1}};(0,qi.useEffect)(()=>{t()},[])}var oe=b(L()),Dt=b(zi());var ri={transparentPricingVariantA:"transparentPricingVariantA",transparentPricingVariantB:"transparentPricingVariantB",transparentPricingVariantC:"transparentPricingVariantC"},Yi={...ri,standardPricing:"standardPricing"};var Hi=b(k()),Se=({onClick:o})=>(0,Hi.jsx)("div",{className:"close icon-x",onClick:o}),si=Se;var Gi=b(k()),Ce=({savings:o,children:e})=>(0,Gi.jsx)("p",{className:`text-2xl font-bold leading-9 ${o?"text-favorable":""}`,children:e}),Ui=Ce;var It=b(k()),Oe=({children:o})=>(0,It.jsx)("div",{style:{textDecoration:"line-through",textDecorationColor:"red",marginTop:"-5px"},children:o}),Re=({children:o,slashed:e})=>(0,It.jsx)(Oe,{children:(0,It.jsx)("p",{className:"leading-6 font-bold text-neutralsecondary",children:o})}),Qi=Re;var _t=b(k()),Te=({deal:o})=>(0,_t.jsxs)("div",{id:"dealPricing",style:{flexBasis:"50px"},children:[(0,_t.jsx)(Ui,{savings:o.rawSavings>0,children:o.dealPrice}),o.rawSavings>0?(0,_t.jsx)(Qi,{slashed:!0,children:o.listPrice}):null]}),Xi=Te;var Ki=b(k()),Ie=({flexBasis:o,children:e,className:n=""})=>(0,Ki.jsx)("p",{className:`fine-print-text text-[8px] leading-[12px] font-bold ${n}`,style:{color:"rgb(103, 103, 103)",flexBasis:`${o}`},children:e}),ft=Ie;var Ji=b(k()),Ne=({children:o})=>(0,Ji.jsx)("div",{className:"header",children:o}),li=Ne;var ci=b(k()),De=({src:o,width:e,height:n,margin:r,alt:c})=>(0,ci.jsx)("div",{style:{width:e,height:n,margin:r},children:(0,ci.jsx)("img",{src:o,style:{width:"auto",height:"auto",fontSize:"8px",maxWidth:e,maxHeight:n},alt:c})}),Zi=De;var ie=b(k()),Ee=({rawSavings:o,formattedSavings:e,onClick:n})=>{let r=o&&o>0?`Save ${e}`:"View Offer",c=N("notif_rounded_border")?"rounded-btn":"";return(0,ie.jsx)(Ct,{onClick:n,className:`w-full text-base h-[40px] ${c} green-btn`,children:r})},te=Ee;function Nt(o,e=""){let n=(o||e.replace(".com","")).replace(/[\u2019\u0027]/g,"'");return n.endsWith("'s")?n:n.endsWith("s")?`${n}'`:n?`${n}'s`:""}var D=b(k()),Be=(o,e)=>{let n="Amazing Deal",r="Great Deal",c="Good Deal",t=[{badgeText:n,badgeColor:"favorable"},{badgeText:r,badgeColor:"interaction"},{badgeText:c,badgeColor:"secondary"}],i=j(e),l=(Y,J,xt)=>{let H=[];Y>0&&H.push(`Includes ${j(Y)} Shipping + Handling`),J>0&&H.push(`after ${j(J)} in Capital One Shopping Rewards`),xt>0&&H.push(`Arrives in ${xt} days`);let Z="";return H.map((Mt,Ft)=>{Ft!=0&&(Z+=", "),Z+=Mt}),Z},{id:s,product:p,pricing:f,shippingDays:y,savingsPercent:g=0,savingsWithRewardsPercent:M=0}=o,{image:R,vendor:$,vendorName:W,title:q,condition:yt}=p,{afterRewardTotal:A,total:et,shipping:Bt,loyaltyAmount:At}=f,z=Math.max(M,g),K=z>=.2?n:z>.1?r:z>0&&z<=.1?c:null,{badgeText:wt=null,badgeColor:vt=null}=K&&t.find(Y=>Y.badgeText===K)||{},kt=pt(o);return{id:s,vendorName:W,vendorDomain:$,productImageAlt:q,productImage:R,dealPrice:j(A||et),finePrint:l(Bt,At,y),listPrice:i,rawSavings:kt,formattedSavings:j(kt).replace("-",""),itemCondition:yt||"Brand New",badgeText:wt,badgeColor:vt,vendorPossessiveForm:Nt(W,$)}},ht=o=>j(o,{removeCents:!1}),Ae={transparentPricingVariantA:({savings:o})=>(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)("div",{className:"text-base font-black text-start text-black",children:"Better Results Available"}),(0,D.jsxs)("div",{className:"text-sm font-bold text-start text-green-500",children:["Save up to ",ht(o)," with Rewards and savings"]})]}),transparentPricingVariantB:({savings:o})=>(0,D.jsx)(D.Fragment,{children:(0,D.jsxs)("div",{className:"text-base font-bold text-start text-green-500",children:["Save ",ht(o)," with Rewards and savings"]})}),transparentPricingVariantC:({savings:o,loyaltyAmount:e,total:n,vendor:r})=>(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)("div",{className:"text-base font-bold text-start text-green-500",children:["Save ",ht(o)," with Rewards and savings"]}),(0,D.jsxs)("div",{className:"text-sm text-start text-gray-400",children:["Pay ",ht(n),e?(0,D.jsxs)("span",{children:[" ","and get"," ",(0,D.jsxs)("span",{className:"font-black",children:[ht(e)," back"]})]}):null," ","at ",r]})]})},Me=(o,e)=>{let n={savings:pt(o),loyaltyAmount:o.pricing.loyaltyAmount||0,total:o.pricing.total,vendor:o.product.vendorName||o.product.vendor},r=Ae[e];return{isTransparentPricing:!0,SavingsInfo:()=>(0,D.jsx)(r,{...n})}},Fe=(o,e,n)=>{if(Object.values(ri).includes(n))return Me(o,n);let c=Be(o,e.originResult.pricing.total);return e?.savingsPreferredImage&&(c.productImage=e.savingsPreferredImage),c},ee=Fe;var x=b(k()),Le=({vendorName:o,vendorDomain:e,productImageAlt:n,productImage:r,itemCondition:c,dealPrice:t,finePrint:i,listPrice:l,onCloseTooltip:s,viewProductPage:p,rawSavings:f,formattedSavings:y,showFullShoppingLogo:g=!1})=>{let M=N("notif_rounded_border")?"rounded-notification":"";return(0,x.jsxs)("div",{className:`annotation-tooltip-component creatives ${M}`,onClick:R=>{R.stopPropagation()},children:[(0,x.jsxs)(li,{children:[(0,x.jsx)(lt,{showFullLogo:g}),(0,x.jsx)(si,{onClick:s})]}),(0,x.jsx)("div",{className:"annotation-tooltip-container",children:(0,x.jsxs)("div",{className:"annotation-tooltip-body min-w-[170px]",children:[(0,x.jsx)("p",{className:"leading-6 font-bold",children:"Savings Alert!"}),(0,x.jsx)(Zi,{alt:n,src:r,width:"96px",height:"96px",margin:"auto"}),(0,x.jsxs)(ft,{className:"item-condition",children:["Item Condition: ",c]}),(0,x.jsxs)(ft,{children:[Nt(o,e)," price is..."]}),(0,x.jsx)(Xi,{deal:{rawSavings:f,dealPrice:t,listPrice:l}}),(0,x.jsx)(ft,{children:i}),(0,x.jsx)(te,{rawSavings:f,formattedSavings:y,onClick:()=>p()}),(0,x.jsx)(ft,{className:"exclusions",children:"Exclusions may apply"})]})}),(0,x.jsx)(Dt.default,{width:300,height:600,gravity:.08,wind:.01,numberOfPieces:400,opacity:.7,recycle:!1,style:{top:"-5px"}})]})},je=({onCloseTooltip:o,viewProductPage:e,SavingsInfo:n})=>{let r=N("notif_rounded_border");return(0,x.jsxs)("div",{className:`annotation-tooltip-component creatives ${r?"rounded-notification":""} price-transparent`,onClick:c=>{c.stopPropagation()},children:[(0,x.jsxs)(li,{children:[(0,x.jsx)(lt,{showFullLogo:!0,marginLeft:14}),(0,x.jsx)(si,{onClick:o})]}),(0,x.jsx)("div",{className:"annotation-tooltip-container",children:(0,x.jsxs)("div",{className:"annotation-tooltip-body min-w-[300px] text-gray-600",children:[(0,x.jsx)(n,{}),(0,x.jsx)(Ct,{onClick:()=>e(),className:`mt-2 w-[185px] text-base h-[40px] ${r?"rounded-btn":""} green-btn`,children:"Save Now"}),(0,x.jsx)("div",{className:"text-xs mt-1 text-gray-300",children:"Exclusions may apply"})]})}),(0,x.jsx)(Dt.default,{width:600,height:600,gravity:.08,wind:.01,numberOfPieces:400,opacity:.7,recycle:!1,style:{top:"-5px"}})]})},$e=({bestResult:o,run:e,onCloseTooltip:n,viewProductPage:r,notificationLabel:c="creativeTooltip_bau",blocksContent:t,bestDealDisplayType:i=Yi.standardPricing,showFullShoppingLogoBAU:l=!1})=>{(0,oe.useEffect)(()=>{E("page",c,{view:"quoteCompleteNotification",type:"notificationHover"})},[c]);let s=ee(o,e,i),p=()=>r(c);return G()?(0,x.jsx)(Rt,{classes:"retail-pc-best-deal-blocks",content:t,data:s,onCloseTooltip:n,viewProductPage:p,children:(0,x.jsx)(Dt.default,{width:600,height:600,gravity:.08,wind:.01,numberOfPieces:400,opacity:.7,recycle:!1,style:{top:"-5px"}})}):s.isTransparentPricing?(0,x.jsx)(je,{SavingsInfo:s.SavingsInfo,onCloseTooltip:n,viewProductPage:p}):(0,x.jsx)(Le,{...s,onCloseTooltip:n,viewProductPage:p,showFullShoppingLogo:l})},ne=$e;var ae=ne;var mt=b(k()),We=o=>{let[r,c]=(0,gt.useState)(!0),[t,i]=(0,gt.useState)("");return(0,gt.useEffect)(()=>{c(!1)},[]),ni(i),(0,mt.jsx)("div",{className:r?"disabled price-comparison-floating-notif":"price-comparison-floating-notif",style:{top:"16px",bottom:"auto",left:"auto",right:t||"230px"},children:(0,mt.jsx)(bt.Motion,{style:{opacity:(0,bt.spring)(r?0:1,{stiffness:180,damping:20}),y:(0,bt.spring)(r?-100:0,{stiffness:180,damping:20})},children:({opacity:l,y:s})=>(0,mt.jsx)("div",{className:"notification",style:{transform:`translate3d(0,${s}%,0)`,opacity:`${l}`},children:(0,mt.jsx)(ae,{...o,notificationLabel:"creativeTooltip_bau_floating_notif"})})})})},Et=We;var T=b(k()),X="product-estimate-annotation-addtl-content",ui="floatingRetailPC",re="retailPC",se="wirelessPC",le=o=>{let{saveButtonDomElem:e,children:n,showSavingsDetails:r,hideSavingsDetails:c}=o;if(!e)return null;let i=!!st.get(["additionalContentNamespace",X])().querySelector(`.__${X}.open-right`),{bottom:l,right:s,left:p}=e.getBoundingClientRect(),f=document.documentElement;return(0,T.jsx)("div",{className:"product-estimate-annotation",onMouseEnter:r,onMouseLeave:c,style:{position:"absolute",top:l+window.scrollY,...i?{right:f.clientWidth-s+window.scrollX,left:"auto"}:{right:"auto",left:p+window.scrollX},zIndex:2147483647,width:"min-content"},children:n})},pi=class extends ce.Component{constructor(...e){super(...e);let n=h.default.get(this.props.input,"deweyPC",!1);this.state={runId:null,deweyPC:n,isPDPEnabled:!n||N("universal_pc_canonical"),preventInitialShow:!1},this.runIdSavingsAlertSent=new Set}pollingRetriesCount=0;componentWillMount(){this.props.asin?ii({asin:h.default.get(this.props,"asin"),originMerchantId:h.default.get(this.props,"originMerchantId"),discount:h.default.get(this.props,"discount"),sellerId:h.default.get(this.props,"sellerId"),product:h.default.get(this.props,"product"),price:h.default.get(this.props,"price"),runCollectionId:h.default.get(this.props,"runCollectionId")}).then(e=>{let n=h.default.get(e,"pricing.updatedPricingRunId");this.setState({runId:n});let r;n!==h.default.get(e.cart,"items[0].id")?this.pollForComplete(n):r=!0,this.setState({error:e.error,cart:e.cart,pricing:e.pricing,product:e.product,fullRunComplete:r})}):this.props.input&&ii({product:h.default.get(this.props.input,"product"),gtin:h.default.get(this.props.input,"product.gtin"),unpricedResults:h.default.get(this.props.input,"unpricedResults"),meta:h.default.get(this.props.input,"meta"),deweyPC:this.state.deweyPC,buttonNotMountedInline:h.default.get(this.props,"buttonNotMountedInline",!1)}).then(e=>{let n=h.default.get(e,"pricing.updatedPricingRunId");this.setState({runId:n});let r;n!==h.default.get(e.cart,"items[0].id")?this.pollForComplete(n):r=!0,this.setState({error:e.error,cart:e.cart,pricing:e.pricing,product:e.product,fullRunComplete:r})})}async setBlocksNotification(){if(!G())return;let e=this.getSavingsData(this.state.cart?.items?.[0]);if(!this.state.blocksSavingsNotif&&e.savings&&!this.isFetchingBlockSavingsNotif){this.isFetchingBlockSavingsNotif=!0;try{let n=this.props.isFloatingNotif?"retail-pc-savings-popover":"retail-pc-savings-list",r=await Ai(n);r&&this.setState({blocksSavingsNotif:r})}finally{this.isFetchingBlockSavingsNotif=!1}}}componentDidMount(){this.setBlocksNotification(),E("page",`productEstimateAnnotation${this.state.deweyPC?"_runv4":""}`,{view:"productEstimateNotificaton",type:"annotation",searchIndex:this.props.searchIndex}),this.pollingRetriesCount=0,this.isInteractingWithTooltip=!1,this.isInteractingWithSaveButton=!1,this.saveButton&&(this.saveButton.addEventListener("mouseenter",this.onEnterSavingsButton.bind(this)),this.saveButton.addEventListener("mouseleave",this.onLeaveSavingsButton.bind(this)));try{document.querySelector("#web .reg").style.setProperty("overflow","visible","important")}catch{}this.props.simulateResize&&window.dispatchEvent(new Event("resize"))}componentDidUpdate(e,n){let r=n.cart?.items?.[0]?.id,c=this.state.cart?.items?.[0]?.id;c&&r!==c&&this.setBlocksNotification()}savingsButtonOnClick(e,n,r){return e&&n?this.viewWirelessDevicePage.bind(this,r):e?this.viewProductPage.bind(this,"savingsButton"):()=>{}}shouldShowSavingsDetails(e=!1,n=0){return this.props.isFloatingNotif&&!this.state.preventInitialShow&&e&&n>=1e3?!0:this.state.showSavingsDetails}getPDPData(){return this.state.deweyPC?h.default.get(this.state.cart,"items[0].universalPCCanonical"):this.state.product}getSavingsData(e={}){let n=h.default.get(e,"inputData.vendor"),r=0,c=[],t=h.default.filter(e.results,y=>{let g=h.default.get(y,"product.vendorName"),M=h.default.get(y,"origin");if(n!=="amazon.com"&&M)return!1;if(g==="eBay"&&!h.default.get(y,"meta.paymentsSupport")){if(r<3)return r++,c.push(g),!0}else if(h.default.get(y,"pricing.total")&&c.indexOf(g)===-1&&c.length<12)return h.default.get(y,"meta.paymentsSupport")||c.push(g),!0}),i=e.originResult||h.default.find(e.results,{origin:!0});if(i){h.default.set(i,"meta.verificationClassifierOutput.verified",!0),h.default.set(i,"origin",!0);let y=h.default.findIndex(t,g=>g.id===i.id);if(y>-1){let g=t[y].redirectUrl;t[y]={...i,redirectUrl:g}}}let l=e.result||h.default.find(e.results,{heroOffer:!0}),s=h.default.get(l,"pricing.afterRewardTotal")||h.default.get(this.bestResult,"pricing.total"),p;h.default.get(i,"pricing.total")&&s&&(p=pt(l));let f=h.default.get(l,"pricing.afterRewardTotal")<h.default.get(e,"originResult.pricing.total")?h.default.get(l,"pricing.reward.amount"):null;return{filteredResults:t,bestResult:l,reward:f,savings:p}}getPopoverType(e,n,r,c){let t=n&&r&&e,i=t&&this.props.isFloatingNotif,l=c&&e,s;return i?s=ui:t?s=re:l&&(s=se),s}render(){let e=this.state.cart||!!this.state.error,n=h.default.get(this.state,"cart.items[0]");e&&this.props.runCompleteCb&&this.props.runCompleteCb(),ki()&&this.state.runId&&E("page","disableNotifPcTest",{quoteId:this.state.runId,view:"productEstimateAnnotation",type:"test"});let{savings:r,filteredResults:c,bestResult:t,reward:i}=this.getSavingsData(n);this.bestResult=t;let l=st.get("deweyResult")||{},{pageType:s}=l,p=h.default.get(this.props,s==="productPage"?"notification.wirelessPriceComparison":`notification.wirelessPriceComparisonCart.${this.props.asin}`),f=e&&!r&&p&&p.valid,y=`${e?`${f||(r||i)&&c.length?"savings":"no-savings"}`:"searching"}`,g=this.state.showSavingsDetails,M=h.default.get(this.getPDPData(),"wbid"),R=N("notif_rounded_border")?"rounded-btn":"";this.runIdSavingsAlertSent=Vi(n?.id,this.runIdSavingsAlertSent,e,!!r,this.props?.pageType);let $=this.getPopoverType(this.shouldShowSavingsDetails(e,r),r,c.length,f),W=this.props.hasSavingsButton&&(0,T.jsxs)("div",{className:`savings-button ${y} ${R}`,onClick:this.savingsButtonOnClick(e,f,p&&p.link),ref:q=>this.saveButton=q,children:[(0,T.jsx)(Ut,{}),e?r?(0,T.jsx)(Di,{savings:r,reward:i}):f?(0,T.jsx)(Ii,{data:p}):(0,T.jsx)(Ni,{}):(0,T.jsx)(Ht,{}),$===ui?(0,T.jsx)(ct,{containerNamespace:X,children:(0,T.jsx)(Et,{run:n,bestResult:this.bestResult,viewProductPage:this.viewProductPage.bind(this),onCloseTooltip:()=>this.hideSavingsDetails(),blocksContent:this.state.blocksSavingsNotif})}):$===re?(0,T.jsx)(ct,{containerNamespace:X,children:(0,T.jsx)(le,{saveButtonDomElem:this.saveButton,showSavingsDetails:()=>this.isInteractingWithTooltip=!0,hideSavingsDetails:this.onLeaveToolTip.bind(this),children:(0,T.jsx)(it,{wbid:M,originVendor:this.props.originVendor,view:"productEstimateAnnotation",hideSavingsDetails:()=>{this.isInteractingWithTooltip=!1,this.hideSavingsDetails()},viewProductPage:this.viewProductPage.bind(this),visitMerchant:this.visitMerchant.bind(this),filteredResults:c,searchIndex:this.props.searchIndex,fullRunComplete:this.state.fullRunComplete,run:n,deweyPC:this.state.deweyPC,showViewAllOffers:this.state.isPDPEnabled,blocksContent:this.state.blocksSavingsNotif})})}):$===se?(0,T.jsx)(ct,{containerNamespace:X,children:(0,T.jsx)(le,{saveButtonDomElem:this.saveButton,showSavingsDetails:()=>this.isInteractingWithTooltip=!0,hideSavingsDetails:this.onLeaveToolTip.bind(this),children:(0,T.jsx)($i,{data:p,onCloseTooltip:()=>this.hideSavingsDetails()})})}):null]});return(0,T.jsx)("div",{className:`product-estimate-annotation ${g?"tooltip-open":""}`,children:W||($===ui?(0,T.jsx)(Et,{run:n,bestResult:this.bestResult,viewProductPage:this.viewProductPage.bind(this),onCloseTooltip:()=>this.hideSavingsDetails(),blocksContent:this.state.blocksSavingsNotif}):null)})}onEnterSavingsButton(){this.isInteractingWithSaveButton=!0,this.showSavingsDetails()}onLeaveSavingsButton(){this.isInteractingWithSaveButton=!1,this.scheduledHidingSavingsDetails()}onLeaveToolTip(){this.isInteractingWithTooltip=!1,this.scheduledHidingSavingsDetails()}showSavingsDetails(){this.setState({showSavingsDetails:!0})}hideSavingsDetails(){this.setState({showSavingsDetails:!1,preventInitialShow:!0})}scheduledHidingSavingsDetails(){this.props.isFloatingNotif||setTimeout(()=>{this.isInteractingWithTooltip||this.isInteractingWithSaveButton||this.hideSavingsDetails()},500)}viewWirelessDevicePage(e){e&&Xt(e)}viewProductPage(e){if(!h.default.get(this.state,"isPDPEnabled"))return;let n=this.getPDPData(),r=h.default.get(n,"wbid"),c=h.default.get(n,"url"),t=this.state.useEstimateRun?h.default.get(this.state,"pricing.estimateRunId"):h.default.get(this.state,"pricing.updatedPricingRunId");E("trackClick","viewProductPage","",{view:this.props.view,pageLocation:"annotation",productId:r,productUrl:c,label:String(e),searchIndex:this.props.searchIndex,quoteId:t,pageType:this.props?.pageType}),r&&c&&t?Xt(`${Gt}${c}?extReq=true${t?`&run=${t}`:""}${this.props.originVendor?`&originVendor=${this.props.originVendor}`:""}`):h.default.get(this.state,"cart.items[0].inputData.isv4",!1)&&this.props.isFloatingNotif&&this.bestResult&&!this.bestResult.origin&&this.visitMerchant(this.bestResult)}visitMerchant(e){let n=this.state.useEstimateRun?h.default.get(this.state,"pricing.estimateRunId"):h.default.get(this.state,"pricing.updatedPricingRunId"),r=h.default.get(e,"id"),c=h.default.get(e,"resultId"),t=h.default.get(e,"meta.paymentsSupport"),i=h.default.get(e,"product.url");if(t)window.open(`${Gt}/run/${n}/place-order/${r}`),E("trackClick","checkout","",{view:"resultListTooltip",pageLocation:"annotation",matchDomain:h.default.get(e,"product.vendor"),matchUrl:i,matchId:r,resultId:c,quoteId:n,searchIndex:this.props.searchIndex});else{let l="visitMerchant",{clickId:s,redirectId:p}=vi(),f="product_view_offer",y;if(e?.redirectUrl){let g={redirectId:p,clickEvent:l,quoteId:n,subExperience:f};y=wi(e.redirectUrl,g)}else{let g=!!h.default.get(e,"pricing.reward");y=Ei({params:{channel:g?"cashback-ims":"cart",clickEvent:l,destUrl:i,destDomain:h.default.get(e,"product.vendor"),redirectId:p,subExperience:f,vendorMetaId:h.default.get(e,"pricing.reward.id"),token:h.default.get(e,"pricing.reward.token"),runId:n},isWbPublisher:!0})}window.open(y),E("track",l,{view:"resultListTooltip",pageLocation:"annotation",matchDomain:h.default.get(e,"product.vendor"),matchUrl:i,matchId:r,resultId:c,quoteId:n,clickId:s,redirectId:p,searchIndex:this.props.searchIndex})}}async pollForComplete(e){if(e&&this.pollingRetriesCount<Qt){let n=await Wi({runId:e});n?(!h.default.get(n,"items[0].originResult.pricing.total")&&h.default.get(n,"items[0].results.length")===1?this.setState({fullRunComplete:!0,useEstimateRun:!0}):this.setState({cart:n,fullRunComplete:!0}),this.pollingRetriesCount=0):(this.pollingRetriesCount+=1,await ue.default.resolve().delay(2e3),this.pollForComplete(e))}else this.pollingRetriesCount>=Qt&&this.setState({cart:{items:[]},fullRunComplete:!0})}},di=Pi({notification:["notification"]},pi);var de=b(k()),pe="offers";function Ve(o){return o.disablePriceRun?o.disablePriceRun():Jt(_i.default.get(o,"input.product.price")||_i.default.get(o,"price"),o.cutOffPriceForPriceRunsInCents)}function qe({insertAfterElement:o,additionalClass:e,cssUrl:n,removeExistingApp:r=!1},c={}){if(Ve(c))return;function t(l){return N("show_price_comparison")?(0,de.jsx)(di,{...l}):null}let{isFloatingNotif:i=!1}=c;return i&&!o?Kt({appName:pe,cssUrl:n||"offers.css",additionalClass:`__product-estimate-annotation ${e||""}`,app:t(c),removeExistingApp:r,disableTopPositioningObserver:!0}):Kt({appName:pe,cssUrl:n||"offers.css",additionalClass:`__product-estimate-annotation ${e||""}`,app:t({...c,hasSavingsButton:!!o}),insertAfterElement:o,removeExistingApp:r,additionalContent:{namespace:X,positionOnTop:i},disableTopPositioningObserver:!0})}export{Jt as a,Ue as b,ct as c,ut as d,$i as e,Yi as f,G as g,Ai as h,pt as i,Vi as j,Rt as k,ae as l,Et as m,pe as n,qe as o};
