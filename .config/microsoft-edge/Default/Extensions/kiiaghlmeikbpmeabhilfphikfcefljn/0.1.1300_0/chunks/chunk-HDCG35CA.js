import{a as mo}from"./chunk-QQFNG2AW.js";import{a as De}from"./chunk-QTFDT3SV.js";import{a as ge,b as se}from"./chunk-OOVGOOFN.js";import{G as he,a as me,b as lo,f as V,g as po,h as co}from"./chunk-JMZ6COH5.js";import{a as Q}from"./chunk-IDR6MOLX.js";import{a as fe}from"./chunk-VMXEY2MG.js";import{a as ne,b as ja}from"./chunk-JWRT5PWI.js";import{a as Tt}from"./chunk-BCG2KUGW.js";import{a as de}from"./chunk-35WHJZQO.js";import{a as St}from"./chunk-NUCLT2FJ.js";import{a as Va}from"./chunk-ZRXJBILZ.js";import{e as fo,i as vt}from"./chunk-TXXCCNWI.js";import{a as uo}from"./chunk-O4TFJKJQ.js";import{a as I,c as $a,e as no,f as _t,g as je,m as f,s as N,t as P,u as io,v as so,w as $}from"./chunk-CHZKSFGE.js";import{a as Ct,c as Ha}from"./chunk-Z4H6U7OH.js";import{g as to,m as Ee,t as oo}from"./chunk-LIVBINA3.js";import{b as Re,c as Ga}from"./chunk-HQ4MM2EX.js";import{z as Wa}from"./chunk-T5WNPH4X.js";import{b as ro,c as Ba}from"./chunk-IUWVXOWN.js";import{b as eo,c as bt,d as Na}from"./chunk-HPNQXUCM.js";import{k as Ua}from"./chunk-53OM6ECF.js";import{e as Pe,g as ie,l as ao,s as wt}from"./chunk-BETA3R27.js";import{e as F}from"./chunk-3GYLW4KZ.js";function xe({automaticCouponsRun:e,autoFallback:t,isSiteHub:o,sameTabAffiliateRedirect:r}={}){return e?"auto":t?"auto_fallback":o?"site_hub":r?"page_reload":null}oo();var za=typeof window=="object"&&window&&window.Object===Object&&window,He=za;var Ka=typeof self=="object"&&self&&self.Object===Object&&self,qa=He||Ka||Function("return this")(),E=qa;var Ja=E.Symbol,U=Ja;var go=Object.prototype,Qa=go.hasOwnProperty,Xa=go.toString,ke=U?U.toStringTag:void 0;function Ya(e){var t=Qa.call(e,ke),o=e[ke];try{e[ke]=void 0;var r=!0}catch{}var a=Xa.call(e);return r&&(t?e[ke]=o:delete e[ke]),a}var ho=Ya;var Za=Object.prototype,en=Za.toString;function tn(e){return en.call(e)}var xo=tn;var on="[object Null]",rn="[object Undefined]",yo=U?U.toStringTag:void 0;function an(e){return e==null?e===void 0?rn:on:yo&&yo in Object(e)?ho(e):xo(e)}var H=an;function nn(e){return e!=null&&typeof e=="object"}var G=nn;var sn="[object Symbol]";function fn(e){return typeof e=="symbol"||G(e)&&H(e)==sn}var X=fn;function un(e,t){for(var o=-1,r=e==null?0:e.length,a=Array(r);++o<r;)a[o]=t(e[o],o,e);return a}var bo=un;var ln=Array.isArray,k=ln;var pn=1/0,Co=U?U.prototype:void 0,wo=Co?Co.toString:void 0;function _o(e){if(typeof e=="string")return e;if(k(e))return bo(e,_o)+"";if(X(e))return wo?wo.call(e):"";var t=e+"";return t=="0"&&1/e==-pn?"-0":t}var To=_o;var cn=/\s/;function dn(e){for(var t=e.length;t--&&cn.test(e.charAt(t)););return t}var vo=dn;var mn=/^\s+/;function gn(e){return e&&e.slice(0,vo(e)+1).replace(mn,"")}var So=gn;function hn(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var W=hn;var Ao=NaN,xn=/^[-+]0x[0-9a-f]+$/i,yn=/^0b[01]+$/i,bn=/^0o[0-7]+$/i,Cn=parseInt;function wn(e){if(typeof e=="number")return e;if(X(e))return Ao;if(W(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=W(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=So(e);var o=yn.test(e);return o||bn.test(e)?Cn(e.slice(2),o?2:8):xn.test(e)?Ao:+e}var Oe=wn;var Io=1/0,_n=17976931348623157e292;function Tn(e){if(!e)return e===0?e:0;if(e=Oe(e),e===Io||e===-Io){var t=e<0?-1:1;return t*_n}return e===e?e:0}var Eo=Tn;function vn(e){var t=Eo(e),o=t%1;return t===t?o?t-o:t:0}var Ro=vn;function Sn(e){return e}var Po=Sn;var An="[object AsyncFunction]",In="[object Function]",En="[object GeneratorFunction]",Rn="[object Proxy]";function Pn(e){if(!W(e))return!1;var t=H(e);return t==In||t==En||t==An||t==Rn}var Ge=Pn;var Dn=E["__core-js_shared__"],We=Dn;var Do=function(){var e=/[^.]+$/.exec(We&&We.keys&&We.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function kn(e){return!!Do&&Do in e}var ko=kn;var On=Function.prototype,Mn=On.toString;function Ln(e){if(e!=null){try{return Mn.call(e)}catch{}try{return e+""}catch{}}return""}var K=Ln;var Fn=/[\\^$.*+?()[\]{}|]/g,Nn=/^\[object .+?Constructor\]$/,Bn=Function.prototype,Un=Object.prototype,jn=Bn.toString,Hn=Un.hasOwnProperty,Gn=RegExp("^"+jn.call(Hn).replace(Fn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Wn(e){if(!W(e)||ko(e))return!1;var t=Ge(e)?Gn:Nn;return t.test(K(e))}var Oo=Wn;function $n(e,t){return e?.[t]}var Mo=$n;function Vn(e,t){var o=Mo(e,t);return Oo(o)?o:void 0}var j=Vn;var zn=j(E,"WeakMap"),$e=zn;function Kn(){}var Lo=Kn;function qn(e,t,o,r){for(var a=e.length,n=o+(r?1:-1);r?n--:++n<a;)if(t(e[n],n,e))return n;return-1}var Fo=qn;function Jn(e){return e!==e}var No=Jn;function Qn(e,t,o){for(var r=o-1,a=e.length;++r<a;)if(e[r]===t)return r;return-1}var Bo=Qn;function Xn(e,t,o){return t===t?Bo(e,t,o):Fo(e,No,o)}var Uo=Xn;function Yn(e,t){var o=e==null?0:e.length;return!!o&&Uo(e,t,0)>-1}var jo=Yn;var Zn=9007199254740991,ei=/^(?:0|[1-9]\d*)$/;function ti(e,t){var o=typeof e;return t=t??Zn,!!t&&(o=="number"||o!="symbol"&&ei.test(e))&&e>-1&&e%1==0&&e<t}var Ve=ti;function oi(e,t){return e===t||e!==e&&t!==t}var ze=oi;var ri=9007199254740991;function ai(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=ri}var ye=ai;function ni(e){return e!=null&&ye(e.length)&&!Ge(e)}var Ho=ni;var ii=Object.prototype;function si(e){var t=e&&e.constructor,o=typeof t=="function"&&t.prototype||ii;return e===o}var Go=si;function fi(e,t){for(var o=-1,r=Array(e);++o<e;)r[o]=t(o);return r}var Wo=fi;var ui="[object Arguments]";function li(e){return G(e)&&H(e)==ui}var At=li;var $o=Object.prototype,pi=$o.hasOwnProperty,ci=$o.propertyIsEnumerable,di=At(function(){return arguments}())?At:function(e){return G(e)&&pi.call(e,"callee")&&!ci.call(e,"callee")},Ke=di;function mi(){return!1}var Vo=mi;var qo=typeof exports=="object"&&exports&&!exports.nodeType&&exports,zo=qo&&typeof module=="object"&&module&&!module.nodeType&&module,gi=zo&&zo.exports===qo,Ko=gi?E.Buffer:void 0,hi=Ko?Ko.isBuffer:void 0,xi=hi||Vo,Me=xi;var yi="[object Arguments]",bi="[object Array]",Ci="[object Boolean]",wi="[object Date]",_i="[object Error]",Ti="[object Function]",vi="[object Map]",Si="[object Number]",Ai="[object Object]",Ii="[object RegExp]",Ei="[object Set]",Ri="[object String]",Pi="[object WeakMap]",Di="[object ArrayBuffer]",ki="[object DataView]",Oi="[object Float32Array]",Mi="[object Float64Array]",Li="[object Int8Array]",Fi="[object Int16Array]",Ni="[object Int32Array]",Bi="[object Uint8Array]",Ui="[object Uint8ClampedArray]",ji="[object Uint16Array]",Hi="[object Uint32Array]",v={};v[Oi]=v[Mi]=v[Li]=v[Fi]=v[Ni]=v[Bi]=v[Ui]=v[ji]=v[Hi]=!0;v[yi]=v[bi]=v[Di]=v[Ci]=v[ki]=v[wi]=v[_i]=v[Ti]=v[vi]=v[Si]=v[Ai]=v[Ii]=v[Ei]=v[Ri]=v[Pi]=!1;function Gi(e){return G(e)&&ye(e.length)&&!!v[H(e)]}var Jo=Gi;function Wi(e){return function(t){return e(t)}}var Qo=Wi;var Xo=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Le=Xo&&typeof module=="object"&&module&&!module.nodeType&&module,$i=Le&&Le.exports===Xo,It=$i&&He.process,Vi=function(){try{var e=Le&&Le.require&&Le.require("util").types;return e||It&&It.binding&&It.binding("util")}catch{}}(),Et=Vi;var Yo=Et&&Et.isTypedArray,zi=Yo?Qo(Yo):Jo,qe=zi;var Ki=Object.prototype,qi=Ki.hasOwnProperty;function Ji(e,t){var o=k(e),r=!o&&Ke(e),a=!o&&!r&&Me(e),n=!o&&!r&&!a&&qe(e),i=o||r||a||n,s=i?Wo(e.length,String):[],u=s.length;for(var p in e)(t||qi.call(e,p))&&!(i&&(p=="length"||a&&(p=="offset"||p=="parent")||n&&(p=="buffer"||p=="byteLength"||p=="byteOffset")||Ve(p,u)))&&s.push(p);return s}var Zo=Ji;function Qi(e,t){return function(o){return e(t(o))}}var er=Qi;var Xi=er(Object.keys,Object),tr=Xi;var Yi=Object.prototype,Zi=Yi.hasOwnProperty;function es(e){if(!Go(e))return tr(e);var t=[];for(var o in Object(e))Zi.call(e,o)&&o!="constructor"&&t.push(o);return t}var or=es;function ts(e){return Ho(e)?Zo(e):or(e)}var Je=ts;var os=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,rs=/^\w*$/;function as(e,t){if(k(e))return!1;var o=typeof e;return o=="number"||o=="symbol"||o=="boolean"||e==null||X(e)?!0:rs.test(e)||!os.test(e)||t!=null&&e in Object(t)}var be=as;var ns=j(Object,"create"),q=ns;function is(){this.__data__=q?q(null):{},this.size=0}var rr=is;function ss(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var ar=ss;var fs="__lodash_hash_undefined__",us=Object.prototype,ls=us.hasOwnProperty;function ps(e){var t=this.__data__;if(q){var o=t[e];return o===fs?void 0:o}return ls.call(t,e)?t[e]:void 0}var nr=ps;var cs=Object.prototype,ds=cs.hasOwnProperty;function ms(e){var t=this.__data__;return q?t[e]!==void 0:ds.call(t,e)}var ir=ms;var gs="__lodash_hash_undefined__";function hs(e,t){var o=this.__data__;return this.size+=this.has(e)?0:1,o[e]=q&&t===void 0?gs:t,this}var sr=hs;function Ce(e){var t=-1,o=e==null?0:e.length;for(this.clear();++t<o;){var r=e[t];this.set(r[0],r[1])}}Ce.prototype.clear=rr;Ce.prototype.delete=ar;Ce.prototype.get=nr;Ce.prototype.has=ir;Ce.prototype.set=sr;var Rt=Ce;function xs(){this.__data__=[],this.size=0}var fr=xs;function ys(e,t){for(var o=e.length;o--;)if(ze(e[o][0],t))return o;return-1}var Y=ys;var bs=Array.prototype,Cs=bs.splice;function ws(e){var t=this.__data__,o=Y(t,e);if(o<0)return!1;var r=t.length-1;return o==r?t.pop():Cs.call(t,o,1),--this.size,!0}var ur=ws;function _s(e){var t=this.__data__,o=Y(t,e);return o<0?void 0:t[o][1]}var lr=_s;function Ts(e){return Y(this.__data__,e)>-1}var pr=Ts;function vs(e,t){var o=this.__data__,r=Y(o,e);return r<0?(++this.size,o.push([e,t])):o[r][1]=t,this}var cr=vs;function we(e){var t=-1,o=e==null?0:e.length;for(this.clear();++t<o;){var r=e[t];this.set(r[0],r[1])}}we.prototype.clear=fr;we.prototype.delete=ur;we.prototype.get=lr;we.prototype.has=pr;we.prototype.set=cr;var Z=we;var Ss=j(E,"Map"),ee=Ss;function As(){this.size=0,this.__data__={hash:new Rt,map:new(ee||Z),string:new Rt}}var dr=As;function Is(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var mr=Is;function Es(e,t){var o=e.__data__;return mr(t)?o[typeof t=="string"?"string":"hash"]:o.map}var te=Es;function Rs(e){var t=te(this,e).delete(e);return this.size-=t?1:0,t}var gr=Rs;function Ps(e){return te(this,e).get(e)}var hr=Ps;function Ds(e){return te(this,e).has(e)}var xr=Ds;function ks(e,t){var o=te(this,e),r=o.size;return o.set(e,t),this.size+=o.size==r?0:1,this}var yr=ks;function _e(e){var t=-1,o=e==null?0:e.length;for(this.clear();++t<o;){var r=e[t];this.set(r[0],r[1])}}_e.prototype.clear=dr;_e.prototype.delete=gr;_e.prototype.get=hr;_e.prototype.has=xr;_e.prototype.set=yr;var ue=_e;var Os="Expected a function";function Pt(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(Os);var o=function(){var r=arguments,a=t?t.apply(this,r):r[0],n=o.cache;if(n.has(a))return n.get(a);var i=e.apply(this,r);return o.cache=n.set(a,i)||n,i};return o.cache=new(Pt.Cache||ue),o}Pt.Cache=ue;var br=Pt;var Ms=500;function Ls(e){var t=br(e,function(r){return o.size===Ms&&o.clear(),r}),o=t.cache;return t}var Cr=Ls;var Fs=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ns=/\\(\\)?/g,Bs=Cr(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Fs,function(o,r,a,n){t.push(a?n.replace(Ns,"$1"):r||o)}),t}),wr=Bs;function Us(e){return e==null?"":To(e)}var _r=Us;function js(e,t){return k(e)?e:be(e,t)?[e]:wr(_r(e))}var Qe=js;var Hs=1/0;function Gs(e){if(typeof e=="string"||X(e))return e;var t=e+"";return t=="0"&&1/e==-Hs?"-0":t}var oe=Gs;function Ws(e,t){t=Qe(t,e);for(var o=0,r=t.length;e!=null&&o<r;)e=e[oe(t[o++])];return o&&o==r?e:void 0}var Xe=Ws;function $s(e,t,o){var r=e==null?void 0:Xe(e,t);return r===void 0?o:r}var Tr=$s;function Vs(e,t){for(var o=-1,r=t.length,a=e.length;++o<r;)e[a+o]=t[o];return e}var vr=Vs;var zs="Expected a function";function Ks(e,t){var o;if(typeof t!="function")throw new TypeError(zs);return e=Ro(e),function(){return--e>0&&(o=t.apply(this,arguments)),e<=1&&(t=void 0),o}}var Sr=Ks;function qs(){this.__data__=new Z,this.size=0}var Ar=qs;function Js(e){var t=this.__data__,o=t.delete(e);return this.size=t.size,o}var Ir=Js;function Qs(e){return this.__data__.get(e)}var Er=Qs;function Xs(e){return this.__data__.has(e)}var Rr=Xs;var Ys=200;function Zs(e,t){var o=this.__data__;if(o instanceof Z){var r=o.__data__;if(!ee||r.length<Ys-1)return r.push([e,t]),this.size=++o.size,this;o=this.__data__=new ue(r)}return o.set(e,t),this.size=o.size,this}var Pr=Zs;function Te(e){var t=this.__data__=new Z(e);this.size=t.size}Te.prototype.clear=Ar;Te.prototype.delete=Ir;Te.prototype.get=Er;Te.prototype.has=Rr;Te.prototype.set=Pr;var ve=Te;function ef(e,t){for(var o=-1,r=e==null?0:e.length,a=0,n=[];++o<r;){var i=e[o];t(i,o,e)&&(n[a++]=i)}return n}var Dr=ef;function tf(){return[]}var kr=tf;var of=Object.prototype,rf=of.propertyIsEnumerable,Or=Object.getOwnPropertySymbols,af=Or?function(e){return e==null?[]:(e=Object(e),Dr(Or(e),function(t){return rf.call(e,t)}))}:kr,Mr=af;function nf(e,t,o){var r=t(e);return k(e)?r:vr(r,o(e))}var Lr=nf;function sf(e){return Lr(e,Je,Mr)}var Dt=sf;var ff=j(E,"DataView"),Ye=ff;var uf=j(E,"Promise"),Ze=uf;var lf=j(E,"Set"),re=lf;var Fr="[object Map]",pf="[object Object]",Nr="[object Promise]",Br="[object Set]",Ur="[object WeakMap]",jr="[object DataView]",cf=K(Ye),df=K(ee),mf=K(Ze),gf=K(re),hf=K($e),le=H;(Ye&&le(new Ye(new ArrayBuffer(1)))!=jr||ee&&le(new ee)!=Fr||Ze&&le(Ze.resolve())!=Nr||re&&le(new re)!=Br||$e&&le(new $e)!=Ur)&&(le=function(e){var t=H(e),o=t==pf?e.constructor:void 0,r=o?K(o):"";if(r)switch(r){case cf:return jr;case df:return Fr;case mf:return Nr;case gf:return Br;case hf:return Ur}return t});var kt=le;var xf=E.Uint8Array,Ot=xf;var yf="__lodash_hash_undefined__";function bf(e){return this.__data__.set(e,yf),this}var Hr=bf;function Cf(e){return this.__data__.has(e)}var Gr=Cf;function et(e){var t=-1,o=e==null?0:e.length;for(this.__data__=new ue;++t<o;)this.add(e[t])}et.prototype.add=et.prototype.push=Hr;et.prototype.has=Gr;var tt=et;function wf(e,t){for(var o=-1,r=e==null?0:e.length;++o<r;)if(t(e[o],o,e))return!0;return!1}var Wr=wf;function _f(e,t){return e.has(t)}var ot=_f;var Tf=1,vf=2;function Sf(e,t,o,r,a,n){var i=o&Tf,s=e.length,u=t.length;if(s!=u&&!(i&&u>s))return!1;var p=n.get(e),l=n.get(t);if(p&&l)return p==t&&l==e;var c=-1,d=!0,h=o&vf?new tt:void 0;for(n.set(e,t),n.set(t,e);++c<s;){var y=e[c],w=t[c];if(r)var m=i?r(w,y,c,t,e,n):r(y,w,c,e,t,n);if(m!==void 0){if(m)continue;d=!1;break}if(h){if(!Wr(t,function(b,_){if(!ot(h,_)&&(y===b||a(y,b,o,r,n)))return h.push(_)})){d=!1;break}}else if(!(y===w||a(y,w,o,r,n))){d=!1;break}}return n.delete(e),n.delete(t),d}var rt=Sf;function Af(e){var t=-1,o=Array(e.size);return e.forEach(function(r,a){o[++t]=[a,r]}),o}var $r=Af;function If(e){var t=-1,o=Array(e.size);return e.forEach(function(r){o[++t]=r}),o}var Se=If;var Ef=1,Rf=2,Pf="[object Boolean]",Df="[object Date]",kf="[object Error]",Of="[object Map]",Mf="[object Number]",Lf="[object RegExp]",Ff="[object Set]",Nf="[object String]",Bf="[object Symbol]",Uf="[object ArrayBuffer]",jf="[object DataView]",Vr=U?U.prototype:void 0,Mt=Vr?Vr.valueOf:void 0;function Hf(e,t,o,r,a,n,i){switch(o){case jf:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Uf:return!(e.byteLength!=t.byteLength||!n(new Ot(e),new Ot(t)));case Pf:case Df:case Mf:return ze(+e,+t);case kf:return e.name==t.name&&e.message==t.message;case Lf:case Nf:return e==t+"";case Of:var s=$r;case Ff:var u=r&Ef;if(s||(s=Se),e.size!=t.size&&!u)return!1;var p=i.get(e);if(p)return p==t;r|=Rf,i.set(e,t);var l=rt(s(e),s(t),r,a,n,i);return i.delete(e),l;case Bf:if(Mt)return Mt.call(e)==Mt.call(t)}return!1}var zr=Hf;var Gf=1,Wf=Object.prototype,$f=Wf.hasOwnProperty;function Vf(e,t,o,r,a,n){var i=o&Gf,s=Dt(e),u=s.length,p=Dt(t),l=p.length;if(u!=l&&!i)return!1;for(var c=u;c--;){var d=s[c];if(!(i?d in t:$f.call(t,d)))return!1}var h=n.get(e),y=n.get(t);if(h&&y)return h==t&&y==e;var w=!0;n.set(e,t),n.set(t,e);for(var m=i;++c<u;){d=s[c];var b=e[d],_=t[d];if(r)var T=i?r(_,b,d,t,e,n):r(b,_,d,e,t,n);if(!(T===void 0?b===_||a(b,_,o,r,n):T)){w=!1;break}m||(m=d=="constructor")}if(w&&!m){var S=e.constructor,A=t.constructor;S!=A&&"constructor"in e&&"constructor"in t&&!(typeof S=="function"&&S instanceof S&&typeof A=="function"&&A instanceof A)&&(w=!1)}return n.delete(e),n.delete(t),w}var Kr=Vf;var zf=1,qr="[object Arguments]",Jr="[object Array]",at="[object Object]",Kf=Object.prototype,Qr=Kf.hasOwnProperty;function qf(e,t,o,r,a,n){var i=k(e),s=k(t),u=i?Jr:kt(e),p=s?Jr:kt(t);u=u==qr?at:u,p=p==qr?at:p;var l=u==at,c=p==at,d=u==p;if(d&&Me(e)){if(!Me(t))return!1;i=!0,l=!1}if(d&&!l)return n||(n=new ve),i||qe(e)?rt(e,t,o,r,a,n):zr(e,t,u,o,r,a,n);if(!(o&zf)){var h=l&&Qr.call(e,"__wrapped__"),y=c&&Qr.call(t,"__wrapped__");if(h||y){var w=h?e.value():e,m=y?t.value():t;return n||(n=new ve),a(w,m,o,r,n)}}return d?(n||(n=new ve),Kr(e,t,o,r,a,n)):!1}var Xr=qf;function Yr(e,t,o,r,a){return e===t?!0:e==null||t==null||!G(e)&&!G(t)?e!==e&&t!==t:Xr(e,t,o,r,Yr,a)}var nt=Yr;var Jf=1,Qf=2;function Xf(e,t,o,r){var a=o.length,n=a,i=!r;if(e==null)return!n;for(e=Object(e);a--;){var s=o[a];if(i&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++a<n;){s=o[a];var u=s[0],p=e[u],l=s[1];if(i&&s[2]){if(p===void 0&&!(u in e))return!1}else{var c=new ve;if(r)var d=r(p,l,u,e,t,c);if(!(d===void 0?nt(l,p,Jf|Qf,r,c):d))return!1}}return!0}var Zr=Xf;function Yf(e){return e===e&&!W(e)}var it=Yf;function Zf(e){for(var t=Je(e),o=t.length;o--;){var r=t[o],a=e[r];t[o]=[r,a,it(a)]}return t}var ea=Zf;function eu(e,t){return function(o){return o==null?!1:o[e]===t&&(t!==void 0||e in Object(o))}}var st=eu;function tu(e){var t=ea(e);return t.length==1&&t[0][2]?st(t[0][0],t[0][1]):function(o){return o===e||Zr(o,e,t)}}var ta=tu;function ou(e,t){return e!=null&&t in Object(e)}var oa=ou;function ru(e,t,o){t=Qe(t,e);for(var r=-1,a=t.length,n=!1;++r<a;){var i=oe(t[r]);if(!(n=e!=null&&o(e,i)))break;e=e[i]}return n||++r!=a?n:(a=e==null?0:e.length,!!a&&ye(a)&&Ve(i,a)&&(k(e)||Ke(e)))}var ra=ru;function au(e,t){return e!=null&&ra(e,t,oa)}var aa=au;var nu=1,iu=2;function su(e,t){return be(e)&&it(t)?st(oe(e),t):function(o){var r=Tr(o,e);return r===void 0&&r===t?aa(o,e):nt(t,r,nu|iu)}}var na=su;function fu(e){return function(t){return t?.[e]}}var ia=fu;function uu(e){return function(t){return Xe(t,e)}}var sa=uu;function lu(e){return be(e)?ia(oe(e)):sa(e)}var fa=lu;function pu(e){return typeof e=="function"?e:e==null?Po:typeof e=="object"?k(e)?na(e[0],e[1]):ta(e):fa(e)}var ua=pu;var cu=function(){return E.Date.now()},ft=cu;var du="Expected a function",mu=Math.max,gu=Math.min;function hu(e,t,o){var r,a,n,i,s,u,p=0,l=!1,c=!1,d=!0;if(typeof e!="function")throw new TypeError(du);t=Oe(t)||0,W(o)&&(l=!!o.leading,c="maxWait"in o,n=c?mu(Oe(o.maxWait)||0,t):n,d="trailing"in o?!!o.trailing:d);function h(C){var x=r,M=a;return r=a=void 0,p=C,i=e.apply(M,x),i}function y(C){return p=C,s=setTimeout(b,t),l?h(C):i}function w(C){var x=C-u,M=C-p,R=t-x;return c?gu(R,n-M):R}function m(C){var x=C-u,M=C-p;return u===void 0||x>=t||x<0||c&&M>=n}function b(){var C=ft();if(m(C))return _(C);s=setTimeout(b,w(C))}function _(C){return s=void 0,d&&r?h(C):(r=a=void 0,i)}function T(){s!==void 0&&clearTimeout(s),p=0,r=u=a=s=void 0}function S(){return s===void 0?i:_(ft())}function A(){var C=ft(),x=m(C);if(r=arguments,a=this,u=C,x){if(s===void 0)return y(u);if(c)return clearTimeout(s),s=setTimeout(b,t),h(u)}return s===void 0&&(s=setTimeout(b,t)),i}return A.cancel=T,A.flush=S,A}var Lt=hu;function xu(e,t,o){for(var r=-1,a=e==null?0:e.length;++r<a;)if(o(t,e[r]))return!0;return!1}var la=xu;function yu(e){return Sr(2,e)}var Ft=yu;var bu=1/0,Cu=re&&1/Se(new re([,-0]))[1]==bu?function(e){return new re(e)}:Lo,pa=Cu;var wu=200;function _u(e,t,o){var r=-1,a=jo,n=e.length,i=!0,s=[],u=s;if(o)i=!1,a=la;else if(n>=wu){var p=t?null:pa(e);if(p)return Se(p);i=!1,a=ot,u=new tt}else u=t?[]:s;e:for(;++r<n;){var l=e[r],c=t?t(l):l;if(l=o||l!==0?l:0,i&&c===c){for(var d=u.length;d--;)if(u[d]===c)continue e;t&&u.push(c),s.push(l)}else a(u,c,o)||(u!==s&&u.push(c),s.push(l))}return s}var ca=_u;function Tu(e,t){return e&&e.length?ca(e,ua(t,2)):[]}var Nt=Tu;wt();var ga=F($a());var ma=F(Va()),jt=F(eo()),Ht=F(uo());wt();wt();async function L(e){return ie(ao(e??0))}var da=F(Ua());function pe(e,t){let o=e.replace(/[^0-9]/gi,"");if(!e.trim().match(/\d+[\t\n\r]*[.,\t\n\r][\t\n\r]*\d{2}($|\D)+/)){let a=!!e.trim().match(/[.,\t\n\r][\t\n\r]*\d{1}($|\D)+/)?parseFloat(o).toFixed(1).replace(/[^0-9]/gi,""):parseFloat(o).toFixed(2).replace(/[^0-9]/gi,"");t&&a!==o&&t("track","rooPriceDifference",{domain:da.default.getDomain(location.href),pagePath:location.pathname,url:location.href,parsePriceTotal:o,fixedPriceTotal:a}),o=a}return parseInt(o)}async function ut(e,t,o){let r=new Event(e,o);t.dispatchEvent(r)}async function Bt(e,t,o){try{let r=o.charCodeAt(0),a=document.createEvent("KeyboardEvent");Object.defineProperty(a,"keyCode",{get:function(){return this.charCodeVal}}),Object.defineProperty(a,"which",{get:function(){return this.charCodeVal}}),a.initKeyboardEvent?a.initKeyboardEvent(e,!0,!0,document.defaultView,!1,!1,!1,!1,r,r):a.initKeyEvent(e,!0,!0,document.defaultView,!1,!1,!1,!1,r,0),a.charCodeVal=r,t.dispatchEvent(a),e==="keypress"&&(t.contentEditable==="true"&&(t.textContent=t.textContent+o),t.value=t.value+o)}catch{}}async function vu(e,t){return await L(10),Bt("keydown",t,e).then(()=>Bt("keypress",t,e)).then(()=>ut("input",t,{bubbles:!0})).then(()=>ut("change",t)).then(()=>Bt("keyup",t,e))}async function Ut(e,t){await ut("focus",e);for(let o=0;o<t.length;++o)await vu(t[o],e);await ut("blur",e)}var lt=class{constructor(t,o){this.onIsNotCouponPage=()=>{};this.sendMetric=()=>{};this.hasFeature=t=>!1;this._xhrQuietMonitor$=t,Object.assign(this,o)}getElement(t){if(!t)return!1;try{let o=t.split(","),r=null;return o.find(a=>{let n=(0,Ht.default)(a);return n.length?(r=n[0],!0):!1}),r}catch{return!1}}getPromoCodeEl(t){let o=t?.promoInputSelector;return this.getElement(o)}setValue(t,o){try{Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value")?.set?.call(t,o);let a=new Event("input",{bubbles:!0});t.dispatchEvent(a)}catch{t.value=o}}async getXhrMonitor(t,o,r){let a=L(t);return!this.hasFeature("ext_fast_roo_totals")||o&&this.hasFeature("ext_fast_roo_totals_no_auto")||r&&this.hasFeature("ext_fast_roo_totals_no_reload")||(o||r)&&this.hasFeature("ext_fast_roo_totals_no_reload_no_auto")?a:ie(this._xhrQuietMonitor$)}async getTotal(t,o){let r,a,n;o&&({auto:r,isInitialTotal:a,isFinalTotal:n}=o);let i=(a||n)&&r?0:t.getTotalDelay;return await jt.default.race([this.waitForTotalChange(t.cartTotalSelector,!!t.useInnerText,i),L(i),this.getXhrMonitor(i,!!o?.auto,t.reload)]),this.getElement(t.removeErrorAction)&&await this.removeErrors(t),this.getCartTotal(t.cartTotalSelector,!!t.useInnerText)}async waitForTotalChange(t,o=!1,r=1e4){let a=new Date().getTime(),n=this.getElement(t),i=0,s;for(n&&(s=pe(o?n.innerText:n.innerHTML));!s&&i<r;)await L(20),n&&(s=pe(o?n.innerText:n.innerHTML)),i=new Date().getTime()-a;let u=s;for(;s===u&&i<r;)await L(20),n&&(s=pe(o?n.innerText:n.innerHTML)),i=new Date().getTime()-a;return s}async getCodeEntered(t){return t.useCodeEntered&&t.codeEnteredAction?!!this.getElement(t.codeEnteredAction):!1}click(t){try{let o=this.getElement(t);return o?(o.click(),!0):!1}catch{return!1}}removeElement(t){return t.parentNode?.removeChild(t)}async runCode(t){let o=document.createElement("script");o.textContent=t,(document.head||document.documentElement).appendChild(o),o.remove()}async writeCode(t,o){let r=this.getPromoCodeEl(t);r&&(r.contentEditable==="true"&&(r.textContent=""),this.setValue(r,""),await Ut(r,o))}async removePrevious(t,o){let r=t.promoRemoveAction;if(this.getElement(r)||o){this.click(r);let n=t.postRemoveDelay;return n&&await L(n),!0}return!1}async preApplyAction(t){let o=t.skipPreApplyAction;if(this.getElement(o))return;let a=t.preApplyAction;if(a&&a.length){this.click(a);let n=t.preApplyDelay;n&&await L(n)}}async removeErrors(t){let o=t.removeErrorAction;if(o){let r=this.getElement(o);r&&this.removeElement(r)}}async applyCode(t,o){if(!o)return;await this.removeErrors(t),await this.preApplyAction(t),await this.writeCode(t,o);let r=t.promoApplyAction;return setTimeout(()=>{this.click(r)},1),{code:o}}async getDiscount(t){if(!t.discountSelector)return null;let o=t.getTotalDelay;await jt.default.race([this.waitForTotalChange(t.discountSelector,!!t.useInnerText,o),L(o)]);let r=this.getElement(t.discountSelector);if(!r)return null;let a=pe(t.useInnerText?r.innerText:r.innerHTML);return isNaN(a)?null:a}getCartTotal(t,o=!1,r){if(!t)return;let a=Array();t.split(",").forEach(u=>{(0,Ht.default)(u).toArray().forEach(l=>{let c=pe(o?l.innerText:l.innerHTML,r);a.push(c)})});let n,i=500,s=5e3;for(;!n&&i>=0;)n=a.find(u=>u>=i&&u<s),i-=50,s+=1e4;return!n&&n!==0&&(n=a.find(u=>Number(u))),n}getRooPreapplieds(t){if(t&&t.pageData&&t.pageData.products){let r=(t.pageData.products??[]).reduce((a,n)=>(n.coupon&&a.push({code:n.coupon}),a),Array());if(r&&r.length>0)return r}return null}async isCouponPage(t){let o=new Pe,r=Ft(this.sendMetric),a=(0,ma.exponential)({randomisationFactor:0,initialDelay:50,maxDelay:3e3});return a.on("ready",()=>{try{let n=this.getCartTotal(t.cartTotalSelector,!!t.useInnerText,r),i=(t?.showCouponsSelector??"").trim().length?this.getElement(t.showCouponsSelector):!0;this.getPromoCodeEl(t)&&n&&i?o.next(!0):a.backoff()}catch(n){let i=n?.message;i!=="Backoff in progress."&&this.sendMetric("track","isCouponPageError",{error:i})}}),this.hasFeature("ext_coupons_skip_cashback_fallback")&&(a.failAfter(5),a.on("fail",()=>{this.onIsNotCouponPage(),o.next(!1)})),a.backoff(),ie(o)}};function Gt(e){if(e&&!e.includes("-")){let t=e.split("");return[20,16,12,8].forEach(o=>t.splice(o,0,"-")),t.join("")}return e}var Fe=class{constructor(t,o){this._tryingCodes=!1;this.sendMetric=(t,...o)=>{};this.currentDomain=()=>"";this.dropCookie=t=>new Promise(()=>{});this.getSingleUseCouponsIfValid=(t,o,r)=>new Promise(()=>{});this.siteCache=t=>new Promise(()=>({}));this.handleResult=t=>new Promise(()=>{});this.shouldCouponsStandDown=()=>!1;this.compStateCache=t=>new Promise(()=>!1);this.domainLocalStorageGet=t=>new Promise(()=>null);this.domainLocalStorageSet=(t,o)=>new Promise(()=>{});this.domainLocalStorageRemove=t=>new Promise(()=>{});this.getFromState=t=>null;this.setInState=(t,o)=>{};this.onIsNotCouponPage=()=>{};this.onTryCode=t=>{};this.disableAffiliate=()=>{};this.setRunning=t=>{};this.startDeweyRun=()=>new Promise(()=>{});this.hasFeature=t=>!1;this.tryCodes=async({disableAffiliate:t,ignoreCancelled:o,coupons:r,automaticCouponsRun:a,autoFallback:n,passedInClickId:i,couponRunId:s,cashback:u})=>{this._tryingCodes=!0;let p=this.getFromState("couponNotif")==="siteHub",l=i||(0,ga.v4)().replace(/-/g,""),c=this.currentDomain();t||await this.dropCookie(l);let{hash:d,host:h,hostname:y,href:w,origin:m,pathname:b,port:_,search:T}=window.location;this.sendMetric("track","tryCoupons",{clickId:l,redirectId:Gt(l),couponRunId:s,cashback:u,triggerType:xe({automaticCouponsRun:a,autoFallback:n,isSiteHub:p}),couponScriptType:"roo",currentLocation:{hash:d,host:h,hostname:y,href:w,origin:m,pathname:b,port:_,search:T}}),(n||p)&&sessionStorage.setItem("__r_reload_auto","true");let S=await this.siteCache(c),A=this.getFromState(["userCouponChecks",c]);await this.startDeweyRun();let C=new Date().getTime(),x=S?.siteData?.coupons?.script,M=await this.getSingleUseCouponsIfValid(c,S,A);M&&M.length>0&&(r.pop(),r=r.concat(structuredClone(M)));let R=this.dom.getRooPreapplieds(this.getFromState("deweyResult")||{})??[],B=structuredClone(r);if(!a&&Array.isArray(R)&&(B=r.concat(R),B=Nt(B,Zt=>Zt.code?.toLowerCase())),!await this._sendMessage({action:"init",ignoreCancelled:n||o,coupons:B,script:x,store:{cashback:u,clickId:l,couponRunId:s,isSiteHub:p,automaticCouponsRun:a,autoFallback:n,couponStartTime:C}})){console.error("Run failed to init");return}let Yt=await this._sendMessage({action:"next"});if(!Yt||!x)return;let La=new Date().getTime();!a&&x.initialAction?(await this.dom.click(x.initialAction),x.initialActionDelay&&await L(x.initialActionDelay)):!a&&x.disableInitialPromoRemove!==!0&&x.promoRemoveAction&&this.dom.getElement(x.promoRemoveAction)&&(await this.dom.click(x.promoRemoveAction),x.postRemoveDelay&&await L(x.postRemoveDelay));let Fa=new Date().getTime()-La||0;await this._sendMessage({action:"initialAction",initialActionTime:Fa});let D=await this.runner(Yt);D&&(sessionStorage.getItem("__r_reload_auto")&&sessionStorage.removeItem("__r_reload_auto"),D.automaticCouponsRun=a,D.autoFallback=n,D.isSiteHub=p,D.couponRunId=s,D.cashback=u,D.originalCoupons=r,D.preappliedCodes=R,D.couponScriptType="roo",x.useCodeEntered&&D.codeEntered&&!D.savings&&(D.requiresInput=x.codeEnteredAction?!!this.dom.getElement(x.codeEnteredAction):!0),D.startTime=C,D.duration=new Date().getTime()-C,this.determineSavingsClaimPreapplieds(D)||(D.savings=0),await this.handleResult({result:D,clickId:l})),this._tryingCodes=!1};this.initCoupons=async()=>{let t=null;this.setInState(["couponView","rooIsCheckingForCouponPage"],!0),this.setInState(["couponView","rooIsCouponPage"],!1);let o=this.currentDomain(),r=await this.siteCache(o),a=r?.siteData?.coupons??{},{script:n,coupons:i,ignoreAffiliate:s}=a,u=this.getFromState("tabId");(s||this.getFromState(["couponsAffiliateDisabledSites",`${o}_${u}`])>Ee(new Date)||this.getFromState(["couponsAffiliateDisabledSites",`${o}_all`])>Ee(new Date))&&this.disableAffiliate();let p=await this.dom.isCouponPage(a.script);if(this.setInState(["couponView","rooIsCheckingForCouponPage"],!1),this.setInState(["couponView","rooIsCouponPage"],p),!p)return;let l=this.shouldCouponsStandDown(),c=this.dom.getRooPreapplieds(this.getFromState("deweyResult")),d={coupons:i,preappliedCodes:c,standDown:l,roo:!0,estimatedRunTime:25e3,runTimePerCoupon:(n.getTotalDelay||0)+(n.preApplyDelay||0)+(n.postRemoveDelay||0),couponCount:i.length,disableAffiliate:s,affiliateLinkCurrentTab:r?.meta?.affiliate_link_current_tab,autoCoupConfig:r?.siteData?.coupons?.config?.auto_coup};this.hasFeature("user_contributed_codes")&&await this.setupCouponListener(n),await this._sendMessage({action:"pageLoad"});let h=await this._sendMessage({action:"next"});if(h){if(this._tryingCodes=!0,h.action==="cancelled")return;let y=await this._sendMessage({action:"nextCode"});Object.assign(d,{disableDelay:!!y,rooRunning:!0,currentCouponCode:y}),this.setInState("couponsConfig",d),t=d,(async()=>{let m=await this.runner(h);if(m){n.useCodeEntered&&m.codeEntered&&!m.savings&&(m.requiresInput=n.codeEnteredAction?!!this.dom.getElement(n.codeEnteredAction):!0);let{clickId:b,couponRunId:_,isSiteHub:T,automaticCouponsRun:S,autoFallback:A,cashback:C,couponStartTime:x}=m.store;m.isSiteHub=T,m.automaticCouponsRun=S,m.autoFallback=A,m.couponRunId=_,m.originalCoupons=i,m.preappliedCodes=c,m.couponScriptType="roo",m.cashback=C,m.startTime=x,m.duration=m.runTime,this.determineSavingsClaimPreapplieds(m)||(m.savings=0),await this.handleResult({result:m,clickId:b})}await this.domainLocalStorageGet("rooReloading")&&await this.domainLocalStorageRemove("rooReloading"),sessionStorage.getItem("__r_reload_auto")&&sessionStorage.removeItem("__r_reload_auto"),this.setRunning(!1)})()}else this.sendMetric("track","couponCheck"),this.setInState("couponsConfig",d),t=d;return t};Object.assign(this,o),this.dom=new lt(t,{onIsNotCouponPage:this.onIsNotCouponPage,sendMetric:this.sendMetric,hasFeature:this.hasFeature})}async _sendMessage(t){if(!this._msgListener$)throw new Error("No message listener added for RooClient");let o=new Pe;return this._msgListener$.next({msg:t,sender:o}),ie(o)}addListener(t){this._msgListener$=new Pe,this._msgListener$.subscribe(({msg:o,sender:r})=>{t(o).then(a=>{r.next(a)})})}async cancel(){this.sendMetric("track","rooCancelled",{url:document.URL}),await this._sendMessage({action:"cancel"}),this._tryingCodes=!1}determineSavingsClaimPreapplieds(t){let{originalCoupons:o,bestCoupon:r,preappliedCodes:a}=t;return r&&a?!!o.find(n=>n.code?.toLowerCase()===r.code?.toLowerCase()):!0}async runner(t){let{script:o}=t;this._tryingCodes=!0,t.aggApplyCodeTime??=0,t.aggGetTotalTime??=0,t.aggRemovePreviousTime??=0,t.aggWaitForReloadTime??=0;try{if(t.action==="tryCode"){!t.applyingBestCode&&t.code&&this.onTryCode(t.code);let a,n=0;if(t.applyingBestCode&&t.auto&&t.code)a={code:t.code};else if(o){let i=new Date().getTime();a=await this.dom.applyCode(o,t.code);let s=new Date().getTime()-i;n=t.aggApplyCodeTime+s}await this._sendMessage({action:"saveCoupon",coupon:a,aggApplyCodeTime:n})}else if(t.action==="getDiscount"&&o){let a=new Date().getTime(),n=await this.dom.getDiscount(o)??void 0,i=new Date().getTime()-a,s=t.aggGetTotalTime+i;await this._sendMessage({action:"saveDiscount",discount:n,aggGetTotalTime:s})}else if(t.action==="getTotal"&&o){let a=new Date().getTime(),n=await this.dom.getTotal(o,t.options),i=new Date().getTime()-a,s=t.aggGetTotalTime+i;await this._sendMessage({action:"saveTotal",total:n,aggGetTotalTime:s})}else if(t.action==="codeEntered"&&o){let a=await this.dom.getCodeEntered(o);await this._sendMessage({action:"saveCodeEntered",codeEntered:a})}else if(t.action==="removePrevious"&&o){let a=new Date().getTime();await this.domainLocalStorageSet("rooReloading",!0);let n=await this.dom.removePrevious(o,t.lastCodeHadSavings),i=new Date().getTime()-a,s=t.aggRemovePreviousTime+i;await this._sendMessage({action:"codeRemoved",removed:n,aggRemovePreviousTime:s})}else{if(t.action==="finish")return this._tryingCodes=!1,t.result;if(t.action==="error")throw this._tryingCodes=!1,new Error(t.error?.message);if(t.action==="cancelled"){this._tryingCodes=!1;return}else if(t.action==="wait"){let a=new Date().getTime();await this.domainLocalStorageSet("rooReloading",!0),await L(1e4);let n=new Date().getTime()-a,i=t.aggWaitForReloadTime+n;await this._sendMessage({action:"pageLoad",aggWaitForReloadTime:i})}}let r=await this._sendMessage({action:"next"});return r?this.runner(r):void 0}catch(r){let a=r.stack?.split(`
`);this.sendMetric("track","rooError",{message:(a[0]+a[1]).match(/(.*)\s\(/)[1],url:document.URL}),sessionStorage?.removeItem("ogPageData"),await this._sendMessage({action:"error"})}}async setupCouponListener(t){try{if(t.promoApplyAction){let o=this.dom.getElement(t.promoApplyAction);o&&o.addEventListener("click",async a=>{await this.sendCustomerCodeEvent(t)});let r=this.dom.getPromoCodeEl(t);r&&r.addEventListener("keydown",async a=>{if(a.code==="Enter"){let n=this.sendCustomerCodeEvent.bind(t);Lt(n,200)}})}}catch{}}async sendCustomerCodeEvent(t){if(!this._tryingCodes){let o=this.dom.getPromoCodeEl(t);if(o){let r=o?.value;if(r?.length){let a="userContributedCode";await this.compStateCache({action:"getHoneyState",comp:"honey"})&&(a="userContributedCodeH"),this.sendMetric("track",a,{code:r})}}}}};var J=F(eo());oo();var Ae=F(uo()),g=F(bt()),Ie=F(Na());Ha();Ba();ja();Ga();var O=F(bt());var pt=(e,t)=>{if(t)if(t.error){let{error:o,domain:r=null,url:a}=t,n=o.stack.split(`
`),i=n[0]+n[1];P("track",e,{url:a,domain:r,message:i})}else P("track",e,t)};var ha=({displayable:e})=>typeof e=="boolean"?e:!0,ct=e=>e&&e.filter(ha),Vh=e=>{let t={...e,coupons:ct(e.coupons)};if((t.couponCount&&e.coupons&&t.coupons?e.coupons.length-t.coupons.length:0)>0&&(t.couponCount=t.coupons?.length),t.autoFallback&&(t.autoFallback={...t.autoFallback,coupons:ct(t.autoFallback.coupons)},(t.autoFallback.autoFallbackCouponsCount&&e.autoFallback?.coupons&&t.autoFallback.coupons?e.autoFallback.coupons.length-t.autoFallback.coupons.length:0)>0&&(t.autoFallback.autoFallbackCouponsCount=t.autoFallback.coupons?.length)),t.result){let r=(t.result.allCoupons??[]).reduce((a,n)=>ha(n)?a:{...a,[n.code]:!0},{});t.result={...t.result,allCoupons:ct(t.result.allCoupons),coupons:ct(t.result.coupons)},t.result.coupons&&Object.keys(r).length>0&&(t.result.coupons=t.result.coupons.filter(({code:a})=>!(a in r)))}return t};function dt(e){return N("ext_coupons_skip_cashback_fallback")&&!lo()&&!!f.get("cashback")&&!f.get(["cashback","user","dismissed"])&&(e?.pageType==="cartPage"||e?.pageType==="checkoutPage")}var Su=new Set(["rosewholesale.com"]),Wt=(e,t)=>O.default.isUndefined(e)?t:e,xa=async e=>{e.pageReload&&await V("beforeReloadResult",JSON.stringify(e))};async function $t(e,t,o){let r;try{r=await _t.initSite(e,t,o)}catch(n){r={error:"Tigger internal error",message:n.message}}let a=f.get("deweyResult");if(r.error&&dt(a))throw P("trackError","couponsInitError","tigger"),he(a),new Error("coupon identifiers not found on page, loading cashback instead");return r}async function ya(e,t,o,r,a){let{allCoupons:n,autoFallback:i,automaticCouponsRun:s,cashback:u,couponRunId:p,isSiteHub:l,platform:c}=a,d=f.get("thirdPartyDetections"),h;try{h=await _t.tryCoupons(e,O.default.cloneDeep(t),O.default.get(o,"0"),r,{automaticCouponsRun:s,autoFallback:i,platform:c,isSiteHub:l,couponRunId:p,cashback:u,thirdPartyDetections:d,useSUCMultipleBanks:!0,multipleBankCouponList:o})}catch(y){throw h={error:"Tigger internal error",message:y.message},y}return O.default.assignInWith(h,{allCoupons:n,autoFallback:i,automaticCouponsRun:s,cashback:u,couponRunId:p,couponScriptType:"tigger",isSiteHub:l,originalCoupons:t,platform:c},Wt),xa(h),h}async function ba(e,t,o,r={}){let{allCoupons:a,autoFallback:n,automaticCouponsRun:i,cashback:s,couponRunId:u,isSiteHub:p}=r,l=new Date().getTime(),c,d=Su.has(e);try{if(o&&o.length)if({"zoro.com":!0,"focuscamera.com":!0,"chewy.com":!0}[e]){let _=O.default.findIndex(t,T=>T.code==="WIKIBUY"||T.code==="CAPITALONE");if(_>=0){let T=o.pop();t[_]=O.default.clone(T),t=t.concat(O.default.clone(o))}else t=t.concat(O.default.clone(o))}else t.pop(),t=t.concat(O.default.clone(o));let h={auto:i,thirdPartyDetections:f.get("thirdPartyDetections")},y=await no.run(t,h);c=new Date().getTime()-l;let w=O.default.cloneDeep(t),m=O.default.assignInWith({},y,{affiliateRedirect:d,allCoupons:a,autoFallback:n,automaticCouponsRun:i,cashback:s,couponRunId:u,couponScriptType:"asyncTigger",isSiteHub:p,originalCoupons:w,runTime:c,startTime:l},Wt);return xa(m),O.default.some(m.coupons,b=>!O.default.isNumber(b.savings)||O.default.isNaN(b.savings))&&(setTimeout(()=>{pt("asyncTiggerScriptError",{error:{stack:`Invalid savings
`},url:document.URL})}),m.errored=!0),m}catch(h){return pt("asyncTiggerScriptError",{error:h,url:document.URL}),O.default.assignInWith({},{startTime:l,runTime:new Date().getTime()-l,affiliateRedirect:d,allCoupons:a,originalCoupons:t,automaticCouponsRun:i,autoFallback:n,isSiteHub:p,cashback:s,couponRunId:u,couponScriptType:"asyncTigger",errored:!0},Wt)}}async function Ca(e){try{let t=await ge("beforeReloadResult"),{savings:o}=JSON.parse(t);return await se("beforeReloadResult"),{savings:o}}catch(t){pt("asyncPageDataError",{error:t,domain:e.domain})}}var wa=e=>$("activateCashback",e);var _a=e=>$("getUserCoupon",e);var Ta=e=>$("isUserCouponEligible",e);var ce=F(bt());function Vt(e,t){switch(e){case"petco.com":return ce.default.get(t,"pageData.order.total")>=3500;case"officedepot.com":{let o=ce.default.get(t,"pageData.order.total");return ce.default.get(t,"pageType")==="checkoutPage"&&o>=2500}case"staples.com":{let o=ce.default.get(t,"pageData.order.total");return(ce.default.get(t,"pageType")==="checkoutPage"||ce.default.get(t,"pageType")==="cartPage")&&o>=5e3}default:return!0}}var zt=e=>$("createShoppingTrip",e);var gt=!1,Pa,va=!0,Be,ae=f.select("couponView");function mt(){return I()==="ebay.com"&&f.get(["selfStandDown",`${I()}_${f.get("tabId")}`])}function Sa({throttleAutoCoup:e,fromAutoCoupImmediateNotif:t}={}){let o=I();de(o)?f.get("deweyResult","pageType")==="checkoutPage"&&je({domain:"amazon.com_checkout",message:"triedCodes"}):je({domain:o,throttleAutoCoup:e,fromAutoCoupImmediateNotif:t,message:"triedCodes"})}function Au(){let e=I();if(de(e)){if(f.get("deweyResult","pageType")==="checkoutPage")return null;let t=g.default.get(document.querySelector("#nav-link-accountList .nav-line-1, #nav-link-yourAccount .nav-line-1"),"textContent");return!!(t&&t.match(/hello/i)&&!t.match(/sign in/i))}return null}function qt(){let e=f.get("platform"),t=ae.get("result");if(sessionStorage.getItem("__wb_same_tab_auto")||sessionStorage.getItem("__r_reload_auto")||!t&&f.get(["couponView","autoCoupThrottled"]))return!1;let o=f.get("siteAPIData"),r=g.default.get(o,"siteData.coupons.type");if(r==="eeyore"||(f.get(["domainLists","autoCoupTestList"])??[]).includes(I())||N("mag_a_coup_test")&&e==="Magento")return!1;let n=r==="roo",i=I(),s=f.get("couponView"),u=f.get("deweyResult")||{},p=g.default.get(s,"autoCoupConfig.enabled")&&(g.default.get(s,"result.automaticCouponsRun")||!g.default.get(s,"result"))&&g.default.get(s,"initOrigin")!=="sitehub",l=!1;if(p){if(de(i)){let c=f.get("deweyResult","pageType");l=Au(),c==="checkoutPage"&&(l=!0)}else l=!0;n&&z.dom.getRooPreapplieds(u)&&(l=!1)}return l}function zx(){let e=!!f.get(["cashbackView","reward","amount"]),t=N("ac_elasticity_1"),o=f.get(["couponView","partnerGroupsList"])?.groupA?.includes(I());return e&&t&&o||e&&!t}function Da(){let e=f.get("siteAPIData");return!!g.default.get(e,"siteData.cashback.reward")||!g.default.get(e,"siteData.coupons.ignoreAffiliate")}function Iu(){let e=f.get("siteAPIData"),t=g.default.get(e,"siteData.coupons.type"),o=qt(),r=g.default.get(e,"siteData.coupons.stats.fbRate");return!!(N("disable_tc_notifs")&&o&&!Da()&&t!=="eeyore"&&r<.25)}function Kx(e,t){let o=JSON.parse(sessionStorage.getItem("__s_sitehub_try_codes")),r=qt();if(o||t===void 0&&r||t)return!0;let a=!0;if(N("ext_ae_api_v_2")){let n=f.get(["couponView","elasticityUserDomain"]);n&&!n?.i&&(a=n.s)}return!(Da()&&!a&&(!r||!e))}function qx({result:e,isFromNonAutoRun:t}={}){let o=f.get("cashbackView"),r=!!g.default.get(o,"reward.amount");Iu()&&r&&(t||e&&e.savings<=0)&&(f.select("couponView").set("isQuietSavingsMiss",!0),Eu())}function Eu(){let e=f.get("deweyResult");f.get("cashbackVisible")&&f.set("cashbackVisible",!1),he(e)}var Jx=({label:e,clickId:t,couponRunId:o}={})=>{let r=Re(t),a=!!g.default.get(f.get("cashbackView"),"reward.amount"),n=f.get(["couponView","hasDeferredCouponRewards"]);P("trackClick","tryCodesButton","try codes",{clickId:t,couponRunId:o,redirectId:r,cashback:a}),po("couponNotification",e,"cta","primary",{redirect:!0,cashback:a&&!n,clickId:t,redirectId:r,couponRunId:o})};async function Jt(e,t,o={}){let r=o.eligible,a=g.default.get(t,"siteData.coupons.userCouponsEnabled"),i=(r||a)&&Vt(e,f.get("deweyResult"))?await _a({SITE_API_V3:vt,domain:e}):null;return i&&P("track","userCouponReceived",{currentLocation:g.default.pick(window.location,["hash","host","hostname","href","origin","pathname","port","search"]),coupon:JSON.stringify(i.map(s=>s.code)),userCouponObj:JSON.stringify(i)}),i}function Ru(){return!ae.get("disableAffiliate")&&!f.get(["offers","coupons","disableAffiliate"])&&!me()&&!(f.get(["couponsAffiliateDisabledSites",`${I()}_${f.get("tabId")}`])>ne())&&!(f.get(["couponsAffiliateDisabledSites",`${I()}_all`])>ne())}async function Ue(e,t={}){let{fromAutoRun:o,autoSavings:r,clickEvent:a}=t;if(Ru())try{let i,s=f.get(["couponView","hasDeferredCouponRewards"])&&(!N("ext_deferred_coupon_rewards_v_2")||r),u={autoRedirect:!N("ext_deferred_coupon_rewards_v_2"),destDomain:I(),channel:"coupons",subExperience:"coupons",credits:mt()||s?!1:!!f.get("cashback"),redirectId:Re(e),vendorMetaId:mt()?void 0:f.get("cashback","id"),token:mt()?void 0:f.get("cashback","token"),clickEvent:a||o?"couponsModalClickCta":"tryCodesButton"},p=f.get("cashback","redirectUrl");if(p)i=Ct(p,{subExperience:u.subExperience,redirectId:u.redirectId,clickEvent:u.clickEvent});else if(i=St({params:u}),!u.autoRedirect){let l=await zt(i);f.set(["couponView","tripId"],l.tripId),i=l.redirectUrl}i&&mo({url:i})}catch{}}function Qx({clickId:e,fromAutoRun:t,autoSavings:o}={}){let r=e||Ie.default.v4().replace(/-/g,"");ae.get("disableAffiliate")||Ue(r,{fromAutoRun:t,autoSavings:o})}async function Xx(e,{clickId:t,autoFallback:o,fromAutoRun:r,fromActivateRewards:a,autoSavings:n,codeEntered:i,clickEvent:s,couponRunId:u,shouldLoadEmailCreateAccountNotification:p}={}){let l=f.get("couponNotif")==="siteHub",c=I();f.set(["couponsAffiliateDisabledSites",`${c}_${f.get("tabId")}`],Ee(to(new Date,30)));let d=f.get(["couponView","hasDeferredCouponRewards"])&&(!N("ext_deferred_coupon_rewards_v_2")||n),h=e&&d&&!a&&(!r||!i)&&!l;h&&(e=!1);let y=[V("affiliateRedirect",JSON.stringify({redirected:!0,location:location.href,couponRunId:u,autoFallback:o,isSiteHub:l}))];if(p&&y.push(V("emailCreateAccount",JSON.stringify({shouldLoadNotification:!0}))),await J.default.all(y),e||h){let C={programId:f.get(["siteAPIData","programId"]),creditsDeferred:h};wa(C)}let w=t||Ie.default.v4().replace(/-/g,"");n||localStorage.setItem("__wb_redirecting",JSON.stringify({sameTabAuto:!0,isSiteHub:l,clickEvent:s}));let m=f.get("couponsConfig"),b=g.default.get(m,"affiliateLinkCurrentTab")&&g.default.get(m,"autoCoupConfig.enabled");(qt()||l&&b)&&!n&&sessionStorage.setItem("__wb_same_tab_auto",JSON.stringify({sameTabAuto:!0,isSiteHub:l}));let _=e?"cashback":"coupons",T=await co(c);T&&(_="cashback-ims");let S={autoRedirect:!N("ext_deferred_coupon_rewards_v_2"),destUrl:location.href,channel:_,subExperience:"coupons",credits:e,redirectId:Re(w),sameTab:!0,vendorMetaId:e?f.get("cashback","id"):null,token:e?f.get("cashback","token"):null,clickEvent:r?"couponsModalClickCta":a?"activateRewardsButton":"tryCodesButton",...!T&&{destDomain:f.get("siteAPIData","tld")}},A=f.get("cashback","redirectUrl");if(A)A=Ct(A,{subExperience:S.subExperience,redirectId:S.redirectId,sameTab:S.sameTab,clickEvent:S.clickEvent}),window.location.href=A;else{let C=St({params:S});if(S.autoRedirect)window.location.href=C;else{let x=await zt(C);V("tripId",x.tripId),window.location.href=x.redirectUrl}}}function Pu(){let e,t;sessionStorage.getItem("__wb_same_tab_auto")?e=JSON.parse(sessionStorage.getItem("__wb_same_tab_auto")):sessionStorage.getItem("__wb_redirecting")&&(t=JSON.parse(sessionStorage.getItem("__wb_redirecting")));let o=f.get("couponNotif")==="siteHub"||g.default.get(e,"isSiteHub")||g.default.get(t,"isSiteHub"),r=g.default.get(t,"clickEvent"),a=!o&&(g.default.get(e,"sameTabAuto")||t);return{sameTabAuto:e,redirecting:t,tryCouponsSameTabRedirect:a,isSiteHub:o,clickEvent:r}}async function Yx({disableAffiliate:e,automaticCouponsRun:t,coupons:o,autoFallback:r,passedInClickId:a,couponRunId:n,cashback:i,isAsyncTigger:s}){let{sameTabAuto:u,isSiteHub:p}=Pu();ro("TRY CODES"),gt=!0;let l=a||Ie.default.v4().replace(/-/g,"");n=n||Ie.default.v4(),r=r||u&&!p,sessionStorage.getItem("__wb_same_tab_auto")&&sessionStorage.removeItem("__wb_same_tab_auto");let c=I();e||Ue(l),P("track","tryCoupons",{clickId:t?null:l,redirectId:t?null:Re(l),couponRunId:n,cashback:i,triggerType:xe({automaticCouponsRun:t,autoFallback:r,isSiteHub:p}),couponScriptType:s?"asyncTigger":"tigger",currentLocation:g.default.pick(window.location,["hash","host","hostname","href","origin","pathname","port","search"])});let d=await fe(c),h=f.get(["userCouponChecks",c]);await Q.run({callSource:"coupons_start"});let y=Date.now(),w=g.default.get(d,"siteData.coupons.shopify")||f.get("platform")==="Shopify",m=[],b=await Jt(c,d,h);b&&(m=m.concat(b));let _=f.get(["platform"]),T=w,S=_==="Magento",A=_==="WooCommerce",C=_==="BigCommerce",x=_==="Squarespace",M=ae.get("coupons"),R;if(s||T||S||A||C||x?R=await ba(w?"shopify.com":I(),o,m,{automaticCouponsRun:t,autoFallback:r,platform:_,isSiteHub:p,couponRunId:n,cashback:i,allCoupons:M})||{}:R=await ya(w?"shopify.com":I(),o,m,je,{automaticCouponsRun:t,autoFallback:r,platform:_,isSiteHub:p,couponRunId:n,cashback:i,allCoupons:M})||{},g.default.get(R,"bestCoupon"))try{let B=g.default.get(R,"bestCoupon.code");B&&(Pa=B.toLowerCase())}catch{}if(R.duration=new Date().getTime()-y,R){if(R.pageReload){await V("couponRun",JSON.stringify({clickId:l,result:R}));let B=f.get(["couponView","tripId"]);return B&&await V("tripId",B),{pageReload:!0}}return await ht({result:R,clickId:l}),R}return{finishWithoutResult:!0}}function ht({result:e,clickId:t}){sessionStorage.getItem("__wb_same_tab_auto")&&sessionStorage.removeItem("__wb_same_tab_auto"),ae.set("resultTemp",g.default.assign(e,{clickId:t}));let o=f.get("siteAPIData"),r=!!g.default.get(o,"siteData.cashback.reward");return e&&e.automaticCouponsRun&&r?Sa({throttleAutoCoup:!0}):Sa(),gt=!1,Q.run({callSource:"coupons_end",siteData:f.get("siteAPIData").siteData})}function Du(){let e="Capital One Shopping tests codes in seconds.";return f.get(["siteAPIData","siteData","coupons","stats","fbRate"])<=.05?e="Limited savings available, but it's still worth a try!":N("ext_shorten_notif_text")&&(e="Test codes in seconds."),e}function Zx(){let e=I(),t=null;return de(e)||(t=Du()),t}async function ey(){P("track","viewAllCodes",{currentLocation:g.default.pick(window.location,["hash","host","hostname","href","origin","pathname","port","search"])})}async function ty(e,t={}){let{origin:o,clickEvent:r}=t,a=Ie.default.v4().replace(/-/g,""),n=ae.get("disableAffiliate"),i=f.get("siteAPIData","siteData","coupons","ignoreAffiliate"),s=f.get(["couponView","hasDeferredCouponRewards"]);(n===!1||n===void 0&&!i)&&!s&&Ue(a,{clickEvent:r}),P("trackClick","copyCouponCode",e,{clickId:a,origin:o})}var ku=async({siteAPIData:e,domain:t}={})=>{let o=g.default.get(e,"siteData.coupons.script"),r=g.default.get(e,"siteData.coupons.type"),a=f.get("platform");a&&!o&&(o=g.default.get(await io.default.getSiteData(a,"roo"),"script")),o&&(t==="etsy.com"?Oa(o):de(t)?Fu(o):r!=="roo"&&Nu(o))};async function oy(e={}){let t=!1,o,r=I(),{experience:a}=e,n=await fe(r),{coupons:i,ignoreAffiliate:s}=g.default.get(n,"siteData.coupons",{}),u=f.get(["userCouponChecks",r]),p=i&&i.length&&mt(),l=!1;(s||f.get(["couponsAffiliateDisabledSites",`${r}_${f.get("tabId")}`])>ne()||f.get(["couponsAffiliateDisabledSites",`${r}_all`])>ne())&&!p&&(ae.set("disableAffiliate",!0),l=!0);let c=i&&i.length;await ku({siteAPIData:n,domain:r});let d,h,y,w=500,m=f.get("platform"),b=await Uu(n,r,u),_=g.default.get(n,"siteData.coupons.shopify")||m==="Shopify";for(;!y;){let x=await $t(_?"shopify.com":r,i,{platform:m,experience:b||a});d=x.estimatedRunTime,h=x.pageCoupons,y=d!==void 0,x.error?await ka(w,o):clearInterval(o),w*=2,w>5e3&&(w=5e3)}Be=window.location.href,va&&(Q.emitter.on("result",Ou),va=!1);let T,S=me()&&!p;if(d){P("track","couponCheck"),S&&(l=!0);try{let x=await ge("couponRun");if(T=JSON.parse(x),T){let M={domain:r},{savings:R,originalTotal:B}=await Ca(M);T.result.savings=R,T.result.originalTotal=B,delete T.result.pageReload,await se("couponRun")}}catch{se("couponRun")}h&&(i=[],c=h),t={coupons:i,estimatedRunTime:d,disableAffiliate:l,couponCount:c,affiliateLinkCurrentTab:g.default.get(n,"meta.affiliate_link_current_tab"),pageWasReloaded:!!T,standDown:S,standDownOverride:p,autoCoupConfig:g.default.get(n,"siteData.coupons.config.auto_coup")}}let A=f.get("couponsConfig");return g.default.get(A,"pageWasReloaded")&&(t.pageWasReloaded=!0),f.set("couponsConfig",t),T&&ht(T),t}var Ne=500;async function Ou(e){g.default.get(e,"callSource")==="internal"&&g.default.get(e,"deweyTrigger.trigger")==="url"&&(Ne=500,Be&&Be!==g.default.get(e,"url")&&(Be=null,f.get("shouldShowSPAPrompt")||f.set("shouldHidePrompt",!0),await Mu(),f.set("shouldShowSPAPrompt",!0)))}async function Mu(){let e,t=I(),o=await fe(t),{coupons:r}=g.default.get(o,"siteData.coupons",{}),a,n,i=f.get("platform");for(;!n;){let s=await $t(g.default.get(o,"siteData.coupons.shopify")?"shopify.com":t,r,{platform:i});a=s.estimatedRunTime,n=a!==void 0,s.error?await ka(Ne,e):clearInterval(e),Ne*=2,Ne>5e3&&(Ne=5e3)}Be=window.location.href,f.unset("shouldHidePrompt")}async function ka(e,t){return new J.default(o=>{t=setTimeout(o,e)})}async function Aa(e){let t=g.default.get(e,"siteData.coupons.identifiers"),o=document;return o.deweyParser=Ae.default,o.html=document.documentElement.innerHTML,await Q.evaluateIdentifierTree(t,o)}async function ry(){let e=I(),t=await fe(e);await Aa(t)||await new J.default((p,l)=>{Q.emitter.on("result",async c=>{let d=await Aa(t);d&&p(d)})});let{coupons:r,ignoreAffiliate:a}=g.default.get(t,"siteData.coupons",{}),n=!1;if((a||f.get(["couponsAffiliateDisabledSites",`${e}_${f.get("tabId")}`])>ne()||f.get(["couponsAffiliateDisabledSites",`${e}_all`])>ne())&&(ae.set("disableAffiliate",!0),n=!0),me())return n=!0,!1;let i=r&&r.length,s={coupons:r,estimatedRunTime:0,disableAffiliate:n,couponCount:i,pageWasReloaded:!1,noScript:!0};return f.set("couponsConfig",s),s}function Kt(e,t){if(e){if(e.matches(t))return e;let o=e.querySelector(t);return o||(e.parentElement?Kt(e.parentElement,t):null)}}async function Lu(e,t,o){if(!gt){let r;if(o?(r=Kt(o,t.promoInputSelector),setTimeout(()=>Oa(t),1500)):r=z.dom.getPromoCodeEl(t),r){let a=r.value;if(g.default.get(a,"length")&&a.toLowerCase()!==Pa){let n="userContributedCode";await De({action:"getHoneyState",comp:"honey"})&&(n="userContributedCodeH");let s;try{let u=t.promoRemoveAction;s=Kt(o,u).textContent.trim()}catch{}P("track",n,{code:a,seller:s})}}}}async function Oa(e){try{if(e.promoApplyAction){let t=document.querySelectorAll(e.promoApplyAction);g.default.forEach(t,o=>{o.addEventListener("click",r=>Lu(r,e,o))})}}catch{}}function Ia(){return Array.from((0,Ae.default)('[name="dupOrderCheckArgs"]')).reduce((t,o)=>{let r={},a=o.value.split("|");r.asin=a[0],r.sellerId=a[3];let n=(0,Ae.default)(o).prev();return r.isPromoApplied=!!n.find(':contains("See order summary for discounts applied")').length||!!n.find(':contains("discount applied")').length,r.price=Tt(n.find(".a-color-price .a-text-bold").text()),t[r.asin]=r,t},{})}async function Fu(e){Ea(e);let t=window.location.href;setInterval(async()=>{let o=window.location.href;t!==o&&(t=o,await J.default.delay(1e3),Ea(e))},500)}async function Ea(e){function t(){return Tt(z.dom.getElement(e.cartTotalSelector).innerText)}if(e.promoApplyAction){let o=z.dom.getElement(e.promoApplyAction);if(o){let r;o.addEventListener("click",async a=>{try{let i=z.dom.getPromoCodeEl(e).value;if(i){clearInterval(r);let s=t(),u=Ia();await J.default.delay(500),await J.default.race([new J.default(m=>{try{r=setInterval(()=>{try{!(0,Ae.default)(".loading-spinner-blocker:visible").length&&!(0,Ae.default)(".section-overwrap:visible").length&&m()}catch{}},10)}catch{}}),J.default.delay(2e4)]),clearInterval(r);let p=t(),l=Ia(),c=Object.keys(u).reduce((m,b)=>!u[b].isPromoApplied&&l[b]&&l[b].isPromoApplied?b:m,""),d=l[c],h,y,w;d&&(h=d.sellerId,y=u[c].price||0,w=c),P("track","userContributedCode",{code:i,savings:(s||0)-(p||0),productPrice:y,seller:h,product:w})}}catch{}})}}}async function Ra(e){if(!gt){let t=z.dom.getPromoCodeEl(e);if(t){let o=t.value;if(g.default.get(o,"length")){let r="userContributedCode";await De({action:"getHoneyState",comp:"honey"})&&(r="userContributedCodeH"),P("track",r,{code:o})}}}}async function Nu(e){try{if(e.promoApplyAction){let t=z.dom.getElement(e.promoApplyAction);t&&t.addEventListener("click",async r=>{await Ra(e)});let o=z.dom.getPromoCodeEl(e);o&&o.addEventListener("keydown",async r=>{if(r.code==="Enter"){let a=Ra.bind(e);g.default.debounce(a,200)}})}}catch{}}var ay=()=>"No Thanks, Activate Rewards",ny=({couponCount:e,isTryCodesButton:t})=>t?"Try Codes":`Found ${e} ${e===1?"code":"codes"}`,Bu=["petco.com","officedepot.com","staples.com","walmart.com"];async function Uu(e,t,o){let r=o&&o.eligible;if(o||(r=g.default.get(e,"siteData.coupons.userCouponsEnabled")?await Ta({SITE_API_V3:vt,domain:t}):void 0),r)return Bu.includes(t)?"giftcard":"user_coupons"}var Qt=f.select("couponView"),z=new Fe(so,{hasFeature:N,sendMetric:P,currentDomain:I,dropCookie:Ue,getSingleUseCouponsIfValid:Jt,siteCache:fe,handleResult:ht,shouldCouponsStandDown:me,compStateCache:De,domainLocalStorageGet:ge,domainLocalStorageSet:V,domainLocalStorageRemove:se,getFromState:e=>f.get(e),onIsNotCouponPage:()=>{let e=f.get("deweyResult");dt(e)&&(P("trackError","couponsInitError","roo"),he(e))},onTryCode:e=>Qt.set("currentCouponCode",e),disableAffiliate:()=>Qt.set("disableAffiliate",!0),setRunning:e=>Qt.set("rooRunning",e),setInState:(e,t)=>f.set(e,t),startDeweyRun:()=>Q.run({callSource:"coupons_start"})});z.addListener(e=>$("rooPouch",e));var Ma=F(Wa());var Xt=F(fo()),xt,yt=class extends Ma.Component{constructor(...t){super(...t),this.state={progress:0}}componentWillMount(){this.setInt(this.props.estimatedDuration)}setInt(t,o=100){clearInterval(this.intervalId),this.intervalId=setInterval(()=>{this.props.pause||(this.state.progress<100?this.setState({progress:this.state.progress+1}):clearInterval(this.intervalId))},Math.round(t/o)),xt=this.intervalId}componentWillUnmount(){clearInterval(this.intervalId)}componentWillReceiveProps(t){!this.props.complete&&t&&t.complete&&(clearInterval(this.intervalId),this.setState({progress:100})),t.estimatedTimeLeft?(xt&&clearInterval(xt),this.setInt(t.estimatedTimeLeft,100-this.state.progress)):t.estimatedDuration&&(clearInterval(xt),this.setInt(t.estimatedDuration,100-this.state.progress))}render(){let{progress:t}=this.state,o=10+t/100*90,r=Math.min(o,100),a=this.props.rounded?"rounded":"";return(0,Xt.jsx)("div",{id:"progress-bar-wrapper",className:`${a} progress-bar`,children:(0,Xt.jsx)("div",{className:"progress",style:{width:`${r}%`}})})}};yt.defaultProps={estimatedDuration:6e4};var Ey=yt;export{xe as a,ct as b,Vh as c,dt as d,Ca as e,z as f,Sa as g,Au as h,qt as i,zx as j,Iu as k,Kx as l,qx as m,Jx as n,Ue as o,Qx as p,Xx as q,Yx as r,ht as s,Zx as t,ey as u,ty as v,ku as w,oy as x,Aa as y,ry as z,ay as A,ny as B,Ey as C};
/*! Bundled license information:

lodash-es/lodash.js:
  (**
   * @license
   * Lodash (Custom Build) <https://lodash.com/>
   * Build: `lodash modularize exports="es" -o ./`
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)
*/
