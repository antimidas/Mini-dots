var Ar=Object.defineProperty;var fr=(j,_,R)=>_ in j?Ar(j,_,{enumerable:!0,configurable:!0,writable:!0,value:R}):j[_]=R;var O=(j,_,R)=>fr(j,typeof _!="symbol"?_+"":_,R);var content=(function(){"use strict";var Te,Pe;function j(e){return e}function _(e,s=0,{start:r=!0,middle:n=!0,once:t=!1}={}){let c=r,i=0,u,o=!1;function l(...m){if(o)return;const p=Date.now()-i;i=Date.now(),r&&n&&p>=s&&(c=!0),c?(c=!1,e.apply(this,m),t&&l.cancel()):(n&&p<s||!n)&&(clearTimeout(u),u=setTimeout(()=>{i=Date.now(),e.apply(this,m),t&&l.cancel()},n?s-p:s))}return l.cancel=()=>{clearTimeout(u),o=!0},l}function R(e,s=0,{start:r=!1,middle:n=!1,once:t=!1}={}){return _(e,s,{start:r,middle:n,once:t})}const Ie=[EvalError,RangeError,ReferenceError,SyntaxError,TypeError,URIError,globalThis.DOMException,globalThis.AssertionError,globalThis.SystemError].filter(Boolean).map(e=>[e.name,e]),Me=new Map(Ie);class Q extends Error{constructor(r){super(Q._prepareSuperMessage(r));O(this,"name","NonError")}static _prepareSuperMessage(r){try{return JSON.stringify(r)}catch{return String(r)}}}const Oe=[{property:"name",enumerable:!1},{property:"message",enumerable:!1},{property:"stack",enumerable:!1},{property:"code",enumerable:!0},{property:"cause",enumerable:!1}],X=new WeakSet,Ne=e=>{X.add(e);const s=e.toJSON();return X.delete(e),s},me=e=>Me.get(e)??Error,ee=({from:e,seen:s,to:r,forceEnumerable:n,maxDepth:t,depth:c,useToJSON:i,serialize:u})=>{if(!r)if(Array.isArray(e))r=[];else if(!u&&Ae(e)){const l=me(e.name);r=new l}else r={};if(s.push(e),c>=t)return r;if(i&&typeof e.toJSON=="function"&&!X.has(e))return Ne(e);const o=l=>ee({from:l,seen:[...s],forceEnumerable:n,maxDepth:t,depth:c,useToJSON:i,serialize:u});for(const[l,m]of Object.entries(e)){if(m&&m instanceof Uint8Array&&m.constructor.name==="Buffer"){r[l]="[object Buffer]";continue}if(m!==null&&typeof m=="object"&&typeof m.pipe=="function"){r[l]="[object Stream]";continue}if(typeof m!="function"){if(!m||typeof m!="object"){try{r[l]=m}catch{}continue}if(!s.includes(e[l])){c++,r[l]=o(e[l]);continue}r[l]="[Circular]"}}for(const{property:l,enumerable:m}of Oe)typeof e[l]<"u"&&e[l]!==null&&Object.defineProperty(r,l,{value:Ae(e[l])?o(e[l]):e[l],enumerable:n?!0:m,configurable:!0,writable:!0});return r};function $e(e,s={}){const{maxDepth:r=Number.POSITIVE_INFINITY,useToJSON:n=!0}=s;return typeof e=="object"&&e!==null?ee({from:e,seen:[],forceEnumerable:!0,maxDepth:r,depth:0,useToJSON:n,serialize:!0}):typeof e=="function"?`[Function: ${e.name||"anonymous"}]`:e}function je(e,s={}){const{maxDepth:r=Number.POSITIVE_INFINITY}=s;if(e instanceof Error)return e;if(Re(e)){const n=me(e.name);return ee({from:e,seen:[],to:new n,maxDepth:r,depth:0,serialize:!1})}return new Q(e)}function Ae(e){return!!e&&typeof e=="object"&&"name"in e&&"message"in e&&"stack"in e}function Re(e){return!!e&&typeof e=="object"&&"message"in e&&!Array.isArray(e)}var Le=Object.defineProperty,Fe=Object.defineProperties,De=Object.getOwnPropertyDescriptors,fe=Object.getOwnPropertySymbols,Be=Object.prototype.hasOwnProperty,qe=Object.prototype.propertyIsEnumerable,de=(e,s,r)=>s in e?Le(e,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[s]=r,pe=(e,s)=>{for(var r in s||(s={}))Be.call(s,r)&&de(e,r,s[r]);if(fe)for(var r of fe(s))qe.call(s,r)&&de(e,r,s[r]);return e},be=(e,s)=>Fe(e,De(s)),Ue=(e,s,r)=>new Promise((n,t)=>{var c=o=>{try{u(r.next(o))}catch(l){t(l)}},i=o=>{try{u(r.throw(o))}catch(l){t(l)}},u=o=>o.done?n(o.value):Promise.resolve(o.value).then(c,i);u((r=r.apply(e,s)).next())});function Ve(e){let s,r={};function n(){Object.entries(r).length===0&&(s==null||s(),s=void 0)}let t=Math.floor(Math.random()*1e4);function c(){return t++}return{sendMessage(i,u,...o){return Ue(this,null,function*(){var l,m,p,k;const $={id:c(),type:i,data:u,timestamp:Date.now()},T=(m=yield(l=e.verifyMessageData)==null?void 0:l.call(e,$))!=null?m:$;(p=e.logger)==null||p.debug(`[messaging] sendMessage {id=${T.id}} ─ᐅ`,T,...o);const I=yield e.sendMessage(T,...o),{res:b,err:x}=I??{err:new Error("No response")};if((k=e.logger)==null||k.debug(`[messaging] sendMessage {id=${T.id}} ᐊ─`,{res:b,err:x}),x!=null)throw je(x);return b})},onMessage(i,u){var o,l,m;if(s==null&&((o=e.logger)==null||o.debug(`[messaging] "${i}" initialized the message listener for this context`),s=e.addRootListener(p=>{var k,$;if(typeof p.type!="string"||typeof p.timestamp!="number"){if(e.breakError)return;const b=Error(`[messaging] Unknown message format, must include the 'type' & 'timestamp' fields, received: ${JSON.stringify(p)}`);throw(k=e.logger)==null||k.error(b),b}($=e==null?void 0:e.logger)==null||$.debug("[messaging] Received message",p);const T=r[p.type];if(T==null)return;const I=T(p);return Promise.resolve(I).then(b=>{var x,H;return(H=(x=e.verifyMessageData)==null?void 0:x.call(e,b))!=null?H:b}).then(b=>{var x;return(x=e==null?void 0:e.logger)==null||x.debug(`[messaging] onMessage {id=${p.id}} ─ᐅ`,{res:b}),{res:b}}).catch(b=>{var x;return(x=e==null?void 0:e.logger)==null||x.debug(`[messaging] onMessage {id=${p.id}} ─ᐅ`,{err:b}),{err:$e(b)}})})),r[i]!=null){const p=Error(`[messaging] In this JS context, only one listener can be setup for ${i}`);throw(l=e.logger)==null||l.error(p),p}return r[i]=u,(m=e.logger)==null||m.log(`[messaging] Added listener for ${i}`),()=>{delete r[i],n()}},removeAllListeners(){Object.keys(r).forEach(i=>{delete r[i]}),n()}}}function We(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var W={exports:{}},ze=W.exports,he;function Ge(){return he||(he=1,(function(e,s){(function(r,n){n(e)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:ze,function(r){var n,t;if(!((t=(n=globalThis.chrome)==null?void 0:n.runtime)!=null&&t.id))throw new Error("This script should only be loaded in a browser extension.");if(typeof globalThis.browser>"u"||Object.getPrototypeOf(globalThis.browser)!==Object.prototype){const c="The message port closed before a response was received.",i=u=>{const o={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(o).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class l extends WeakMap{constructor(g,f=void 0){super(f),this.createItem=g}get(g){return this.has(g)||this.set(g,this.createItem(g)),super.get(g)}}const m=a=>a&&typeof a=="object"&&typeof a.then=="function",p=(a,g)=>(...f)=>{u.runtime.lastError?a.reject(new Error(u.runtime.lastError.message)):g.singleCallbackArg||f.length<=1&&g.singleCallbackArg!==!1?a.resolve(f[0]):a.resolve(f)},k=a=>a==1?"argument":"arguments",$=(a,g)=>function(d,...y){if(y.length<g.minArgs)throw new Error(`Expected at least ${g.minArgs} ${k(g.minArgs)} for ${a}(), got ${y.length}`);if(y.length>g.maxArgs)throw new Error(`Expected at most ${g.maxArgs} ${k(g.maxArgs)} for ${a}(), got ${y.length}`);return new Promise((v,E)=>{if(g.fallbackToNoCallback)try{d[a](...y,p({resolve:v,reject:E},g))}catch(A){console.warn(`${a} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,A),d[a](...y),g.fallbackToNoCallback=!1,g.noCallback=!0,v()}else g.noCallback?(d[a](...y),v()):d[a](...y,p({resolve:v,reject:E},g))})},T=(a,g,f)=>new Proxy(g,{apply(d,y,v){return f.call(y,a,...v)}});let I=Function.call.bind(Object.prototype.hasOwnProperty);const b=(a,g={},f={})=>{let d=Object.create(null),y={has(E,A){return A in a||A in d},get(E,A,S){if(A in d)return d[A];if(!(A in a))return;let h=a[A];if(typeof h=="function")if(typeof g[A]=="function")h=T(a,a[A],g[A]);else if(I(f,A)){let B=$(A,f[A]);h=T(a,a[A],B)}else h=h.bind(a);else if(typeof h=="object"&&h!==null&&(I(g,A)||I(f,A)))h=b(h,g[A],f[A]);else if(I(f,"*"))h=b(h,g[A],f["*"]);else return Object.defineProperty(d,A,{configurable:!0,enumerable:!0,get(){return a[A]},set(B){a[A]=B}}),h;return d[A]=h,h},set(E,A,S,h){return A in d?d[A]=S:a[A]=S,!0},defineProperty(E,A,S){return Reflect.defineProperty(d,A,S)},deleteProperty(E,A){return Reflect.deleteProperty(d,A)}},v=Object.create(a);return new Proxy(v,y)},x=a=>({addListener(g,f,...d){g.addListener(a.get(f),...d)},hasListener(g,f){return g.hasListener(a.get(f))},removeListener(g,f){g.removeListener(a.get(f))}}),H=new l(a=>typeof a!="function"?a:function(f){const d=b(f,{},{getContent:{minArgs:0,maxArgs:0}});a(d)}),_e=new l(a=>typeof a!="function"?a:function(f,d,y){let v=!1,E,A=new Promise(V=>{E=function(P){v=!0,V(P)}}),S;try{S=a(f,d,E)}catch(V){S=Promise.reject(V)}const h=S!==!0&&m(S);if(S!==!0&&!h&&!v)return!1;const B=V=>{V.then(P=>{y(P)},P=>{let ce;P&&(P instanceof Error||typeof P.message=="string")?ce=P.message:ce="An unexpected error occurred",y({__mozWebExtensionPolyfillReject__:!0,message:ce})}).catch(P=>{console.error("Failed to send onMessage rejected reply",P)})};return B(h?S:A),!0}),cr=({reject:a,resolve:g},f)=>{u.runtime.lastError?u.runtime.lastError.message===c?g():a(new Error(u.runtime.lastError.message)):f&&f.__mozWebExtensionPolyfillReject__?a(new Error(f.message)):g(f)},Ce=(a,g,f,...d)=>{if(d.length<g.minArgs)throw new Error(`Expected at least ${g.minArgs} ${k(g.minArgs)} for ${a}(), got ${d.length}`);if(d.length>g.maxArgs)throw new Error(`Expected at most ${g.maxArgs} ${k(g.maxArgs)} for ${a}(), got ${d.length}`);return new Promise((y,v)=>{const E=cr.bind(null,{resolve:y,reject:v});d.push(E),f.sendMessage(...d)})},mr={devtools:{network:{onRequestFinished:x(H)}},runtime:{onMessage:x(_e),onMessageExternal:x(_e),sendMessage:Ce.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:Ce.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},ue={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return o.privacy={network:{"*":ue},services:{"*":ue},websites:{"*":ue}},b(u,mr,o)};r.exports=i(chrome)}else r.exports=globalThis.browser})})(W)),W.exports}var Je=Ge();const z=We(Je);function Ke(e){return Ve(be(pe({},e),{sendMessage(s,r){if(r==null)return z.runtime.sendMessage(s);const n=typeof r=="number"?{tabId:r}:r;return z.tabs.sendMessage(n.tabId,s,n.frameId!=null?{frameId:n.frameId}:void 0)},addRootListener(s){const r=(n,t)=>s(typeof n=="object"?be(pe({},n),{sender:t}):n);return z.runtime.onMessage.addListener(r),()=>z.runtime.onMessage.removeListener(r)}}))}const{sendMessage:Ye}=Ke();var C;function ye(e){return{lang:(e==null?void 0:e.lang)??(C==null?void 0:C.lang),message:e==null?void 0:e.message,abortEarly:(e==null?void 0:e.abortEarly)??(C==null?void 0:C.abortEarly),abortPipeEarly:(e==null?void 0:e.abortPipeEarly)??(C==null?void 0:C.abortPipeEarly)}}var re;function Ze(e){return re==null?void 0:re.get(e)}var se;function He(e){return se==null?void 0:se.get(e)}var ne;function Qe(e,s){var r;return(r=ne==null?void 0:ne.get(e))==null?void 0:r.get(s)}function xe(e){var r,n;const s=typeof e;return s==="string"?`"${e}"`:s==="number"||s==="bigint"||s==="boolean"?`${e}`:s==="object"||s==="function"?(e&&((n=(r=Object.getPrototypeOf(e))==null?void 0:r.constructor)==null?void 0:n.name))??"null":s}function M(e,s,r,n,t){const c=t&&"input"in t?t.input:r.value,i=(t==null?void 0:t.expected)??e.expects??null,u=(t==null?void 0:t.received)??xe(c),o={kind:e.kind,type:e.type,input:c,expected:i,received:u,message:`Invalid ${s}: ${i?`Expected ${i} but r`:"R"}eceived ${u}`,requirement:e.requirement,path:t==null?void 0:t.path,issues:t==null?void 0:t.issues,lang:n.lang,abortEarly:n.abortEarly,abortPipeEarly:n.abortPipeEarly},l=e.kind==="schema",m=(t==null?void 0:t.message)??e.message??Qe(e.reference,o.lang)??(l?He(o.lang):null)??n.message??Ze(o.lang);m!==void 0&&(o.message=typeof m=="function"?m(o):m),l&&(r.typed=!1),r.issues?r.issues.push(o):r.issues=[o]}function N(e){return{version:1,vendor:"valibot",validate(s){return e["~run"]({value:s},ye())}}}function Xe(e,s){const r=[...new Set(e)];return r.length>1?`(${r.join(` ${s} `)})`:r[0]??"never"}var er=class extends Error{constructor(e){super(e[0].message),this.name="ValiError",this.issues=e}};function rr(e,s,r){return typeof e.fallback=="function"?e.fallback(s,r):e.fallback}function ve(e,s,r){return typeof e.default=="function"?e.default(s,r):e.default}function te(e,s){return{kind:"schema",type:"array",reference:te,expects:"Array",async:!1,item:e,message:s,get"~standard"(){return N(this)},"~run"(r,n){var c;const t=r.value;if(Array.isArray(t)){r.typed=!0,r.value=[];for(let i=0;i<t.length;i++){const u=t[i],o=this.item["~run"]({value:u},n);if(o.issues){const l={type:"array",origin:"value",input:t,key:i,value:u};for(const m of o.issues)m.path?m.path.unshift(l):m.path=[l],(c=r.issues)==null||c.push(m);if(r.issues||(r.issues=o.issues),n.abortEarly){r.typed=!1;break}}o.typed||(r.typed=!1),r.value.push(o.value)}}else M(this,"type",r,n);return r}}}function L(e){return{kind:"schema",type:"boolean",reference:L,expects:"boolean",async:!1,message:e,get"~standard"(){return N(this)},"~run"(s,r){return typeof s.value=="boolean"?s.typed=!0:M(this,"type",s,r),s}}}function G(e,s){return{kind:"schema",type:"literal",reference:G,expects:xe(e),async:!1,literal:e,message:s,get"~standard"(){return N(this)},"~run"(r,n){return r.value===this.literal?r.typed=!0:M(this,"type",r,n),r}}}function F(e,s){return{kind:"schema",type:"object",reference:F,expects:"Object",async:!1,entries:e,message:s,get"~standard"(){return N(this)},"~run"(r,n){var c;const t=r.value;if(t&&typeof t=="object"){r.typed=!0,r.value={};for(const i in this.entries){const u=this.entries[i];if(i in t||(u.type==="exact_optional"||u.type==="optional"||u.type==="nullish")&&u.default!==void 0){const o=i in t?t[i]:ve(u),l=u["~run"]({value:o},n);if(l.issues){const m={type:"object",origin:"value",input:t,key:i,value:o};for(const p of l.issues)p.path?p.path.unshift(m):p.path=[m],(c=r.issues)==null||c.push(p);if(r.issues||(r.issues=l.issues),n.abortEarly){r.typed=!1;break}}l.typed||(r.typed=!1),r.value[i]=l.value}else if(u.fallback!==void 0)r.value[i]=rr(u);else if(u.type!=="exact_optional"&&u.type!=="optional"&&u.type!=="nullish"&&(M(this,"key",r,n,{input:void 0,expected:`"${i}"`,path:[{type:"object",origin:"key",input:t,key:i,value:t[i]}]}),n.abortEarly))break}}else M(this,"type",r,n);return r}}}function w(e,s){return{kind:"schema",type:"optional",reference:w,expects:`(${e.expects} | undefined)`,async:!1,wrapped:e,default:s,get"~standard"(){return N(this)},"~run"(r,n){return r.value===void 0&&(this.default!==void 0&&(r.value=ve(this,r,n)),r.value===void 0)?(r.typed=!0,r):this.wrapped["~run"](r,n)}}}function D(e){return{kind:"schema",type:"string",reference:D,expects:"string",async:!1,message:e,get"~standard"(){return N(this)},"~run"(s,r){return typeof s.value=="string"?s.typed=!0:M(this,"type",s,r),s}}}function we(e){let s;if(e)for(const r of e)s?s.push(...r.issues):s=r.issues;return s}function Ee(e,s){return{kind:"schema",type:"union",reference:Ee,expects:Xe(e.map(r=>r.expects),"|"),async:!1,options:e,message:s,get"~standard"(){return N(this)},"~run"(r,n){let t,c,i;for(const u of this.options){const o=u["~run"]({value:r.value},n);if(o.typed)if(o.issues)c?c.push(o):c=[o];else{t=o;break}else i?i.push(o):i=[o]}if(t)return t;if(c){if(c.length===1)return c[0];M(this,"type",r,n,{issues:we(c)}),r.typed=!0}else{if((i==null?void 0:i.length)===1)return i[0];M(this,"type",r,n,{issues:we(i)})}return r}}}function q(e,s,r){const n=e["~run"]({value:s},ye(r));if(n.issues)throw new er(n.issues);return n.value}const sr=F({strict:w(L(),!1),refang:w(L(),!0),punycode:w(L(),!1),debug:w(L(),!1)}),nr=F({href:w(L(),!0),disabledSearcherNames:w(te(D()),[]),disabledScannerNames:w(te(D()),[]),urlscanVisibility:w(Ee([G("public"),G("unlisted"),G("private")]),"public")}),ie=F({...sr.entries,...nr.entries}),ae=F({hybridAnalysisAPIKey:w(D()),urlscanAPIKey:w(D()),virusTotalAPIKey:w(D())}),tr=F({...ie.entries,...ae.entries}),Se="options",ke="localOptions";async function ir(){const e=(async()=>{try{const t=await chrome.storage.sync.get(Se);return q(ie,t[Se]||{})}catch{return q(ie,{})}})(),s=(async()=>{try{const t=await chrome.storage.local.get(ke);return q(ae,t[ke]||{})}catch{return q(ae,{})}})(),[r,n]=await Promise.all([e,s]);return q(tr,{...r,...n})}async function ar(){const e=await ir(),s=window.getSelection(),r=s?s.toString().trim():null;let n=null;if(s&&s.rangeCount>0){const c=s.getRangeAt(0).startContainer.parentElement;c&&c.hasAttribute("href")&&(n=c.getAttribute("href"))}const t=e.href&&n?n:r||"";t!==""&&(e.debug&&console.debug(`Mitaka: "${t}" selected`),await Ye("createContextMenus",{text:t,options:e}))}const or={matches:["https://*/*","http://*/*"],main(e){e.addEventListener(document,"selectionchange",R(async()=>{await ar()},250))}},J=(Pe=(Te=globalThis.browser)==null?void 0:Te.runtime)!=null&&Pe.id?globalThis.browser:globalThis.chrome;function K(e,...s){}const lr={debug:(...e)=>K(console.debug,...e),log:(...e)=>K(console.log,...e),warn:(...e)=>K(console.warn,...e),error:(...e)=>K(console.error,...e)},Z=class Z extends Event{constructor(s,r){super(Z.EVENT_NAME,{}),this.newUrl=s,this.oldUrl=r}};O(Z,"EVENT_NAME",le("wxt:locationchange"));let oe=Z;function le(e){var s;return`${(s=J==null?void 0:J.runtime)==null?void 0:s.id}:content:${e}`}function gr(e){let s,r;return{run(){s==null&&(r=new URL(location.href),s=e.setInterval(()=>{let n=new URL(location.href);n.href!==r.href&&(window.dispatchEvent(new oe(n,r)),r=n)},1e3))}}}const U=class U{constructor(s,r){O(this,"isTopFrame",window.self===window.top);O(this,"abortController");O(this,"locationWatcher",gr(this));O(this,"receivedMessageIds",new Set);this.contentScriptName=s,this.options=r,this.abortController=new AbortController,this.isTopFrame?(this.listenForNewerScripts({ignoreFirstEvent:!0}),this.stopOldScripts()):this.listenForNewerScripts()}get signal(){return this.abortController.signal}abort(s){return this.abortController.abort(s)}get isInvalid(){return J.runtime.id==null&&this.notifyInvalidated(),this.signal.aborted}get isValid(){return!this.isInvalid}onInvalidated(s){return this.signal.addEventListener("abort",s),()=>this.signal.removeEventListener("abort",s)}block(){return new Promise(()=>{})}setInterval(s,r){const n=setInterval(()=>{this.isValid&&s()},r);return this.onInvalidated(()=>clearInterval(n)),n}setTimeout(s,r){const n=setTimeout(()=>{this.isValid&&s()},r);return this.onInvalidated(()=>clearTimeout(n)),n}requestAnimationFrame(s){const r=requestAnimationFrame((...n)=>{this.isValid&&s(...n)});return this.onInvalidated(()=>cancelAnimationFrame(r)),r}requestIdleCallback(s,r){const n=requestIdleCallback((...t)=>{this.signal.aborted||s(...t)},r);return this.onInvalidated(()=>cancelIdleCallback(n)),n}addEventListener(s,r,n,t){var c;r==="wxt:locationchange"&&this.isValid&&this.locationWatcher.run(),(c=s.addEventListener)==null||c.call(s,r.startsWith("wxt:")?le(r):r,n,{...t,signal:this.signal})}notifyInvalidated(){this.abort("Content script context invalidated"),lr.debug(`Content script "${this.contentScriptName}" context invalidated`)}stopOldScripts(){window.postMessage({type:U.SCRIPT_STARTED_MESSAGE_TYPE,contentScriptName:this.contentScriptName,messageId:Math.random().toString(36).slice(2)},"*")}verifyScriptStartedEvent(s){var c,i,u;const r=((c=s.data)==null?void 0:c.type)===U.SCRIPT_STARTED_MESSAGE_TYPE,n=((i=s.data)==null?void 0:i.contentScriptName)===this.contentScriptName,t=!this.receivedMessageIds.has((u=s.data)==null?void 0:u.messageId);return r&&n&&t}listenForNewerScripts(s){let r=!0;const n=t=>{if(this.verifyScriptStartedEvent(t)){this.receivedMessageIds.add(t.data.messageId);const c=r;if(r=!1,c&&(s!=null&&s.ignoreFirstEvent))return;this.notifyInvalidated()}};addEventListener("message",n),this.onInvalidated(()=>removeEventListener("message",n))}};O(U,"SCRIPT_STARTED_MESSAGE_TYPE",le("wxt:content-script-started"));let ge=U;function br(){}function Y(e,...s){}const ur={debug:(...e)=>Y(console.debug,...e),log:(...e)=>Y(console.log,...e),warn:(...e)=>Y(console.warn,...e),error:(...e)=>Y(console.error,...e)};return(async()=>{try{const{main:e,...s}=or,r=new ge("content",s);return await e(r)}catch(e){throw ur.error('The content script "content" crashed on startup!',e),e}})()})();
content;