import{a as g}from"./chunk-J5F3A7TB.js";import{c as n}from"./chunk-2R34RLZD.js";import{k as c,w as d}from"./chunk-CHZKSFGE.js";import{c as u}from"./chunk-HPNQXUCM.js";import{e as v}from"./chunk-3GYLW4KZ.js";var s=v(u());var l=({domain:e,pid:o,title:t})=>d("getWirelessDeviceMeta",{domain:e,pid:o,title:t});async function y(e){if(e.pageData?.products){let o=e.pageData.products.length,t=await g(e.pageData.products.map(a=>a.url)),p=0;e.pageData.products.forEach(a=>{a.key=p.toString(),p++}),s.default.remove(e.pageData.products,a=>!s.default.includes(t,a.url)),s.default.set(e.pageData,"meta.domain_removed",e.pageData.products.length!==o)}}c(async e=>{let o=e.domain||"",t=e.pageType||"",p=!!e.pageData?.tag?.some(a=>a.indexOf("wireless_device")===0);if(t==="productPage"&&p){let a=e.pageData.products?.find(r=>(r.sku||r.pid)&&r.title)||{},{sku:m,pid:f,title:D}=a,i=await l({domain:o,pid:f||m,title:D});typeof i?.id=="string"&&(a.wireless_device_id=i.id,a.wireless_device_name=i.name,a.wireless_device_type=i.type,e.pageData.wireless=Object.assign({},e.pageData.wireless||{},{deviceId:i.id}),e.pageData.tag.push(`device_id_${i.id.replaceAll("-","_")}`))}else t==="sponsoredProductsPage"&&(await y(e),e.url=null);return e});var R=n;export{R as a};
