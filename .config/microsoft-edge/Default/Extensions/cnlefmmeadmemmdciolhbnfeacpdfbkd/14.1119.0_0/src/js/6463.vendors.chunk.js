(self.webpackChunk=self.webpackChunk||[]).push([[6463],{65605:(e,t,i)=>{i.d(t,{z:()=>g});var n=i(92379),r=i(56701),s=i(99432),o=i(48906),a=i(84714),l=i(84308),c=i(59179),d=i(19691),u=i(88842),m=i(23839),p=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const g=e=>{var{className:t,compact:i=!1,theme:g="light",variant:h="primary",contained:f=!1,size:v=a.of("large"),style:b=a.of(void 0),children:y,onClick:x}=e,k=p(e,["className","compact","theme","variant","contained","size","style","children","onClick"]);return n.createElement(r.zx.Animated,Object.assign({},k,(0,o.Sh)(l.a([u.Tq.toObservable(b),u.Tq.toObservable(v)]).pipe(c.U((([e,t])=>(0,m.P_)({compact:i,theme:g,size:t,style:e,variant:h,contained:f})))),t),{styleType:s.Z.Type.Button,onClick:(0,d.m)(x)}),y)}},23839:(e,t,i)=>{i.d(t,{P_:()=>h,Rv:()=>m});var n=i(23783),r=i(93868),s=i(43059),o=i(59226),a=i(52176),l=i(61625),c=i(35770),d=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};function u(e){var t,i;const n=null!==(t=e.default)&&void 0!==t?t:{},{$nest:r}=n,s=d(n,["$nest"]);return Object.assign(Object.assign({},s),{$nest:Object.assign({"&:not([data-disabled='true']):not([aria-disabled='true'])[data-hovered='true']":Object.assign({},e.hovered),"&:not([data-disabled='true']):not([aria-disabled='true']):hover":Object.assign({},e.hovered),"&[data-disabled='true'], &[aria-disabled='true']":Object.assign({},e.disabled),"&:not([data-disabled='true']):not([aria-disabled='true']):active":Object.assign({},e.active),"&:not([data-disabled='true']):not([aria-disabled='true'])[data-active='true']":Object.assign({},null!==(i=e.selected)&&void 0!==i?i:e.active),"&[hidden]":Object.assign({},e.hidden),"& > i":Object.assign({},e.icon),"&[data-textpos='left']":Object.assign({},e.textPosLeft),"&[data-textpos='right']":Object.assign({},e.textPosRight),"&[data-textpos='everywhere']":Object.assign({},e.textPosEverywhere)},r)})}function m(e){return{'&:focus:not(:active):not([data-active="true"])':{boxShadow:e,zIndex:1},'&:focus:not(:active):not(:focus-visible):not([data-active="true"])':{boxShadow:"none"},"&:focus-visible":{boxShadow:e,zIndex:1}}}function p(e,t,i=!1){const r=(e,t)=>void 0!==e&&"transparent"!==e?`${t?`${t}, `:""} inset 0 0 0 1px ${e}`:t,s=(i,n=!1)=>{const r=t?((e,t=!1)=>t?`0 0 0 2px ${e}`:`inset 0 0 0 2px ${e}`)(e.focusOutline,n):((e,t=!1)=>t?`inset 0 0 0 2px ${e}, inset 0 0 0 3px ${o.I.Text.Base.Inverse}`:`0 0 0 2px ${o.I.Text.Base.Inverse}, 0 0 0 4px ${e}`)(e.focusOutline,n);return m(i?n?`${r}, ${i}`:`${i}, ${r}`:r)},a=r(e.borderDefault,e.boxShadow),l=r(e.borderHover,e.boxShadow),c=r(e.borderActive,e.boxShadow);return u({default:{borderRadius:e.borderRadius,fontWeight:e.fontWeight,color:e.colorDefault,backgroundColor:e.backgroundDefault,boxShadow:a,$nest:s(a,i)},hovered:{color:e.colorHover,backgroundColor:e.backgroundHover,boxShadow:l,$nest:s(l,i)},active:{color:e.colorActive,backgroundColor:e.backgroundActive,boxShadow:c,$nest:s(c,i)},icon:{stroke:n.ux.important(e.colorDefault),fill:n.ux.important(e.colorDefault),$nest:{'&[data-hovered="true"]':{stroke:n.ux.important(e.colorHover),fill:n.ux.important(e.colorHover)}}}})}const g={primaryLight:{fontWeight:"bold",backgroundDefault:c.Z.BackgroundBrandDefault,colorDefault:o.I.Text.Base.Inverse,backgroundHover:c.Z.BackgroundBrandHover,colorHover:o.I.Text.Base.Inverse,backgroundActive:c.Z.BackgroundBrandActive,colorActive:o.I.Background.Base.Default,focusOutline:c.Z.BorderBrandDefault},primaryDark:void 0,secondaryLight:{backgroundDefault:"transparent",colorDefault:c.Z.ButtonTextSecondaryDefault,borderDefault:c.Z.BorderBrandDefault,backgroundHover:c.Z.ButtonBackgroundSecondaryHover,colorHover:c.Z.ButtonTextSecondaryHover,borderHover:c.Z.BorderBrandDefault,backgroundActive:c.Z.ButtonBackgroundSecondaryActive,colorActive:c.Z.ButtonTextSecondaryActive,borderActive:c.Z.BorderBrandDefault,focusOutline:c.Z.BorderBrandDefault},secondaryDark:void 0,tertiaryLight:{backgroundDefault:"transparent",colorDefault:c.Z.ButtonTextTertiaryDefault,borderDefault:"transparent",backgroundHover:c.Z.ButtonBackgroundTertiaryHover,colorHover:c.Z.ButtonTextTertiaryHover,borderHover:c.Z.ButtonBorderTertiaryHover,backgroundActive:c.Z.ButtonBackgroundTertiaryActive,colorActive:c.Z.ButtonTextTertiaryActive,borderActive:c.Z.ButtonBorderTertiaryActive,focusOutline:c.Z.BorderBrandDefault},tertiaryDark:{backgroundDefault:"transparent",colorDefault:c.Z.ButtonTextTertiaryDefaultInverse,borderDefault:"transparent",backgroundHover:c.Z.ButtonBackgroundTertiaryHoverInverse,colorHover:c.Z.ButtonTextTertiaryHoverInverse,borderHover:c.Z.ButtonBorderTertiaryHoverInverse,backgroundActive:c.Z.ButtonBackgroundTertiaryActiveInverse,colorActive:c.Z.ButtonTextTertiaryActiveInverse,borderActive:c.Z.ButtonBorderTertiaryActiveInverse,focusOutline:c.Z.BorderBrandDefault},roundLight:{borderRadius:"100%",backgroundDefault:o.I.Background.Base.Default,colorDefault:c.Z.ButtonTextTertiaryDefault,borderDefault:c.Z.ButtonBorderTertiaryActive,backgroundHover:c.Z.ButtonBackgroundTertiaryHover,colorHover:c.Z.ButtonTextTertiaryHover,borderHover:c.Z.ButtonBorderTertiaryHover,backgroundActive:c.Z.ButtonBackgroundTertiaryActive,colorActive:c.Z.ButtonTextTertiaryActive,borderActive:c.Z.ButtonBorderTertiaryActive,focusOutline:c.Z.BorderBrandDefault,boxShadow:a.dZ.boxShadow},roundDark:void 0},h=(0,l.HP)((e=>{var t,i;const o=g[`${e.variant}${"dark"===e.theme?"Dark":"Light"}`];return n.ux.style(function(e,t){const i="small"===e?1.5:"medium"===e?1.75:2,o=t?0:n.ux.rem(r.x);return u({default:{borderRadius:n.ux.rem(s.xB),display:"inline-flex",alignItems:"center",justifyContent:"center",boxSizing:"border-box",transform:"scale(1)",overflow:"hidden",padding:0,outline:"none",border:0,backgroundColor:"transparent",verticalAlign:"middle",whiteSpace:"nowrap",cursor:"default",userSelect:"none",fontWeight:"normal",minWidth:n.ux.rem(i),minHeight:n.ux.rem(i),lineHeight:n.ux.rem(i)},icon:{minWidth:n.ux.rem(i),minHeight:n.ux.rem(i),lineHeight:n.ux.rem(i)},hovered:{cursor:"pointer"},disabled:{opacity:.4,cursor:"not-allowed",$nest:{'& > i[data-disabled="true"]':{fill:"inherit",stroke:"inherit"}}},hidden:{display:"none"},textPosLeft:{padding:`0 0 0 ${o}`},textPosRight:{padding:`0 ${o} 0 0`},textPosEverywhere:{padding:`0 ${o} 0 ${o}`}})}(null!==(t=e.size)&&void 0!==t?t:"large",null!==(i=e.compact)&&void 0!==i&&i),o?p(o,"dark"===e.theme,e.contained):void 0,...Array.from([]).concat(e.style).map((e=>u(null!=e?e:{}))))}),(e=>`${e.size}-${e.variant}-${e.theme}-${e.contained}-${e.compact}-${JSON.stringify(e.style)}`))},85947:(e,t,i)=>{i.d(t,{x:()=>p});var n=i(92379),r=i(31574),s=i(65605),o=i(23783),a=i(59226),l=i(57832);const c="closeBtn",d="closeIcon",u=(0,l.dD)({$nest:{[`& .${d}`]:Object.assign(Object.assign({},(0,l.fx)(1.5)),{stroke:o.ux.important(a.I.Text.Base.Inverse)})}},c),m={closeButton:o.ux.joinClasses([c,o.ux.style(u)]),closeIcon:d},p=({name:e,style:t,onClick:i})=>n.createElement(s.z,{variant:"tertiary",style:[t],onClick:i,compact:!0,size:"small",theme:"dark",name:e},n.createElement(r.JO.Close,{className:m.closeIcon}))},16705:(e,t,i)=>{i.d(t,{d:()=>o});var n=i(92379),r=i(10933),s=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const o=n.forwardRef((function(e,t){var{children:i,rel:o}=e,a=s(e,["children","rel"]);const l=n.useMemo((()=>(0,r.fg)(10)),[]);return n.createElement(n.Fragment,null,n.createElement("span",{hidden:!0,id:l},"Opens an external site in a new window"),n.createElement("a",Object.assign({},a,{"aria-describedby":l,target:"_blank",rel:null!=o?o:"noopener noreferrer",ref:t}),i))}))},99876:(e,t,i)=>{i.d(t,{J2:()=>w,yS:()=>E});var n=i(92379),r=i(85651),s=i(30508),o=i(53268),a=i(58303),l=i(90023),c=i(58414),d=i(23783),u=i(93868),m=i(59226),p=i(43059),g=i(48906),h=i(74822),f=i(47311),v=i(33536),b=i(35770),y=i(10924),x=i(85947),k=i(40929),S=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const C=(0,g.xb)(r.aV),E=n.createContext({closePopover:l.Q1});var _;!function(e){e.umount="unmount",e.interactOutside="interactOutside",e.closeButtonClick="closeButtonClick"}(_||(_={}));const w=e=>{var t,i,r,l,u,m,p,g,{reference:b,title:w,body:R,footer:B,className:U,placement:G,arrowAlignment:N,offset:L,containerPadding:D,onClose:j,onMount:z}=e,V=S(e,["reference","title","body","footer","className","placement","arrowAlignment","offset","containerPadding","onClose","onMount"]);const K=n.useRef(null),[Z,H]=n.useState(null),[$,W]=n.useState(null),Y=(0,v.s)(),{styles:q,attributes:X,state:Q}=(0,s.D)(b,Z,{placement:null!=G?G:"top",modifiers:[{name:"offset",options:{offset:[0,6+(null!=L?L:0)]}},{name:"arrow",options:{element:$,padding:12}},{name:"preventOverflow",options:{padding:null!=D?D:5}},Y]}),J=null!==(g=null===(p=null===(m=null===(u=null===(l=null===(r=null===(i=null===(t=q.arrow)||void 0===t?void 0:t.transform)||void 0===i?void 0:i.replace("translate3d(",""))||void 0===r?void 0:r.replace("translate(",""))||void 0===l?void 0:l.replace(")",""))||void 0===u?void 0:u.split(","))||void 0===m?void 0:m.map((e=>e.trim())))||void 0===p?void 0:p.map((e=>parseInt(e,10))))&&void 0!==g?g:[],ee=n.useRef(new h.x),te=n.useRef(null),ie=(0,o.d)({defaultOpen:!1,onOpenChange:e=>{const t=te.current;null!==t&&clearTimeout(t),e||(te.current=setTimeout((()=>ee.current.next(void 0)),500))}}),{overlayProps:ne,underlayProps:re}=(0,k.I)({isOpen:ie.isOpen,onClose:ie.close,shouldCloseOnBlur:!0,isDismissable:!0,shouldCloseOnInteractOutside:(e,t)=>{const i=null==t?void 0:t.composedPath();let n=!1;return n=!i||!i.some((e=>e instanceof Node&&(null==Z?void 0:Z.contains(e)))),n&&(K.current=_.interactOutside),n}},{current:Z}),{portalContainer:se}=n.useContext(y.l);n.useEffect((()=>{const e=f.timer(0).subscribe((()=>ie.open()));return()=>e.unsubscribe()}),[]),n.useEffect((()=>{ie.isOpen&&Z&&(null==z||z(Z))}),[ie.isOpen,Z]),n.useEffect((()=>{const e=ee.current.subscribe((()=>{var e;return null==j?void 0:j(null!==(e=K.current)&&void 0!==e?e:_.umount)}));return()=>e.unsubscribe()}),[ee]);const oe=n.useCallback((e=>{K.current=e,ie.close()}),[ie]);function ae(){const{x:e,y:t,width:i,height:n}=b.getBoundingClientRect(),{x:r,y:s,width:o,height:a}=(null==Z?void 0:Z.getBoundingClientRect())||{x:0,y:0,width:0,height:0},l={position:"absolute"};if("leading"===N)switch(G){case"top":case"bottom":case"top-start":case"bottom-start":case"top-end":case"bottom-end":r<=e&&(l.left=Math.max(e-r+8,14));break;case"left":case"left-start":case"left-end":case"right":case"right-start":case"right-end":s<=t&&(l.top=Math.max(t-s+8,14))}else if("trailing"===N)switch(G){case"top":case"top-start":case"top-end":case"bottom":case"bottom-start":case"bottom-end":l.right=r+o>=e+i?Math.max(r+o-(e+i),8):8;break;case"left":case"left-start":case"left-end":case"right":case"right-start":case"right-end":l.bottom=s+a>=t+n?Math.max(s+a-(t+n),8):8}else{const[e,t]=J;0!==e&&Number.isFinite(e)&&(l.left=e),0!==t&&Number.isFinite(t)&&(l.top=t)}return l}return b?n.createElement(C,{portalContainer:se.view(a.FS)},n.createElement(c.n,{in:ie.isOpen},((e,t)=>{var i,r;return n.createElement(n.Fragment,null,ie.isOpen&&n.createElement("div",Object.assign({},re,{className:A})),n.createElement("div",Object.assign({},V,X.popper,ne,{ref:e=>H(e),style:Object.assign(Object.assign({},q.popper),ne.style),className:d.ux.joinClasses([F,U,e]),onTransitionEnd:e=>{if(e.target===Z&&(t(),!ie.isOpen)){const e=te.current;null!==e&&clearTimeout(e),ee.current.next(void 0)}}}),n.createElement("div",{ref:W},n.createElement("svg",{className:T,"data-placement":(null===(i=null==Q?void 0:Q.placement)||void 0===i?void 0:i.startsWith("bottom"))?"bottom":(null==Q?void 0:Q.placement.startsWith("top"))?"top":(null==Q?void 0:Q.placement.startsWith("right"))?"right":(null===(r=null==Q?void 0:Q.placement)||void 0===r?void 0:r.startsWith("left"))?"left":void 0,viewBox:"0 0 12 12",style:ae()},n.createElement("path",{d:"M0 0 L6 6 L12 0"}))),n.createElement(E.Provider,{value:{closePopover:oe}},n.createElement(x.x,{style:I,onClick:()=>oe(_.closeButtonClick),name:"tooltipClose"}),w?n.createElement("div",{className:P},w):null,R?n.createElement("div",{className:M},R):null,B?n.createElement("div",{className:O},B):null)))}))):null},I={default:{position:"absolute",top:d.ux.rem(u.x),right:d.ux.rem(u.x)}},A=d.ux.style({position:"fixed",inset:0}),F=d.ux.style({display:"flex",flexDirection:"column",alignItems:"flex-start",gap:d.ux.rem(u.yC),background:b.Z.PopoverBackgroundBaseSubdued,border:`1px solid ${m.I.Border.Base.Default}`,color:m.I.Text.Base.Inverse,borderRadius:d.ux.rem(p.ze),minWidth:d.ux.rem(9.375),maxWidth:d.ux.rem(15),fontSize:d.ux.rem(.875),lineHeight:d.ux.rem(1.375),padding:d.ux.rem(u.mh),$nest:{"&[data-popper-reference-hidden='true']":{visibility:"hidden"}}}),P=d.ux.style({fontWeight:700,color:m.I.Text.Base.Inverse}),M=d.ux.style({color:m.I.Border.Base.Subdued}),O=d.ux.style({display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",gap:d.ux.rem(u.x),marginTop:d.ux.rem(u.mh-u.yC),width:"100%"}),T=d.ux.style({position:"absolute",stroke:m.I.Border.Base.Default,fill:b.Z.PopoverBackgroundBaseSubdued,strokeWidth:"1px",width:d.ux.rem(.75),height:d.ux.rem(.75),$nest:{'&[data-placement="top"]':{top:"100%",transform:"translateX(-50%)"},'&[data-placement="bottom"]':{bottom:"100%",transform:"translateX(-50%) rotate(180deg)"},'&[data-placement="left"]':{left:"100%",transform:"translateY(-50%) rotate(-90deg)"},'&[data-placement="right"]':{right:"100%",transform:"translateY(-50%) rotate(90deg)"}}})},33536:(e,t,i)=>{i.d(t,{s:()=>r});var n=i(92379);const r=function(){return n.useMemo((()=>({name:"forcePopperUpdateEffect",phase:"afterMain",enabled:!0,fn:()=>{},effect:({instance:e})=>{const t=setTimeout((()=>e.forceUpdate()),0);return()=>clearTimeout(t)}})),[])}},27114:(e,t,i)=>{i.d(t,{F:()=>c});var n=i(92379),r=i(55661),s=i(37108),o=i(49601),a=i(23841),l=i(24666);function c(e){const{ref:t,onMount:i}=r.P.useElWatcher(),c=n.useMemo((()=>t.pipe(s.Q(o.E),a.oA,l.x(),e)),[t]);return r.P.useSubscriptionTo(c),{ref:t,onMount:i}}},98123:(e,t,i)=>{i.d(t,{i:()=>n});var n,r=i(45178),s=i(61625);!function(e){let t;!function(e){e.mount="mount",e.unmount="unmount",e.actionsMenuMuteClick="actionsMenuMuteClick",e.actionsMenuReportIncorrectClick="actionsMenuReportIncorrectClick",e.actionsMenuReportOffensiveClick="actionsMenuReportOffensiveClick",e.addToDictionaryClick="addToDictionaryClick",e.headerCloseButtonClick="headerCloseButtonClick",e.headerGoBackButtonClick="headerGoBackButtonClick",e.headerVoiceButtonClick="headerVoiceButtonClick",e.setVoiceButtonClick="setVoiceButtonClick",e.voiceProfileCloseButtonClick="voiceProfileCloseButtonClick",e.voiceProfileUseVoiceButtonClick="voiceProfileUseVoiceButtonClick",e.toneToggleClick="toneToggleClick",e.styleToggleClick="styleToggleClick",e.roleTypeaheadSelectionChange="roleTypeaheadSelectionChange",e.dialectDropdownSelectionChange="dialectDropdownSelectionChange",e.promptFieldTextChange="promptFieldTextChange",e.promptFieldFocusChange="promptFieldFocusChange",e.promptFieldAndMenuFocusChange="promptFieldAndMenuFocusChange",e.actionBrickClick="actionBrickClick",e.actionBrickMount="actionBrickMount",e.actionBrickShow="actionBrickShow",e.creditsInfoMount="creditsInfoMount",e.actionsMount="actionsMount",e.promptSubmitButtonClick="promptSubmitButtonClick",e.generateStopButtonClick="generateStopButtonClick",e.promptFieldKeyPressEscape="promptFieldKeyPressEscape",e.promptFieldKeyPressEnter="promptFieldKeyPressEnter",e.promptFieldKeyPressArrowDown="promptFieldKeyPressArrowDown",e.promptFieldKeyPressArrowUp="promptFieldKeyPressArrowUp",e.promptMenuKeyPressArrowDown="promptMenuKeyPressArrowDown",e.promptMenuKeyPressArrowUp="promptMenuKeyPressArrowUp",e.promptSearchResultsUpdate="promptSearchResultsUpdate",e.resultCardInsertButtonClick="resultCardInsertButtonClick",e.resultCardCopyButtonClick="resultCardCopyButtonClick",e.resultCardCopyToClipboard="resultCardCopyToClipboard",e.resultCardRephraseButtonClick="resultCardRephraseButtonClick",e.resultCardDismissButtonClick="resultCardDismissButtonClick",e.resultCardToggleGenericVoiceButtonClick="resultCardToggleGenericVoiceButtonClick",e.errorCardDismissButtonClick="errorCardDismissButtonClick",e.openFeedbackFormButtonClick="openFeedbackFormButtonClick",e.feedbackFormChange="feedbackFormChange",e.feedbackFormSubmitButtonClick="feedbackFormSubmitButtonClick",e.reportOffensiveResultButtonClick="reportOffensiveResultButtonClick",e.reportOffensiveActionsButtonClick="reportOffensiveActionsButtonClick",e.resultCardHeaderClick="resultCardHeaderClick",e.collapsePromptMenuButtonClick="collapsePromptMenuButtonClick",e.creditsInfoHover="creditsInfoHover",e.creditsInfoClick="creditsInfoClick",e.resultCardHoverChange="resultCardHoverChange",e.resultCardFocusChange="resultCardFocusChange",e.reportMenuVisibilityChange="reportMenuVisibilityChange",e.referencesVisibilityChange="referencesVisibilityChange",e.voiceProfileTabChange="voiceProfileTabChange",e.voiceTagClick="voiceTagClick",e.voiceTagPopoverClose="voiceTagPopoverClose",e.voiceTagPopoverKeepButtonClick="voiceTagPopoverKeepButtonClick",e.voiceTagPopoverRemoveButtonClick="voiceTagPopoverRemoveButtonClick",e.voiceDialectDropdownSelectionChange="voiceDialectDropdownSelectionChange",e.voiceRoleDropdownSelectionChange="voiceRoleDropdownSelectionChange",e.voiceSelectionsSaveButtonClick="voiceSelectionsSaveButtonClick",e.voiceSelectionsCancelButtonClick="voiceSelectionsCancelButtonClick",e.voiceSelectionsEditButtonClick="voiceSelectionsEditButtonClick",e.surveyRatingSelectionChange="surveyRatingSelectionChange",e.surveyOpenAnswerChange="surveyOpenAnswerChange",e.surveySubmitButtonClick="surveySubmitButtonClick",e.surveyKeyPressShiftEnter="surveyKeyPressShiftEnter",e.surveyCancelButtonClick="surveyCancelButtonClick",e.surveyCloseButtonClick="surveyCloseButtonClick",e.regenerateWithoutReferenceButtonClick="regenerateWithoutReferenceButtonClick",e.restoreHistoryButtonClick="restoreHistoryButtonClick",e.userPromptSubmit="userPromptSubmit",e.radioOptionsSubmitButtonClick="radioOptionsSubmitButtonClick",e.radioOptionsCancelButtonClick="radioOptionsCancelButtonClick",e.removeSelectionContextClick="removeSelectionContextClick",e.selectionContextInteraction="selectionContextInteraction",e.settingsButtonClick="settingsButtonClick",e.toneReportLoadedEmptyMount="toneReportLoadedEmptyMount",e.toneReportLoadedNonEmptyMount="toneReportLoadedNonEmptyMount",e.toneReportBackToSuggestionsButtonClick="toneReportBackToSuggestionsButtonClick",e.toneReportToneLikeButtonClick="toneReportToneLikeButtonClick",e.toneReportToneDislikeButtonClick="toneReportToneDislikeButtonClick",e.signInButtonClick="signInButtonClick",e.suggestionAcceptClick="suggestionAcceptClick",e.suggestionDismissClick="suggestionDismissClick",e.playbookSelected="playbookSelected"}(t=e.Kind||(e.Kind={})),e.is=function(e){return t=>t.kind===e},e.isResultAction=(0,s.Kg)(e.is(e.Kind.resultCardInsertButtonClick),e.is(e.Kind.resultCardCopyButtonClick),e.is(e.Kind.resultCardRephraseButtonClick),e.is(e.Kind.resultCardDismissButtonClick),e.is(e.Kind.reportOffensiveResultButtonClick),e.is(e.Kind.regenerateWithoutReferenceButtonClick)),e.isToneDetectorAction=(0,s.Kg)(e.is(e.Kind.toneReportLoadedEmptyMount),e.is(e.Kind.toneReportLoadedNonEmptyMount),e.is(e.Kind.toneReportBackToSuggestionsButtonClick),e.is(e.Kind.toneReportToneLikeButtonClick),e.is(e.Kind.toneReportToneDislikeButtonClick)),e.isSurveyAction=(0,s.Kg)(e.is(e.Kind.surveyOpenAnswerChange),e.is(e.Kind.surveySubmitButtonClick),e.is(e.Kind.surveyKeyPressShiftEnter),e.is(e.Kind.surveyCancelButtonClick),e.is(e.Kind.surveyCloseButtonClick),e.is(e.Kind.surveyRatingSelectionChange)),e.isSurveyImplicitDismissAction=(0,s.Kg)(e.is(e.Kind.promptSubmitButtonClick),e.is(e.Kind.actionBrickClick),e.is(e.Kind.resultCardInsertButtonClick),e.is(e.Kind.resultCardRephraseButtonClick),e.is(e.Kind.resultCardDismissButtonClick),e.is(e.Kind.resultCardHeaderClick)),e.isSduiAction=(0,s.Kg)(e.is(e.Kind.actionsMenuReportIncorrectClick),e.is(e.Kind.actionsMenuMuteClick),e.is(e.Kind.actionsMenuReportOffensiveClick),e.is(e.Kind.addToDictionaryClick),e.is(e.Kind.suggestionAcceptClick),e.is(e.Kind.suggestionDismissClick))}(n||(n={})),(0,r.L0)(void 0)},65883:(e,t,i)=>{i.d(t,{J4:()=>d,JS:()=>r});var n,r,s=i(11633),o=i(6824),a=i(36661),l=i(61625),c=i(40798);!function(e){e.Codec=s.OT(s.jV([s.OT(s.dt({action:s.OT(s.Z_)})),s.G0([s.r$({}),s.IM(s.Z_,s._4)])])),e.is=function(t){return e.Codec.is(t)}}(n||(n={})),function(e){let t,i,n,r,d,u,m;!function(e){const t=s.OT(s.i0("error")),i=s.OT(s.dt({action:t}));e.is=function(e){return i.is(e)},e.isAction=function(e){return t.is(e)}}(t=e.Error||(e.Error={})),function(e){const t=s.OT(s.i0("finished")),i=s.OT(s.G0([s.OT(s.i0("all_checks_failed")),s.OT(s.i0("all_checks_succeeded")),s.OT(s.i0("nothing_to_check")),s.OT(s.i0("some_checks_failed")),s.OT(s.i0("some_checks_in_progress")),s.OT(s.i0("unknown"))])),n=s.OT(s.G0([s.OT(s.i0("TOO_SMALL")),s.OT(s.i0("SENSITIVE")),s.OT(s.i0("ERROR")),s.OT(s.i0("OK"))])),r=s.r$({Clarity:s.pk,Correctness:s.pk,Engagement:s.pk,"Style guide":s.pk,Tone:s.pk,GeneralScore:s.pk}),o=s.OT(s.jV([s.OT(s.dt({action:t,checksStatus:i,scoresStatus:n,generalScore:s.pk})),s.OT(s.r$({outcomeScores:r}))]));e.is=function(e){return o.is(e)},e.isAction=function(e){return t.is(e)}}(i=e.Finished||(e.Finished={})),function(e){const t=s.OT(s.i0("async_check_finished")),i=s.OT(s.dt({action:t}));e.is=function(e){return i.is(e)},e.isAction=function(e){return t.is(e)},e.isPlagiarism=function(e){return"plagiarism"===e.check},e.isAiDetector=function(e){return"ai_detector"===e.check}}(n=e.AsyncCheckFinished||(e.AsyncCheckFinished={})),function(e){const t=s.OT(s.i0("emotions")),i=s.OT(s.dt({action:s.OT(s.i0("emotions"))}));e.is=function(e){return i.is(e)},e.isAction=function(e){return t.is(e)}}(r=e.TonesResult||(e.TonesResult={})),function(e){const t=s.OT(s.i0("start")),i=s.OT(s.dt({action:t}));e.is=function(e){return i.is(e)},e.isAction=function(e){return t.is(e)}}(d=e.Start||(e.Start={})),function(e){const t=s.OT(s.i0("show_survey")),i=s.OT(s.dt({action:t}));e.is=function(e){return i.is(e)},e.isAction=function(e){return t.is(e)}}(u=e.ShowSurvey||(e.ShowSurvey={})),function(e){let t,i;!function(e){const t=s.OT(s.i0("cheetah"));e.Codec=s.OT(s.dt({action:t,id:s.OT(s.pk)})),e.is=function(t){return e.Codec.is(t)},e.isAction=function(e){return t.is(e)}}(t=e.CheetahAck||(e.CheetahAck={})),function(e){e.is=a.n(c.Pb.extend(o.Schemable)({any:o.id(),sensitiveString:o.string,sensitiveDelta:o.id()}))(c.Pb.ServerMessageImplementations).is}(i=e.CheetahProtocolServerMessage||(e.CheetahProtocolServerMessage={})),e.is=(0,l.Kg)(t.is,i.is)}(m=e.CheetahInboundCAPIMessage||(e.CheetahInboundCAPIMessage={})),e.is=(0,l.Kg)(t.is,u.is,m.is,r.is,i.is,n.is,d.is)}(r||(r={}));const d=(0,l.Kg)(r.Finished.is,r.AsyncCheckFinished.is,r.TonesResult.is,r.Start.is);(0,l.Kg)(r.Finished.isAction,r.AsyncCheckFinished.isAction,r.TonesResult.isAction,r.Start.isAction),r.CheetahInboundCAPIMessage.is},26069:(e,t,i)=>{i.d(t,{_:()=>n});var n,r=i(58303),s=i(90023),o=i(61625);!function(e){let t,i;function n(e){return e.kind===t.activeLimited||e.kind===t.activeUnlimited}function a(e){return e.kind===t.passive}function l(e){return e.kind===t.unknown}function c(e){return n(e)||l(e)}function d(i){if(void 0===i)return{kind:t.unknown,userSettings:{inlineQuickReplyEnabled:!1,inlineRewriteEnabled:!1}};const n=e.Active.parseRefillDate(i.usage.refillDate);return i.usage.promptsRemaining<0?{kind:t.unknown,userSettings:i.settings}:1e4===i.usage.promptsAllocated&&i.usage.promptsRemaining>0?{kind:t.activeUnlimited,promptsRemaining:i.usage.promptsRemaining,promptsAllocated:i.usage.promptsAllocated,refillDate:n,userSettings:i.settings}:i.usage.promptsRemaining>0?{kind:t.activeLimited,promptsRemaining:i.usage.promptsRemaining,promptsAllocated:i.usage.promptsAllocated,refillDate:n,userSettings:i.settings}:{kind:t.passive,promptsRemaining:i.usage.promptsRemaining,promptsAllocated:i.usage.promptsAllocated,refillDate:n,userSettings:i.settings}}!function(e){e.activeLimited="activeLimited",e.activeUnlimited="activeUnlimited",e.passive="passive",e.unavailable="unavailable",e.disabled="disabled",e.pending="pending",e.unknown="unknown"}(t=e.Kind||(e.Kind={})),function(e){const t=(0,o.HP)((e=>{const t=Date.parse(e);return isNaN(t)?0:t}));function i(e){const t=e-Date.now();return Math.floor(t/36e5)}e.parseRefillDate=function(e){return t(e)},e.hoursUntilRefillDate=i,e.daysUntilRefillDate=function(e){return Math.floor(i(e)/24)}}(i=e.Active||(e.Active={})),e.isActive=n,e.isActiveUnlimited=function(e){return e.kind===t.activeUnlimited},e.isPassive=a,e.isActiveOrPassive=(0,o.Kg)(n,a),e.isUnknown=l,e.isUsable=c,e.isVisible=function(e){return c(e)||a(e)},e.isDisabled=function(e){return e.kind===t.disabled},e.isUnavailable=function(e){return e.kind===t.pending||e.kind===t.unavailable||e.kind===t.disabled},e.fromUserState=d,e.updateUsage=function(t,i){return d({usage:i,settings:t.kind===e.Kind.disabled||t.kind===e.Kind.unavailable?{inlineQuickReplyEnabled:!1,inlineRewriteEnabled:!1}:t.userSettings})},e.getPromptsAllocated=function(t){return(0,s.zG)(t,r.DT(e.isActiveOrPassive),r.UI((e=>e.promptsAllocated)))}}(n||(n={}))},59267:(e,t,i)=>{var n;i.d(t,{V:()=>n}),function(e){e.assistantOpenAttempt="assistant_open_attempt",e.preStartServicesReady="assistant_pre_start_services_ready"}(n||(n={}))},30470:(e,t,i)=>{function n(e){return{kind:"error",source:"core",name:"lifecycleStartingFailed",data:e}}function r(e){return{kind:"error",source:"core",name:"lifecycleVisuallyReadyFailed",data:e}}function s(e){return{kind:"error",source:"core",name:"lifecycleInteractionReadyFailed",data:e}}function o(e){return{kind:"error",source:"core",name:"lifecycleReadyToDragFailed",data:e}}function a(e){return{kind:"error",source:"core",name:"lifecycleFocusStateChangedFailed",data:e}}function l(e){return{kind:"error",source:"core",name:"lifecycleCloseFailed",data:e}}function c(e){return{kind:"error",source:"core",name:"unsanitizeTextOnInboundCAPIMessageFailed",data:e}}function d(e){return{kind:"error",source:"core",name:"sanitizeTextOnOutboundCAPIMessageFailed",data:e}}function u(){return{kind:"error",source:"core",name:"getContextFailed",data:null}}function m(){return{kind:"error",source:"core",name:"getHistoryFailed",data:null}}function p(e){return{kind:"error",source:"core",name:"actionFailed",data:e}}function g(e){return{kind:"error",source:"core",name:"waitForContextTimeout",data:e}}function h(){return{kind:"error",source:"core",name:"waitForHistoryTimeout",data:null}}function f(){return{kind:"error",source:"core",name:"waitForResultTimeout",data:null}}function v(e){return{kind:"error",source:"core",name:"waitForAckTimeout",data:e}}function b(e){return{kind:"error",source:"core",name:"setVoiceProfileFailed",data:e}}function y(e){return{kind:"error",source:"core",name:"setNewVoiceProfileFailed",data:e}}function x(e){return{kind:"error",source:"core",name:"capiErrorUnhandled",data:e}}function k(e){return{kind:"error",source:"core",name:"insertResultFailed",data:e}}function S(e){return{kind:"error",source:"core",name:"copyResultFailed",data:e}}function C(e){return{kind:"error",source:"core",name:"regenerateResultFailed",data:e}}function E(e){return{kind:"error",source:"core",name:"stopInProgressResultFailed",data:e}}function _(e){return{kind:"error",source:"core",name:"getTextFailed",data:e}}function w(e){return{kind:"error",source:"core",name:"reportUphookShowFailed",data:e}}function I(e){return{kind:"error",source:"core",name:"reportUphookClickFailed",data:e}}function A(e){return{kind:"error",source:"core",name:"reportUphookDismissedFailed",data:e}}function F(e){return{kind:"error",source:"core",name:"executeUphookFailed",data:e}}i.d(t,{$E:()=>u,Ax:()=>h,B$:()=>a,CN:()=>l,IL:()=>o,Jr:()=>y,Kf:()=>k,Lp:()=>E,Nm:()=>F,No:()=>v,Nu:()=>S,Qw:()=>s,TX:()=>b,Z9:()=>x,bE:()=>f,bS:()=>d,g0:()=>C,g4:()=>p,gW:()=>g,ix:()=>w,o9:()=>r,ol:()=>I,pA:()=>n,q_:()=>_,tD:()=>m,xe:()=>c,xg:()=>A})},12753:(e,t,i)=>{i.d(t,{H:()=>n});var n,r=i(58303),s=i(86399),o=i(92135),a=i(90023);!function(e){let t,i;e.fromOuterContext=function(e){var i,n,l,c;const d=e=>(0,a.zG)(r.ij(null==e?void 0:e.from),r.tS(s.YM),r.g_((()=>t.empty),t.fromNameAndEmailString)),u=e=>(0,a.zG)(r.ij(null==e?void 0:e.to),r.tS(o.c2),r.UI(o.UI(t.fromNameAndEmailString)),r.pF((()=>[]))),m=(0,a.zG)(r.ij(e.items),r.tS(s.YM),r.pF((()=>{})));return{previousMessageInfo:{author:d(null==m?void 0:m.people),directRecipients:u(null==m?void 0:m.people),text:null!==(i=null==m?void 0:m.text)&&void 0!==i?i:""},title:null!==(n=e.title)&&void 0!==n?n:"",author:d(e.people),directRecipients:u(e.people),indirectRecipients:(0,a.zG)(r.ij(null===(l=e.people)||void 0===l?void 0:l.cc),r.tS(o.c2),r.UI(o.UI(t.fromNameAndEmailString)),r.pF((()=>[]))),undisclosedRecipients:(0,a.zG)(r.ij(null===(c=e.people)||void 0===c?void 0:c.bcc),r.tS(o.c2),r.UI(o.UI(t.fromNameAndEmailString)),r.pF((()=>[])))}},e.toOuterContext=function(t){return{title:t.title,people:{from:[e.Person.extractNameAndEmailString(t.author)],to:t.directRecipients.map(e.Person.extractNameAndEmailString),cc:t.indirectRecipients.map(e.Person.extractNameAndEmailString),bcc:t.undisclosedRecipients.map(e.Person.extractNameAndEmailString)},items:[{text:t.previousMessageInfo.text,people:{from:[e.Person.extractNameAndEmailString(t.previousMessageInfo.author)],to:t.previousMessageInfo.directRecipients.map(e.Person.extractNameAndEmailString)}}]}},e.empty={previousMessageInfo:{author:{name:"",email:""},directRecipients:[],text:""},title:"",author:{name:"",email:""},directRecipients:[],indirectRecipients:[],undisclosedRecipients:[]},function(e){e.empty={name:"",email:""},e.fromNameAndEmailString=function(t){return(0,a.zG)(r.ij(t.match(/^([^<]*)<(.*)>$/)),r.UI((e=>{var t,i,n,r;return{name:null!==(i=null===(t=e[1])||void 0===t?void 0:t.trim())&&void 0!==i?i:"",email:null!==(r=null===(n=e[2])||void 0===n?void 0:n.trim())&&void 0!==r?r:""}})),r.fS((()=>e.empty)))},e.extractNameAndEmailString=function(e){const t=""!==e.email?`<${e.email}>`:"";return[e.name,t].filter((e=>""!==e)).join(" ")}}(t=e.Person||(e.Person={})),function(e){e.empty={author:{name:"",email:""},directRecipients:[],text:""}}(i=e.PreviousMessageInfo||(e.PreviousMessageInfo={}))}(n||(n={}))},10739:(e,t,i)=>{i.d(t,{x:()=>n});var n,r=i(12518),s=i(21147),o=i(58303),a=i(86399),l=i(92135),c=i(90023),d=i(93380),u=i(61625),m=i(12776),p=i(87951);!function(e){let t,i,n,g,h,f,v;function b(e){return"complete"===e.kind}function y(e){return"history"===e.kind}function x(e){return"inProgressOngoing"===e.kind}function k(e){return"inProgressPending"===e.kind}!function(e){e.create=function(e){return`${e}`},e.toPrimitive=function(e){return parseInt(e,10)},e.eq=s.yv}(t=e.Id||(e.Id={})),function(e){e.insert="insert",e.reportOffensive="reportOffensive"}(i=e.Feedback||(e.Feedback={})),function(e){e.insert="insert",e.copy="copy",e.rephrase="rephrase"}(n=e.SupportedAction||(e.SupportedAction={})),e.hasId=function(e){return"id"in e},e.isComplete=b,e.isHistory=y,e.isAIUsageNotification=function(e){return"aiUsageNotification"===e.kind},e.isStandardCompletedResult=(0,u.Kg)(b,y),e.isInProgressOngoing=x,e.isInProgressPending=k,e.isInProgressInterrupted=function(e){return"inProgressInterrupted"===e.kind},e.isInProgress=(0,u.Kg)(x,k),function(e){e.generic="generic",e.user="user"}(g=e.GeneratedTextVoice||(e.GeneratedTextVoice={})),function(t){t.createFromResultMessage=function(t){var i,n;const s=(0,c.zG)((0,m.DO)(null===(i=t.text)||void 0===i?void 0:i.delta),o.fS((()=>new d.i)));return(0,c.zG)((0,m.DO)(null===(n=t.withVoiceText)||void 0===n?void 0:n.delta),r.Yo((()=>s)),r.UI((i=>({generic:s,user:i,preferVoice:!0===(null==t?void 0:t.showVoiceTextByDefault)?e.GeneratedTextVoice.user:e.GeneratedTextVoice.generic}))))}}(h=e.ResultDelta||(e.ResultDelta={})),function(t){t.createFromCard=function(t,i){return{kind:"history",id:e.Id.create(t.id),header:"action"===t.title.kind?{label:t.title.label,iconUrl:""!==t.title.iconUrl.trim()?o.G(t.title.iconUrl):o.YP,copiablePrompt:o.YP}:{label:t.title.text,iconUrl:o.YP,copiablePrompt:""!==t.title.text.trim()?o.G(t.title.text):o.YP},replacementDelta:h.createFromResultMessage({text:t.text,withVoiceText:t.text.plain===t.withVoiceText.plain?void 0:t.withVoiceText,showVoiceTextByDefault:t.text.plain===t.withVoiceText.plain?void 0:t.showVoiceTextByDefault}),supportedActions:new Set([e.SupportedAction.insert].concat(i?[e.SupportedAction.copy]:[])),references:(0,c.zG)(t.references,a.UI(p.s.create),l.c2)}}}(f=e.History||(e.History={})),function(e){e.fromInProgressResult=function(e,t){return Object.assign(Object.assign({},e),{kind:"aiUsageNotification",text:t})}}(v=e.AIUsageNotification||(e.AIUsageNotification={}))}(n||(n={}))},43442:(e,t,i)=>{i.d(t,{s:()=>n});var n,r=i(61625);!function(e){function t(e){return"rewrite"===e}function i(e){return"quickRewrite"===e}e.isIdeation=function(e){return"ideation"===e},e.isRewrite=t,e.isQuickReply=function(e){return"quickReply"===e},e.isQuickRewrite=i,e.isPushRewrite=function(e){return"pushRewrite"===e},e.isTranslate=function(e){return"translate"===e},e.isAppActionDeeplink=function(e){return"appActionDeeplink"===e},e.isCompliance=function(e){return"compliance"===e},e.isRewriteOrQuickRewrite=(0,r.Kg)(t,i)}(n||(n={}))},35701:(e,t,i)=>{i.d(t,{u:()=>n});const n={useIframeTextfieldWrapper:!1}},74412:(e,t,i)=>{var n,r;i.d(t,{e:()=>n,n:()=>r}),function(e){e.intentCard="intentCard",e.initialActionsList="initialActionsList",e.followUpActionsList="followUpActionsList",e.actionsMoreButton="actionsMoreButton",e.appActionsList="appActionsList",e.promptInput="promptInput",e.promptInputAndMenuContainer="promptInputAndMenuContainer",e.promptMenuContent="promptMenuContent",e.skill="skill",e.referencesList="referencesList",e.historyButton="historyButton",e.historyButtonActive="historyButtonActive"}(n||(n={})),function(e){e.initialPopupAnchor="initialPopupAnchor",e.initialBTSPopupAnchor="initialBTSPopupAnchor",e.rewriteTooltipAnchor="rewriteTooltipAnchor"}(r||(r={}))},58897:(e,t,i)=>{i.d(t,{Z:()=>n});var n,r=i(59833),s=i(58303),o=i(90023),a=i(45178);!function(e){let t,i,n,l,c,d,u,m,p;!function(e){let t;!function(e){e.rephrase="rephrase",e.dismiss="dismiss",e.insert="insert",e.offensive="offensive",e.copy="copy",e.generationCompleted="generationCompleted"}(t=e.UserAction||(e.UserAction={}))}(t=e.Result||(e.Result={})),function(e){let t;!function(e){e.open="open",e.skip="skip",e.openFromBanner="openFromBanner",e.keepVoiceTag="keepTag",e.removeVoiceTag="removeTag",e.toggleToMyVoice="toggleToMyVoice",e.toggleToNeutral="toggleToNeutral"}(t=e.UserAction||(e.UserAction={}))}(i=e.VoiceProfile||(e.VoiceProfile={})),function(e){let t;!function(e){e.openStore="openStore",e.offensive="offensive"}(t=e.UserAction||(e.UserAction={}))}(n=e.Actions||(e.Actions={})),function(e){let t;!function(e){e.search="search"}(t=e.UserAction||(e.UserAction={}))}(l=e.Prompt||(e.Prompt={})),function(e){let t;!function(e){e.hover="hover",e.click="click"}(t=e.UserAction||(e.UserAction={}))}(c=e.UsageInfo||(e.UsageInfo={})),function(e){let t;!function(e){e.view="view"}(t=e.UserAction||(e.UserAction={}))}(d=e.HistoryButton||(e.HistoryButton={})),function(e){let t;!function(e){e.view="view",e.skip="skip",e.next="next"}(t=e.UserAction||(e.UserAction={}))}(u=e.Onboarding||(e.Onboarding={})),function(e){let t;!function(e){e.close="close",e.readyToInteract="readyToInteract"}(t=e.UserAction||(e.UserAction={}))}(m=e.Assistant||(e.Assistant={})),function(e){let t,i;!function(e){e.view="view"}(t=e.UserAction||(e.UserAction={})),function(e){e.dontShowOnDocument="dontShowOnDocument",e.dontShowForever="dontShowForever"}(i=e.AIUsageUserAction||(e.AIUsageUserAction={}))}(p=e.Notification||(e.Notification={})),e.getComponentId=function(e,t,i,l={}){const c=(0,o.zG)(e.kind,(t=>{switch(t){case"result":return"card";case"voiceProfile":return"voice";case"actions":return e.userAction===n.UserAction.openStore?"group":"card";case"assistant":return"widget";case"onboardingPromptsTooltip":return"onboardingPromptTooltip";case"onboardingReviewTooltip":return"onboardingReviewtextTooltip";case"usageInfo":case"historyButton":case"prompt":case"onboardingPopup":case"BTSonboardingPopup":case"onboardingRewriteTooltip":case"onboardingKnowledgeHubTooltip":case"onboardingReferencesTooltip":case"onboardingHistoryTooltip":case"aiUsageNotification":case"contextNotification":case"actionNotification":return t;default:return(0,a.L0)(t)}}));return(0,o.zG)(s.ij(i),s.UI((e=>`cheetah:history-card:${e}`)),s.fS((()=>`cheetah:${c}${t?`:${t}`:""}`)),(d=l,e=>(0,o.zG)(Object.entries(d),r.u4(e,((e,[t,i])=>{const n=e.includes("?")?"&":"?";return e+`${n}${t}=${i}`})))));var d},e.getUserAction=function(e){return(0,o.zG)(e.kind,(t=>{switch(t){case"actions":return e.userAction===n.UserAction.openStore?"All Ideas":e.userAction;case"assistant":return e.userAction===m.UserAction.close?"dismiss":e.userAction;case"result":case"voiceProfile":case"prompt":case"usageInfo":case"historyButton":case"onboardingPopup":case"BTSonboardingPopup":case"onboardingPromptsTooltip":case"onboardingReviewTooltip":case"onboardingRewriteTooltip":case"onboardingKnowledgeHubTooltip":case"onboardingReferencesTooltip":case"onboardingHistoryTooltip":case"aiUsageNotification":case"contextNotification":case"actionNotification":return e.userAction;default:return(0,a.L0)(t)}}))}}(n||(n={}))},72783:(e,t,i)=>{i.d(t,{t:()=>z});var n=i(20232),r=i(72106),s=i(90023),o=i(79746),a=i(99210),l=i(32490),c=i(84910),d=i(78520),u=i(12518),m=i(93123),p=i(33632),g=i(72117),h=i(26460),f=i(63332),v=i(88347);function b(e){return{encode:function(t){var i=Object.entries(e).filter((function(e){return(0,g._)(e,1)[0]in t})).map((function(e){var i=(0,g._)(e,2),n=i[0],o=i[1];return(0,s.zG)(void 0===t[n]?r.F2(void 0):o.encode(t[n]),r.UI((function(e){return[n,e]})))}));return(0,s.zG)(r.RD(i),r.UI((function(e){return(0,v.sq)(e)})))}}}var y=b,x=y;function k(){return{encode:function(e){return r.F2(e)}}}var S,C=function(e){return null===e?"null":void 0===e?"undefined":(0,h._)(e)},E=function(e,t){if(void 0!==e&&void 0!==t){var i=C(e),n=C(t);if("object"===i||"object"===n)return Object.assign({},e,t)}return t},_={URI:"io-ts/EncoderAsync",literal:function(){return k()},string:k(),number:k(),boolean:k(),nullable:function(e){return{encode:function(t){return null===t?r.F2(null):e.encode(t)}}},type:x,struct:y,partial:b,record:function(e){return{encode:function(t){var i=Object.entries(t).map((function(t){var i=(0,g._)(t,2),n=i[0],o=i[1];return(0,s.zG)(e.encode(o),r.UI((function(e){return[n,e]})))}));return(0,s.zG)(r.RD(i),r.UI((function(e){return(0,v.sq)(e)})))}}},array:function(e){return{encode:function(t){return r.RD(t.map((function(t){return e.encode(t)})))}}},tuple:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return{encode:function(e){return r.RD(t.map((function(t,i){return t.encode(e[i])})))}}},intersect:function(e){return function(t){return{encode:function(i){return(0,s.zG)(t.encode(i),r.tS((function(t){return(0,s.zG)(e.encode(i),r.UI((function(e){return E(t,e)})))})))}}}},sum:f.Sm,lazy:function(e,t){return f.Vo(t)},readonly:f.OT},w=i(36661);!function(e){e.interpreter=(0,s.MZ)(w.n);e.extend=function(e){return function(t){return(0,c._)({},e,t)}}}(S||(S={}));var I=i(80100),A=i(85184),F=i(59908),P=i(4546),M=function(e){(0,F._)(i,e);var t=(0,P._)(i);function i(e,n){var r;return(0,a._)(this,i),r=t.call(this,"DLP Sanitizer: Schema mismatch error. ".concat(e)),(0,l._)((0,I._)(r),"decodeError",void 0),r.decodeError=n,r}return(0,A._)(i,[{key:"toString",value:function(){return"Decode error:\n      Message: ".concat(this.message,"\n      Details: ").concat(this.decodeError)}}]),i}(i(64297).sH),O=function e(t){var i=this;(0,a._)(this,e),(0,l._)(this,"_sanitizationFunctions",void 0),(0,l._)(this,"sanitizeMessage",void 0),(0,l._)(this,"unsanitizeMessage",void 0),(0,l._)(this,"_replaceInDelta",void 0),(0,l._)(this,"_sanitizeDelta",void 0),(0,l._)(this,"_unsanitizeDelta",void 0),(0,l._)(this,"_sensitiveDecoder",void 0),(0,l._)(this,"_sanitizingEncoder",void 0),(0,l._)(this,"_unsanitizingEncoder",void 0),(0,l._)(this,"_getMessageHandler",void 0),this._sanitizationFunctions=t,this.sanitizeMessage=function(e,t){var n=i._getMessageHandler(t);return(0,s.zG)(n.decode(e),u.g_((function(e){return r.t$(new M("Sanitization failed",m.ii(e)))}),(function(e){return n.sanitizer.encode(e)})))},this.unsanitizeMessage=function(e,t){var n=i._getMessageHandler(t);return(0,s.zG)(n.decode(e),u.g_((function(e){return r.t$(new M("Unsanitization failed",m.ii(e)))}),(function(e){return n.unsanitizer.encode(e)})))},this._replaceInDelta=function(e,t){return(0,s.zG)(r.RD(e.ops.map((function(e){return p.s.isInsertString(e)?(0,s.zG)(t(e.insert),r.UI((function(t){return(0,d._)((0,c._)({},e),{insert:t})}))):r.F2(e)}))),r.UI((function(e){return{ops:e}})))},this._sanitizeDelta=function(e){return i._replaceInDelta(e,i._sanitizationFunctions.sanitizeText)},this._unsanitizeDelta=function(e){return i._replaceInDelta(e,i._sanitizationFunctions.unsanitizeText)},this._sensitiveDecoder=S.extend(R)({any:m.id(),sensitiveString:m.Z_,sensitiveDelta:m.id()}),this._sanitizingEncoder=S.extend(_)({any:k(),sensitiveString:{encode:this._sanitizationFunctions.sanitizeText},sensitiveDelta:{encode:this._sanitizeDelta}}),this._unsanitizingEncoder=S.extend(_)({any:k(),sensitiveString:{encode:this._sanitizationFunctions.unsanitizeText},sensitiveDelta:{encode:this._unsanitizeDelta}}),this._getMessageHandler=function(e){return(0,d._)((0,c._)({},S.interpreter(i._sensitiveDecoder)(e)),{sanitizer:S.interpreter(i._sanitizingEncoder)(e),unsanitizer:S.interpreter(i._unsanitizingEncoder)(e)})}},T=function e(){(0,a._)(this,e),(0,l._)(this,"sanitizeMessage",(function(e,t){return r.F2(e)})),(0,l._)(this,"unsanitizeMessage",(function(e,t){return r.F2(e)}))},R=(0,d._)((0,c._)({},m.z2),{struct:m.z2.partial,type:m.z2.partial}),B=i(74822),U=i(90572),G=i(8065),N=i(50750),L=i(65883),D=i(30470),j=i(89421);class z{constructor(e){this._params=e,this._logEvents=new B.x,this.relevantInboundCAPIMessages=this._getRelevantInboundCAPIMessagesObs(),this.logEvents=this._logEvents.asObservable();const t=e.dlpOptions;this._dlpSanitizer=t?new O({sanitizeText:e=>r.Y3((()=>t.sanitizeText(e)),j.N),unsanitizeText:e=>r.Y3((()=>t.unsanitizeText(e)),j.N)}):new T}cheetahGetContext(e){return(0,s.zG)(this._sanitizeOutboundCheetahMessage("cheetah:getContext",e,o.MessageGetContext),r.tS((e=>this._params.sendCAPIMessage({action:"cheetah:getContext",shouldInjectRev:!0,data:e,shouldInjectSessionId:!1}))))}cheetahAction(e){return(0,s.zG)(this._sanitizeOutboundCheetahMessage("cheetah:action",e,o.MessageAction),r.tS((e=>this._params.sendCAPIMessage({action:"cheetah:action",shouldInjectRev:!0,data:e,shouldInjectSessionId:!1}))))}cheetahGetHistory(){return this._params.sendCAPIMessage({action:"cheetah:getHistory",shouldInjectRev:!1,data:{},shouldInjectSessionId:!1})}cheetahGetUserState(){return this._params.sendCAPIMessage({action:"cheetah:getUserState",data:{},shouldInjectRev:!1,shouldInjectSessionId:!1})}cheetahInterrupt(e){return this._params.sendCAPIMessage({action:"cheetah:interrupt",data:e,shouldInjectRev:!1,shouldInjectSessionId:!1})}cheetahSearchReferences(e){return this._params.sendCAPIMessage({action:"cheetah:searchReferences",data:e,shouldInjectRev:!1,shouldInjectSessionId:!1})}cheetahSetVoice(e){return this._params.sendCAPIMessage({action:"cheetah:setVoice",data:e,shouldInjectRev:!1,shouldInjectSessionId:!1})}cheetahSetVoiceProfile(e){return this._params.sendCAPIMessage({action:"cheetah:setVoiceProfile",data:e,shouldInjectRev:!1,shouldInjectSessionId:!1})}user_action(e){return this._params.sendCAPIMessage({action:"user_action",data:e,shouldInjectRev:!1,shouldInjectSessionId:!0})}set_context(e){return this._params.sendCAPIMessage({action:"set_context",data:e,shouldInjectRev:!0,shouldInjectSessionId:!1})}submit_survey_result(e){return this._params.sendCAPIMessage({action:"submit_survey_result",data:e,shouldInjectRev:!0,shouldInjectSessionId:!1})}feedback(e){return this._params.sendCAPIMessage({action:"feedback",data:e,shouldInjectRev:!1,shouldInjectSessionId:!1})}toggle_checks(e){return this._params.sendCAPIMessage({action:"toggle_checks",data:e,shouldInjectRev:!1,shouldInjectSessionId:!1})}_getRelevantInboundCAPIMessagesObs(){return this._params.inboundCAPIMessages.pipe(U.h(L.JS.is),G.b((e=>N.D((0,s.zG)(e,(e=>{switch(e.action){case"cheetah:setContext":return this._dlpSanitizer.unsanitizeMessage(e,o.MessageSetContext);case"cheetah:chunk":return this._dlpSanitizer.unsanitizeMessage(e,o.MessageChunk);case"cheetah:result":return this._dlpSanitizer.unsanitizeMessage(e,o.MessageResult);default:return r.F2(e)}}),r.g_((t=>(this._logEvents.next((0,D.xe)({capiMessageAction:e.action,reason:(0,j.N)(t).message})),n.of(e))),n.of),(e=>e()))))))}_sanitizeOutboundCheetahMessage(e,t,i){return(0,s.zG)(this._dlpSanitizer.sanitizeMessage(t,i),r.Vn((t=>(this._logEvents.next((0,D.bS)({capiMessageAction:e,reason:(0,j.N)(t).message})),t))))}}},40828:(e,t,i)=>{i.d(t,{L:()=>p});var n=i(58303),r=i(90023),s=i(13391),o=i(50887),a=i(90572),l=i(59179),c=i(23841),d=i(94032),u=i(65883),m=i(26069);class p{constructor(e,t){this._capiService=e,this._genAIFeaturesState=t,this._subs=new o.w.Keeper,this._availability=s.h.create({kind:m._.Kind.pending,userSettings:{inlineQuickReplyEnabled:!1,inlineRewriteEnabled:!1}}),this.availability=this._availability.view(),this._subs.push(this._genAIFeaturesState.subscribe((e=>{this._availability.set(e.enabled?m._.fromUserState(e.userState):{kind:m._.Kind.unavailable})}))),this._subs.push((0,r.zG)(this._capiService.relevantInboundCAPIMessages,a.h(u.JS.CheetahInboundCAPIMessage.is),l.U((e=>"cheetah:setUserState"===e.action?n.G(e.state):n.YP)),c.oA,l.U(m._.fromUserState)).subscribe(d.wW(this._availability))),this._subs.push((0,r.zG)(this._capiService.relevantInboundCAPIMessages,a.h(u.JS.CheetahInboundCAPIMessage.is),l.U((e=>{switch(e.action){case"cheetah:setContext":case"cheetah:result":return n.G(e.usage);default:return n.YP}})),c.oA,l.U((e=>m._.updateUsage(this._availability.get(),e)))).subscribe(d.wW(this._availability)))}dispose(){this._subs.dispose()}}},40595:(e,t,i)=>{i.d(t,{j:()=>o});var n=i(13391),r=i(32073),s=i(94032);class o{constructor(e){this._hostAvailability=e,this._sub=new r.w0,this._availability=n.h.create(null),this.availability=this._availability.view(),this._sub=e.subscribe(s.wW(this._availability))}augment(e){this._sub.unsubscribe(),this._sub=e(this._hostAvailability).subscribe(s.wW(this._availability))}dispose(){this._sub.unsubscribe()}}},93663:(e,t,i)=>{i.d(t,{$d:()=>o,KN:()=>a,UJ:()=>c,aW:()=>l});var n=i(58303),r=i(86399),s=i(90023);const o=()=>e=>e;function a(e){return(0,s.zG)(e,r.S1,n.fS((()=>[])))}function l(e){return(0,s.ls)(r.hX(e),r.Z$)}function c(e,t,i){const n=[...e];return t.forEach((e=>{const t=function(e,t,i){let n=0,r=e.length-1;for(;n<=r;){const s=n+r>>1;i.compare(t,e[s])<0?r=s-1:n=s+1}return n>=e.length?-1:n}(n,e,i);n.splice(-1===t?n.length:t,0,e)})),n}},57832:(e,t,i)=>{i.d(t,{Ki:()=>o,dD:()=>a,fx:()=>r,s4:()=>s});var n=i(23783);function r(e,t){return Object.assign(Object.assign({},function(e){return{width:n.ux.rem(e),minWidth:n.ux.rem(e)}}(e)),function(e){return{height:n.ux.rem(e),minHeight:n.ux.rem(e)}}(null!=t?t:e))}function s(e,t){return`.${e}`.repeat(t)}const o=7;function a(e,t){return function(e,t,i){return{$nest:{[`&${s(t,i)}`]:e}}}(e,t,o)}},12776:(e,t,i)=>{i.d(t,{DO:()=>c,l:()=>d});var n=i(58303),r=i(90023),s=i(11633),o=i(95869),a=i(93380);const l=s.OT(s.dt({ops:s.Bk(s.G0([s.dt({insert:s.OT(s.Z_)}),s.dt({retain:s.OT(s.pk)}),s.dt({delete:s.OT(s.pk)})]))}));function c(e){return(0,r.zG)(e,n.DT(l.is),n.UI((e=>new a.i([...e.ops]))))}function d(e,t){return e.reduce(((e,t)=>(o.s.isInsertString(t)?(e.text=`${e.text.substring(0,e.index)}${t.insert}${e.text.substring(e.index)}`,e.index+=t.insert.length):o.s.isDelete(t)?e.text=`${e.text.substring(0,e.index)}${e.text.substring(e.index+t.delete)}`:o.s.isRetain(t)?e.index+=t.retain:function(e){var t;return o.s.isInsertEmbed(e)&&!0===(null===(t=e.insert)||void 0===t?void 0:t.linebreak)}(t)&&(e.text=`${e.text.substring(0,e.index)}\n${e.text.substring(e.index)}`,e.index+=1),e)),{text:t,index:0}).text}},35770:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(91320),r=i(59226);const s=Object.assign(Object.assign({},n),{BrandGreen60:n.Green60,BorderBaseSubduedColor:r.I.Border.Base.Subdued,TextBaseSubduedColor:r.I.Text.Base.Subdued,TextBaseDefault:r.I.Text.Base.Default,BorderBaseInverse:r.I.Border.Base.Inverse,BackgroundNeutralDefault:r.I.Background.Neutral.Default,BackgroundAdditionSubdued:r.I.Background.Addition.Subdued,BackgroundBaseSubdued:r.I.Background.Base.Subdued,BackgroundBrandDefault:n.Green60,BackgroundBrandHover:n.Green80,BackgroundBrandActive:n.Green90,ButtonBackgroundSecondaryHover:n.Green0,ButtonBackgroundSecondaryActive:n.Green10,ColorBrandDefault:n.Green60,BorderBrandDefault:n.Green60,ButtonTextSecondaryDefault:n.Green60,ButtonTextSecondaryHover:n.Green90,ButtonTextSecondaryActive:n.Green90,ButtonBackgroundTertiaryHover:n.NeutralGray10,ButtonBackgroundTertiaryActive:n.NeutralGray20,ButtonTextTertiaryDefault:n.NeutralGray60,ButtonTextTertiaryHover:n.NeutralGray80,ButtonTextTertiaryActive:n.NeutralGray80,ButtonBorderTertiaryHover:n.NeutralGray40,ButtonBorderTertiaryActive:n.NeutralGray40,ButtonTextTertiaryDefaultInverse:n.NeutralGray10,ButtonTextTertiaryHoverInverse:n.NeutralGray10,ButtonBackgroundTertiaryHoverInverse:n.NeutralGray90,ButtonBorderTertiaryHoverInverse:n.NeutralGray10,ButtonTextTertiaryActiveInverse:n.NeutralGray10,ButtonBackgroundTertiaryActiveInverse:n.NeutralGray80,ButtonBorderTertiaryActiveInverse:n.NeutralGray10,PopoverBackgroundBaseSubdued:n.NeutralGray90,IndicatorDotDefault:n.Blue10,IndicatorDotActive:n.Blue40,OnBrandBadge:n.Blue0,OnBrandBadgeLabel:n.Blue40,OnBrandBadgeIcon:n.Blue60,OffBrandBadge:n.Red0,OffBrandBadgeLabel:n.Red60,OffBrandBadgeIcon:n.Red60,FooterBorder:r.I.Border.Base.Subdued,MenuBackgroundSelected:n.NeutralGray0,MenuIconSelected:n.NeutralGray60,MenuBorderDefault:n.NeutralGray40,MenuBackgroundHover:n.NeutralGray10,MenuIconHover:n.NeutralGray80,YellowGreen:"#D5FF00",LightGreen:"#00E0AC"})},89421:(e,t,i)=>{function n(e){return function(e){const t=e;return null!=t&&(void 0!==t.message&&void 0!==t.name||void 0!==t.stack)}(e)?e:{message:String(e),name:"",stack:void 0}}i.d(t,{N:()=>n})},19691:(e,t,i)=>{function n(e){return t=>{(null==t?void 0:t.isTrusted)&&(null==e||e(t))}}i.d(t,{m:()=>n})},88842:(e,t,i)=>{i.d(t,{Dx:()=>l,Tq:()=>n});var n,r=i(8867),s=i(84714),o=i(50750),a=i(61443);function l(e){return(i=e)&&(i instanceof r.y||"object"==typeof i&&"lift"in i&&"subscribe"in i&&c(i.lift)&&c(i.subscribe))||function(e){return d(e)&&(Symbol.observable in e&&c(e[Symbol.observable])||a.L in e&&c(e[a.L]))}(e)||d(t=e)&&"then"in t&&c(null==t?void 0:t.then)||function(e){return"object"==typeof e&&null!==e&&"length"in e}(e)||function(e){return"object"==typeof e&&null!==e&&Symbol.iterator in e}(e)||function(e){return"object"==typeof e&&null!==e&&Symbol.asyncIterator in e}(e)||function(e){return"object"==typeof e&&null!==e&&"getReader"in e}(e)?(0,o.D)(e):function(e){return d(e)&&"subscribe"in e&&c(null==e?void 0:e.subscribe)}(e)?(0,o.D)({[Symbol.observable||a.L]:()=>e}):(0,s.of)(e);var t,i}function c(e){return"function"==typeof e}function d(e){return null!==e&&"object"==typeof e}!function(e){e.toObservable=function(e){return e instanceof r.y?e:(0,s.of)(e)}}(n||(n={}))},1331:(e,t,i)=>{i.d(t,{L:()=>c,t:()=>l});var n=i(12518),r=i(72106),s=i(90023),o=i(89421),a=function(e,t,i,n){return new(i||(i=Promise))((function(r,s){function o(e){try{l(n.next(e))}catch(e){s(e)}}function a(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))};function l(e,t,i,r,s){return a(this,void 0,void 0,(function*(){try{const o=yield t();n.nM(o)?(null==i||i.error("Error executing async task.",{taskName:e,reason:o.left.message}),null==s||s(o.left)):(null==i||i.debug("Successfully executed async task.",{taskName:e,result:o.right}),null==r||r(o.right))}catch(t){null==s||s(t instanceof Error?t:new Error(String(t)));const n=(0,o.N)(t);null==i||i.error("Error executing async task, promise rejected.",{taskName:e,reason:n.message})}}))}const c={URI:r.ov,map:r.dO.map,ap:(e,t)=>(0,s.zG)(e,r.ap(t))}},63030:(e,t,i)=>{i.d(t,{S:()=>XM});var n,r=i(92379),s=i(54553);!function(e){e.assistantComponentStart="assistant_component_start",e.assistantViewModelsCreated="assistant_view_models_created",e.assistantComponentEnd="assistant_component_end",e.assistantContainerMounted="assistant_container_mounted",e.assistantGetStart="assistant_get_start",e.assistantGetEnd="assistant_get_end"}(n||(n={}));var o=i(58303),a=i(90023),l=i(74822),c=i(45178),d=i(13391),u=i(32073),m=i(20161),p=i(84714),g=i(94032),h=i(90572),f=i(84178),v=i(26069),b=i(35701),y=i(72783);class x{constructor(e){var t;this._deepLinkService=e,this._subs=new u.w0,this._handlers=new Map,this._subs.add(null===(t=this._deepLinkService)||void 0===t?void 0:t.deepLinkRequests.subscribe({next:e=>{var t;return null===(t=this._handlers.get(e))||void 0===t?void 0:t.handler.handleDeepLinkRequest()}}))}registerDeepLinkHandler(e,t){var i;const n=t.deepLinkStatusChanges.subscribe({next:t=>{var i;return null===(i=this._deepLinkService)||void 0===i?void 0:i.notifyStatusChanged(e,t)}}),r=()=>{n.unsubscribe(),this._handlers.delete(e)};return null===(i=this._handlers.get(e))||void 0===i||i.dispose(),this._handlers.set(e,{handler:t,dispose:r}),r}dispose(){this._subs.unsubscribe(),this._handlers.clear()}}var k=i(18117),S=i(12518),C=i(21147),E=i(86399),_=i(92135),w=i(66738),I=i(72106),A=i(24666),F=i(14969),P=i(61625),M=i(50887),O=i(59179),T=i(26156),R=i(47311),B=i(8794),U=i(23841),G=i(2613),N=i(63532),L=i(36344),D=i(2084),j=i(32036),z=i(72314),V=i(14944);function K(e,t=3){if(e&&t>0){const i=function(e){const t=(null===(r=null===(n=(i=e).ownerDocument)||void 0===n?void 0:n.defaultView)||void 0===r?void 0:r.getComputedStyle(i))||null;var i,n,r;return t?"auto"===t.overflow||"scroll"===t.overflow||"auto"===t.overflowY||"scroll"===t.overflowY||"auto"===t.overflowX||"scroll"===t.overflowX:null}(e);return i?e:null===i?null:K(null==e?void 0:e.parentElement,t-1)}return null}function Z(e){var t,i;return null===(i=(null===(t=e.activeElement)||void 0===t?void 0:t.shadowRoot)||e)||void 0===i?void 0:i.activeElement}function H(e){return e instanceof HTMLElement}const $=["b","i"];function W(e,t=$){return"string"==typeof e?{dangerouslySetInnerHTML:{__html:(0,z.sanitize)(e,{ALLOWED_TAGS:Array.from(t)})}}:{dangerouslySetInnerHTML:e.pipe(O.U((e=>({__html:(0,z.sanitize)(e,{ALLOWED_TAGS:Array.from(t)})}))))}}var Y=i(68823);const q="Apply your brand guidelines";var X,Q,J;!function(e){let t,i,n;!function(e){e.create=function(e){return e}}(t=e.Id||(e.Id={})),function(e){e.create=function(e,t){return{id:e,kind:"string",value:t}}}(i=e.StringValue||(e.StringValue={})),function(e){e.create=function(e,t){return{id:e,kind:"radio",value:t}}}(n=e.RadioValue||(e.RadioValue={}))}(X||(X={})),function(e){e.match=e=>t=>{const i=t.kind;return"string"===i?e.string(t):"radio"===i?e.radio(t):void(0,c.L0)(i)}}(Q||(Q={})),function(e){function t(e){return"followUpQuestion"===e.kind}function i(e){return"quickAction"===e.kind}let n,r,s,l,c,d,u;e.isFollowUpQuestionActionValue=t,e.isQuickActionValue=i,e.isListableActionValue=(0,P.Kg)(t,i),e.isUserPromptActionValue=function(e){return"userPrompt"===e.kind},e.isQuickRewriteActionValue=function(e){return"quickRewrite"===e.kind},e.isFollowUpQuestionActionInput=function(e){return"followUpQuestion"===e.kind},e.isQuickActionInput=function(e){return"quickAction"===e.kind},e.isSkillAction=function(e){return"skillAction"===e.kind},e.isToneAction=function(e){return"toneAction"===e.kind},e.isPlagiarismAction=function(e){return"plagiarismAction"===e.kind},e.isWritingExpertAction=function(e){return"writingExpertAction"===e.kind},e.isPerformanceScoreAction=function(e){return"performanceScoreAction"===e.kind},e.isHumanWritingReportAction=function(e){return"humanWritingReportAction"===e.kind},e.isAiStudioAction=function(e){return"aiStudioAction"===e.kind},e.isPlaybooksAction=function(e){return"playbooksAction"===e.kind},e.createFollowUpQuestionActionInputOrQuickActionInput=function(t,i,n){const s=Array.from(new Set(i.map((e=>e.group)).filter((0,a.ff)(r.isPinned)))).findIndex((e=>t.group===e)),l={id:e.Id.create(t.id),contextId:n,icon:S.F2(t.iconUrl),group:{id:r.Id.create(t.group),label:t.group,rank:s>-1?1e3*s:Number.MAX_SAFE_INTEGER},label:(0,z.sanitize)(t.label,{ALLOWED_TAGS:$}),badge:o.YP,searchLabel:(0,z.sanitize)(t.label,{ALLOWED_TAGS:[]}),searchTags:t.searchTags,generatesTextType:o.ij(t.generatesTextType),disabled:void 0!==t.disabled,notificationOnAttempt:(0,a.zG)(o.ij(t.disabled),o.tS((({onActionNotification:e})=>o.ij(e))),o.UI((({text:e})=>e)))};if(1===t.args.length){const e=t.args[0],i={id:X.Id.create(e.name),label:e.label,hints:(0,a.zG)(o.ij(e.hint),o.UI((e=>({header:e.header,items:e.text}))))};return"string"===e.valueType?o.G(Object.assign(Object.assign({},l),{kind:"followUpQuestion",args:[Object.assign(Object.assign({},i),{kind:"string"})],generatesTextType:o.ij(t.generatesTextType)})):"radioButtonGroup"===e.valueType?(0,a.zG)(e.radioButtonGroupValues,_.nI,o.UI((e=>Object.assign(Object.assign({},l),{kind:"followUpQuestion",args:[Object.assign(Object.assign({},i),{kind:"radio",radioOptions:e})],generatesTextType:o.ij(t.generatesTextType)})))):o.YP}return 0===t.args.length?o.G(Object.assign(Object.assign({},l),{kind:"quickAction",args:[]})):o.YP},function(e){e.create=function(e){return e},e.eq=C.yv}(n=e.Id||(e.Id={})),function(t){let i;!function(e){e.create=function(e){return e},e.eq=C.yv}(i=t.Id||(t.Id={})),t.isPinned=function(t){return t===e.knownGroup.pinned}}(r=e.Group||(e.Group={})),e.knownGroup={tools:r.Id.create("tools"),apps:r.Id.create("apps"),pinned:r.Id.create("pinned"),moreIdeas:r.Id.create("More ideas")},e.knownGroupRank={[e.knownGroup.tools]:-3e3,[e.knownGroup.pinned]:-1e3},e.knowGroupLabels={[e.knownGroup.tools]:"Tools",[e.knownGroup.apps]:"Apps",[e.knownGroup.pinned]:""},function(e){e.fromTextInput=function(e,t){return Object.assign(Object.assign({},e),{args:[X.StringValue.create(e.args[0].id,t)]})},e.fromRadioInput=function(e,t){return Object.assign(Object.assign({},e),{args:[X.RadioValue.create(e.args[0].id,t)]})}}(s=e.FollowUpQuestionActionValue||(e.FollowUpQuestionActionValue={})),e.createSkillAction=function(t){return{kind:"skillAction",id:n.create(t.id),group:{id:e.knownGroup.apps,label:"App actions",rank:Number.MAX_SAFE_INTEGER},icon:S.F2(t.iconUrl),label:(0,z.sanitize)(t.displayName,{ALLOWED_TAGS:$}),badge:o.YP,searchLabel:(0,z.sanitize)(t.displayName,{ALLOWED_TAGS:[]}),searchTags:t.tags,generatesTextType:o.YP,args:[],skill:t,disabled:!1,notificationOnAttempt:o.YP,dateLastAccessed:t.dateLastAccessed}},e.createToneAction=function(t){const i="Check my tone";return{kind:"toneAction",id:n.create(t.name),group:{id:e.knownGroup.tools,label:"Tools",rank:Number.MAX_SAFE_INTEGER},icon:S.F2((r=t.emojiId,Y.g+r+".svg")),label:i,badge:o.YP,searchLabel:(0,z.sanitize)(t.name,{ALLOWED_TAGS:[]}),searchTags:[i,t.name],generatesTextType:o.YP,args:[],tone:t,disabled:!1,notificationOnAttempt:o.YP};var r},e.createPlagiarismAction=function(t={}){const i=t.isAiDetectorEnabled?"Check for plagiarism and AI text":"Check for plagiarism",r=t.isAiDetectorEnabled?S.t$("plagiarismAndAiDetector"):S.t$("plagiarism");return{kind:"plagiarismAction",id:n.create("plagiarism"),group:{id:e.knownGroup.tools,label:"Tools",rank:Number.MAX_SAFE_INTEGER},icon:r,label:i,badge:o.YP,searchLabel:"plagiarism",searchTags:["Check for plagiarism"],generatesTextType:o.YP,args:[],disabled:!1,notificationOnAttempt:o.YP}},e.createWritingExpertAction=function(){const t="Increase the impact of your text";return{kind:"writingExpertAction",id:n.create("writingExpert"),group:{id:e.knownGroup.tools,label:"Tools",rank:Number.MAX_SAFE_INTEGER},icon:S.t$("writingExpert"),label:t,badge:o.G("new"),searchLabel:"ideas",searchTags:[t],generatesTextType:o.YP,args:[],disabled:!1,notificationOnAttempt:o.YP}},e.createAiStudioBrandVoiceAction=function(){const t=q;return{kind:"aiStudioAction",id:n.create("aiStudio"),group:{id:e.knownGroup.tools,label:"Tools",rank:Number.MAX_SAFE_INTEGER},icon:S.F2("https://assets.grammarly.com/icons/v1/ai-studio-icon.svg"),label:t,badge:o.YP,searchLabel:"ideas",searchTags:[t],generatesTextType:o.YP,args:[],disabled:!1,notificationOnAttempt:o.YP,playbookId:"brand_voice"}},e.createPlaybooksAction=function(t){return{kind:"playbooksAction",id:n.create("playbooks"),group:{id:e.knownGroup.tools,label:"Tools",rank:Number.MAX_SAFE_INTEGER},icon:S.F2("https://assets.grammarly.com/icons/v1/ai-studio-icon.svg"),label:t,badge:o.YP,searchLabel:"playbooks",searchTags:[t],generatesTextType:o.YP,args:[],disabled:!1,notificationOnAttempt:o.YP}},function(e){e.ordByGroup=V.Uz((e=>e.group.rank))(V.Mh)}(l=e.ListableActionInput||(e.ListableActionInput={})),function(e){e.fromInput=function(e,t,i,n){return Object.assign(Object.assign({},e),{arg:X.StringValue.create(e.arg.id,t),useReferences:i,omitReferenceIds:n})}}(c=e.UserPromptActionValue||(e.UserPromptActionValue={})),function(e){e.fromInput=function(e){return Object.assign(Object.assign({},e),{args:[]})}}(d=e.QuickRewriteActionValue||(e.QuickRewriteActionValue={})),function(e){e.fromInput=function(e){return Object.assign(Object.assign({},e),{args:[]})}}(u=e.ComplianceActionValue||(e.ComplianceActionValue={}))}(J||(J={}));var ee,te=i(65883);function ie(e){return(0,a.zG)(o.ij(e.changesSummary),o.hX((({title:e})=>""!==e)),o.tS((({title:e,description:t})=>(0,a.zG)(_.c2(t),o.UI((t=>({title:e,description:t})))))))}!function(e){let t,i;!function(e){e.create=function(e){return e}}(t=e.Id||(e.Id={})),e.isPending=function(e){return"pending"===e.kind},e.isReceived=function(e){return"received"===e.kind},function(e){e.empty=function(e){return{id:e,kind:"pending",availableActions:[],specialView:o.YP,userPromptAction:o.YP,intent:o.YP,documentOverview:o.YP,selection:o.YP,isBoundary:!1,textRevision:o.YP}}}(i=e.Pending||(e.Pending={}))}(ee||(ee={}));var ne,re=i(60512);function se(e,t){return{name:"assistant_sdui_open_link_called",labels:{source:0!==e.indexOf("advancedIssues")?"advancedIssues":0!==e.indexOf("blurredSuggestion")?"blurredSuggestion":"other",assistantType:t}}}function oe(e,t){return{name:"assistant_sdui_upgrade_to_premium_called",labels:{source:0!==e.indexOf("advancedIssues")?"advancedIssues":0!==e.indexOf("blurredSuggestion")?"blurredSuggestion":"other",assistantType:t}}}!function(e){let t;function i(e){switch(e){case"sensitiveResult":return{header:"Assistance is unavailable",text:"Assistance is unavailable for that text or prompt.\nTry something else."};case"overload":return{header:"Couldn’t generate text",text:"We’re handling a lot of prompts right now and couldn’t generate that text.\nPlease try again later."};case"unsupportedLanguage":return{header:"Hmm, don’t know that language",text:"Assistance is currently only available for English."};case"critical":case"timeout":case"emptyResult":case"truncatedResult":case"usageExceeded":return{header:"Something went wrong",text:"We’re not sure what happened, but we couldn’t generate that text.\nPlease try again."};default:return(0,a.Rz)(e)}}!function(e){e.create=function(e){switch(e){case re.oS.Generic:return"critical";case re.oS.Overflow:return"truncatedResult";case re.oS.PromptsLimitExceeded:return"usageExceeded";case re.oS.SensitiveContent:return"sensitiveResult";case re.oS.ServerOverloaded:return"overload";case re.oS.UnsupportedLanguage:return"unsupportedLanguage";default:return(0,a.Rz)(e)}}}(t=e.Reason||(e.Reason={})),e.create=function(e){const n=t.create(e.kind),r=(0,a.zG)(k.Yt(o.g1)({header:(0,a.zG)(o.ij(e.title),o.hX((e=>""!==e.trim()))),text:(0,a.zG)(o.ij(e.text),o.hX((e=>""!==e.trim())))}),o.fS((()=>i(n))));return Object.assign({reason:n},r)},e.createCriticalError=function(e){return{reason:"critical",header:"Something went wrong",text:e?"We’re not sure what happened.\nPlease try again later.":"We’re not sure what happened, but we couldn’t generate that text.\nPlease try again."}},e.createEmptyResultError=function(){return Object.assign({reason:"emptyResult"},i("emptyResult"))}}(ne||(ne={}));var ae=i(30470);var le,ce=i(10739);!function(e){let t,i,n;!function(e){e.restoreDisabled="restoreDisabled",e.unknown="unknown",e.hasHistory="hasHistory",e.noHistory="noHistory",e.historyRequested="historyRequested",e.historyRestored="historyRestored"}(t=e.HistoryStatus||(e.HistoryStatus={})),function(e){e.unknown="unknown",e.static="static",e.dynamic="dynamic"}(i=e.SelectionContextStatus||(e.SelectionContextStatus={})),e.toStarting=function(e){return"starting"===e.kind?o.G(e):o.YP},e.toStarted=function(e){return"started"===e.kind?o.G(e):o.YP},e.toContextless=function(e){return"contextless"===e.kind?o.G(e):o.YP},e.fold=function(e){return t=>"starting"===t.kind?e.starting(t):"started"===t.kind?e.started(t):"contextless"===t.kind?e.contextless(t):void(0,c.L0)(t)},e.isStartedWithInProgressResult=function(e){return"started"===e.kind&&o.pC(e.inProgressResult)},e.isStartingWithoutError=function(e){return o.Wi(e.error)&&"starting"===e.kind},function(e){e.initial=e=>({kind:"starting",mode:e,selectedRange:o.YP,selectedText:o.YP,quickReplyContext:o.YP,historyStatus:t.unknown,writingExpertContext:o.YP,error:o.YP,textRevision:0,selectionContextStatus:i.unknown})}(n=e.Starting||(e.Starting={}))}(le||(le={}));var de=i(43442);function ue(e){return de.s.isRewriteOrQuickRewrite(e.mode)}function me(e){return de.s.isCompliance(e.mode)}function pe(e){return de.s.isQuickReply(e.mode)}function ge(e){return de.s.isPushRewrite(e.mode)}function he(e){return"signed-in"===e.kind&&e.email.endsWith("@grammarly.com")&&(0,a.zG)(e.institution,o.g_(a.jv,(e=>624392205===e.id)))}function fe(e){return"signed-in"===e.kind}function ve(e){return"signed-out"===e.kind}function be(e){return fe(e)&&e.isPremium}var ye,xe=i(93380);!function(e){const t={"Cheetah/_System/Push/SimplifyRewrite":{copiablePrompt:o.YP,iconUrl:o.G("https://assets.grammarly.com/cheetah/v1/actions/simplify.svg"),label:"Simplify your text"},"Cheetah/_System/Push/ImproveParagraph":{copiablePrompt:o.YP,iconUrl:o.G("https://assets.grammarly.com/cheetah/v1/actions/improve.svg"),label:"Improve your text"}};e.toPreviousText=function(e){return(0,a.zG)(e,o.DT((e=>e.alertPname in t)),o.UI((e=>({kind:"writerExpert",suggestionId:e.alertId,pname:e.alertPname,text:e.replacementText}))))},e.getInitialResult=function(e){const i=S.t$((new xe.i).insert(e.replacementText));return(0,a.zG)(o.ij(t[e.alertPname]),o.UI((t=>({kind:"complete",id:ce.x.Id.create(0),header:t,replacementDelta:i,text:e.replacementText,references:o.YP,source:o.YP,changesSummary:o.YP,timestamp:Date.now(),supportedActions:new Set([ce.x.SupportedAction.insert,ce.x.SupportedAction.copy]),boundaryContextId:o.YP}))))}}(ye||(ye={}));var ke,Se,Ce=i(89421),Ee=i(88842),_e=i(1331),we=i(18519);function Ie(e,t){const i=(0,Ee.Dx)(e).pipe((0,f.q)(1));return void 0!==t?i.pipe((0,we.V)(t)).toPromise():i.toPromise()}!function(e){function t(){return(65536*(1+Math.random())|0).toString(16).substring(1)}e.create=function(){return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}}(ke||(ke={})),function(e){e.create=function(e,t,i,n,r){return"information"===e||"warning"===e?{kind:e,persistent:!!n,customTimeout:r,text:t,id:i||ke.create()}:{kind:e,persistent:!!i,customTimeout:"number"==typeof n?n:void 0,id:t||ke.create()}}}(Se||(Se={}));var Ae=i(87951);var Fe,Pe,Me=i(58623);!function(e){let t,i,n,r,s,a;!function(e){let t;!function(e){e.create=function(e){return e},e.eq=C.yv}(t=e.Id||(e.Id={}))}(t=e.Tone||(e.Tone={})),function(e){let t;!function(e){e.create=function(e){return e},e.eq=C.yv}(t=e.Id||(e.Id={}))}(i=e.Style||(e.Style={})),function(e){let t;!function(e){e.create=function(e){return e},e.eq=C.yv}(t=e.Id||(e.Id={}))}(n=e.Role||(e.Role={})),function(e){function t(e){switch(e){case"american":return"American English";case"australian":return"Australian English";case"british":return"British English";case"canadian":return"Canadian English";case"indian":return"Indian English";default:return(0,c.L0)(e)}}function i(e){switch(e){case"american":return"https://assets.grammarly.com/emoji/v1/1f1fa-1f1f8.svg";case"australian":return"https://assets.grammarly.com/emoji/v1/1f1e6-1f1fa.svg";case"british":return"https://assets.grammarly.com/emoji/v1/1f1ec-1f1e7.svg";case"canadian":return"https://assets.grammarly.com/emoji/v1/1f1e8-1f1e6.svg";case"indian":return"https://assets.grammarly.com/emoji/v1/1f1ee-1f1f3.svg";default:return(0,c.L0)(e)}}let n;!function(e){e.create=function(e){return e},e.eq=C.yv}(n=e.Id||(e.Id={})),e.american={id:n.create("american"),label:t("american"),iconUrl:i("american")},e.australian={id:n.create("australian"),label:t("australian"),iconUrl:i("australian")},e.british={id:n.create("british"),label:t("british"),iconUrl:i("british")},e.canadian={id:n.create("canadian"),label:t("canadian"),iconUrl:i("canadian")},e.indian={id:n.create("indian"),label:t("indian"),iconUrl:i("indian")},e.all=function(){return[e.american,e.australian,e.british,e.canadian,e.indian]}}(r=e.Dialect||(e.Dialect={})),function(e){e.eq=C.MW({selectedStyle:i.Id.eq,selectedTonesPerStyle:Me.Eh(i.Id.eq,w.Eh(t.Id.eq)),selectedRole:o.Eh(n.Id.eq),selectedDialect:r.Id.eq})}(s=e.Selections||(e.Selections={})),e.toLegacyVoiceProfile=function(e){return"legacyVoiceProfile"===e.kind?o.G(e):o.YP},function(e){const t=C.MW({name:C.yv,state:C.yv}),i=C.MW({name:C.yv,tags:E.Eh(t)}),s=C.MW({name:C.yv,summary:C.yv,selected:C.vD,sections:E.Eh(i)}),a=E.Eh(s);e.eqByRoleDialectProfileAndIsEnabledByDefault=C.MW({profiles:a,selectedRole:o.Eh(n.Id.eq),selectedDialect:r.Id.eq,isEnabledByDefault:C.vD})}(a=e.NewSelections||(e.NewSelections={})),e.toNewVoiceProfile=function(e){return"newVoiceProfile"===e.kind?o.G(e):o.YP}}(Fe||(Fe={})),function(e){e.createId=({tagName:e,sectionName:t,profileName:i})=>`${t}-${e}-${i}`}(Pe||(Pe={}));var Oe=i(85469),Te=i(56164),Re=i(61106),Be=i(12753),Ue=i(12776),Ge=function(e,t,i,n){return new(i||(i=Promise))((function(r,s){function o(e){try{l(n.next(e))}catch(e){s(e)}}function a(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))};function Ne(e,t){switch(e.historyStatus){case le.HistoryStatus.restoreDisabled:return e.historyStatus;case le.HistoryStatus.unknown:case le.HistoryStatus.noHistory:case le.HistoryStatus.hasHistory:return void 0!==t?t>0?le.HistoryStatus.hasHistory:le.HistoryStatus.noHistory:le.HistoryStatus.unknown;case le.HistoryStatus.historyRequested:case le.HistoryStatus.historyRestored:return"started"===e.kind&&void 0!==e.results.find(ce.x.isHistory)?le.HistoryStatus.historyRestored:le.HistoryStatus.restoreDisabled;default:(0,c.L0)(e.historyStatus)}}function Le(e,t=!1){return(0,a.zG)(e.replacementDelta,S.g_(a.yR,(({preferVoice:e,generic:i,user:n})=>t?e===ce.x.GeneratedTextVoice.generic?i:n:i)),(e=>(0,Ue.l)(e,"")))}function De(e){return I.fj((()=>"started"===e.kind?S.F2(e):S.t$(new Error("Session not started"))))}function je(e,t,i,n){var r;const s=(0,a.zG)(le.toStarted(i),o.g_((()=>[]),(e=>e.voiceProfile.roles)));return{kind:"newVoiceProfile",userName:e.userName,title:e.title,subTitle:e.subTitle,profiles:e.profiles,isEnabledByDefault:e.myVoiceIsEnabledByDefault.state,isEnabledByDefaultLabel:e.myVoiceIsEnabledByDefault.label,dialects:Fe.Dialect.all(),roles:(0,a.zG)(null!==(r=t.roles)&&void 0!==r?r:[],E.UI((e=>({id:Fe.Role.Id.create(e),label:e}))),(e=>e.length>0?e:s)),selectedDialect:(0,a.zG)(le.toStarted(i),o.g_((()=>Fe.Dialect.Id.create(n)),(e=>e.voiceProfile.selectedDialect))),selectedRole:(0,a.zG)(o.ij(t.selectedRole),o.UI((e=>e.trim())),o.hX((e=>""!==e)),o.UI(Fe.Role.Id.create)),needsSetup:!1}}function ze(e,t,i){var n,r;const s=(0,a.zG)(le.toStarted(t),o.UI((e=>e.voiceProfile)),o.tS(Fe.toLegacyVoiceProfile),o.g_((()=>[]),(e=>e.styles))),l=(0,a.zG)(le.toStarted(t),o.g_((()=>[]),(e=>e.voiceProfile.roles))),c=(0,a.zG)(null!==(n=e.styles)&&void 0!==n?n:[],E.UI((e=>({id:Fe.Style.Id.create(e.button.label),label:e.button.label,iconUrl:e.button.iconUrl,tones:e.tones.map((e=>({id:Fe.Tone.Id.create(e.label),label:e.label,iconUrl:e.iconUrl,description:e.description}))),maxTones:e.maxTones,description:e.button.description}))),(e=>e.length>0?e:s)),d=Fe.Style.Id.create(e.selectedStyle),u=c.find((e=>Fe.Style.Id.eq.equals(e.id,d)));return{kind:"legacyVoiceProfile",styles:c,roles:(0,a.zG)(null!==(r=e.roles)&&void 0!==r?r:[],E.UI((e=>({id:Fe.Role.Id.create(e),label:e}))),(e=>e.length>0?e:l)),selectedStyle:d,selectedTonesPerStyle:(new Map).set(d,new Set(e.selectedTones.filter((e=>null==u?void 0:u.tones.map((e=>e.id.toString())).includes(e))))),selectedRole:(0,a.zG)(o.ij(e.selectedRole),o.UI((e=>e.trim())),o.hX((e=>""!==e)),o.UI(Fe.Role.Id.create)),dialects:Fe.Dialect.all(),selectedDialect:(0,a.zG)(le.toStarted(t),o.g_((()=>Fe.Dialect.Id.create(i)),(e=>e.voiceProfile.selectedDialect))),needsSetup:e.needSetup}}function Ve(e,t,i,n){const r=(0,a.zG)(t,E.UI((i=>J.createFollowUpQuestionActionInputOrQuickActionInput(i,t,e))),E.oA),s=function(e){const t=[];e.brandVoice&&t.push(He("brand_voice",["brand","voice and tone","style guide"]));e.essayRubric&&t.push(He("essay_rubric",["essay","rubric"]));return t}(n);return[...s,...r,...i.map((e=>J.createSkillAction(e)))]}function Ke(e,t){const i=(0,a.zG)(e.args,E.YM,o.UI((t=>({id:J.Id.create(e.id),kind:"userPrompt",arg:{id:X.Id.create(t.name),kind:"string",label:t.label,hints:(0,a.zG)(o.ij(t.hint),o.UI((e=>({header:e.header,items:e.text}))))},generatesTextType:o.G(re.cX.Insertable),useReferences:o.YP,omitReferenceIds:o.YP,disabled:void 0!==e.disabled,notificationOnAttempt:(0,a.zG)(o.ij(e.disabled),o.tS((({onActionNotification:e})=>o.ij(e))),o.UI((({text:e})=>e)))}))));return o.Wi(i)&&t.warn("Failed to extract user prompt action, received empty action args.",{actionId:e.id}),i}function Ze(e){return{kind:"quickRewrite",id:J.Id.create(e.id),label:(0,z.sanitize)(e.label,{ALLOWED_TAGS:$}),icon:S.F2(e.iconUrl),generatesTextType:o.ij(e.generatesTextType),disabled:void 0!==e.disabled,notificationOnAttempt:(0,a.zG)(o.ij(e.disabled),o.tS((({onActionNotification:e})=>o.ij(e))),o.UI((({text:e})=>e)))}}function He(e,t){const i=(()=>{switch(e){case"brand_voice":return"Match my organization's brand and voice";case"peer_feedback":return"Match my organization's peer feedback guidelines";default:return"Ensure my essay meets the rubric"}})();return{args:[],badge:o.YP,disabled:!1,generatesTextType:o.G(re.cX.NonInsertable),group:{id:J.Group.Id.create("More ideas"),label:"More ideas",rank:0},icon:S.F2("https://assets.grammarly.com/icons/v1/ai-studio-icon.svg"),id:J.Id.create(e),kind:"aiStudioAction",label:i,notificationOnAttempt:o.YP,searchLabel:i,searchTags:t,playbookId:e}}function $e(e){return(0,a.zG)(o.ij(e),o.UI((e=>(0,z.sanitize)(e,{ALLOWED_TAGS:[...$,"person"]}))),o.UI((e=>e.trim())),o.hX((e=>e.length>0)))}function We(e){return{kind:ce.x.isComplete(e)?"regular":ce.x.isHistory(e)?"history":(0,c.L0)(e),text:Le(e)}}function Ye(e){return(0,a.zG)(o.ij(e.references),o.UI((t=>t.map((t=>{var i;return Object.assign(Object.assign({},t),{id:Ae.s.Id.create(t.id),url:o.ij(t.url),contextText:(0,a.zG)(o.ij(null===(i=e.metadata)||void 0===i?void 0:i.knowledge_engine_references),o.NG((e=>{const i=Array.isArray(e)?e.find((e=>e.id===t.id)):void 0,n=null==i?void 0:i.contextText;return"string"==typeof n?n:void 0})))})})))))}const qe=o.ij;function Xe(e){switch(e){case"ideation":case"appActionDeeplink":return re.s2.Ideation;case"rewrite":case"translate":return re.s2.Rewrite;case"quickRewrite":return re.s2.QuickRewrite;case"quickReply":return re.s2.QuickReply;case"pushRewrite":return re.s2.PushRewrite;case"compliance":return re.s2.Compliance;default:return(0,c.L0)(e)}}function Qe(e){const t=(0,a.zG)(e,o.DT((e=>function(e){return de.s.isIdeation(e.mode)}(e)&&!!e.documentUrl)),o.UI((e=>e.documentUrl)),o.tS(o.ij),o.tS(et),o.UI((e=>({pageIdHash:e})))),i=(0,a.zG)(e,o.DT(pe),o.UI((e=>Be.H.toOuterContext(e.quickReplyContext))));return o.uZ((0,Te.mL)()).concat(t,i)}function Je(e){return(0,a.zG)(e.quickReplyContext,o.UI(Be.H.toOuterContext))}function et(e){var t;return(0,a.zG)(null!==(t=function(e){var t;return null===(t=e.match(/^https:\/\/docs.google.com\/[a-zA-Z0-9-_]+\/d\/([a-zA-Z0-9-_]+)/))||void 0===t?void 0:t[1]}(e))&&void 0!==t?t:function(e){var t;const i=null!==(t=e.match(/^https:\/\/([a-zA-Z0-9-_]+).atlassian.net\/wiki\/spaces\/[a-zA-Z0-9-_]+\/pages\/([0-9]+)/))&&void 0!==t?t:[];return i[1]&&i[2]?`${i[1]}:${i[2]}`:void 0}(e),o.ij,o.UI(tt))}function tt(e){return(0,Re.Ch)(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function it(e,t,i,n,r){var s,l;return Ge(this,void 0,void 0,(function*(){if((null==r?void 0:r.contextUpdatesServer)&&!ee.isPending(e)&&i.textRevision===o.FS(e.textRevision)){const r=(0,a.zG)(o.Wi(i.selectedRange)?(0,a.zG)(o.ij(null===(s=t.context)||void 0===s?void 0:s.textScope),o.hX((e=>e.start!==e.end))):(0,a.zG)(k.Yt(o.Kw)({currentSelectionRange:i.selectedRange,backendSelectionRange:o.ij(null===(l=t.context)||void 0===l?void 0:l.textScope)}),o.hX((({currentSelectionRange:e,backendSelectionRange:t})=>e.start!==t.start||e.end!==t.end)),o.UI((({backendSelectionRange:e})=>e))),o.FS);if(r){if(r.start===r.end)return S.F2(o.YP);{const t=yield n(r)();return S.F2((0,a.zG)(o.Uo(t),o.UI((e=>({text:e,range:r}))),o.wp((()=>e.selection))))}}return S.t$(void 0)}return S.t$(void 0)}))}var nt=function(e,t,i,n){return new(i||(i=Promise))((function(r,s){function o(e){try{l(n.next(e))}catch(e){s(e)}}function a(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))},rt=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};class st{constructor(e){var t,i,n,r,s;if(this._params=e,this._subs=new M.w.Keeper,this._logger=this._params.logService.getLogger(st.name),this._session=d.h.create(le.Starting.initial(this._params.genAIStartSessionOptions.mode)),this._resultById=new Map,this._contextIdByResultId=new Map,this._contextById=new Map,this._historyResultIdByGetContextMessageId=new Map,this._contextMessageIdsTriggeredBySelectionChanges=new Set,this._stateBlobByContextId=new Map,this._initialReceivedContext=null,this._upstreamDialect=d.h.create(Fe.Dialect.Id.create("american")),this._cheetahAckIds=new Set,this._searchReferencesUrlsById=new Map,this._cheetahAckHandlers=new Array,this._resultTimeout=void 0,this._contextTimeout=void 0,this._historyTimeout=void 0,this._cheetahAckTimeout=void 0,this._historyAckHandler=void 0,this._skills=[],this._capiCheckingStatus=d.h.create("unknown"),this._showAiStudioBrandVoiceAction=d.h.create(!1),this._showEssayRubricAction=d.h.create(!1),this._resultTimeoutMs=null!==(t=this._params.resultTimeoutMs)&&void 0!==t?t:2e4,this._contextTimeoutMs=null!==(i=this._params.contextTimeoutMs)&&void 0!==i?i:2e4,this._historyTimeoutMs=null!==(n=this._params.historyTimeoutMs)&&void 0!==n?n:2e4,this._cheetahAckTimeoutMs=null!==(r=this._params.cheetahAckTimeoutMs)&&void 0!==r?r:2e4,this._notificationHandler=null,this.session=this._session.view(),this._handleCAPIMessage=e=>{switch(e.action){case"error":return this._handleError(e);case"cheetah":return this._handleCheetahAck(e);case"cheetah:setContext":return void this._handleCheetahSetContext(e);case"cheetah:chunk":return this._handleCheetahChunk(e);case"cheetah:result":return void this._handleCheetahResult(e);case"cheetah:error":return this._handleCheetahError(e);case"cheetah:setUserState":return this._handleCheetahSetUserState(e);case"cheetah:searchReferencesResult":return this._handleCheetahSearchReferencesResult(e);case"cheetah:invalidateContext":return void this._getContext();case"cheetah:setHistory":return this._handleCheetahSetHistory(e);case"show_survey":case"emotions":case"finished":case"async_check_finished":case"start":return;default:return(0,c.L0)(e)}},this._params.experimentService&&(0,_e.t)("isGateEnabledForBrandVoiceAction",(0,a.zG)(this._params.experimentService.isGateEnabled(this._params.experimentService.gates.AiStudioInlineWritingGuidelines),I.Vn((e=>new Error(e)))),this._logger,(e=>{this._showAiStudioBrandVoiceAction.set(e)}),(e=>{this._params.logService.logEvent({kind:"error",source:"core",name:"isGateEnabledForBrandVoiceAction",data:(0,Ce.N)(e).message})})),(0,_e.t)("isGateEnabledForEssayRubric",(0,a.zG)(null===(s=this._params.experimentService)||void 0===s?void 0:s.isGateEnabled(this._params.experimentService.gates.AiStudioEssayRubric),I.Vn((e=>new Error(e)))),this._logger,(e=>{this._showEssayRubricAction.set(e)}),(e=>{this._params.logService.logEvent({kind:"error",source:"core",name:"isGateEnabledForEssayRubric",data:(0,Ce.N)(e).message})})),this._subs.push(this._params.capiService.relevantInboundCAPIMessages.pipe(h.h(te.JS.Finished.is),O.U((e=>e.checksStatus))).subscribe(g.wW(this._capiCheckingStatus))),ue(this._params.genAIStartSessionOptions)||me(this._params.genAIStartSessionOptions)){const e=this._params.textEditorService.selectedRange.get();(0,a.zG)(e,o.g_((()=>this._init()),(e=>(0,_e.t)("getText",this._params.textEditorService.getText(e),this._logger,(t=>this._init({selectedRange:e,selectedText:t})),(t=>{this._params.logService.logEvent((0,ae.q_)({textRange:e,reason:(0,Ce.N)(t).message})),this._init()})))))}else this._init()}registerNotificationHandler(e){this._notificationHandler=e}_pushNotification(e){var t;null===(t=this._notificationHandler)||void 0===t||t.call(this,e)}_init(e){var t;this._session.set({kind:"starting",mode:this._params.genAIStartSessionOptions.mode,selectedRange:o.ij(null==e?void 0:e.selectedRange),selectedText:(0,a.zG)(o.ij(null==e?void 0:e.selectedText),o.hX((e=>e.length>0))),quickReplyContext:o.ij(pe(this._params.genAIStartSessionOptions)?this._params.genAIStartSessionOptions.quickReplyContext:void 0),writingExpertContext:o.ij(ge(this._params.genAIStartSessionOptions)?this._params.genAIStartSessionOptions.writingExpertContext:void 0),historyStatus:le.HistoryStatus.unknown,error:o.YP,textRevision:0,selectionContextStatus:this._params.selectionContextAvailability&&(null===(t=this._params.selectionContextAvailability.get())||void 0===t?void 0:t.contextUpdatesClient)?le.SelectionContextStatus.dynamic:le.SelectionContextStatus.static}),this._setupSessionModeUpdater(),this._subs.push(this._params.capiService.relevantInboundCAPIMessages.subscribe((e=>this._handleCAPIMessage(e)))),this._subs.push(this._params.userService.user.pipe(h.h(fe),O.U((({dialect:e})=>e)),O.U(Fe.Dialect.Id.create)).subscribe(g.wW(this._upstreamDialect))),this._subs.push(this._upstreamDialect.subscribe((e=>this._handleUpstreamDialectChange(e)))),this._subs.push(this._session.pipe((0,A.x)(((e,t)=>e.kind===t.kind)),(0,F.P)((e=>"started"===e.kind))).subscribe((()=>{this._params.userActionTrackingService.trackReadyToInteract(),this._params.metricService.report({name:"assistant_gen_ai_initial_context_ready",labels:void 0},{startMarks:["assistant_lifecycle_starting"]})}))),this._params.selectionContextAvailability&&this._setUpSelectionAvailabilityChangeHandlers(this._params.selectionContextAvailability),this._setupGenAIAvailabilityHandler(),this._subs.push(this._session.subscribe((e=>this._logger.debug("Session updated.",e))))}_setupGenAIAvailabilityHandler(){this._subs.push(this._params.genAIAvailability.pipe(O.U(v._.isUnavailable),A.x()).subscribe((e=>{this._logger.debug("Gen-AI availability updated.",{genAIIsUnavailable:e}),e?(this._session.modify((e=>Object.assign(Object.assign({},e),{kind:"contextless",nonContextualActions:[]}))),this._getSkills()):"started"!==this._session.get().kind&&(this._session.modify((e=>Object.assign(Object.assign({},e),{kind:"starting"}))),this._startSessionWhenAppropriate())})))}_startSessionWhenAppropriate(){var e;this._params.selectionContextAvailability&&null===this._params.selectionContextAvailability.get()?T.S([this._params.selectionContextAvailability.pipe(h.h((e=>null!==e))),R.timer(null!==(e=this._params.selectionContextAvailabilityWaitTimeoutMs)&&void 0!==e?e:2e3)]).pipe(f.q(1)).subscribe((()=>this._startSession())):this._startSession()}_startSession(e){(0,_e.t)("flush",this._params.textEditorService.flush(),this._logger,(()=>{var t,i;const n=ue(this._params.genAIStartSessionOptions)||me(this._params.genAIStartSessionOptions)?this._params.textEditorService.selectedRange.get():o.ij(void 0),r=Qe(this._params.genAIStartSessionOptions),s=o.ij(ge(this._params.genAIStartSessionOptions)?this._params.genAIStartSessionOptions.writingExpertContext:void 0),l={generationMode:Xe(this._params.genAIStartSessionOptions.mode),selectedRange:o.FS(n),outerContext:o.FS(r),stateBlob:e,metadata:this._params.genAIStartSessionOptions.metadata,previousText:(0,a.zG)(s,o.tS(ye.toPreviousText),o.FS),includeDisabledActions:this._params.selectionContextAvailability&&(null===(t=this._params.selectionContextAvailability.get())||void 0===t?void 0:t.contextUpdatesServer)&&(null===(i=this._params.selectionContextAvailability.get())||void 0===i?void 0:i.contextUpdatesClient)};this._getSkills(),this._getContext(l)}))}_getSkills(){if(this._params.skillService){const e={skills:0===this._skills.length?this._params.skillService.getSkills():I.F2(this._skills),shouldShowSkills:(0,a.zG)(this._params.experimentService?this._params.experimentService.isGateEnabled(Oe.C.CheetahFetchSkills):I.F2(!1),I.Vn((e=>new Error(e))))};(0,_e.t)("getSkills",k.Yt(_e.L)(e),this._logger,(({skills:e,shouldShowSkills:t})=>{t&&(this._skills=e,this._session.modify(le.fold({starting:a.yR,contextless:e=>Object.assign(Object.assign({},e),{nonContextualActions:this._skills.map((e=>J.createSkillAction(e)))}),started:e=>e.activeContext.availableActions.some((e=>"skillAction"===e.kind))?e:Object.assign(Object.assign({},e),{activeContext:Object.assign(Object.assign({},e.activeContext),{availableActions:e.activeContext.availableActions.concat(this._skills.map((e=>J.createSkillAction(e))))}),activeBoundaryContext:Object.assign(Object.assign({},e.activeBoundaryContext),{availableActions:e.activeBoundaryContext.availableActions.concat(this._skills.map((e=>J.createSkillAction(e))))})})})))}),(e=>{this._params.logService.logEvent(function(e){return{kind:"error",source:"skill",name:"getSkillsFailed",data:e}}({reason:(0,Ce.N)(e).message}))}))}}_setUpSelectionAvailabilityChangeHandlers(e){const t=e.pipe(O.U((e=>!!(null==e?void 0:e.contextUpdatesClient))));this._subs.push(t.pipe(m.w((e=>e?this._params.textEditorService.selectedRange.pipe(B.T(1),U.oA,G.e(500),N.b((e=>this._handleSelectedRangeUpdate(e)))):L.E))).subscribe()),this._subs.push(t.pipe(m.w((e=>e?(0,Ee.Dx)(this._params.textEditorService.textUpdated).pipe(N.b((()=>this._handleTextUpdated()))):L.E))).subscribe()),this._subs.push(t.pipe(N.b((e=>{this._session.modify((t=>Object.assign(Object.assign({},t),{selectionContextStatus:e?le.SelectionContextStatus.dynamic:le.SelectionContextStatus.static})))}))).subscribe())}_handleSelectedRangeUpdate(e){this._logger.debug("Handling selected range update.",{selectedRange:e}),(0,_e.t)("getText",this._params.textEditorService.getText(e),this._logger,(t=>{t.trim().length?(this._session.modify(le.fold({starting:a.yR,contextless:a.yR,started:i=>Object.assign(Object.assign({},i),{mode:"rewrite",activeContext:Object.assign(Object.assign({},i.activeContext),{kind:"pending",isBoundary:!0,textRevision:o.G(i.textRevision),selection:o.G({text:t,range:e})}),activeBoundaryContext:Object.assign(Object.assign({},i.activeBoundaryContext),{kind:"pending",isBoundary:!0,textRevision:o.G(i.textRevision),selection:o.G({text:t,range:e})}),selectedRange:o.G(e),selectedText:(0,a.zG)(o.G(t),o.hX((e=>e.length>0)))})})),this._getContext(void 0,void 0,!0)):this._session.modify((e=>Object.assign(Object.assign({},e),{selectedRange:o.YP,selectedText:o.YP})))}))}_handleTextUpdated(){this._logger.debug("Handling text update."),this._session.modify(le.fold({starting:a.yR,contextless:a.yR,started:e=>Object.assign(Object.assign({},e),{textRevision:e.textRevision+1})}))}_setupSessionModeUpdater(){"quickReply"===this._params.genAIStartSessionOptions.mode&&this._params.textEditorService.trimmedTextLength&&this._subs.push((0,Ee.Dx)(this._params.textEditorService.trimmedTextLength).pipe(h.h((e=>e>0)),f.q(1)).subscribe((()=>{this._session.modify((e=>Object.assign(Object.assign({},e),{mode:"quickReply"===e.mode?"ideation":e.mode})))})))}submitAction(e,t){this._logger.debug("Submitting action.",{actionValue:e,selectedVoice:t}),this._submitAction(e,void 0,void 0,void 0,void 0,t)}setVoiceProfile(e){return this._logger.debug("Setting voice profile (legacy).",{voiceProfileSelections:e}),(0,a.zG)(De(this._session.get()),I.UI((t=>(this._session.set(Object.assign(Object.assign({},t),{voiceProfile:Object.assign(Object.assign({},t.voiceProfile),e),activeContext:Object.assign(Object.assign({},t.activeContext),{kind:"pending"})})),t))),I.tS((t=>(0,a.zG)(this._params.capiService.cheetahSetVoice({voice:{selectedStyle:e.selectedStyle,selectedTones:Array.from(e.selectedTonesPerStyle.get(e.selectedStyle)||[]),selectedRole:(0,a.zG)(e.selectedRole,o.FS),needSetup:!1}}),I.Pd((e=>new Error(`CAPIService.cheetahSetVoice error: ${e.message}`)),(()=>!Fe.Dialect.Id.eq.equals(t.voiceProfile.selectedDialect,e.selectedDialect))),I.tS((t=>t?k.gz(I.qA)((0,a.zG)(this._params.capiService.set_context({documentContext:{dialect:e.selectedDialect}}),I.Vn((e=>new Error(`CAPIService.setContext error: ${e.message}`)))),(0,a.zG)(this._params.userService.setDialect(e.selectedDialect),I.Vn((e=>new Error(`UserService.setDialect error: ${e.message}`))))):I.of(null))),I.Pd((e=>(this._params.logService.logEvent((0,ae.TX)({reason:(0,Ce.N)(e).message})),e)),a.Q1)))))}setNewVoiceProfile(e){var{selectedDialect:t}=e,i=rt(e,["selectedDialect"]);return this._logger.debug("Setting voice profile (new).",{dialect:t,voiceProfile:i}),(0,a.zG)(De(this._session.get()),I.UI((e=>(this._session.set(Object.assign(Object.assign({},e),{activeContext:Object.assign(Object.assign({},e.activeContext),{kind:"pending"})})),e))),I.tS((e=>(0,a.zG)(this._params.capiService.cheetahSetVoiceProfile({role:(0,a.zG)(i.selectedRole,o.FS),isEnabledByDefault:i.isEnabledByDefault,profiles:i.profiles}),I.Pd((e=>new Error(`CAPIService.cheetahSetVoiceProfile error: ${e.message}`)),(()=>!Fe.Dialect.Id.eq.equals(e.voiceProfile.selectedDialect,t))),I.tS((e=>e?k.gz(I.qA)((0,a.zG)(this._params.capiService.set_context({documentContext:{dialect:t}}),I.Vn((e=>new Error(`CAPIService.setContext error: ${e.message}`)))),(0,a.zG)(this._params.userService.setDialect(t),I.Vn((e=>new Error(`UserService.setDialect error: ${e.message}`))))):I.of(null))),I.Pd((e=>(this._params.logService.logEvent((0,ae.Jr)({reason:(0,Ce.N)(e).message})),e)),a.Q1)))))}stopInProgressResult(){return this._logger.debug("Stopping in-progress result."),(0,a.zG)(this._session.get(),I.DT(le.isStartedWithInProgressResult,(()=>new Error("Session has no in-progress result."))),I.tS((e=>(this._clearResultRelatedTimeouts(),this._session.modify((t=>Object.assign(Object.assign({},t),{activeContext:(0,a.zG)(e.results.length>0?this._extractLatestResultContext(e):this._extractInitialContext(),o.fS((()=>e.activeContext))),inProgressResult:ce.x.isInProgressPending(e.inProgressResult.value)?o.G(Object.assign(Object.assign({},e.inProgressResult.value),{kind:"inProgressInterrupted"})):ce.x.isInProgressInterrupted(e.inProgressResult.value)?e.inProgressResult:ce.x.isInProgressOngoing(e.inProgressResult.value)?o.YP:(0,c.L0)(e.inProgressResult.value)}))),(0,a.zG)(e.inProgressResult.value,o.DT(ce.x.isInProgressOngoing),o.g_((()=>I.of(-1)),(e=>this._params.capiService.cheetahInterrupt({promptId:ce.x.Id.toPrimitive(e.id)}))))))),I.Pd((e=>(this._params.logService.logEvent((0,ae.Lp)({reason:(0,Ce.N)(e).message})),e)),a.Q1))}regenerateResult(e,t,i){this._logger.debug("Regenerating result.",{resultId:e,options:t,selectedVoice:i}),(0,a.zG)(le.toStarted(this._session.get()),D.ew((()=>{this._params.logService.logEvent((0,ae.g0)({resultId:e,reason:"session-not-started"}))})),o.tS((t=>(0,a.zG)(o.ij(this._resultById.get(e)),o.hX(ce.x.isComplete),o.hX((e=>e.supportedActions.has(ce.x.SupportedAction.rephrase))),o.UI((e=>({session:t,result:e}))),D.ew((()=>{this._params.logService.logEvent((0,ae.g0)({resultId:e,reason:"not-found"}))}))))),o.tS((({session:t,result:i})=>(0,a.zG)(k.Yt(o.Kw)({resultSource:i.source,boundaryContextId:i.boundaryContextId}),o.UI((({resultSource:e,boundaryContextId:n})=>({resultSource:e,boundaryContextId:n,resultText:Le(i),session:t}))),D.ew((()=>{this._params.logService.logEvent((0,ae.g0)({resultId:e,reason:"no-source-action"}))}))))),o.UI((({resultSource:n,boundaryContextId:r,resultText:s})=>{const l=n.actionValue,c=o.uZ(_.jG()).concat,d=(0,a.zG)(l,o.DT(J.isUserPromptActionValue),o.g_((0,a.a9)(l),(e=>Object.assign(Object.assign({},e),{omitReferenceIds:c(e.omitReferenceIds,t.omitReferenceIds)})))),u=this._contextIdByResultId.get(e);void 0===u&&this._params.logService.logEvent({kind:"warn",source:"core",name:"regenerateResultContextNotFound",data:null}),this._submitAction(d,n.contextId,u,r,{kind:"regular",text:s},i),this._params.userActionTrackingService.trackResultRephrase(u)})))}searchReferences(e){const t=this._session.get();"started"===t.kind?t.detectedReferences.has(e)||(this._session.set(Object.assign(Object.assign({},t),{detectedReferences:new Map(t.detectedReferences).set(e,o.YP)})),this._setupCheetahAckHandler("searchReferences",(t=>{this._searchReferencesUrlsById.set(t,e)})),(0,_e.t)("cheetahSearchReferences",this._params.capiService.cheetahSearchReferences({url:e}),this._logger)):this._logger.warn("Failed to search references, session not started.",{referencesUrl:e})}dismissResult(e){this._logger.debug("Dismissing result.",{resultId:e});const t=this._session.get();let i=null;if("started"===t.kind){if(this._resultById.delete(e)){const n=t.results.findIndex((t=>t.id===e));i=t.results[n];let r=t.activeContext,s=t.activeBoundaryContext,l=null;if(0===n&&t.results.length>1){this._logger.debug("Dismissing latest result, will try to restore context from previous result.",{session:t,resultId:e});const i=o.FS(this._extractPreviousResultContext(t)),n=(0,a.zG)(this._extractPreviousResultBoundaryContext(t),o.wp((()=>o.ij(this._initialReceivedContext))),o.FS),c=o.FS(this._extractLatestResultBoundaryContext(t));i?n!==c?(this._logger.debug("Dismissing result, previous result was for different boundary context, will keep currently active boundary context.",{session:t,resultId:e}),r=t.activeBoundaryContext):(this._logger.debug("Dismissing result, found context for previous result, will restore its context.",{session:t,resultId:e,previousResultContext:i}),r=i,n&&(s=n)):t.results[1]&&ce.x.isHistory(t.results[1])&&(0,a.zG)(o.ij(this._contextIdByResultId.get(t.results[1].id)),o.tS((e=>o.ij(this._contextById.get(e)))),o.Wi)?l=t.results[1].id:this._logger.warn("Failed to find context for previous result after dismissing result.",{resultId:e})}else 1===t.results.length&&(r=t.activeBoundaryContext);this._session.set(Object.assign(Object.assign({},t),{activeContext:Object.assign(Object.assign({},r),{kind:null!==l?"pending":r.kind,availableActions:l?[]:r.availableActions}),activeBoundaryContext:s,results:t.results.filter((t=>!ce.x.Id.eq.equals(t.id,e)))}));const c=this._contextIdByResultId.get(e);this._params.userActionTrackingService.trackResultDismiss(c,ce.x.isHistory(i)?e:void 0),"aiUsageNotification"===i.kind&&this._params.userActionTrackingService.trackAINotificationDismiss("document"),l&&this._getContext(void 0,l)}else this._logger.warn("Failed to dismiss result, result does not exist.",{resultId:e})}else this._logger.warn("Failed to dismiss result, session not started.",{resultId:e})}dismissError(){this._logger.debug("Dismissing error."),this._session.lens("error").set(o.YP)}restoreHistory(){this._getHistory()}trackResultInsert(e,t=!1){this._logger.debug("Tracking result insert.",{resultId:e,isUserVoice:t});const i=this._resultById.get(e);if(i){const n=this._contextIdByResultId.get(e);this._params.userActionTrackingService.trackResultInsert(n,ce.x.isHistory(i)?i.id:void 0,t)}else this._logger.warn("Failed to track result insert, result does not exist.",{resultId:e})}trackResultCopy(e,t=!1){this._logger.debug("Tracking result copy.",{resultId:e,isUserVoice:t});const i=this._resultById.get(e);if(i){const n=this._contextIdByResultId.get(e);this._params.userActionTrackingService.trackResultCopy(n,ce.x.isHistory(i)?i.id:void 0,t)}else this._logger.warn("Failed to track result copy, result does not exist.",{resultId:e})}_trackResultGenerationCompleted(e){this._logger.debug("Tracking result generation-complete.",{resultId:e});const t=this._resultById.get(e);if(t){const i=this._contextIdByResultId.get(e);this._params.userActionTrackingService.trackResultGenerationCompleted(i,ce.x.isHistory(t)?t.id:void 0)}else this._logger.warn("Failed to track result generation-complete, result does not exist.",{resultId:e})}trackResultOffensive(e){this._logger.debug("Tracking result as offensive.",{resultId:e});const t=this._resultById.get(e);if(t){const i=this._contextIdByResultId.get(e);this._params.userActionTrackingService.trackResultOffensive(i,ce.x.isHistory(t)?t.id:void 0)}else this._logger.warn("Failed to track result as offensive, result does not exist.",{resultId:e})}trackActionsOffensive(){this._logger.debug("Tracking actions as offensive.");const e=this._session.get();"started"===e.kind?this._params.userActionTrackingService.trackActionsOffensive(e.activeContext.id):this._logger.warn("Failed to track actions as offensive, session not started.")}getContextById(e){return o.ij(this._contextById.get(e))}dismissActiveBoundaryContext(e){this._logger.debug("Dismissing active boundary context.",{restorePreviousBoundaryContext:e});const t=(0,a.zG)(le.toStarted(this._session.get()),o.UI((e=>e.activeContext.id!==e.activeBoundaryContext.id)),o.fS(a.jv));if(e&&t)return void this._logger.warn("Failed to dismiss active boundary context, cannot simultaneously dismiss boundary context with results and restore previous one.");const i=t||!e,n=o.WG((0,a.zG)(this._session.get(),le.toStarted,o.tS((e=>this._extractLatestResultContext(e))))),r=o.WG((0,a.zG)(this._session.get(),le.toStarted,o.tS((e=>this._extractLatestResultBoundaryContext(e))),o.wp((()=>this._extractInitialContext()))));this._session.modify(le.fold({starting:a.yR,contextless:a.yR,started:e=>i?Object.assign(Object.assign({},e),{mode:"ideation",activeContext:Object.assign(Object.assign({},e.activeContext),{kind:"pending",isBoundary:!0,textRevision:o.G(e.textRevision),selection:o.YP}),activeBoundaryContext:Object.assign(Object.assign({},e.activeBoundaryContext),{kind:"pending",isBoundary:!0,textRevision:o.G(e.textRevision),selection:o.YP}),selectedRange:o.YP,selectedText:o.YP}):n&&r?Object.assign(Object.assign({},e),{mode:e.results.length?e.mode:"ideation",activeContext:n,activeBoundaryContext:r}):Object.assign(Object.assign({},e),{kind:"starting",activeContext:Object.assign(Object.assign({},e.activeContext),{selection:o.YP,kind:"pending"}),activeBoundaryContext:void 0,selectedRange:o.YP,selectedText:o.YP})})),n&&r&&!i||this._getContext(void 0,void 0,i)}dispose(){this._subs.dispose()}_getContext(e,t,i=!1){var n,r;return nt(this,void 0,void 0,(function*(){if(this._logger.debug("Getting context.",{data:e,fetchContextForHistoryCardId:t}),"contextless"===this._session.get().kind)return void this._logger.debug("Getting context for a contextless session, skipping.");try{yield Ie(this._capiCheckingStatus.pipe(h.h((e=>"unknown"!==e&&"some_checks_in_progress"!==e))),1e4)}catch(e){this._params.logService.logEvent({kind:"warn",source:"core",name:"waitForStableCAPICheckingStatusTimeout",data:null})}this._setupCheetahAckHandler("getContext",(e=>{this._setupContextTimeout("getContext"),void 0!==t&&this._historyResultIdByGetContextMessageId.set(e,t),i&&this._contextMessageIdsTriggeredBySelectionChanges.add(e)}));const s=this._session.get();(0,_e.t)("cheetahGetContext",this._params.capiService.cheetahGetContext(null!=e?e:{generationMode:Xe(i?"rewrite":s.mode),selectedRange:o.FS(s.selectedRange),outerContext:o.FS(Je(s)),stateBlob:(0,a.zG)(le.toStarted(s),o.UI((e=>e.activeContext)),o.g_(a.r5,(e=>this._stateBlobByContextId.get(e.id)))),previousText:!i&&"started"===s.kind&&s.results.length>0&&ce.x.isStandardCompletedResult(s.results[0])?We(s.results[0]):void 0,includeDisabledActions:this._params.selectionContextAvailability&&(null===(n=this._params.selectionContextAvailability.get())||void 0===n?void 0:n.contextUpdatesServer)&&(null===(r=this._params.selectionContextAvailability.get())||void 0===r?void 0:r.contextUpdatesClient)}),this._logger,(()=>{this._params.logService.logEvent({kind:"info",source:"core",name:"getContextSuccessful",data:null})}),(()=>{const e=ne.createCriticalError((0,a.zG)(le.toStarting(this._session.get()),o.pC));this._session.modify(le.fold({starting:t=>Object.assign(Object.assign({},t),{error:o.G(e),kind:"contextless",nonContextualActions:this._skills.map((e=>J.createSkillAction(e)))}),contextless:t=>Object.assign(Object.assign({},t),{error:o.G(e)}),started:t=>Object.assign(Object.assign({},t),{error:o.G(e),inProgressResult:o.YP})})),this._params.logService.logEvent((0,ae.$E)())}))}))}_handleCheetahSetContext(e){var t,i;return nt(this,void 0,void 0,(function*(){this._logger.debug("Handling `cheetah:setContext`.",{message:e}),this._clearContextTimeout();const n=this._session.get(),r=(0,a.zG)(o.ij(null===(t=e.context)||void 0===t?void 0:t.voiceProfileSettings),o.g_((()=>ze(e.context.voice,n,this._upstreamDialect.get())),(t=>je(t,e.context.voice,n,this._upstreamDialect.get())))),s={id:ee.Id.create(e.context.id),availableActions:Ve(ee.Id.create(e.context.id),e.context.availableActions,this._skills,{brandVoice:this._showAiStudioBrandVoiceAction.get(),essayRubric:this._showEssayRubricAction.get()}),userPromptAction:Ke(e.context.promptAction,this._logger),quickRewriteAction:Ze(e.context.quickRewriteAction),intent:$e(e.context.intent),documentOverview:qe(e.context.documentOverview),specialView:o.ij(e.context.specialView),selection:this._historyResultIdByGetContextMessageId.has(e.promptId)?o.YP:(0,a.zG)(k.Yt(o.Kw)({text:n.selectedText,range:n.selectedRange})),textRevision:o.G(n.textRevision)},l=0===this._contextById.size;let c=e.progressMessage?Object.assign(Object.assign({},s),{kind:"pending",isBoundary:!1}):Object.assign(Object.assign({},s),{kind:"received",isBoundary:l||this._contextMessageIdsTriggeredBySelectionChanges.has(e.promptId)});if(this._shouldSkipContextUpdate(e))return void this._logger.debug("Skipping `cheetah:setContext` for missing history card.");const d=yield it(c,e,this._session.get(),(e=>this._params.textEditorService.getText(e)),null===(i=this._params.selectionContextAvailability)||void 0===i?void 0:i.get());this._logger.debug("Updated selection for context.",{updatedSelection:d}),c=(0,a.zG)(o.Uo(d),o.g_((()=>c),(t=>Object.assign(Object.assign({},c),{isBoundary:!0,selection:t,availableActions:Ve(ee.Id.create(e.context.id),e.context.availableActions,this._skills,{brandVoice:this._showAiStudioBrandVoiceAction.get(),essayRubric:this._showEssayRubricAction.get()})})))),0===this._contextById.size&&ee.isReceived(c)&&(this._initialReceivedContext=c),this._contextById.set(c.id,c),this._stateBlobByContextId.set(c.id,e.context.stateBlob),this._bindContextToHistoryCardIfNeeded(e,c.id);const u=(0,a.zG)(n.writingExpertContext,o.tS((e=>ye.getInitialResult(e))),D.bw((e=>{this._resultById.set(e.id,e),this._contextIdByResultId.set(e.id,c.id)})),o.g_((()=>[]),(e=>[e])));if(this._session.set(Object.assign(Object.assign({},n),{kind:"started",voiceProfile:r,activeContext:c,activeBoundaryContext:c.isBoundary?c:"started"===n.kind?n.activeBoundaryContext:c,inProgressResult:"started"===n.kind?(0,a.zG)(n.inProgressResult,o.UI((e=>Object.assign(Object.assign({},e),{boundaryContextId:c.isBoundary?o.G(c.id):e.boundaryContextId})))):o.YP,results:"started"===n.kind?n.results:u,detectedReferences:"started"===n.kind?n.detectedReferences:new Map,selectedRange:(0,a.zG)(d,S.g_((()=>n.selectedRange),(e=>(0,a.zG)(e,o.UI((({range:e})=>e)))))),selectedText:(0,a.zG)(d,S.g_((()=>n.selectedText),(e=>(0,a.zG)(e,o.UI((({text:e})=>e))))))})),(0,a.zG)(o.ij(e.context.contextNotification),D.bw((({text:t})=>{this._pushNotification(Se.create("information",t,`contextNotification:${e.id}`,!0)),this._params.userActionTrackingService.trackContexNotification("context")}))),l&&de.s.isQuickRewrite(n.mode)){const t=J.QuickRewriteActionValue.fromInput(Ze(e.context.quickRewriteAction));this._logger.debug("Handling initial `cheetah:setContext` for quick rewrite session, submitting quick rewrite action.",{session:n,message:e,quickRewriteAction:t}),this._submitAction(t)}if(l&&de.s.isCompliance(n.mode)){const t=J.ComplianceActionValue.fromInput({kind:"compliance",id:J.Id.create("action:?id=WriCompRewriteCustomerBrandVoice&pname=Cheetah/WriComp/Rewrite/CustomerBrandVoice"),label:"Match my organization's brand and voice",icon:S.F2("https://assets.grammarly.com/icons/v1/ai-studio-icon.svg"),generatesTextType:o.G(re.cX.NonInsertable),disabled:!1,notificationOnAttempt:o.YP});this._logger.debug("Handling initial `cheetah:setContext` for compliance session, submitting compliance action.",{session:n,message:e,complianceAction:t}),this._submitAction(t)}}))}_shouldSkipContextUpdate(e){return(0,a.zG)(o.ij(this._historyResultIdByGetContextMessageId.get(e.promptId)),o.g_(a.jv,(e=>(0,a.zG)(le.toStarted(this._session.get()),o.UI((e=>e.results)),o.g_(a.W8,(t=>!t.some((t=>t.id===e))))))))}_bindContextToHistoryCardIfNeeded(e,t){(0,a.zG)(o.ij(this._historyResultIdByGetContextMessageId.get(e.promptId)),o.hX((e=>(0,a.zG)(o.ij(this._contextIdByResultId.get(e)),o.g_(a.W8,(e=>void 0===this._contextById.get(e)))))),D.bw((e=>this._contextIdByResultId.set(e,t))))}_handleCheetahSetUserState(e){this._logger.debug("Handling `cheetah:setUserState`.",{message:e}),this._session.modify((t=>Object.assign(Object.assign({},t),{historyStatus:Ne(t,e.state.historyItems)})))}_getHistory(){this._logger.debug("Getting history."),void 0===this._historyAckHandler?(this._historyAckHandler=()=>{this._historyAckHandler=void 0,this._setupHistoryTimeout()},this._setupCheetahAckHandler("getHistory",this._historyAckHandler),this._session.lens("historyStatus").set(le.HistoryStatus.historyRequested),(0,_e.t)("cheetahGetHistory",this._params.capiService.cheetahGetHistory(),this._logger,(()=>{this._params.logService.logEvent({kind:"info",source:"core",name:"getHistorySuccessful",data:null})}),(()=>{this._params.logService.logEvent((0,ae.tD)())}))):this._logger.warn("Failed to get history, `cheetah:getHistory` request hasn't been ack'ed yet.")}_handleCheetahSetHistory(e){void 0!==this._historyAckHandler&&(this._removeCheetahAckHandler(this._historyAckHandler),this._historyAckHandler=void 0),this._clearHistoryTimeout();const t=this._session.get();"started"===t.kind?(0,a.zG)(e.cards,E.UI((e=>ce.x.History.createFromCard(e,void 0!==this._params.textEditorService.copyText))),E.GY,_.c2,o.g_((()=>this._session.lens("historyStatus").set(le.HistoryStatus.noHistory)),(e=>{e.forEach((e=>this._resultById.set(e.id,e))),this._session.set(Object.assign(Object.assign({},t),{activeContext:Object.assign(Object.assign({},t.activeContext),{kind:"pending",textRevision:o.YP,availableActions:[],selection:o.YP}),historyStatus:le.HistoryStatus.historyRestored,results:[...t.results,...e],selectedRange:o.YP,selectedText:o.YP})),this._getContext(void 0,e[0].id)}))):this._logger.warn("Failed to handle `cheetah:setHistory`, session not started.")}_handleCheetahChunk(e){this._logger.debug("Handling `cheetah:chunk`.",{message:e});const t=this._session.get();if("started"!==t.kind)return void this._logger.warn("Failed to handle `cheetah:chunk`, session not started.");const i=ce.x.Id.create(e.promptId);(0,a.zG)(t.inProgressResult,o.hX(ce.x.isInProgressOngoing),o.hX((e=>ce.x.Id.eq.equals(e.id,i))),o.g_((()=>{const e=(0,a.zG)(t.inProgressResult,o.hX(ce.x.isInProgressOngoing),o.UI((e=>e.id)),o.WG);this._params.logService.logEvent(function(e){return{kind:"warn",source:"core",name:"unexpectedChunkReceived",data:e}}({expectedInProgressResultId:e,receivedInProgressResultId:i}))}),(i=>{this._clearResultRelatedTimeouts(),this._session.set(Object.assign(Object.assign({},t),{inProgressResult:o.G(Object.assign(Object.assign({},i),{text:i.text+e.token}))})),this._setupResultTimeout()})))}_handleCheetahResult(e){return nt(this,void 0,void 0,(function*(){this._logger.debug("Handling `cheetah:result`.",{message:e});const t=this._session.get();if("started"!==t.kind)return this._logger.warn("Failed to handle `cheetah:result`, session not started.");const i=ce.x.Id.create(e.promptId);try{yield(0,a.zG)(t.inProgressResult,o.hX(ce.x.isInProgressOngoing),o.hX((e=>ce.x.Id.eq.equals(e.id,i))),o.g_((()=>{const e=(0,a.zG)(t.inProgressResult,o.hX(ce.x.isInProgressOngoing),o.UI((e=>e.id)),o.WG);return this._params.logService.logEvent(function(e){return{kind:"warn",source:"core",name:"unexpectedResultReceived",data:e}}({expectedInProgressResultId:e,receivedInProgressResultId:i})),Promise.resolve(void 0)}),(n=>nt(this,void 0,void 0,(function*(){var r,s,l,c;if(this._clearResultRelatedTimeouts(),e.error||!e.text||""===e.text.plain){const n=e.error?ne.create(e.error):ne.createEmptyResultError();this._logger.warn("Received `cheetah:result` with error.",{resultId:i,errorReason:n.reason}),this._session.set(Object.assign(Object.assign({},t),{inProgressResult:o.YP,error:o.G(n)}))}else if(e.text.interrupted)this._logger.debug("Received `cheetah:result` with interrupted text, skipping.",{session:t,message:e});else{let i,d,u,m;i="aiUsageAlert"===(null===(s=null===(r=e.context)||void 0===r?void 0:r.specialView)||void 0===s?void 0:s.kind)?ce.x.AIUsageNotification.fromInProgressResult(n,e.text.plain):Object.assign(Object.assign({},n),{text:e.text.plain,kind:"complete",timestamp:Date.now(),replacementDelta:ce.x.ResultDelta.createFromResultMessage(e),supportedActions:(0,a.zG)((c=n.source,(0,a.zG)(c,o.UI((e=>e.actionValue.generatesTextType)),o.hX(D.FX(re.cX.Insertable)),o.g_((()=>w.cS),(()=>w.Sq(new Set([ce.x.SupportedAction.rephrase,ce.x.SupportedAction.insert])))))),w.$T(C.yv)(ce.x.SupportedAction.copy)),references:Ye(e),changesSummary:ie(e)}),this._logger.debug("Received complete `cheetah:result`, saving complete result into history.",{session:t,message:e,result:i});let p=S.t$(void 0);if(e.context){const r=e.context;u=r.voiceProfileSettings?je(r.voiceProfileSettings,r.voice,t,this._upstreamDialect.get()):ze(r.voice,t,this._upstreamDialect.get()),d={kind:"received",id:ee.Id.create(r.id),availableActions:Ve(ee.Id.create(e.context.id),r.availableActions,this._skills,{brandVoice:this._showAiStudioBrandVoiceAction.get(),essayRubric:this._showEssayRubricAction.get()}),userPromptAction:Ke(r.promptAction,this._logger),intent:$e(r.intent),documentOverview:qe(r.documentOverview),specialView:o.ij(r.specialView),selection:this._historyResultIdByGetContextMessageId.has(e.promptId)?o.YP:(0,a.zG)(n.boundaryContextId,o.tS((e=>(0,a.zG)(o.ij(this._contextById.get(e)),o.tS((({selection:e})=>e)))))),isBoundary:!1,textRevision:(0,a.zG)((0,a.zG)(n.boundaryContextId,o.tS((e=>o.ij(this._contextById.get(e)))),o.tS((({textRevision:e})=>e))))},p=yield it(d,e,this._session.get(),(e=>this._params.textEditorService.getText(e)),null===(l=this._params.selectionContextAvailability)||void 0===l?void 0:l.get()),d=(0,a.zG)(o.Uo(p),o.g_((()=>d),(e=>Object.assign(Object.assign({},d),{isBoundary:!0,selection:e,availableActions:Ve(ee.Id.create(r.id),r.availableActions,this._skills,{brandVoice:this._showAiStudioBrandVoiceAction.get(),essayRubric:this._showEssayRubricAction.get()})})))),d.isBoundary&&(i=Object.assign(Object.assign({},i),{boundaryContextId:o.G(d.id)})),m=r.stateBlob,this._logger.debug("Received `cheetah:result` with context, will update voice profile and context accordingly.",{session:t,message:e,voiceProfile:u,context:d})}else this._logger.warn("Received `cheetah:result` without context.",{resultId:i.id}),u=t.voiceProfile,d=t.activeContext,m=this._stateBlobByContextId.get(t.activeContext.id);this._contextById.set(d.id,d),void 0!==m&&this._stateBlobByContextId.set(d.id,m),this._resultById.set(i.id,i),this._contextIdByResultId.set(i.id,d.id),this._session.set(Object.assign(Object.assign({},t),{voiceProfile:u,activeContext:d,inProgressResult:o.YP,results:[i,...t.results],selectedRange:(0,a.zG)(p,S.g_((()=>t.selectedRange),(e=>(0,a.zG)(e,o.UI((({range:e})=>e)))))),selectedText:(0,a.zG)(p,S.g_((()=>t.selectedText),(e=>(0,a.zG)(e,o.UI((({text:e})=>e))))))})),this._trackResultGenerationCompleted(i.id)}})))))}catch(e){const t=(0,Ce.N)(e);return this._logger.warn("Failed to handle `cheetah:result`.",{resultId:i,reason:t.message})}}))}_handleCheetahSearchReferencesResult(e){const t=this._session.get();if("started"===t.kind){const i=this._searchReferencesUrlsById.get(e.promptId);if(i){const n=e.references[0];n&&this._session.set(Object.assign(Object.assign({},t),{detectedReferences:new Map(t.detectedReferences).set(i,o.G(Ae.s.create(n)))}))}else this._logger.warn("Failed to handle `cheetah:searchReferencesResult`, no corresponding `cheetah:searchReferences` request.")}else this._logger.warn("Failed to handle `cheetah:searchReferencesResult`, session not started.")}_handleCheetahError(e){this._logger.debug("Handling `cheetah:error`.",{message:e}),this._clearAllTimeouts();const t=ne.create(e.error);this._logger.warn("Received `cheetah:error`.",{errorKind:e.error.kind}),this._session.modify((e=>Object.assign(Object.assign({},e),{inProgressResult:o.YP,error:o.G(t)})))}_handleUpstreamDialectChange(e){this._logger.debug("Handling upstream dialect change.",{upstreamDialect:e});const t=this._session.get();if("started"===t.kind){const i=Fe.Dialect.Id.create(e);this._logger.debug("Dialect changed on upstream services, updating selected dialect on voice profile.",{session:t,selectedDialect:i}),this._session.set(Object.assign(Object.assign({},t),{voiceProfile:Object.assign(Object.assign({},t.voiceProfile),{selectedDialect:i})}))}}_handleCheetahAck(e){this._logger.debug("Handling `cheetah:ack`.",{message:e}),this._clearCheetahAckTimeout(),this._cheetahAckIds.add(e.id);const t=this._cheetahAckHandlers.length>0?this._cheetahAckHandlers[0]:void 0;t&&(this._logger.debug("Extracting `cheetah:ack` handler from queue and executing it.",{message:e,cheetahAckHandlers:this._cheetahAckHandlers}),this._cheetahAckHandlers=this._cheetahAckHandlers.slice(1),t(e.id))}_handleError(e){if(this._cheetahAckIds.has(e.id))if(this._clearAllTimeouts(),e.error===j.jK.SESSION_NOT_INITIALIZED){const t=(0,a.zG)(le.toStarted(this._session.get()),o.UI((e=>this._stateBlobByContextId.get(e.activeContext.id))),o.FS);this._session.modify((e=>Object.assign(Object.assign({},e),{inProgressResult:o.YP}))),this._startSession(t),this._params.logService.logEvent(function(e){return{kind:"warn",source:"core",name:"capiErrorHandled",data:e}}({capiError:e}))}else{const t=ne.createCriticalError((0,a.zG)(le.toStarting(this._session.get()),o.pC));this._session.modify((e=>Object.assign(Object.assign({},e),{inProgressResult:o.YP,error:o.G(t)}))),this._params.logService.logEvent((0,ae.Z9)({capiError:e}))}else this._params.logService.logEvent((0,ae.Z9)({capiError:e}))}_submitAction(e,t,i,n,r,s){var l,d;this._logger.debug("Submitting action.",{actionValue:e,contextId:t,triggerContextId:i,boundaryContextId:n,previousText:r,selectedVoice:s});const u=this._session.get();if("started"===u.kind){const m=null!==(l=null!=t?t:null==e?void 0:e.contextId)&&void 0!==l?l:u.activeContext.id,p=null!=i?i:m,g=null!=n?n:u.activeBoundaryContext.id,h=(null!=r?r:void 0!==(null==e?void 0:e.contextId))?void 0:u.results.length>0&&ce.x.isStandardCompletedResult(u.results[0])?We(u.results[0]):void 0,f=this._stateBlobByContextId.get(m);if(void 0===f)return void this._logger.warn("Failed to submit action, cannot find state blob for context ID.",{contextId:m,triggerContextId:i});const v="aiUsageNotification"===(null===(d=u.results[0])||void 0===d?void 0:d.kind)?u.results.slice(1):u.results;this._session.set(Object.assign(Object.assign({},u),{results:v,historyStatus:le.HistoryStatus.restoreDisabled,activeContext:Object.assign(Object.assign({},u.activeContext),{kind:"pending"}),inProgressResult:o.pC(e.generatesTextType)?o.G({kind:"inProgressPending",header:{label:J.isUserPromptActionValue(e)?e.arg.value:e.label,iconUrl:J.isUserPromptActionValue(e)||""===e.icon.right.trim()?o.YP:o.G(e.icon.right),copiablePrompt:J.isUserPromptActionValue(e)&&""!==e.arg.value.trim()?o.G(e.arg.value):o.YP},text:"",source:o.G({contextId:m,actionValue:e}),boundaryContextId:o.G(g)}):o.YP,error:o.YP})),this._setupCheetahAckHandler("action",(e=>{(0,a.zG)(le.toStarted(this._session.get()),o.tS((e=>e.inProgressResult)),o.hX((0,P.Kg)(ce.x.isInProgressPending,ce.x.isInProgressInterrupted)),o.g_((()=>(this._logger.debug("Received `cheetah:ack` related to in-progress-pending result but we don't have an in-progress-pending result, skipping.",{ackId:e}),I.of(void 0))),(t=>{if(ce.x.isInProgressInterrupted(t))return this._logger.debug("Received `cheetah:ack` related to in-progress-interrupted result, sending `cheetah:interrupt`.",{ackId:e}),this._session.modify((e=>Object.assign(Object.assign({},e),{inProgressResult:o.YP}))),this._params.capiService.cheetahInterrupt({promptId:e});if(ce.x.isInProgressPending(t)){this._setupContextTimeout("action"),this._setupResultTimeout();const i=Object.assign(Object.assign({},t),{kind:"inProgressOngoing",id:ce.x.Id.create(e)});return this._logger.debug("Received `cheetah:ack` related to in-progress-pending result, transitioning result to in-progress-ongoing.",{ackId:e,inProgressResult:i}),this._resultById.set(i.id,i),this._session.modify((e=>Object.assign(Object.assign({},e),{inProgressResult:o.G(i)}))),I.of(void 0)}(0,c.L0)(t)})))()}));const b=Object.assign({contextId:m,triggerContextId:p,actionId:e.id,args:J.isUserPromptActionValue(e)?[{name:e.arg.id,value:e.arg.value}]:(0,a.zG)(_.c2(e.args),o.g_((()=>[]),(e=>e.map((e=>({name:e.id,value:e.value})))))),stateBlob:f,previousText:h},s?{metadata:{selectedVoice:s}}:null),y=(0,a.zG)(e,o.DT(J.isUserPromptActionValue),o.g_((0,a.a9)(b),(e=>Object.assign(Object.assign({},b),{useReferences:o.FS(e.useReferences),omitReferenceIds:o.FS(e.omitReferenceIds)}))));this._logger.debug("Sending `cheetah:action` to CAPI.",{data:y}),(0,_e.t)("cheetahAction",this._params.capiService.cheetahAction(y),this._logger,(()=>{this._params.logService.logEvent(function(e){return{kind:"info",source:"core",name:"actionSuccessful",data:e}}({actionId:e.id}))}),(()=>{this._params.logService.logEvent((0,ae.g4)({actionId:e.id}))}))}else this._logger.warn("Failed to submit action, session not started.",{actionId:e.id})}_extractLatestResultContext(e){return this._extractContextFromResult(e,0)}_extractLatestResultBoundaryContext(e){return this._extractBoundaryContextFromResult(e,0)}_extractPreviousResultContext(e){return this._extractContextFromResult(e,1)}_extractPreviousResultBoundaryContext(e){return this._extractBoundaryContextFromResult(e,1)}_extractContextFromResult(e,t){const i=(0,a.zG)(o.ij(e.results[t]),o.UI((e=>e.id)),o.tS((e=>o.ij(this._contextIdByResultId.get(e)))),o.tS((e=>o.ij(this._contextById.get(e)))));return o.Wi(i)&&this._logger.warn("Failed to extract context from result.",{resultIndex:t}),i}_extractBoundaryContextFromResult(e,t){return(0,a.zG)(o.ij(e.results[t]),o.hX(ce.x.isComplete),o.tS((({boundaryContextId:e})=>e)),o.tS((e=>o.ij(this._contextById.get(e)))),D.ew((()=>{this._logger.warn("Failed to extract boundary context from result.",{resultIndex:t})})))}_extractInitialContext(){return null!==this._initialReceivedContext?o.G(this._initialReceivedContext):(this._logger.warn("Failed to extract initial context."),o.YP)}_setupResultTimeout(){this._clearResultTimeout(),this._resultTimeout=R.timer(this._resultTimeoutMs).subscribe((()=>{this._session.modify((e=>Object.assign(Object.assign({},e),{inProgressResult:o.YP,error:o.G(ne.createCriticalError((0,a.zG)(le.toStarting(this._session.get()),o.pC)))}))),this._params.logService.logEvent((0,ae.bE)())}))}_setupContextTimeout(e){this._logger.debug("Setting up context timeout.",{sourceCommand:e}),this._clearContextTimeout(),this._contextTimeout=R.timer(this._contextTimeoutMs).subscribe((()=>{const t=ne.createCriticalError((0,a.zG)(le.toStarting(this._session.get()),o.pC));this._session.modify((e=>Object.assign(Object.assign({},e),{inProgressResult:o.YP,error:o.G(t)}))),this._params.logService.logEvent((0,ae.gW)({sourceCommand:e}))}))}_setupHistoryTimeout(){this._clearHistoryTimeout(),this._historyTimeout=R.timer(this._historyTimeoutMs).subscribe((()=>{const e=ne.createCriticalError((0,a.zG)(le.toStarting(this._session.get()),o.pC));this._session.modify((t=>Object.assign(Object.assign({},t),{inProgressResult:o.YP,error:o.G(e)}))),this._params.logService.logEvent((0,ae.Ax)())}))}_setupCheetahAckTimeout(e){this._logger.debug("Setting up `cheetah:ack` timeout.",{sourceCommand:e}),this._clearCheetahAckTimeout(),this._cheetahAckTimeout=R.timer(this._cheetahAckTimeoutMs).subscribe((()=>{const t=ne.createCriticalError((0,a.zG)(le.toStarting(this._session.get()),o.pC));this._session.modify((e=>Object.assign(Object.assign({},e),{inProgressResult:o.YP,error:o.G(t)}))),this._params.logService.logEvent((0,ae.No)({sourceCommand:e}))}))}_clearResultTimeout(){var e;null===(e=this._resultTimeout)||void 0===e||e.unsubscribe(),this._resultTimeout=void 0}_clearContextTimeout(){var e;null===(e=this._contextTimeout)||void 0===e||e.unsubscribe(),this._contextTimeout=void 0}_clearHistoryTimeout(){var e;null===(e=this._historyTimeout)||void 0===e||e.unsubscribe(),this._historyTimeout=void 0}_clearCheetahAckTimeout(){var e;null===(e=this._cheetahAckTimeout)||void 0===e||e.unsubscribe(),this._cheetahAckTimeout=void 0}_clearResultRelatedTimeouts(){this._clearContextTimeout(),this._clearResultTimeout(),this._clearCheetahAckTimeout()}_clearAllTimeouts(){this._clearResultTimeout(),this._clearContextTimeout(),this._clearHistoryTimeout(),this._clearCheetahAckTimeout()}_setupCheetahAckHandler(e,t){this._setupCheetahAckTimeout(e),this._cheetahAckHandlers.push(t)}_removeCheetahAckHandler(e){this._cheetahAckHandlers=this._cheetahAckHandlers.filter((t=>t!==e)),0===this._cheetahAckHandlers.length&&this._clearCheetahAckTimeout()}}var ot=i(40798);const at="139.4.0";var lt=function(e,t,i,n){return new(i||(i=Promise))((function(r,s){function o(e){try{l(n.next(e))}catch(e){s(e)}}function a(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))};class ct{constructor(e){var t,i;this._params=e,this._commonProperties={version:at,cheetahClientProtocolVersion:ot.XU,clientType:this._params.hostInfo.clientType,clientVersion:this._params.hostInfo.clientVersion,environment:this._params.hostInfo.environment,experience:this._params.experience,userId:null!==(i=this._params.user,t=fe(i)?i.id:void 0)&&void 0!==t?t:""}}logEvent(e){return this._log(e.kind,e.source,e.name,e.data)}getLogger(e){return{debug:(t,...i)=>this._debug(e,t,...i),info:(t,i)=>this._info(e,t,i),warn:(t,i)=>this._warn(e,t,i),error:(t,i)=>this._error(e,t,i)}}_debug(e,t,...i){["dev","test"].includes(this._params.hostInfo.environment)&&console.debug(`[${e}]`,t,...i)}_info(e,t,i){return["dev","test"].includes(this._params.hostInfo.environment)&&console.info(`[${e}]`,t,i),this._log("info",e,t,i)}_warn(e,t,i){return["dev","test"].includes(this._params.hostInfo.environment)&&console.warn(`[${e}]`,t,i),this._log("warn",e,t,i)}_error(e,t,i){return["dev","test"].includes(this._params.hostInfo.environment)&&console.error(`[${e}]`,t,i),this._log("error",e,t,i)}_log(e,t,i,n){const r="info"===e||"prod"!==this._params.hostInfo.environment?"infrequent":"continuous",s="prod"!==this._params.hostInfo.environment?30:90;return function(e){return lt(this,void 0,void 0,(function*(){if("error"===e.logLevel||"warn"===e.logLevel?console[e.logLevel](e.message,e):console.debug("Sending log.",e.message,e),!["prod","preprod","qa","dev","unknown"].includes(e.environment))return console.debug(`Won't send log for host environment "${e.environment}".`,e);let t=!1;if(e.data)try{JSON.stringify(e.data)}catch(i){console.warn("Failed to JSON.stringify data.",{data:e.data},i),t=!0}try{const i=yield fetch(`https://f-log-assistant.grammarly.io/log?datatier=${e.dataTier}&retention=${e.retentionDays}`,{method:"POST",body:JSON.stringify(Object.assign(Object.assign({logLevel:e.logLevel,source:e.source,message:e.message},e.data?t?{data:"JSON.stringify failure"}:{data:e.data}:{}),e.commonProperties))});if(!i.ok){const e=yield i.text();throw Error(e)}}catch(t){console.warn("Failed to send log.",e,t)}}))}({environment:this._params.hostInfo.environment,dataTier:r,retentionDays:s,logLevel:e,source:t,message:i,commonProperties:this._commonProperties,data:n})}}var dt=function(e,t,i,n){return new(i||(i=Promise))((function(r,s){function o(e){try{l(n.next(e))}catch(e){s(e)}}function a(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))};class ut{constructor(e){this._params=e,this._logger=this._params.logService.getLogger(ut.name),this._commonLabels={version:at,cheetahClientProtocolVersion:ot.XU,clientType:this._params.lifecycleService.hostInfo.clientType,clientVersion:this._params.lifecycleService.hostInfo.clientVersion,environment:this._params.lifecycleService.hostInfo.environment,experience:this._params.experience},this._markedMetricNames=new Set}report(e,{startMarks:t,durationBetweenMarks:i}={}){return dt(this,void 0,void 0,(function*(){if(!["prod","preprod","qa","dev"].includes(this._params.lifecycleService.hostInfo.environment))return this._logger.debug(`Won't report metric for host environment "${this._params.lifecycleService.hostInfo.environment}".`,{metric:e,startMarks:t,durationBetweenMarks:i});performance.mark(e.name),this._markedMetricNames.add(e.name);const n=Object.entries(Object.assign(Object.assign({},this._commonLabels),e.labels)).map((([e,t])=>({key:e,value:t}))),r=this._getDurationMetrics(null!=t?t:[],e.name,n),s=this._getDurationBetweenMetrics(null!=i?i:[],e.name,n);try{const t="sendBeacon"in navigator?this._beacon:self.fetch,i=yield t(`${ut.FEMETRICS_ENDPOINT}/batch/import`,{method:"POST",body:JSON.stringify([{name:`${e.name}_total`,type:"counter",value:1,labels:n},...r,...s])});if(!i.ok){const e=yield i.text();throw Error(e)}}catch(t){this._params.logService.logEvent(function(e){return{kind:"warn",source:"core",name:"reportMetricFailed",data:e}}({reason:(0,Ce.N)(t).message,metric:e}))}}))}_beacon(e,t){return dt(this,void 0,void 0,(function*(){return navigator.sendBeacon(e,t.body),Promise.resolve(new Response(JSON.stringify({})))}))}_getDurationBetweenMetrics(e,t,i){return e.map(((e,n,r)=>{var s;const o=null!==(s=r[n+1])&&void 0!==s?s:t;try{return{name:`${e}_to_${o}_duration_ms`,type:"histogram",value:this._measureDurationBetweenMarks(e,o),labels:i}}catch(t){const i=(0,Ce.N)(t);return this._logger.warn(`Failed to measure '${e}' to '${o}'.`,{reason:i.message}),null}})).filter(Boolean)}_measureDurationBetweenMarks(e,t){const i=performance.measure(`${e}_to_${t}`,e,t);this._markedMetricNames.add(`${e}_to_${t}`);let n=null==i?void 0:i.duration;if(!n){const i=performance.getEntriesByName(`${e}_to_${t}`).at(-1);if(!i)throw Error("performance.measure had no return value and measure could not be found among entries.");n=i.duration}return n}_getDurationMetrics(e,t,i){return e.map((e=>{try{const n=this._measureDurationBetweenMarks(e,t);return{name:`${t}_duration_ms`,type:"histogram",value:n,labels:i.concat([{key:"startMark",value:e}])}}catch(i){const n=(0,Ce.N)(i);return void this._logger.warn(`Failed to measure '${e}' to '${t}'.`,{reason:n.message})}})).filter(Boolean)}dispose(){this._markedMetricNames.forEach((e=>{performance.clearMarks(e),performance.clearMeasures(e)}))}}ut.FEMETRICS_ENDPOINT="https://assistant.femetrics.grammarly.io";const mt=ut;var pt=i(29479);class gt{constructor(){this._notifications=new l.x,this._notificationDismissed=L.E}notify(e){return this._notifications.next(e),this._notificationDismissed.pipe(h.h((t=>t===e.id)),pt.h("dismissed"),f.q(1))}getNotifications(e){return this._notificationDismissed=e,this._notifications}}var ht=i(954);function ft(e){return e.split(/\s+/).map((e=>e.trim())).filter((e=>""!==e))}var vt=i(58897);class bt{constructor(e){this._params=e,this._logger=this._params.logService.getLogger(bt.name)}trackResultInsert(e,t,i=!1){this._logger.debug("Tracking result insert.",{contextId:e,historyResultId:t,withVoiceProfile:i}),e||this._logger.warn("Tracking result insert without context ID."),this._trackUxInteraction({kind:"result",userAction:vt.Z.Result.UserAction.insert},e,t,{withVoiceProfile:i})}trackResultCopy(e,t,i=!1){this._logger.debug("Tracking result copy.",{contextId:e,historyResultId:t,withVoiceProfile:i}),e||this._logger.warn("Tracking result copy without context ID."),this._trackUxInteraction({kind:"result",userAction:vt.Z.Result.UserAction.copy},e,t,{withVoiceProfile:i})}trackResultOffensive(e,t){this._logger.debug("Tracking result as offensive.",{contextId:e,historyResultId:t}),e||this._logger.warn("Tracking result as offensive without context ID."),this._trackUxInteraction({kind:"result",userAction:vt.Z.Result.UserAction.offensive},e,t)}trackResultDismiss(e,t){this._logger.debug("Tracking result dismiss.",{contextId:e,historyResultId:t}),e||this._logger.warn("Tracking result dismiss without context ID."),this._trackUxInteraction({kind:"result",userAction:vt.Z.Result.UserAction.dismiss},e,t)}trackResultRephrase(e){this._logger.debug("Tracking result rephrase.",{contextId:e}),e||this._logger.warn("Tracking result rephrase without context ID."),this._trackUxInteraction({kind:"result",userAction:vt.Z.Result.UserAction.rephrase},e)}trackResultGenerationCompleted(e,t){this._logger.debug("Tracking result generation-complete.",{contextId:e,historyResultId:t}),e||this._logger.warn("Tracking result generation-complete without context ID."),this._trackUxInteraction({kind:"result",userAction:vt.Z.Result.UserAction.generationCompleted},e,t)}trackVoiceProfileOpen(e){this._logger.debug("Tracking voice profile open.",{source:e}),this._trackUxInteraction({kind:"voiceProfile",userAction:"toolbar"===e?vt.Z.VoiceProfile.UserAction.open:vt.Z.VoiceProfile.UserAction.openFromBanner})}trackVoiceProfileSkip(){this._logger.debug("Tracking voice profile skip."),this._trackUxInteraction({kind:"voiceProfile",userAction:vt.Z.VoiceProfile.UserAction.skip})}trackActionsOpenStore(){this._logger.debug("Tracking actions open store."),this._trackUxInteraction({kind:"actions",userAction:vt.Z.Actions.UserAction.openStore})}trackActionsOffensive(e){this._logger.debug("Tracking actions as offensive.",{contextId:e}),e||this._logger.warn("Tracking actions as offensive context ID."),this._trackUxInteraction({kind:"actions",userAction:vt.Z.Actions.UserAction.offensive},e)}trackPromptSearch(){this._logger.debug("Tracking prompt search."),this._trackUxInteraction({kind:"prompt",userAction:vt.Z.Prompt.UserAction.search})}trackUsageInfoClick(){this._logger.debug("Tracking usage info click."),this._trackUxInteraction({kind:"usageInfo",userAction:vt.Z.UsageInfo.UserAction.click})}trackUsageInfoHover(){this._logger.debug("Tracking usage info hover."),this._trackUxInteraction({kind:"usageInfo",userAction:vt.Z.UsageInfo.UserAction.hover})}trackHistoryButtonView(){this._logger.debug("Tracking history button view."),this._trackUxInteraction({kind:"historyButton",userAction:vt.Z.HistoryButton.UserAction.view})}trackAssistantClose(){this._logger.debug("Tracking assistant close."),this._trackUxInteraction({kind:"assistant",userAction:vt.Z.Assistant.UserAction.close})}trackVoiceProfileRemoveTag(){this._logger.debug("Tracking voice profile remove tag."),this._trackUxInteraction({kind:"voiceProfile",userAction:vt.Z.VoiceProfile.UserAction.removeVoiceTag})}trackVoiceProfileKeepTag(){this._logger.debug("Tracking voice profile keep tag."),this._trackUxInteraction({kind:"voiceProfile",userAction:vt.Z.VoiceProfile.UserAction.keepVoiceTag})}trackAINotificationDismiss(e){this._logger.debug("Tracking AI notification dismiss.",{scope:e}),this._trackUxInteraction({kind:"aiUsageNotification",userAction:"document"===e?vt.Z.Notification.AIUsageUserAction.dontShowOnDocument:vt.Z.Notification.AIUsageUserAction.dontShowForever})}trackReadyToInteract(){this._logger.debug("Tracking ready to interact."),this._trackUxInteraction({kind:"assistant",userAction:vt.Z.Assistant.UserAction.readyToInteract})}trackMyVoiceCardToggle(e){this._logger.debug("Tracking my voice card toggle.",{isMyVoiceEnabled:e}),this._trackUxInteraction({kind:"voiceProfile",userAction:e?vt.Z.VoiceProfile.UserAction.toggleToMyVoice:vt.Z.VoiceProfile.UserAction.toggleToNeutral})}trackContexNotification(e){this._logger.debug("Tracking context notification.",{source:e}),this._trackUxInteraction({kind:"context"===e?"contextNotification":"actionNotification",userAction:vt.Z.Notification.UserAction.view})}_trackUxInteraction(e,t,i,n={}){const r=vt.Z.getComponentId(e,t,i,n),s=vt.Z.getUserAction(e),o=this._params.genAIAvailability.get();v._.isUnavailable(o)?this._logger.debug(`Gen-AI ${o.kind}, skipping backend user_action tracking.`,{componentId:r,userAction:s,uxInteraction:e,contextId:t}):(this._logger.debug("Sending `user_action` to CAPI.",{componentId:r,userAction:s,uxInteraction:e,contextId:t}),(0,_e.t)("sendUserAction",this._params.capiService.user_action({componentId:r,userAction:s}),this._logger))}}var yt=i(10933),xt=i(98123);const kt=(0,P.Kg)(xt.i.is(xt.i.Kind.headerVoiceButtonClick),xt.i.is(xt.i.Kind.openFeedbackFormButtonClick),xt.i.is(xt.i.Kind.promptSearchResultsUpdate),xt.i.is(xt.i.Kind.removeSelectionContextClick),xt.i.is(xt.i.Kind.reportOffensiveResultButtonClick),xt.i.is(xt.i.Kind.resultCardDismissButtonClick),xt.i.is(xt.i.Kind.setVoiceButtonClick)),St=(0,P.Kg)(xt.i.is(xt.i.Kind.actionsMenuReportIncorrectClick),xt.i.is(xt.i.Kind.actionsMenuMuteClick),xt.i.is(xt.i.Kind.actionsMenuReportOffensiveClick),xt.i.is(xt.i.Kind.addToDictionaryClick),xt.i.is(xt.i.Kind.suggestionAcceptClick),xt.i.is(xt.i.Kind.suggestionDismissClick)),Ct="Accepting suggestion",Et="Adding term to the dictionary",_t="Dismissed response output",wt="Dismissing suggestion",It="Turning off these types of suggestions",At="Removed selected context",Ft="Reporting as incorrect suggestion",Pt="Reporting as offensive suggestion",Mt="Thanks for the feedback",Ot="Now viewing the feedback form",Tt="Now viewing my voice profile",Rt=(e,t)=>e?`There ${(0,yt._6)(e,"is","are")} ${e} matching ${(0,yt._6)(e,"result","results")} for query ${t}`:`No matching results, press enter to execute your custom prompt ${t}`;class Bt{constructor(e){this._params=e,this._subs=new u.w0,this._logger=this._params.logService.getLogger(Bt.name),this.state=d.h.create({messageId:0,messageText:""}),this._subs.add(this.state.subscribe((e=>this._logger.debug("A11y view model message updated.",e)))),this._subs.add(this._params.assistantUIActions.pipe(h.h((0,P.Kg)(kt,St))).subscribe((e=>this._handleUIAction(e))))}createNotification(e){this._subs.add(R.timer(300).subscribe((()=>this.state.set({messageId:this.state.lens("messageId").get()+1,messageText:e}))))}_handleUIAction(e){var t,i;switch(e.kind){case xt.i.Kind.removeSelectionContextClick:{const e=null===(t=o.WG(this._params.genAISessionService.get()))||void 0===t?void 0:t.session.get();return void("started"===(null==e?void 0:e.kind)&&o.Wi(e.activeBoundaryContext.selection)&&this.createNotification(At))}case xt.i.Kind.headerVoiceButtonClick:case xt.i.Kind.setVoiceButtonClick:{const{kind:e}=this._params.routingViewModel.activeView.get();return void("voiceProfile"!==e&&"legacyVoiceProfile"!==e||this.createNotification(Tt))}case xt.i.Kind.reportOffensiveResultButtonClick:return void this.createNotification(Mt);case xt.i.Kind.resultCardDismissButtonClick:{const{result:{id:t}}=e,n=null===(i=o.WG(this._params.genAISessionService.get()))||void 0===i?void 0:i.session.get();return void("started"!==(null==n?void 0:n.kind)||n.results.find((e=>e.id===t))||this.createNotification(_t))}case xt.i.Kind.openFeedbackFormButtonClick:{const{kind:e}=this._params.routingViewModel.activeView.get();return void("feedbackForm"===e&&this.createNotification(Ot))}case xt.i.Kind.promptSearchResultsUpdate:return void this.createNotification(Rt(e.resultsCount,e.query));case xt.i.Kind.actionsMenuMuteClick:return void this.createNotification(It);case xt.i.Kind.actionsMenuReportIncorrectClick:return void this.createNotification(Ft);case xt.i.Kind.actionsMenuReportOffensiveClick:return void this.createNotification(Pt);case xt.i.Kind.addToDictionaryClick:return void this.createNotification(Et);case xt.i.Kind.suggestionAcceptClick:return void this.createNotification(Ct);case xt.i.Kind.suggestionDismissClick:return void this.createNotification(wt);default:return(0,c.L0)(e)}}dispose(){this._subs.unsubscribe()}}var Ut,Gt;!function(e){e.loading="loading",e.loadedEmpty="loadedEmpty",e.loadedNonEmpty="loadedNonEmpty"}(Ut||(Ut={})),function(e){e.isLoadedNonEmpty=e=>e.kind===Ut.loadedNonEmpty}(Gt||(Gt={}));var Nt=i(50750),Lt=i(44045);function Dt(e){return{kind:"error",source:"revision",name:"applyAlertsFailed",data:e}}function jt(e){return{kind:"error",source:"revision",name:"removeAlertsFailed",data:e}}function zt(e){return{kind:"error",source:"revision",name:"sduiUserActionFailed",data:e}}function Vt(e){return{kind:"error",source:"revision",name:"sduiCardCopyTextFailed",data:e}}function Kt(e){return{kind:"error",source:"revision",name:"sduiCardUpgradeToPremiumFailed",data:e}}class Zt{static get activePlaybookId(){return Zt._activePlaybookId}constructor(e){this._params=e,this._disposed=new l.x,this._aiStudioChecksEnabled=d.h.create(!1),this.aiStudioChecksEnabled=this._aiStudioChecksEnabled.view()}enableAiStudioChecks(e){Nt.D(this._params.capiService.toggle_checks({checks:{ai_studio:!0},params:{ai_studio:{playbook_id:e}}})()).pipe(f.q(1),Lt.R(this._disposed)).subscribe((()=>{this._aiStudioChecksEnabled.set(!0),Zt._activePlaybookId=e}),(e=>function(e){return{kind:"error",source:"revision",name:"enableAiStudioCheckFailed",data:e}}({reason:(0,Ce.N)(e).message})))}disableAiStudioChecks(){Nt.D(this._params.capiService.toggle_checks({checks:{ai_studio:!1}})()).pipe(f.q(1),Lt.R(this._disposed)).subscribe((()=>{this._aiStudioChecksEnabled.set(!1),Zt._activePlaybookId=null}),(e=>function(e){return{kind:"error",source:"revision",name:"disableAiStudioCheckFailed",data:e}}({reason:(0,Ce.N)(e).message})))}dispose(){this._disposed.next(void 0),this._disposed.complete()}}Zt._activePlaybookId=null;class Ht{constructor(e){this._params=e,this._aiStudioService=new Zt({capiService:this._params.capiService}),this._logger=this._params.logService.getLogger("PlaybooksViewModelImpl"),this._subscriptions=new u.w0,this._state=d.h.create({kind:Ut.loading}),this._isPlaybooksEnabled=d.h.create(!1),this._playbooks=d.h.create(o.YP),this._selectedPlaybookId=d.h.create(o.YP),this.playbooksAction=d.h.create(o.YP),this.state=this._state.view(),this._subscribeToPlaybooksGate(),this._subscribeToCapiStartMessages(),this._subscribeToApplyPlaybookAction(),this._subscribeToPlaybookSelectedAction()}dispose(){this._subscriptions.unsubscribe()}getSelectedPlaybookLabel(){return(0,a.zG)(this._playbooks.get(),o.tS((e=>(0,a.zG)(this._selectedPlaybookId.get(),o.tS((t=>o.ij(e.find((e=>e.id===t))))),o.UI((e=>e.label))))),o.fS((()=>"Brand Guidelines")))}getPageTitle(){return`${(0,a.zG)(this._params.userService.user.get(),o.DT(fe),o.tS((e=>e.institution)),o.tS((e=>o.ij(`${e.name}'s`))),o.fS((()=>"My")))} agents`}_subscribeToPlaybooksGate(){this._params.experimentService&&(0,_e.t)("isPlaybooksEnabled",(0,a.zG)(this._params.experimentService.isGateEnabled(Oe.C.AiStudioPlaybooksRead),I.d1((e=>new Error(e)))),this._logger,(e=>{const t=e&&this._params.shouldDisplayAction;this._isPlaybooksEnabled.set(t),t&&this._hasPlaybooks()?this._showPlaybooksAction():this._hidePlaybooksAction()}),(()=>this._hidePlaybooksAction()))}_showPlaybooksAction(){const e=this._getPlaybooks(),t=1===e.length?`Apply ${e[0].label}`:"Apply custom agent";this.playbooksAction.set(o.G(J.createPlaybooksAction(t)))}_hidePlaybooksAction(){this.playbooksAction.set(o.YP)}_subscribeToCapiStartMessages(){this._subscriptions.add(this._params.capiService.relevantInboundCAPIMessages.pipe(h.h(te.JS.Start.is)).subscribe((e=>this._handleStartMessage(e))))}_handleStartMessage(e){var t;const i=null===(t=e.featureData)||void 0===t?void 0:t.aiStudioPlaybookActions;void 0===i||0===i.length?this._clearPlaybooks():this._setPlaybooks(i.map((e=>({id:e.playbook_id,label:e.playbook_name,description:e.playbook_description}))))}_clearPlaybooks(){this._state.set({kind:Ut.loadedEmpty}),this._playbooks.set(o.YP),this._hidePlaybooksAction()}_setPlaybooks(e){this._state.set({kind:Ut.loadedNonEmpty,playbooks:e}),this._playbooks.set(o.G(e)),this._isPlaybooksEnabled.get()&&this._showPlaybooksAction()}_subscribeToPlaybookSelectedAction(){this._subscriptions.add(this._params.assistantUIActions.pipe(h.h(xt.i.is(xt.i.Kind.playbookSelected))).subscribe((e=>{this._aiStudioService.enableAiStudioChecks(e.playbookId),this._selectedPlaybookId.set(o.G(e.playbookId)),this._params.trackingService.playbookClicked(e.playbookId)})))}_subscribeToApplyPlaybookAction(){this._subscriptions.add(this._params.assistantUIActions.subscribe((e=>{if(e.kind===xt.i.Kind.actionBrickClick&&"regularAction"===e.action.kind&&J.isPlaybooksAction(e.action.action)){const e=this._getPlaybooks();1===e.length?this._params.notify({kind:xt.i.Kind.playbookSelected,playbookId:e[0].id}):this._params.routingViewModel.push({kind:"playbooks"})}})))}_hasPlaybooks(){return this._getPlaybooks().length>0}_getPlaybooks(){return(0,a.zG)(this._playbooks.get(),o.fS((()=>[])))}}class $t{constructor(e){this._params=e,this._sub=new u.w0,this._logger=this._params.logService.getLogger($t.name),this._domain=d.h.create(o.YP),this._state=d.h.create({}),this.stagingFeedbackFormData=this._state.view(),this.domain=this._domain.view(),this._sub.add(this._params.feedbackService.domain.subscribe({next:e=>this._domain.set(o.ij(e))})),this._sub.add(this._params.assistantUIActions.subscribe((e=>this._handleUIAction(e))))}dispose(){this._sub.unsubscribe()}_handleUIAction(e){switch(e.kind){case xt.i.Kind.openFeedbackFormButtonClick:return this._openFeedbackForm(e.source);case xt.i.Kind.feedbackFormChange:return this._updateFeedbackForm(e.feedbackData);case xt.i.Kind.feedbackFormSubmitButtonClick:return this._submitFeedbackForm(e.feedbackData);default:return}}_openFeedbackForm(e){this._params.routingViewModel.push({kind:"feedbackForm"}),this._state.set({source:e})}_updateFeedbackForm(e){this._state.modify((t=>Object.assign(Object.assign({},t),e)))}_submitFeedbackForm(e){this._params.routingViewModel.pop(),this._state.set({}),(0,_e.t)("submitFeedback",this._params.feedbackService.submitFeedback(e),this._logger,void 0,(e=>{this._params.logService.logEvent(function(e){return{source:"feedback",kind:"error",name:"submitFeedbackFailed",data:e}}({reason:(0,Ce.N)(e).message}))}))}}class Wt{constructor(e){var t;this._params=e,this._subs=new u.w0,this._action=d.h.create(o.YP),this.humanWritingReportAction=this._action.view(),void 0!==this._params.humanWritingReportService&&(this._subs.add(this._params.assistantUIActions.pipe(h.h((0,P.W9)(xt.i.is(xt.i.Kind.actionBrickClick),(e=>"regularAction"===e.action.kind&&J.isHumanWritingReportAction(e.action.action))))).subscribe((()=>{var e,t;return null===(t=null===(e=this._params.humanWritingReportService)||void 0===e?void 0:e.notifyGenerateReportActionClick)||void 0===t?void 0:t.call(e)}))),this._subs.add(this._params.assistantUIActions.pipe(h.h((0,P.Kg)(xt.i.is(xt.i.Kind.resultCardCopyToClipboard),xt.i.is(xt.i.Kind.resultCardCopyButtonClick)))).subscribe((({kind:e,result:t,selectedVoice:i})=>{var n,r,s;const o=(0,Ue.l)((0,a.zG)(t.replacementDelta,S.g_(a.yR,(e=>i===ce.x.GeneratedTextVoice.user?e.user:e.generic))),"");null===(r=null===(n=this._params.humanWritingReportService)||void 0===n?void 0:n.notifyTextCopyRequest)||void 0===r||r.call(n,e===xt.i.Kind.resultCardCopyToClipboard&&(null===(s=document.getSelection())||void 0===s?void 0:s.toString())||o,t.header.label)}))),this._subs.add(Nt.D((null===(t=this._params.humanWritingReportService)||void 0===t?void 0:t.showGenerateReportActions)?(0,Ee.Dx)(this._params.humanWritingReportService.showGenerateReportActions):p.of(!1)).pipe(O.U((0,P.RN)(o.G(function(){const e="Generate a report";return{kind:"humanWritingReportAction",id:J.Id.create("humanWritingReport"),group:{id:J.knownGroup.tools,label:"Tools",rank:Number.MAX_SAFE_INTEGER},icon:S.t$("humanWritingReport"),label:e,badge:o.YP,searchLabel:"humanWritingReport",searchTags:[e],generatesTextType:o.YP,args:[],disabled:!1,notificationOnAttempt:o.YP}}()),o.YP))).subscribe(g.wW(this._action))))}dispose(){this._subs.unsubscribe()}}class Yt{constructor(e,t,i,n=3e3,r=300,s=1){this._notificationService=e,this._assistantUIActions=t,this._activeView=i,this._notificationsDurationMs=n,this._mouseOutHoldBackDurationMs=r,this._maxNotificationsCountAtOnce=s,this._state=d.h.create([]),this._notificationsSubs=new Map,this._subs=new u.w0,this._hovered=d.h.create(!1),this._dismissed=new l.x,this.state=this._state.view(),this._subs.add(this._showFeedbackSubmittedToast().subscribe()),this._subs.add(this._clearNotificationsOnViewChange().subscribe()),this._subs.add(this._removeVoiceTagNotification().subscribe()),this._subs.add(this._showServiceNotifications().subscribe())}dismiss(e){var t;null===(t=this._notificationsSubs.get(e))||void 0===t||t.unsubscribe(),this._notificationsSubs.delete(e),this._state.modify(E.hX((t=>t.id!==e))),this._hovered.set(!1),this._dismissed.next(e)}hover(e){this._hovered.set(e)}clearAll(){this._notificationsSubs.forEach((e=>e.unsubscribe())),this._notificationsSubs.clear(),this._state.set([])}dispose(){this._subs.unsubscribe(),this.clearAll()}_showNotification(e){e.persistent||this._notificationsSubs.set(e.id,R.timer(e.customTimeout||this._notificationsDurationMs).pipe(m.w((()=>this._hovered.get()?this._hovered.pipe(G.e(10),h.h((e=>!e)),f.q(1),m.w((()=>R.timer(this._mouseOutHoldBackDurationMs)))):p.of(null)))).subscribe((()=>this.dismiss(e.id)))),this._state.modify((0,a.ls)(E.QI(e),E.ke(this._maxNotificationsCountAtOnce)))}_showFeedbackSubmittedToast(){return this._assistantUIActions.pipe(h.h((0,P.Kg)(xt.i.is(xt.i.Kind.feedbackFormSubmitButtonClick),xt.i.is(xt.i.Kind.reportOffensiveResultButtonClick),xt.i.is(xt.i.Kind.reportOffensiveActionsButtonClick),xt.i.is(xt.i.Kind.toneReportToneLikeButtonClick),xt.i.is(xt.i.Kind.toneReportToneDislikeButtonClick))),N.b((()=>this._showNotification(Se.create("feedbackSubmitted")))))}_removeVoiceTagNotification(){return this._assistantUIActions.pipe(h.h(xt.i.is(xt.i.Kind.voiceTagPopoverRemoveButtonClick)),N.b((()=>this._showNotification(Se.create("voiceTagRemoved")))))}_showServiceNotifications(){return this._notificationService.getNotifications(this._dismissed).pipe(N.b((e=>this._showNotification(e))))}_clearNotificationsOnViewChange(){return this._activeView.view("kind").pipe(A.x(),N.b((()=>this.clearAll())))}}var qt=i(84308),Xt=i(74412);function Qt(e){switch(e){case Xt.e.historyButtonActive:return o.G("historyButton");case Xt.e.initialActionsList:return o.G("homeGenAIActionsList");case Xt.e.referencesList:return o.G("genAIResultReferences");case Xt.e.promptInputAndMenuContainer:return o.G("promptInput");case Xt.e.followUpActionsList:return o.G("genAIResultFollowUpActionsList");case Xt.e.appActionsList:return o.G("homeAppActionsList");case Xt.e.actionsMoreButton:return o.G("actionsMoreButton");case Xt.e.intentCard:case Xt.e.historyButton:case Xt.e.promptInput:case Xt.e.promptMenuContent:case Xt.e.skill:return o.YP;default:(0,c.L0)(e)}}class Jt{constructor(e){this._params=e,this._subs=new u.w0,this._references=d.h.create(new Map),this._onboardingStep=d.h.create(o.YP),this.onboardingStep=this._onboardingStep.view(),(0,a.zG)(this._params.onboardingService,o.UI((e=>{this._subs.add(this._params.assistantUIActions.pipe(h.h(xt.i.is(xt.i.Kind.mount))).subscribe((({name:t,element:i})=>(0,a.zG)(Qt(t),o.UI((t=>{this._references.modify((e=>new Map(e).set(t,i))),e.notify({kind:"onboardingTargetMount",target:t})})))))),this._subs.add(this._params.assistantUIActions.pipe(h.h(xt.i.is(xt.i.Kind.unmount))).subscribe((({name:t})=>(0,a.zG)(Qt(t),o.UI((t=>{this._references.modify((e=>{const i=new Map(e);return i.delete(t),i})),e.notify({kind:"onboardingTargetUnmount",target:t})})))))),this._subs.add(qt.a([this._references,(0,Ee.Dx)(e.onboardingStepRequest).pipe(O.U(o.ij))]).pipe(O.U((([e,t])=>(0,a.zG)(t,o.tS((t=>(0,a.zG)(o.ij(e.get(t.target)),o.UI((e=>Object.assign(Object.assign({},t),{reference:e})))))))))).subscribe(g.wW(this._onboardingStep)))})))}notify(e){switch(e.kind){case"onboardingStepUnmount":(0,a.zG)(this._params.onboardingService,o.UI((t=>t.notify({kind:"onboardingStepUnmount",stepId:e.stepId,reason:e.reason}))));break;case"onboardingStepMount":(0,a.zG)(this._params.onboardingService,o.UI((t=>t.notify({kind:"onboardingStepMount",stepId:e.stepId}))));break;default:(0,c.L0)(e)}}dispose(){this._subs.unsubscribe()}}function ei(e){return"home"===e.kind||"thread"===e.kind}const ti={legacyVoiceProfile:!0,voiceProfile:!0,feedbackForm:!0,skill:!0,toneReport:!0,settings:!0,plagiarism:!0,performanceScore:!0,writingExpert:!0,aiStudio:!0,playbooks:!0};function ii(e){return!0===ti[e.kind]}var ni;!function(e){e.eq=C.f7(((e,t)=>e.kind===t.kind))}(ni||(ni={}));var ri,si,oi,ai=i(10883);!function(e){e.Slight="Slight",e.Moderate="Moderate",e.Strong="Strong",e.VeryStrong="Very strong"}(ri||(ri={})),function(e){e.On="on",e.Off="off"}(si||(si={})),function(e){e.positive="positive",e.negative="negative"}(oi||(oi={}));const li=V.Uz((e=>e.confidence))(V.Zy(V.Mh)),ci=V.Uz((e=>e===si.Off||e!==si.On&&(0,c.L0)(e)))(V.C2),di=V.Uz((({brandToneInfo:e,confidence:t})=>[(0,a.zG)(e,o.UI((({status:e})=>e))),t]))(V.N2(V.Zy(o.pR(ci)),V.Zy(V.Mh)));var ui;!function(e){e.isLoadedEmpty=e=>"loadedEmpty"===e.kind,e.isLoadedNonEmpty=e=>"loadedNonEmpty"===e.kind,e.isLoaded=(0,P.Kg)(e.isLoadedEmpty,e.isLoadedNonEmpty)}(ui||(ui={}));class mi{constructor(e){var t;this._params=e,this._subscriptions=new u.w0,this._toneAlertsSummary=d.h.create(o.YP),this._loadingTimedOut=d.h.create(!1),this.state=d.h.combine(this._params.toneDetectorServiceInternal.state,this._toneAlertsSummary,this._params.userService.user.view((e=>(0,a.zG)(o.DT(fe)(e),o.UI((({institution:e,isPremium:t})=>({institutionName:(0,a.zG)(e,o.UI((e=>e.name))),isUphookEligible:!t}))),o.fS((()=>({institutionName:o.YP,isUphookEligible:!1})))))),this._loadingTimedOut,((e,t,{institutionName:i,isUphookEligible:n},r)=>r?{kind:"loadedEmpty",brandToneInfo:o.YP,loadingTimedOut:!0}:(0,a.zG)(e,o.g_((()=>({kind:"loading"})),(({tones:e,hidden:r,brandTonesEnabled:s,institutionLogo:l})=>(0,a.zG)(_.c2(e),o.hX((e=>!r)),o.g_((()=>({kind:"loadedEmpty",brandToneInfo:s?o.G({institutionName:i,institutionLogo:l}):o.YP,loadingTimedOut:!1})),(e=>({kind:"loadedNonEmpty",tones:e,brandToneInfo:s?o.G({institutionName:i,institutionLogo:l}):o.YP,uphookInfo:n?t:o.YP}))))))))),this._subscriptions.add(this._params.assistantUIActions.pipe(h.h((0,P.Kg)(xt.i.isToneDetectorAction,xt.i.is(xt.i.Kind.actionBrickClick))),ai.M(this.state)).subscribe((([e,t])=>this._handleUIAction(e,t)))),this._subscriptions.add(this._params.routingViewModel.activeView.view("kind").pipe(A.x(),h.h((e=>"toneReport"===e))).subscribe((()=>this._refreshToneAlertsSummary()))),this._subscriptions.add(this.state.pipe(F.P(ui.isLoadedNonEmpty)).subscribe((()=>this._refreshToneAlertsSummary())));const i=R.timer(null!==(t=this._params.loadingTimeoutMs)&&void 0!==t?t:1e4).subscribe((()=>this._loadingTimedOut.set(!0)));this._subscriptions.add(i),this._subscriptions.add(this.state.pipe(F.P(ui.isLoaded)).subscribe((()=>i.unsubscribe())))}dispose(){this._subscriptions.unsubscribe()}_refreshToneAlertsSummary(){Ie(this._params.toneDetectorServiceInternal.getToneAlertsSummary()).then(g.wW(this._toneAlertsSummary))}_handleUIAction(e,t){switch(e.kind){case xt.i.Kind.toneReportToneLikeButtonClick:this._params.toneDetectorServiceInternal.submitToneFeedback(e.toneName,oi.positive);break;case xt.i.Kind.toneReportToneDislikeButtonClick:this._params.toneDetectorServiceInternal.submitToneFeedback(e.toneName,oi.negative);break;case xt.i.Kind.actionBrickClick:{const t=e.action;"regularAction"===t.kind&&J.isToneAction(t.action)&&this._params.routingViewModel.push({kind:"toneReport"});break}case xt.i.Kind.toneReportLoadedEmptyMount:ui.isLoadedEmpty(t)&&this._params.lifecycleViewModel.onInteractionReady({kind:"tone-detector",success:!t.loadingTimedOut});break;case xt.i.Kind.toneReportLoadedNonEmptyMount:ui.isLoadedNonEmpty(t)&&(this._params.lifecycleViewModel.onInteractionReady({kind:"tone-detector",success:!0}),this._params.trackingService.toneReportShown({tones:t.tones,brandTonesEnabled:o.pC(t.brandToneInfo)}));break;case xt.i.Kind.toneReportBackToSuggestionsButtonClick:"toneReport"===this._params.routingViewModel.activeView.get().kind&&this._params.routingViewModel.pop();break;default:(0,c.L0)(e)}}}class pi{constructor(e){this._params=e,this._contextualActions=d.h.combine(this._params.genAISession,this._params.activeView.view(o.DT(ei)),this._params.genAIAvailability,((e,t,i)=>(0,a.zG)(k.Yt(o.Kw)({session:(0,a.zG)(e,o.tS(le.toStarted)),view:(0,a.zG)(t,o.UI((e=>e.kind)))}),o.UI((({session:e,view:t})=>"home"===t?e.activeBoundaryContext:"thread"===t?e.activeContext:(0,c.L0)(t))),o.UI((t=>({loading:!(0,a.zG)(e,o.Gg((e=>o.pC(e.error))))&&"pending"===t.kind,actions:v._.isUnavailable(i)||o.Gg((({kind:e})=>"aiUsageAlert"===e))(t.specialView)?[]:t.availableActions.filter((0,a.ff)(J.isSkillAction)),context:t})))))),this._toneAction=(0,a.zG)(this._params.toneDetectorViewModel,o.g_((()=>d.h.create(o.YP)),(e=>e.state.view((0,a.ls)(o.DT(ui.isLoadedNonEmpty),o.UI((({tones:e})=>(0,a.zG)(e,_.YM,J.createToneAction)))))))),this._performanceScoreAction=(0,a.zG)(this._params.performanceScoreViewModel,o.g_((()=>d.h.create(o.YP)),(e=>e.performanceScoreAction))),this._plagiarismAction=d.h.combine((0,a.zG)(this._params.plagiarismViewModel,o.g_((()=>d.h.create(o.YP)),(e=>e.plagiarismAction))),this._params.textEditorState.view("textLength"),((e,t)=>(0,a.zG)(k.Yt(o.Kw)({action:e,textLength:t}),o.hX((({textLength:e})=>e>0)),o.UI((({action:e})=>e))))),this._writingExpertAction=d.h.combine((0,a.zG)(this._params.writingExpertViewModel,o.g_((()=>d.h.create(o.YP)),(e=>e.writingExpertAction))),this._params.textEditorState.view("wordCount"),((e,t)=>(0,a.zG)(k.Yt(o.Kw)({action:e,wordCount:t}),o.hX((({wordCount:e})=>e>50)),o.UI((({action:e})=>e))))),this._aiStudioBrandVoiceAction=(0,a.zG)(this._params.aiStudioViewModel,o.g_((()=>d.h.create(o.YP)),(e=>e.aiStudioBrandVoiceAction))),this._playbooksAction=this._params.playbooksViewModel.playbooksAction,this._humanWritingReportAction=(0,a.zG)(this._params.humanWritingReportViewModel,o.g_((()=>d.h.create(o.YP)),(e=>e.humanWritingReportAction))),this._skillActions=this._params.genAISession.view((e=>(0,a.zG)(e,o.tS(le.toStarted),o.UI((e=>e.activeContext)),o.UI((e=>e.availableActions)),o.wp((()=>(0,a.zG)(e,o.tS(le.toContextless),o.UI((({nonContextualActions:e})=>e))))),o.g_((()=>[]),E.hX(J.isSkillAction))))),this.otherActions=d.h.combine(this._toneAction,this._plagiarismAction,this._skillActions,this._writingExpertAction,this._performanceScoreAction,this._humanWritingReportAction,this._aiStudioBrandVoiceAction,((e,t,i,n,r,s,o)=>({toneAction:e,plagiarismAction:t,skillActions:i,writingExpertAction:n,performanceScoreAction:r,humanWritingReportAction:s,aiStudioBrandVoiceAction:o}))),this.state=d.h.combine(this._contextualActions,this.otherActions,this._playbooksAction,((e,t,i)=>Object.assign(Object.assign({contextualActions:e},t),{playbooksAction:i})))}}var gi=i(55661),hi=i(5588),fi=i(29416),vi=i(78129),bi=i(44071),yi=i(66878);function xi(e){var t;if(e instanceof HTMLIFrameElement){const i=null===(t=e.contentWindow)||void 0===t?void 0:t.document;if(i){const e=i.body.querySelector("textarea:not([disabled]), input:not([disabled])");e&&"focus"in e&&"function"==typeof e.focus&&e.focus()}}else e.focus()}function ki(e){return(t,i)=>{try{return(t instanceof HTMLIFrameElement?t.contentDocument&&t.contentDocument.body?bi.R(t.contentDocument.body,i):L.E:bi.R(null!=t?t:{},i)).pipe(yi.K(Si(t,i,e)))}catch(n){return Si(t,i,e)(n)}}}function Si(e,t,i){return n=>{const r=(0,Ce.N)(n);return i.error("Failed to attach event listener during focus trap.",{htmlElementTagName:null!==e?e.tagName:null,eventName:t,reason:r.message}),L.E}}var Ci=i(47074),Ei=i(23783),_i=i(83590),wi=i(8578);const Ii=(0,wi.I)("color",(({title:e,titleId:t,desc:i,descId:n,...s})=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true","data-icon":"InterfaceDocument",stroke:"transparent","aria-labelledby":t,"aria-describedby":n,...s},i?r.createElement("desc",{id:n},i):null,e?r.createElement("title",{id:t},e):null,r.createElement("path",{stroke:"#646B81",strokeLinecap:"round",strokeLinejoin:"round",d:"M5.5 4.4h5m-5 2.4h5m-5 2.4h5m-5 2.4H8M4.25 14h7.5c.69 0 1.25-.56 1.25-1.25v-9.5C13 2.56 12.44 2 11.75 2h-7.5C3.56 2 3 2.56 3 3.25v9.5c0 .69.56 1.25 1.25 1.25"}))));var Ai=i(28742),Fi=i(93868),Pi=i(59226),Mi=i(24909),Oi=i(65605),Ti=i(23839),Ri=i(31574);const Bi=e=>r.createElement(Ri.a1,Object.assign({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},e),r.createElement("rect",{x:"4.5",y:"4.5",width:"6",height:"6",rx:"1.5",stroke:Pi.I.Text.Base.Subdued}),r.createElement("rect",{x:"4.5",y:"13.5",width:"6",height:"6",rx:"1.5",stroke:Pi.I.Text.Base.Subdued}),r.createElement("rect",{x:"13.5",y:"4.5",width:"6",height:"6",rx:"1.5",stroke:Pi.I.Text.Base.Subdued}),r.createElement("path",{d:"M14.5513 15.8162L12.9269 16.3577C12.7902 16.4033 12.7902 16.5967 12.9269 16.6423L14.5513 17.1838C15.1485 17.3828 15.6172 17.8515 15.8162 18.4487L16.3577 20.0731C16.4033 20.2098 16.5967 20.2098 16.6423 20.0731L17.1838 18.4487C17.3828 17.8515 17.8515 17.3828 18.4487 17.1838L20.0731 16.6423C20.2098 16.5967 20.2098 16.4033 20.0731 16.3577L18.4487 15.8162C17.8515 15.6172 17.3828 15.1485 17.1838 14.5513L16.6423 12.9269C16.5967 12.7902 16.4033 12.7902 16.3577 12.9269L15.8162 14.5513C15.6172 15.1485 15.1485 15.6172 14.5513 15.8162Z",fill:Pi.I.Text.Base.Subdued,stroke:Pi.I.Text.Base.Subdued})),Ui=e=>r.createElement(Ri.a1,Object.assign({width:"22",height:"22",viewBox:"0 0 28 28"},e,{fill:"none"}),r.createElement("rect",{x:"0.5",y:"0.5",width:"27",height:"27",rx:"13.5",stroke:"#C6CBDE"}),r.createElement("path",{d:"M18.6118 19.9487C19.8543 18.9904 20.7655 17.6671 21.2173 16.1645C21.6692 14.6619 21.639 13.0554 21.1311 11.5708C20.6231 10.0863 19.6629 8.79805 18.3853 7.88717C17.1076 6.9763 15.5768 6.4885 14.0077 6.49228C12.4386 6.49607 10.9101 6.99126 9.63688 7.9083C8.36366 8.82533 7.40967 10.1182 6.90889 11.6052C6.40811 13.0922 6.3857 14.6988 6.84481 16.1992C7.30392 17.6996 8.22148 19.0185 9.46862 19.9707",stroke:"#6D758D",strokeLinecap:"round",strokeLinejoin:"round"}),r.createElement("path",{d:"M14.0001 14L18.3723 12.1908",stroke:"#6D758D",strokeLinecap:"round"}),r.createElement("circle",{cx:"14",cy:"14",r:"1.5",fill:"#F9FAFF",stroke:"#6D758D",strokeLinejoin:"round"})),Gi=e=>r.createElement(Ri.a1,Object.assign({width:"22",height:"22",viewBox:"0 0 28 28"},e,{fill:"none"}),r.createElement("rect",{x:"0.5",y:"0.5",width:"27",height:"27",rx:"13.5",stroke:"#E7E9F5"}),r.createElement("rect",{x:"8",y:"13",width:"12",height:"2",rx:"1",fill:"#C6CBDE"})),Ni=e=>r.createElement(Ri.a1,Object.assign({width:"22",height:"22",viewBox:"0 0 28 28"},e,{fill:"none"}),r.createElement("rect",{x:"0.5",y:"0.5",width:"27",height:"27",rx:"13.5",stroke:"#E7E9F5"}),r.createElement("path",{d:"M9.5 15.5L12.5 18.5L20 11",stroke:"#6D758D",strokeLinecap:"round"}));var Li=i(91320);const Di=e=>r.createElement(Ri.a1,Object.assign({width:"24",height:"25",viewBox:"0 0 24 25",stroke:"none"},e),r.createElement("rect",{x:"1",y:"3.5",width:"16",height:"19.9967",fill:Li.NeutralGray30}),r.createElement("g",{filter:"url(#PlagiarismAndAiDetectorIcon_filter0_i_3829_930)"},r.createElement("rect",{x:"3",y:"1.5",width:"16",height:"19.9967",fill:Li.NeutralGray0})),r.createElement("path",{d:"M15.4513 16.4568C17.0815 16.1106 17.9697 15.2258 18.392 13.8714C16.6202 13.8714 15.184 12.4899 15.184 10.7857C15.184 9.08151 16.6202 7.7 18.392 7.7C20.1637 7.7 21.6 8.99398 21.6 10.7857C21.6 12.5774 21.2435 17.1064 15.4513 18.5V16.4568Z",fill:Li.Green60}),r.createElement("path",{d:"M7.46727 16.4568C9.09752 16.1106 9.98569 15.2258 10.4079 13.8714C8.63622 13.8714 7.19995 12.4899 7.19995 10.7857C7.19995 9.08151 8.63622 7.7 10.4079 7.7C12.1797 7.7 13.6159 8.99398 13.6159 10.7857C13.6159 12.5774 13.2595 17.1064 7.46727 18.5V16.4568Z",fill:Li.Green60}),r.createElement("defs",null,r.createElement("filter",{id:"PlagiarismAndAiDetectorIcon_filter0_i_3829_930",x:"1",y:"1.5",width:"18",height:"21.9967",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},r.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),r.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),r.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),r.createElement("feOffset",{dx:"-2",dy:"2"}),r.createElement("feGaussianBlur",{stdDeviation:"2"}),r.createElement("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),r.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.760784 0 0 0 0 0.776471 0 0 0 0 0.831373 0 0 0 0.4 0"}),r.createElement("feBlend",{mode:"normal",in2:"shape",result:"effect1_innerShadow_3829_930"})))),ji=e=>r.createElement(Ri.a1,Object.assign({width:"16",height:"16",viewBox:"0 0 16 16"},e),r.createElement("path",{d:"M10.3009 10.6376C11.3878 10.4069 11.9799 9.817 12.2614 8.91408C11.0802 8.91408 10.1227 7.99306 10.1227 6.85694C10.1227 5.72082 11.0802 4.7998 12.2614 4.7998C13.4425 4.7998 14.4 5.66246 14.4 6.85694C14.4 8.05142 14.1624 11.0708 10.3009 11.9998V10.6376Z",fill:"#027E6F",stroke:"none"}),r.createElement("path",{d:"M4.97826 10.6376C6.06509 10.4069 6.65721 9.817 6.93871 8.91408C5.75756 8.91408 4.80005 7.99306 4.80005 6.85694C4.80005 5.72082 5.75756 4.7998 6.93871 4.7998C8.11986 4.7998 9.07737 5.66246 9.07737 6.85694C9.07737 8.05142 8.83974 11.0708 4.97826 11.9998V10.6376Z",fill:"#027E6F",stroke:"none"})),zi=e=>r.createElement(Ri.a1,Object.assign({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"none"},e),r.createElement("g",{clipPath:"url(#a)"},r.createElement("path",{fill:"#FFC444",d:"M5.654 7.744a3.623 3.623 0 0 0-2.398-2.398.362.362 0 0 1 0-.692 3.623 3.623 0 0 0 2.398-2.398.362.362 0 0 1 .692 0 3.623 3.623 0 0 0 2.398 2.398.362.362 0 0 1 0 .692 3.623 3.623 0 0 0-2.398 2.398.362.362 0 0 1-.692 0"}),r.createElement("path",{fill:"#027E6F",d:"M6.207 13.111a.5.5 0 0 1-.353-.853l8.98-8.982c.36-.358.962-.017.84.475l-1.63 6.517a.5.5 0 0 0 .485.62h2.597a.5.5 0 0 1 .354.854l-8.981 8.982c-.359.358-.962.017-.839-.475l1.63-6.517a.5.5 0 0 0-.486-.62z"})),r.createElement("defs",null,r.createElement("clipPath",{id:"a"},r.createElement("path",{fill:"#fff",d:"M0 0h24v24H0z"}))));var Vi=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const Ki=e=>{var{children:t}=e,i=Vi(e,["children"]);return r.createElement("div",Object.assign({},i,{className:Ei.ux.joinClasses([Zi,i.className])}),t)},Zi=Ei.ux.style({display:"inline-flex",justifyContent:"center",alignItems:"center",transform:"scale(calc(var(--rem)/16))"});var Hi=i(57832),$i=i(35770);const Wi="action-row-btn",Yi=r.forwardRef((function({icon:e,label:t,accessibleLabel:i,badge:n,style:s,mount:o,onClick:l},d){return r.createElement(Oi.z,{variant:"tertiary",onClick:l,name:"actionBrick",size:"large",style:[rn,s],className:Wi,mount:o,"aria-label":i,"data-label":i||t},(0,a.zG)(e,S.g_((e=>"more"===e?r.createElement(Bi,{"aria-hidden":!0}):"plagiarism"===e?r.createElement(ji,{"aria-hidden":!0}):"plagiarismAndAiDetector"===e?r.createElement(Di,{"aria-hidden":!0}):"writingExpert"===e?r.createElement(zi,{"aria-hidden":!0}):"performanceScoreEmpty"===e?r.createElement(Gi,{"aria-hidden":!0}):"performanceScoreSome"===e?r.createElement(Ui,{"aria-hidden":!0}):"performanceScoreSuccess"===e?r.createElement(Ni,{"aria-hidden":!0}):"humanWritingReport"===e?r.createElement(Ki,null,r.createElement(_i.J,{icon:Ii,accessibilityLabel:""})):(0,c.L0)(e)),(e=>r.createElement("img",{src:e,style:{width:Ei.ux.rem(qi),height:Ei.ux.rem(qi)},alt:""})))),r.createElement("div",{className:on},r.createElement(Mi.F.div,Object.assign({mount:d},W(t),{className:sn})),"new"===n&&r.createElement(Ai.V,{variant:"success",label:"New!","aria-label":", new feature"})))})),qi=1.25,Xi=Fi.mh,Qi=Fi.mh,Ji=Fi.qp,en=Xi+qi+Ji,tn=Qi,nn=(0,Ti.Rv)(`inset 0 0 0 2px ${$i.Z.BorderBrandDefault}`),rn={default:{fontSize:Ei.ux.rem(.875),lineHeight:Ei.ux.rem(1.3125),minHeight:Ei.ux.rem(2.5),gap:Ei.ux.rem(Ji),padding:`${Ei.ux.rem(Fi.x)} ${Ei.ux.rem(Qi)} ${Ei.ux.rem(Fi.x)} ${Ei.ux.rem(Xi)}`,justifyContent:"flex-start",alignItems:"flex-start",color:Pi.I.Text.Base.Default,boxShadow:"none",borderRadius:0,$nest:nn,width:"100%"},hovered:{color:Pi.I.Text.Base.Default,boxShadow:"none",$nest:nn},active:{color:Pi.I.Text.Base.Default,boxShadow:"none",$nest:nn},icon:(0,Hi.fx)(qi)},sn=Ei.ux.style({whiteSpace:"initial",textAlign:"left",lineHeight:Ei.ux.rem(1.3125)}),on=Ei.ux.style({display:"flex",alignItems:"start",justifyContent:"space-between",width:"100%",gap:Ei.ux.rem(Ci.x)});var an;!function(e){function t(e){return"actionStore"===e.kind}function i(e){return"searchResults"===e.kind}e.isActionStore=t,e.isSearchResults=i,e.isEmptySearchResults=function(e){return"emptySearchResults"===e.kind},e.isNonEmptyState=function(e){return t(e)||i(e)}}(an||(an={}));class ln{constructor(e,t,i,n,r,s,f,v,b,y,x,k,S){this._userActionTrackingService=y,this._focusPromptField=k,this._logger=S,this._subs=new u.w0,this._state=d.h.create(o.YP),this._userTyped=new l.x,this._promptOrMenuFocused=new l.x,this._promptMenuActions=new l.x,this._promptMenuContainer=d.h.create(o.YP),this._promptMenuContentContainer=o.YP,this._cachedActionBricks=o.YP,this.state=this._state.view(),this._subs.add(e.subscribe((e=>this._handleUIAction(e)))),this._subs.add(this._userTyped.pipe(hi.D((e=>e.trim().length>0?R.timer(150):p.of(null))),O.U((e=>e.trim())),N.b((e=>{""===e&&this._promptMenuActions.next({kind:"close"})})),h.h((e=>""!==e)),h.h((()=>!x())),ai.M(this._state.view(o.g_((()=>a.W8),(e=>e.filterPredicate)))),N.b((([e,t])=>this._promptMenuActions.next({kind:"showSearchResults",search:e,filterPredicate:t})))).subscribe()),this._subs.add(function(e,t,i,n,r,s,l,u,g,h){const f=n;return qt.a([e.pipe(m.w((e=>"showSearchResults"===e.kind||"showActionStore"===e.kind?d.h.combine(t,d.h.combine(f,r,i,s,u,g,l,((e,t,i,n,r,s,o)=>({listableToneAction:e,plagiarismAction:t,skillActions:i,writingExpertAction:n,performanceScoreAction:r,humanWritingReportAction:s,aiStudioAction:o}))),((t,i)=>{const n=(0,a.zG)(t,o.g_((()=>[]),(e=>e.actions))),r=(0,a.zG)((0,a.zG)([i.writingExpertAction,i.listableToneAction,i.plagiarismAction,i.performanceScoreAction,i.humanWritingReportAction,i.aiStudioAction],E.oA).concat(i.skillActions).concat(n.filter((0,a.ff)(J.isSkillAction))),E.hX(e.filterPredicate),_.c2);return(0,a.zG)("showSearchResults"===e.kind?(0,a.zG)(r,o.hX((()=>""!==e.search.trim()&&!(0,a.zG)(t,o.Gg((e=>e.loading))))),o.tS((t=>function(e,t){return(0,a.zG)(e,E.DZ((e=>(0,a.zG)(function(e,t,i){const n=ft(e),r=[...ft(t),...(0,a.zG)(i,E.tS((e=>ft(e))))],s=n.map((()=>null));let l=0;for(const e of r){if(l>=n.length)break;e.toLowerCase().includes(n[l].toLowerCase())&&(s[l]=0,++l)}return s.includes(null)?o.YP:o.G(s.map((e=>null!=e?e:0)).reduce(((e,t)=>e+t),0))}(t,e.searchLabel,e.searchTags),o.UI((t=>({data:e,matchScore:t})))))),E.DY(V.Uz((({matchScore:e})=>e))(V.Mh)),E.UI((({data:e})=>e)),_.c2)}(t,e.search)))):"showActionStore"===e.kind?(0,a.zG)(r,o.hX((()=>!(0,a.zG)(t,o.Gg((e=>e.loading)))))):(0,c.L0)(e),o.UI((t=>"showSearchResults"===e.kind?{kind:"searchResults",actions:t,filterPredicate:e.filterPredicate,query:e.search,promptMenuContainer:o.YP}:"showActionStore"===e.kind?{kind:"actionStore",actions:t,filterPredicate:e.filterPredicate,promptMenuContainer:o.YP}:(0,c.L0)(e))),o.wp((()=>"showSearchResults"===e.kind?o.G({kind:"emptySearchResults",query:e.search,filterPredicate:e.filterPredicate,promptMenuContainer:o.YP}):o.YP)))})):"close"===e.kind?p.of(o.YP):(0,c.L0)(e))),ht.O(o.YP)),h]).pipe(O.U((([e,t])=>(0,a.zG)(e,o.UI((e=>Object.assign(Object.assign({},e),{promptMenuContainer:t})))))))}(this._promptMenuActions,t,i,n,r,s,f,v,b,this._promptMenuContainer).subscribe(g.wW(this._state))),this._subs.add(this._promptOrMenuFocused.pipe(fi.b(100),h.h((e=>!e))).subscribe((()=>this._promptMenuActions.next({kind:"close"})))),this._subs.add(this.state.pipe(vi.G(),h.h((([e,t])=>o.Wi(e)&&o.pC(t))),O.U((([e,t])=>t)),U.oA).subscribe((e=>{"actionStore"===e.kind?this._userActionTrackingService.trackActionsOpenStore():"searchResults"===e.kind&&this._userActionTrackingService.trackPromptSearch()}))),this._subs.add(this._promptMenuActions.pipe(h.h((e=>"close"===e.kind))).subscribe((()=>this._invalidateActionBricks()))),this._subs.add(qt.a([this._state,e.pipe(h.h((e=>e.kind===xt.i.Kind.mount&&e.name===Xt.e.promptInputAndMenuContainer)))]).pipe(m.w((([e,{element:t}])=>(0,a.zG)(e,o.g_((()=>L.E),(e=>gi.P.FocusTrap.dynamicFocusTrap(gi.P.FocusTrap.InitialFocus.none,xi,ki(this._logger))(p.of(o.G(t))))))))).subscribe())}dispose(){this._subs.unsubscribe()}_handleUIAction(e){switch(e.kind){case xt.i.Kind.mount:return void(e.name===Xt.e.promptMenuContent?this._promptMenuContentContainer=o.G(e.element):e.name===Xt.e.promptInputAndMenuContainer&&this._promptMenuContainer.set(o.G(e.element)));case xt.i.Kind.unmount:return void(e.name===Xt.e.promptInputAndMenuContainer&&this._promptMenuContainer.set(o.YP));case xt.i.Kind.promptMenuKeyPressArrowDown:return this._onPromptMenuKeyPressArrowDown();case xt.i.Kind.promptMenuKeyPressArrowUp:return this._onPromptMenuKeyPressArrowUp();case xt.i.Kind.promptFieldKeyPressArrowUp:return this._focusLastBrick();case xt.i.Kind.promptFieldKeyPressArrowDown:return this._focusFirstBrick();case xt.i.Kind.promptFieldTextChange:return this._invalidateActionBricks(),this._userTyped.next(e.text);case xt.i.Kind.promptFieldKeyPressEscape:return e.menuOpened?this._promptMenuActions.next({kind:"close"}):void 0;case xt.i.Kind.collapsePromptMenuButtonClick:case xt.i.Kind.promptSubmitButtonClick:return this._promptMenuActions.next({kind:"close"});case xt.i.Kind.promptFieldKeyPressEnter:return void(e.text.trim().length>0&&this._promptMenuActions.next({kind:"close"}));case xt.i.Kind.actionBrickClick:return"allResults"===e.action.kind?this._promptMenuActions.next({kind:"showActionStore",filterPredicate:e.action.filterPredicate}):this._promptMenuActions.next({kind:"close"});case xt.i.Kind.promptFieldAndMenuFocusChange:return this._promptOrMenuFocused.next(e.focused);default:return}}_invalidateActionBricks(){this._cachedActionBricks=o.YP}_getActionBricks(){return(0,a.zG)(this._cachedActionBricks,o.fS((()=>{const e=(0,a.zG)(this._promptMenuContentContainer,o.g_((()=>[]),(e=>E.nI(Array.from(e.querySelectorAll(".action-row-btn")).filter(H)))));return this._cachedActionBricks=o.G(e),e})))}_onPromptMenuKeyPressArrowDown(){var e;const t=this._getActionBricks(),i=Z((null===(e=o.WG(this._promptMenuContentContainer))||void 0===e?void 0:e.ownerDocument)||document);return(0,a.zG)(o.ij(t.findIndex((e=>e===i))),D.bw((e=>{var i;e+1>=t.length?this._focusPromptField():null===(i=t[e+1])||void 0===i||i.focus()})))}_onPromptMenuKeyPressArrowUp(){var e;const t=this._getActionBricks(),i=Z((null===(e=o.WG(this._promptMenuContentContainer))||void 0===e?void 0:e.ownerDocument)||document);return(0,a.zG)(o.ij(t.findIndex((e=>e===i))),D.bw((e=>{var i;e-1<0?this._focusPromptField():null===(i=t[e-1])||void 0===i||i.focus()})))}_focusFirstBrick(){var e;null===(e=this._getActionBricks()[0])||void 0===e||e.focus()}_focusLastBrick(){var e;const t=this._getActionBricks();null===(e=t[t.length-1])||void 0===e||e.focus()}}var cn,dn=i(37108),un=i(49601),mn=i(64271),pn=i(89257);!function(e){e.lensAllSuggestionFeedShortForm="lens-all-suggestions-feed-short-form",e.lensAllSuggestionFeed="lens-all-suggestions-feed",e.lensCorrectnessFeed="lens-correctness-feed",e.lensClarityFeed="lens-clarity-feed",e.lensDeliveryFeed="lens-delivery-feed",e.lensEngagementFeed="lens-engagement-feed",e.lensStyleGuideFeed="lens-style-guide-feed",e.plagiarismFeed="plagiarism-feed",e.writingExpertFeed="writing-expert-feed",e.aiStudioFeed="ai-studio-feed"}(cn||(cn={}));const gn={[cn.lensAllSuggestionFeed]:"All suggestions",[cn.lensAllSuggestionFeedShortForm]:"All suggestions",[cn.lensCorrectnessFeed]:"Correctness",[cn.lensClarityFeed]:"Clarity",[cn.lensDeliveryFeed]:"Delivery",[cn.lensEngagementFeed]:"Engagement",[cn.lensStyleGuideFeed]:"Style guide",[cn.plagiarismFeed]:"Plagiarism",[cn.writingExpertFeed]:"Writing Expert",[cn.aiStudioFeed]:"AI Studio"};function hn(e){return Object.values(cn).includes(e)?o.G(e):o.YP}const fn={shortForm:cn.lensAllSuggestionFeedShortForm,longForm:cn.lensAllSuggestionFeed};var vn=i(84210),bn=i(26308),yn=i(93663);const xn=()=>vn.k4();function kn(e){return(0,a.zG)(xn().unwrap(e),(({items:e})=>e.size))}function Sn(e){return(0,a.zG)(xn().unwrap(e),(({items:t})=>(0,a.zG)(function(e){return(0,a.zG)(xn().unwrap(e),(({order:e})=>Mn(e)))}(e),E.UI((e=>o.ij(t.get(e)))),E.oA)))}function Cn(e){return(0,a.zG)(xn().unwrap(e),(({items:e,order:t})=>(0,a.zG)(t.focus,o.tS((t=>o.ij(e.get(t)))))))}function En(e){return(0,a.zG)(xn().unwrap(e),(({order:e})=>(0,a.zG)(e.focus,o.UI((()=>e.lefts.length)))))}function _n(e){return(0,a.ls)(xn().unwrap,(({items:t,order:i})=>({items:t,order:(0,a.zG)(i.focus,o.g_((()=>Fn(i.lefts.concat(i.rights),o.G(e))),(t=>function(e,t){const i=e(t.lefts.length);return Fn(Mn(t),o.G(i))}((()=>e),Pn(i.lefts,o.G(t),i.rights)))),o.fS((()=>i)))})),xn().wrap)}function wn(e){return(0,a.zG)(xn().unwrap(e).order.lefts.length,(t=>(0,a.zG)(e,_n(t+1))))}function In(e){return(0,a.zG)(xn().unwrap(e).order.lefts.length,(t=>(0,a.zG)(e,_n(t-1))))}function An(e,t){return V.Zt(((i,n)=>{const r=e.get(i),s=e.get(n);return void 0!==r&&void 0!==s?t.compare(r,s):0}))}function Fn(e,t){return E.xb(e)||(0,a.zG)(t,o.Gg((t=>E.dC(t,e))))?o.YP:o.G((0,a.zG)(t,o.g_((()=>({lefts:e,focus:o.YP,rights:[]})),(t=>({lefts:(0,a.zG)(e.slice(),E.ke(t)),focus:o.ij(e[t]),rights:(0,a.zG)(e.slice(),E.md(t+1))})))))}function Pn(e,t,i){return{lefts:e,focus:t,rights:i}}function Mn(e){return e.lefts.concat(E.oA([e.focus])).concat(e.rights)}function On(e){const t=e.lefts.length,i=e.rights.length;return Fn(e.lefts.concat(e.rights),o.G(i>0?t:t-1))}function Tn(e){return Fn(e.lefts.concat(e.rights),o.YP)}function Rn(e){const t=new u.w0,i=e.feedManager.feeds.view((t=>o.ij(t.get(e.feedId)))).view(o.UI((e=>e.feed)));return t.add(e.entryPointClicked.pipe(N.b((()=>e.routingViewModel.push(e.view))),m.w((()=>e.canExecuteEntryPointAction().pipe(f.q(1)))),U.oA).subscribe((t=>{e.feedActionService.processActions(t.content.actions,t.id,t.alertIds,t.content.id)}))),t.add(e.feedManager.feed.pipe(O.U((e=>{var t;return null===(t=o.WG(e))||void 0===t?void 0:t.id})),vi.G(),h.h((([t,i])=>t===e.feedId&&i!==e.feedId&&e.routingViewModel.activeView.get().kind===e.view.kind))).subscribe((()=>e.routingViewModel.pop()))),t.add(e.routingViewModel.has(e.view).pipe(vi.G(),h.h((([e,t])=>e&&!t)),m.w((()=>e.feedManager.feed.pipe(f.q(1),O.U((e=>{var t;return null===(t=o.WG(e))||void 0===t?void 0:t.id}))))),h.h((t=>t===e.feedId))).subscribe((()=>(0,a.zG)(i.get(),o.UI((t=>e.feedActionService.processActions([{type:"popAssistantFeed"},...e.sduiDisableCheckAction?[e.sduiDisableCheckAction]:[]],t.id,t.alertIds,t.content.id))))))),t.add({unsubscribe:()=>{e.routingViewModel.has(e.view).get()&&(0,a.zG)(i.get(),o.UI((t=>e.feedActionService.processActions(e.sduiDisableCheckAction?[e.sduiDisableCheckAction]:[],t.id,t.alertIds,t.content.id))))}}),t}function Bn(e,t){return e.pipe(O.U(bn.vh.filter(t,t,t)),h.h((e=>!bn.vh.isEmpty(e))),O.U(bn.vh.reduce(o.YP,((e,t)=>o.YP),((e,t,i)=>o.G(i)),((e,t)=>o.G(t)))),R.skipBy(o.Eh(pn.j.Item.eq)))}function Un(e){return"globalPart"===e.content.type&&("known"===e.content.name.kind||"unknown"===e.content.name.kind)&&"globalPart:aiStudioState"===e.content.name.value}function Gn(e){var t,i;return"column"===e.content.content.type&&void 0!==(null===(t=e.content.content.name)||void 0===t?void 0:t.value)?o.G({kind:null===(i=e.content.content.name)||void 0===i?void 0:i.value,sduiItem:e}):o.YP}const Nn={id:pn.j.Item.Id.from("ai-studio-part-EMPTY"),alertIds:[],content:{id:pn.j.Item.Id.from("ai-studio-part"),type:"globalPart",name:{kind:"unknown",value:"globalPart:aiStudioState"},content:{id:pn.j.Item.Id.from("ai-studio-part-EMPTY-COLUMN"),type:"column",name:{kind:"unknown",value:"success-content"},children:[{type:"block",id:"6",parts:[{type:"text",selectable:!1,id:"5",meta:{},text:"Something went wrong. Please, try again later.",textColor:"CoreNeutral90",format:[]}],name:{kind:"unknown",value:"alignment-block"},spacing:{top:"0",right:"0",bottom:"0.5",left:"0"},horizontalAlign:"center",verticalAlign:"middle"}]}}};var Ln;!function(e){let t;!function(e){e.empty="empty",e.error="error",e.nonEmpty="nonEmpty",e.loadingSuggestions="loadingSuggestions"}(t=e.Kind||(e.Kind={})),e.isError=function(e){return e.kind===t.error},e.isEmpty=function(e){return e.kind===t.empty},e.isNonEmpty=function(e){return e.kind===t.nonEmpty},e.isLoadingSuggestions=function(e){return e.kind===t.loadingSuggestions}}(Ln||(Ln={}));const Dn={type:"pushAssistantFeed",feedId:"ai-studio-feed"},jn={type:"enableAiStudioCheck",playbookId:"brand_voice"},zn=pn.j.Item.Id.from(cn.aiStudioFeed);class Vn{constructor(e){this._params=e,this._subs=new u.w0,this._asyncChecksFeedSubs=d.h.create(o.YP),this._checkingState=d.h.create(o.YP),this._globalPartState=d.h.create(o.YP),this._feedManagerFeed=this._params.feedManager.feed.view(o.hX((e=>e.id===zn))),this._isPlaybooksEnabled=d.h.create(!1),this.aiStudioBrandVoiceAction=d.h.create(o.YP),this._state=d.h.create({kind:Ln.Kind.loadingSuggestions}),this.state=this._state.view(),this._logger=this._params.logService.getLogger("AiStudioViewModelImpl"),this._playbookLoadingTimeoutId=null;const t=()=>{this._params.feedActionService.processActions([{type:"disableAiStudioCheck"}],zn)};this._params.feedManager.feed.pipe(O.U((e=>{var t;return null===(t=o.WG(e))||void 0===t?void 0:t.id})),vi.G(),h.h((([e,t])=>e===zn&&t!==zn))).subscribe(t),this._params.assistantUIActions.pipe(h.h(xt.i.is(xt.i.Kind.headerCloseButtonClick)),h.h((()=>"aiStudio"===this._params.routingViewModel.activeView.view("kind").get()))).subscribe(t),this._subscribeToPlaybooksGate(),this._subs.add(this._params.capiService.relevantInboundCAPIMessages.pipe(h.h(te.JS.AsyncCheckFinished.is),h.h((e=>"ai_studio"===e.check))).subscribe((()=>{this._checkingState.set(o.G(!1))}))),this._subs.add((0,qt.a)([this._params.isAiStudioEnabled,this._isPlaybooksEnabled]).subscribe((([e,t])=>this._configureAiStudioActions(t,e)))),this._subs.add(Bn(this._params.sduiItemsCollectionDiff,Un).subscribe((e=>(0,a.zG)(e,o.tS(Gn),o.g_((()=>{this._logger.debug("globalPartState not changed, failed to extract",e)}),(e=>{this._globalPartState.set(o.G(e)),this._logger.debug("globalPartState changed",e)})))))),this._subs.add(this._params.routingViewModel.activeView.view("kind").pipe(A.x(),vi.G(),N.b((([e,t])=>{["home","playbooks"].includes(e)&&"aiStudio"===t&&this._checkingState.set(o.G(!0))}))).subscribe()),this._subs.add(qt.a([this._feedManagerFeed,this._checkingState,this._globalPartState]).pipe(O.U((([e,t,i])=>(this._logger.debug("state recalculation....",e,t,i),this._calculateNewState(e,t,i)))),yi.K((e=>(this._logger.error("Exception in state recalculation",e),p.of({kind:Ln.Kind.error,sduiItem:Nn}))))).subscribe((e=>{this._logger.debug("state changed",e),this._state.set(e)}),(e=>{this._logger.error("Exception in state recalculation, subscription ended",e)}),(()=>{this._logger.debug("state recalculation subscription completed")})))}submitAiStudioFeedback(e){(0,_e.t)("submitAiStudioFeedback",this._params.capiService.feedback({type:j.dt.AiStudio,aiStudioStage:e}))}seeAllSuggestions(){this._params.routingViewModel.popUntil((e=>"home"===e.kind))}tryAgain(){}dispose(){this._subs.unsubscribe(),this._unsubscribeFromAsyncChecksFeed()}_subscribeToPlaybooksGate(){this._params.experimentService&&(0,_e.t)("isPlaybooksEnabled",(0,a.zG)(this._params.experimentService.isGateEnabled(Oe.C.AiStudioPlaybooksRead),I.d1((e=>new Error(e)))),this._logger,(e=>this._isPlaybooksEnabled.set(e)),(()=>this._isPlaybooksEnabled.set(!1)))}_configureAiStudioActions(e,t){const i=e?[Dn]:[Dn,jn];this._subscribeToAsyncChecksFeed(i);const n=o.fS((()=>!1))(t);e||!n?this._hideAiStudioBrandVoiceAction():this._showAiStudioBrandVoiceAction()}_subscribeToAsyncChecksFeed(e){this._unsubscribeFromAsyncChecksFeed();const t={id:pn.j.Item.Id.from("ai-studio-gbutton"),alertIds:[],content:{id:"",type:"gButton:aiStudio",actions:e,meta:{}}};this._asyncChecksFeedSubs.set(o.G(Rn({feedManager:this._params.feedManager,feedActionService:this._params.feedActionService,routingViewModel:this._params.routingViewModel,entryPointClicked:this._params.assistantUIActions.pipe(h.h((0,P.Kg)((0,P.W9)(xt.i.is(xt.i.Kind.actionBrickClick),(e=>"regularAction"===e.action.kind&&J.isAiStudioAction(e.action.action))),xt.i.is(xt.i.Kind.playbookSelected)))),canExecuteEntryPointAction:()=>p.of(o.G(t)),feedId:pn.j.Item.Id.from(cn.aiStudioFeed),view:{kind:"aiStudio"}})))}_unsubscribeFromAsyncChecksFeed(){(0,a.zG)(this._asyncChecksFeedSubs.get(),o.UI((e=>{e.unsubscribe()})))}_hideAiStudioBrandVoiceAction(){this.aiStudioBrandVoiceAction.set(o.YP)}_showAiStudioBrandVoiceAction(){this.aiStudioBrandVoiceAction.set(o.G(J.createAiStudioBrandVoiceAction()))}_isChecking(e){return o.fS((()=>!1))(e)}_calculateNewState(e,t,i){const n=o.Gg((e=>kn(e.collection)>0))(e),r=o.Gg((({kind:e})=>"error-content"===e))(i),s=o.Gg((({kind:e})=>"error-content"!==e))(i),l=this._isChecking(t);return l&&null===this._playbookLoadingTimeoutId?this._playbookLoadingTimeoutId=self.setTimeout((()=>{null!==Zt.activePlaybookId&&this._logger.warn(`Loading the playbook is taking too long ${Zt.activePlaybookId}`),this._playbookLoadingTimeoutId=null}),3e4):l||null===this._playbookLoadingTimeoutId||(self.clearTimeout(this._playbookLoadingTimeoutId),this._playbookLoadingTimeoutId=null),r&&!l?{kind:Ln.Kind.error,sduiItem:(0,a.zG)(i,o.UI((({sduiItem:e})=>e)),D.MH)}:n&&!l?{kind:Ln.Kind.nonEmpty}:s&&!l?{kind:Ln.Kind.empty,sduiItem:(0,a.zG)(i,o.UI((({sduiItem:e})=>e)),D.MH)}:l?{kind:Ln.Kind.loadingSuggestions}:{kind:Ln.Kind.error,sduiItem:Nn}}}class Kn{constructor(e){this._params=e,this._subs=new u.w0,this._viewActive=d.h.create(!1),this.deepLinkStatusChanges=d.h.combine(this._viewActive,this._params.performanceScoreViewAvailable,((e,t)=>({active:e,available:t}))),this._subs.add(this._params.routingViewModel.activeView.view("kind").subscribe((e=>this._viewActive.set("performanceScore"===e)))),this._subs.add(this._performanceViewActiveScoreNone().subscribe((()=>this._params.routingViewModel.pop()))),this._subs.add(this._performanceActionBrickClick().subscribe((()=>this._handleOpenPerformanceScoreViewRequest())))}handleDeepLinkRequest(){this._handleOpenPerformanceScoreViewRequest()}dispose(){this._subs.unsubscribe()}_handleOpenPerformanceScoreViewRequest(){"performanceScore"!==this._params.routingViewModel.activeView.get().kind&&this._params.performanceScoreViewAvailable.get()&&this._params.routingViewModel.push({kind:"performanceScore"})}_performanceActionBrickClick(){return this._params.assistantUIActions.pipe(h.h((0,P.W9)(xt.i.is(xt.i.Kind.actionBrickClick),(e=>"regularAction"===e.action.kind&&J.isPerformanceScoreAction(e.action.action)))))}_performanceViewActiveScoreNone(){return this._params.routingViewModel.activeView.view("kind").pipe(h.h((e=>"performanceScore"===e)),m.w((()=>this._params.performanceScoreViewAvailable.pipe(h.h((e=>!e)),f.q(1)))))}}function Zn(e){return"number"==typeof e&&e>=0&&e<=1?o.G(e):o.YP}function Hn(e){return!function(e){return"sensitive"===e.status||"error"===e.status}(e)}function $n(e){return t=>{switch(t.status){case"loading":return e.loading();case"tooSmall":return e.tooSmall();case"ok":return e.ok(t);default:(0,c.L0)(t)}}}function Wn(e){const t=(0,a.zG)(e,(e=>{switch(e.status){case"ok":return`See overall score (${e.generalScore}/100)`;case"loading":case"tooSmall":return"See overall score";default:(0,c.L0)(e)}})),i=(0,a.zG)(e,(e=>{switch(e.status){case"ok":return function(e){return"ok"===e.status&&100===e.generalScore}(e)?"performanceScoreSuccess":"performanceScoreSome";case"loading":case"tooSmall":return"performanceScoreEmpty";default:(0,c.L0)(e)}}));return{kind:"performanceScoreAction",id:J.Id.create("performanceScore"),group:{id:J.knownGroup.tools,label:"Tools",rank:Number.MAX_SAFE_INTEGER},icon:S.t$(i),label:t,badge:o.YP,searchLabel:"performanceScore",searchTags:[t],generatesTextType:o.YP,args:[],disabled:!1,notificationOnAttempt:o.YP}}class Yn{constructor(e){this._params=e,this._logger=this._params.logService.getLogger("PerformanceScoreViewModelImpl"),this._subs=new u.w0,this._performanceScore=d.h.create(o.G({status:"loading"})),this._featureOptions=d.h.create(o.YP),this.performanceScore=d.h.combine(this._performanceScore,this._featureOptions,((e,t)=>(0,a.zG)(e,o.hX((()=>o.pC(t))),o.hX(Hn)))),this.performanceScoreAction=d.h.combine(this.performanceScore,this._featureOptions,((e,t)=>(0,a.zG)(e,o.hX((()=>(0,a.zG)(t,o.Gg((e=>e.showEntryPoint))))),o.UI(Wn)))),this._params.featureOptions&&(this._subs.add((0,Ee.Dx)(this._params.featureOptions).pipe(O.U(o.ij)).subscribe(g.wW(this._featureOptions))),this._subs.add(qt.a([this._params.lastFinishedMessage,this._params.feeds,this._featureOptions]).pipe(h.h((([e,t,i])=>o.pC(i))),O.U((([e,t])=>function(e,t){return"OK"===e.scoresStatus?(0,a.zG)((i=e.generalScore,"number"==typeof i&&i>=0&&i<=100?o.G(Math.round(i)):o.YP),o.UI((i=>({status:"ok",generalScore:i,outcomeScores:qn(e.outcomeScores,t)})))):o.G({status:"TOO_SMALL"===e.scoresStatus?"tooSmall":"SENSITIVE"===e.scoresStatus?"sensitive":"ERROR"===e.scoresStatus?"error":(0,c.L0)(e.scoresStatus)});var i}(e,t)))).subscribe(g.wW(this._performanceScore))),this._subs.add(this.performanceScore.subscribe((e=>this._logger.debug("Performance score",e)))))}onPerformanceScoreReportMount(e){this._params.tracking.performanceScoreReportShown("ok"===e.status&&100===e.generalScore?"success":e.status)}dispose(){this._subs.unsubscribe()}}function qn(e,t){var i,n,r,s,l,c,d,u,m,p;return{clarity:{score:(0,a.zG)(Zn(null==e?void 0:e.Clarity),o.fS((()=>0))),alerts:null!==(n=null===(i=t.get(pn.j.Item.Id.from(cn.lensClarityFeed)))||void 0===i?void 0:i.alertCount)&&void 0!==n?n:0},correctness:{score:(0,a.zG)(Zn(null==e?void 0:e.Correctness),o.fS((()=>0))),alerts:null!==(s=null===(r=t.get(pn.j.Item.Id.from(cn.lensCorrectnessFeed)))||void 0===r?void 0:r.alertCount)&&void 0!==s?s:0},engagement:{score:(0,a.zG)(Zn(null==e?void 0:e.Engagement),o.fS((()=>0))),alerts:null!==(c=null===(l=t.get(pn.j.Item.Id.from(cn.lensEngagementFeed)))||void 0===l?void 0:l.alertCount)&&void 0!==c?c:0},styleGuide:{score:(0,a.zG)(Zn(null==e?void 0:e["Style guide"]),o.fS((()=>0))),alerts:null!==(u=null===(d=t.get(pn.j.Item.Id.from(cn.lensStyleGuideFeed)))||void 0===d?void 0:d.alertCount)&&void 0!==u?u:0},delivery:{score:(0,a.zG)(Zn(null==e?void 0:e.Tone),o.fS((()=>0))),alerts:null!==(p=null===(m=t.get(pn.j.Item.Id.from(cn.lensDeliveryFeed)))||void 0===m?void 0:m.alertCount)&&void 0!==p?p:0}}}class Xn{constructor(e){this._params=e,this.deepLinkStatusChanges=d.h.combine(this._params.plagiarismAvailable,this._params.activeView,((e,t)=>({available:e,active:"plagiarism"===t})))}handleDeepLinkRequest(){"plagiarism"!==this._params.activeView.get()&&this._params.plagiarismAvailable.get()&&this._params.handlePlagiarismDeepLinkRequest()}}var Qn=i(20232),Jn=i(18767);class er{constructor(e){this._params=e,this._logger=this._params.logService.getLogger(er.name),this._subs=new u.w0,this._plagiarismChecksEnabled=d.h.create(!1),this._aiDetectorEnabledByGate=d.h.create(!1),this.plagiarismChecksEnabled=this._plagiarismChecksEnabled.view(),this.aiDetectorEnabled=d.h.combine(this._params.aiDetectorEnabled,this._aiDetectorEnabledByGate,((e,t)=>(0,a.zG)(e,o.fS((()=>t))))),this._params.experimentService&&(0,_e.t)("isAiDetectorGateEnabled",(0,a.zG)(this._params.experimentService.isGateEnabled(Oe.C.PlagiarismAiDetector),I.Vn((e=>new Error(e)))),this._logger,(e=>this._aiDetectorEnabledByGate.set(e)),(e=>this._aiDetectorEnabledByGate.set(!1)))}enablePlagiarismChecks(){this._subs.add(this.aiDetectorEnabled.pipe(f.q(1),O.U((e=>(0,a.zG)(e?{plagiarism:!0,ai_detector:!0}:{plagiarism:!0},(e=>this._params.capiService.toggle_checks({checks:e})),Qn.UI((e=>{if(S.nM(e))throw new Error(e.left.message);return e.right})),(e=>Nt.D(e()))))),Jn.u()).pipe(f.q(1)).subscribe((e=>this._plagiarismChecksEnabled.set(!0)),(e=>function(e){return{kind:"error",source:"revision",name:"enablePlagiarismCheckFailed",data:e}}({reason:(0,Ce.N)(e).message}))))}disablePlagiarismChecks(){this._subs.add(this.aiDetectorEnabled.pipe(f.q(1),O.U((e=>(0,a.zG)(e?{plagiarism:!1,ai_detector:!1}:{plagiarism:!1},(e=>this._params.capiService.toggle_checks({checks:e})),Qn.UI((e=>{if(S.nM(e))throw new Error(e.left.message);return e.right})),(e=>Nt.D(e()))))),Jn.u()).pipe(f.q(1)).subscribe((e=>this._plagiarismChecksEnabled.set(!1)),(e=>function(e){return{kind:"error",source:"revision",name:"disablePlagiarismCheckFailed",data:e}}({reason:(0,Ce.N)(e).message}))))}dispose(){this._subs.unsubscribe()}}var tr=i(11374),ir=i(8867);function nr(e){return new ir.y((t=>{const i=new u.w0,n=new l.x;let r=o.YP;return i.add(e.asyncCheckFinishedMessage.subscribe((t=>{r=o.G(e.extractScore(t)),n.next(t)}))),i.add(e.asyncChecksEnabled.pipe(A.x(),m.w((t=>t?mn.T(e.textUpdated.pipe(O.U((()=>o.G({checking:!0,lastScore:r})))),n.pipe(O.U((t=>e.extractScore(t))),O.U((e=>o.G({checking:!1,lastScore:o.G(e)}))))).pipe(ht.O(o.G({checking:!0,lastScore:r}))):p.of(o.YP))),R.skipBy(o.Eh(C.MW({checking:C.vD,lastScore:o.Eh(e.scoreEq)})))).subscribe(t)),()=>i.unsubscribe()}))}function rr(e){return"gButton:plagiarism"===e.content.type}class sr{constructor(e){this._params=e,this._subs=new u.w0,this._sourceCount=d.h.create(o.YP),this._citationDropdown=d.h.create(o.YP),this._plagiarismEntryPoint=d.h.create(o.YP),this._plagiarismFeed=this._params.feedManager.feeds.view((e=>o.ij(e.get(pn.j.Item.Id.from(cn.plagiarismFeed))))).view(o.UI((e=>e.feed))),this._plagiarismCheckingState=d.h.create(o.YP),this._aiDetectorCheckingState=d.h.create(o.YP),this.state=this._params.isPlagiarismEnabled?d.h.combine(this._plagiarismCheckingState,this._aiDetectorCheckingState,this._sourceCount,this._citationDropdown,this._params.userViewModel.isPlagiarismDisabled,this._params.aiDetectorEnabled,((e,t,i,n,r,s)=>s?(0,a.zG)(k.Yt(o.Kw)({plagiarismCheckingState:e,aiDetectorCheckingState:t}),o.UI((({plagiarismCheckingState:{checking:e,lastScore:t},aiDetectorCheckingState:{checking:r,lastScore:s}})=>({checking:r||e,originality:t,sourceCount:i,citationDropdown:n,aiDetectorScore:s}))),o.hX((()=>!r)),(e=>({kind:"plagiarismAndAiDetector",state:e}))):(0,a.zG)(e,o.UI((({checking:e,lastScore:t})=>({checking:e,originality:t,sourceCount:i,citationDropdown:n}))),o.hX((()=>!r)),(e=>({kind:"plagiarismOnly",state:e}))))):this._params.aiDetectorEnabled.view((e=>({kind:e?"plagiarismAndAiDetector":"plagiarismOnly",state:o.YP}))),this.plagiarismAction=this._params.isPlagiarismEnabled?d.h.combine(this._plagiarismEntryPoint,this._params.userViewModel.isPlagiarismDisabled,this._params.aiDetectorEnabled,((e,t,i)=>(0,a.zG)(e,o.UI((()=>J.createPlagiarismAction({isAiDetectorEnabled:i}))),o.hX((()=>!t))))):d.h.create(o.YP),this._subs.add(Bn(this._params.sduiItemsCollectionDiff,rr).subscribe((e=>this._plagiarismEntryPoint.set(e)))),this._subs.add(Rn({feedManager:this._params.feedManager,feedActionService:this._params.feedActionService,routingViewModel:this._params.routingViewModel,entryPointClicked:mn.T(this._params.assistantUIActions.pipe(h.h((0,P.W9)(xt.i.is(xt.i.Kind.actionBrickClick),(e=>"regularAction"===e.action.kind&&J.isPlagiarismAction(e.action.action))))),this._params.plagiarismDeepLinkRequest),canExecuteEntryPointAction:()=>this._params.userViewModel.isPremium.get()?this._plagiarismEntryPoint.pipe(h.h(o.pC),f.q(1)):p.of(o.YP),feedId:pn.j.Item.Id.from(cn.plagiarismFeed),sduiDisableCheckAction:{type:"disablePlagiarismCheck"},view:{kind:"plagiarism"}})),this._subs.add(nr({extractScore:e=>e.outcomeScores.Originality,asyncChecksEnabled:this._params.plagiarismChecksEnabled,asyncCheckFinishedMessage:this._params.lastAsyncCheckFinishedMessage.pipe(h.h(te.JS.AsyncCheckFinished.isPlagiarism)),textUpdated:this._params.textUpdated,scoreEq:C.lr}).subscribe((e=>this._plagiarismCheckingState.set(e)))),this._subs.add(nr({extractScore:e=>e.outcomeScores.ai_detector_score,asyncChecksEnabled:qt.a([this._params.plagiarismChecksEnabled,this._params.aiDetectorEnabled]).pipe(O.U((([e,t])=>e&&t))),asyncCheckFinishedMessage:this._params.lastAsyncCheckFinishedMessage.pipe(h.h(te.JS.AsyncCheckFinished.isAiDetector)),textUpdated:this._params.textUpdated,scoreEq:C.lr}).subscribe((e=>this._aiDetectorCheckingState.set(e)))),this._subs.add(this._plagiarismFeed.view(o.tS((e=>{var t,i;for(const n of tr.ab.traverse(e.content))if("tooltip"===n.type){const e=null===(i=null===(t=/from (?<sources>\d+) sources on the web/.exec(n.text))||void 0===t?void 0:t.groups)||void 0===i?void 0:i.sources;if(void 0!==e)return(0,a.zG)(o.ij(Number.parseInt(e,10)),o.hX((e=>Number.isSafeInteger(e))))}return o.YP}))).subscribe((e=>this._sourceCount.set(e)))),this._subs.add(this._plagiarismFeed.view(o.tS((e=>{var t;for(const i of tr.ab.traverse(e.content))if("selectableDropDownMenu"===i.type&&"citation-style"===(null===(t=i.name)||void 0===t?void 0:t.value))return o.G(i);return o.YP}))).subscribe((e=>this._citationDropdown.set(e))))}seeAllSuggestions(){this._params.routingViewModel.popUntil((e=>"home"===e.kind))}onCitationDropdownSelect(e,t){(0,a.zG)(this._plagiarismFeed.get(),o.UI((i=>{this._params.feedActionService.processActions(e,i.id,i.alertIds,t),this._params.trackingService.plagiarismCitationsStyleChanged(t)})))}onCitationDropdownOpen(e){this._params.trackingService.plagiarismCitationsStyleDropdownOpened(e)}dispose(){this._subs.unsubscribe()}}class or{constructor(e){this._params=e,this._disposed=new l.x,this._writingExpertChecksEnabled=d.h.create(!1),this.writingExpertChecksEnabled=this._writingExpertChecksEnabled.view()}enableWritingExpertChecks(){Nt.D(this._params.capiService.toggle_checks({checks:{writing_expert_check:!0}})()).pipe(f.q(1),Lt.R(this._disposed)).subscribe((()=>this._writingExpertChecksEnabled.set(!0)),(e=>function(e){return{kind:"error",source:"revision",name:"enableWritingExpertCheckFailed",data:e}}({reason:(0,Ce.N)(e).message})))}disableWritingExpertChecks(){Nt.D(this._params.capiService.toggle_checks({checks:{writing_expert_check:!1}})()).pipe(f.q(1),Lt.R(this._disposed)).subscribe((()=>this._writingExpertChecksEnabled.set(!1)),(e=>function(e){return{kind:"error",source:"revision",name:"disableWritingExpertCheckFailed",data:e}}({reason:(0,Ce.N)(e).message})))}dispose(){this._disposed.next(void 0),this._disposed.complete()}}var ar=i(33581);function lr(e){return"globalPart"===e.content.type&&("known"===e.content.name.kind||"unknown"===e.content.name.kind)&&e.content.name.value===ar.MU.GlobalPartWritingExpertState}function cr(e){var t,i;if("column"===e.content.content.type){if("error-content"===(null===(t=e.content.content.name)||void 0===t?void 0:t.value))return o.G({kind:"error-content",sduiItem:e});if("success-content"===(null===(i=e.content.content.name)||void 0===i?void 0:i.value))return o.G({kind:"success-content",sduiItem:e})}return o.YP}const dr={id:pn.j.Item.Id.from("writing-expert-part-EMPTY"),alertIds:[],content:{id:pn.j.Item.Id.from("writing-expert-part"),type:"globalPart",name:{kind:"known",value:ar.MU.GlobalPartWritingExpertState},content:{id:pn.j.Item.Id.from("writing-expert-part-EMPTY-COLUMN"),type:"column",name:{kind:"unknown",value:"success-content"},children:[{type:"block",id:"6",parts:[{type:"text",selectable:!1,id:"5",meta:{},text:"Something went wrong. Please, try again later.",textColor:"CoreNeutral90",format:[]}],name:{kind:"unknown",value:"alignment-block"},spacing:{top:"0",right:"0",bottom:"0.5",left:"0"},horizontalAlign:"center",verticalAlign:"middle"}]}}};var ur,mr;function pr(e){return"gButton:writingExpert"===e.content.type}!function(e){let t;!function(e){e.empty="empty",e.error="error",e.nonEmpty="nonEmpty",e.loadingEvaluationAndSuggestions="loadingEvaluationAndSuggestions",e.nonEmptyLoadingEvaluation="nonEmptyLoadingEvaluation",e.evaluationFinishedLoadingSuggestions="evaluationFinishedLoadingSuggestions"}(t=e.Kind||(e.Kind={})),e.isIdle=function(e){return e===t.empty||e===t.error||e===t.nonEmpty},e.isError=function(e){return e.kind===t.error},e.isEmpty=function(e){return e.kind===t.empty},e.isNonEmpty=function(e){return e.kind===t.nonEmpty},e.isLoadingEvaluationAndSuggestions=function(e){return e.kind===t.loadingEvaluationAndSuggestions},e.isEvaluationFinishedLoadingSuggestions=function(e){return e.kind===t.evaluationFinishedLoadingSuggestions},e.isNonEmptyLoadingEvaluation=function(e){return e.kind===t.nonEmptyLoadingEvaluation}}(ur||(ur={})),function(e){e.isIdle=e=>"idle"===e.kind,e.isZero=e=>"zero"===e.kind,e.isLoadingEvaluation=e=>"loadingEvaluation"===e.kind,e.isLoadingSuggestions=e=>"loadingSuggestions"===e.kind}(mr||(mr={}));const gr=pn.j.Item.Id.from(cn.writingExpertFeed);class hr{constructor(e){this._params=e,this._subs=new u.w0,this._writingExpertEntryPoint=d.h.create(o.YP),this._checkingState=d.h.create(o.YP),this._globalPartState=d.h.create(o.YP),this._writingExpertFeed=this._params.feedManager.feeds.view((e=>o.ij(e.get(gr)))),this._feedManagerFeed=this._params.feedManager.feed.view(o.hX((e=>e.id===gr))),this.writingExpertAction=this._params.isWritingExpertEnabled?d.h.combine(this._writingExpertEntryPoint,this._params.userViewModel.isPremium,((e,t)=>(0,a.zG)(e,o.hX((()=>t)),o.UI((()=>J.createWritingExpertAction()))))):d.h.create(o.YP),this._evaluationState=d.h.create({kind:"zero"}),this._state=d.h.create({kind:ur.Kind.loadingEvaluationAndSuggestions}),this.state=this._state.view(),this._logger=this._params.logService.getLogger("WritingExpertViewModelImpl"),this._params.isWritingExpertEnabled&&(this._subs.add(Bn(this._params.sduiItemsCollectionDiff,pr).subscribe((e=>this._writingExpertEntryPoint.set(e)))),this._subs.add(Bn(this._params.sduiItemsCollectionDiff,lr).subscribe((e=>(0,a.zG)(e,o.tS(cr),o.g_((()=>{this._logger.debug("globalPartState not changed, failed to extract",e)}),(e=>{this._globalPartState.set(o.G(e)),this._logger.debug("globalPartState changed",e)})))))),this._subs.add(Rn({feedManager:this._params.feedManager,feedActionService:this._params.feedActionService,routingViewModel:this._params.routingViewModel,entryPointClicked:this._params.assistantUIActions.pipe(h.h((0,P.W9)(xt.i.is(xt.i.Kind.actionBrickClick),(e=>"regularAction"===e.action.kind&&J.isWritingExpertAction(e.action.action))))),canExecuteEntryPointAction:()=>this._writingExpertEntryPoint.pipe(h.h(o.pC),f.q(1)),feedId:pn.j.Item.Id.from(cn.writingExpertFeed),sduiDisableCheckAction:{type:"disableWritingExpertCheck"},view:{kind:"writingExpert"}})),this._subs.add(nr({extractScore:()=>null,asyncChecksEnabled:this._params.writingExpertChecksEnabled,asyncCheckFinishedMessage:this._params.lastAsyncCheckFinishedMessage.pipe(h.h((e=>"writing_expert_check"===e.check))),textUpdated:L.E,scoreEq:C.w4}).subscribe((e=>this._checkingState.set(e)))),this._subs.add(d.h.combine(this._checkingState,this._writingExpertFeed,((e,t)=>{const i=(0,a.zG)(t,o.UI((e=>e.feed)));return this._logger.debug("evaluationState recalculation....",e,i),(0,a.zG)(e,o.UI((e=>{const t=function(e){return(0,a.zG)(e,o.tS((e=>o.ij(e.content.footer))),o.tS((e=>{let t;for(const i of tr.ab.traverse(e))if("text"===i.type&&i.text.length>0){if(t)return o.G({title:t,subTitle:i.text});t=i.text}return t?o.G({title:t,subTitle:""}):o.YP})))}(i);this._logger.debug("trying to extract evaluation result",t);const n=this._evaluationState.get();return!0===e.checking?o.pC(t)&&mr.isLoadingEvaluation(n)?{kind:"loadingSuggestions",evaluationResult:D.MH(t)}:{kind:"loadingEvaluation"}:o.pC(t)?{kind:"idle",evaluationResult:D.MH(t)}:{kind:"zero"}})),o.fS((()=>({kind:"zero"}))))})).subscribe((e=>{this._evaluationState.set(e),this._logger.debug("evaluationState changed",e)}))),this._subs.add(this._params.routingViewModel.activeView.view("kind").pipe(A.x(),vi.G(),N.b((([e,t])=>{"home"===e&&"writingExpert"===t&&this.submitWritingExpertFeedback(j.Ln.FEED_OPENED),"writingExpert"===e&&this.submitWritingExpertFeedback(j.Ln.FEED_CLOSED)}))).subscribe()),this._subs.add(qt.a([this._feedManagerFeed,this._evaluationState,this._globalPartState]).pipe(O.U((([e,t,i])=>(this._logger.debug("state recalculation....",e,t,i),function(e,t,i){return(0,a.zG)(e,o.g_((()=>({kind:ur.Kind.loadingEvaluationAndSuggestions})),(e=>(0,a.zG)(i,o.hX((({kind:e})=>"error-content"===e)),o.pC)&&(mr.isIdle(t)||mr.isZero(t))?{kind:ur.Kind.error,sduiItem:(0,a.zG)(i,o.UI((({sduiItem:e})=>e)),D.MH)}:kn(e.collection)>0?mr.isIdle(t)||mr.isLoadingSuggestions(t)?{kind:ur.Kind.nonEmpty,evaluationResult:t.evaluationResult}:{kind:ur.Kind.nonEmptyLoadingEvaluation}:mr.isIdle(t)||mr.isZero(t)?(0,a.zG)(i,o.UI((({kind:e,sduiItem:t})=>{switch(e){case"error-content":return{kind:ur.Kind.error,sduiItem:t};case"success-content":return{kind:ur.Kind.empty,sduiItem:t};default:return(0,c.L0)(e)}})),o.fS((()=>({kind:ur.Kind.loadingEvaluationAndSuggestions})))):mr.isLoadingEvaluation(t)?{kind:ur.Kind.loadingEvaluationAndSuggestions}:{kind:ur.Kind.evaluationFinishedLoadingSuggestions,evaluationResult:t.evaluationResult})))}(e,t,i)))),yi.K((e=>(this._logger.error("Exception in state recalculation",e),p.of({kind:ur.Kind.error,sduiItem:dr}))))).subscribe((e=>{this._logger.debug("state changed",e),this._state.set(e)}),(e=>{this._logger.error("Exception in state recalculation, subscription ended",e)}),(()=>{this._logger.debug("state recalculation subscription completed")}))))}submitWritingExpertFeedback(e){(0,_e.t)("submitWritingExpertFeedback",this._params.capiService.feedback({type:j.Fj.WritingExpert,weStage:e}))}seeAllSuggestions(){this._params.routingViewModel.popUntil((e=>"home"===e.kind))}tryAgain(){this.submitWritingExpertFeedback(j.Ln.TRY_AGAIN)}dispose(){this._subs.unsubscribe()}}var fr=i(20680),vr=i(79256),br=i(19473);class yr{constructor(e){this._params=e,this._logger=this._params.logService.getLogger(yr.name),this._subs=new u.w0,this._alertIds=new Set,this._changes=new l.x,this.changes=fr.z(vr.P((()=>p.of(Array.from(this._alertIds).map(br.Tm)))),this._changes).pipe(h.h(E.Od)),this._subs.add((0,Ee.Dx)(this._params.alertCollectionChanges).subscribe({next:e=>this._processChanges(e),complete:()=>this._changes.complete()}))}hasAlert(e){return this._alertIds.has(e)}_processChanges(e){for(const t of e)(0,br.BG)(t)?this._alertIds.add(t.alertId):(0,br.nq)(t)?this._alertIds.delete(t.alertId):(0,c.L0)(t);e.length>0&&this._logger.debug("Alert collection change.",new Set(this._alertIds)),this._changes.next(e)}dispose(){this._subs.unsubscribe(),this._changes.complete()}}var xr=i(97092),kr=i(25941),Sr=i(46734);class Cr{constructor(e){this._params=e,this._logger=this._params.logService.getLogger(Cr.name),this._subs=new u.w0;const t=this._params.sduiActions.pipe((0,a.ls)(R.shareReplay({bufferSize:1,refCount:!0}),(e=>e.pipe(xr.f(e.pipe(fi.b(0))))))),i=t.pipe(h.h((e=>e.some((e=>"notify"===e.type&&e.userAction===ar.nz.Click))&&e.some((e=>"nextCard"===e.type||"prevCard"===e.type)))),pt.h(!0)),n=t.pipe(h.h((e=>e.some((e=>"positionedClick"===e.type&&"collapsedCard"===e.source)))),pt.h(!0)),r=t.pipe(h.h((e=>e.some((e=>"notify"===e.type&&e.userAction===ar.nz.Click))&&e.some((e=>"removeRoot"===e.type)))),pt.h(!0));this._subs.add(mn.T(i,n,r).pipe(dn.Q(kr.z),ai.M(this._params.activeFeed),O.U((([e,t])=>(0,a.zG)(t,o.tS((e=>Cn(e.collection))),o.tS((e=>E.YM(e.alertIds)))))),U.oA,m.w((e=>(this._logger.info(`Scrolling alert ${e} into view`),(0,Ee.Dx)(this._params.alertService.scrollAlertIntoView({alertId:e})).pipe(f.q(1),Sr.l(),yi.K((t=>p.of(function(e){return{kind:"error",source:"revision",name:"scrollAlertIntoViewFailed",data:e}}({scrollAlertIntoViewInfo:{alertId:e},reason:(0,Ce.N)(t).message}))))))))).subscribe((e=>{this._params.logService.logEvent(e)})))}dispose(){this._subs.unsubscribe()}}var Er=i(17869),_r=i(3199);function wr(e){var t;try{return"strongAlertRef"===e.type&&"known"===(null===(t=e.name)||void 0===t?void 0:t.kind)&&e.name.value===ar.MU.StrongAlertRefUpgradeHook||"longFormCard"===e.type&&e.behaviors.some((e=>{var t;return"behavior:strongAlertRef"===e.type&&"known"===(null===(t=e.name)||void 0===t?void 0:t.kind)&&e.name.value===ar.MU.StrongAlertRefUpgradeHook}))}catch(e){return!1}}class Ir{constructor(e){var t,i,n,r;this._params=e,this._subs=new u.w0,this._logger=this._params.logService.getLogger(Ir.name),this._feedMounted=d.h.create(!1),this._subs.add((0,a.zG)((t=this._feedMounted,i=this._params.focusedItem,n=this._params.activeFeedChanges,r=this._params.resetEmphasizedAlerts,mn.T(t.pipe(A.x(),O.U((e=>({kind:"activeFeedMounted",mounted:e})))),i.pipe(O.U(o.UI((e=>e.id))),R.skipBy(o.Eh(pn.j.Item.Id.eq)),O.U((e=>({kind:"focusedItem",itemId:o.WG(e)})))),r.pipe(O.U((e=>({kind:"resetEmphasizedAlerts",alerts:e})))),n.pipe(O.U((e=>Object.assign({kind:"activeFeedChanges"},e))))).pipe(_r.R(((e,t)=>{var i,n,r,s,l,c;let d=e.upgradeHookItemId,u=!1;if("resetEmphasizedAlerts"===t.kind)e.visibilityState.forEach(((i,n)=>{"emphasized"!==i||t.alerts.has(n)||(e.visibilityState.set(n,"visible"),e.alertsToUpdate.add(n))})),t.alerts.forEach((t=>{const i=pn.j.AlertId.from(t);e.visibilityState.set(i,"emphasized"),e.alertsToUpdate.add(i)}));else if("focusedItem"===t.kind)if(null===t.itemId){const t=null!==d&&d===e.focusedItemId,r=null!==e.focusedItemId&&null!==(n=null===(i=e.items.get(e.focusedItemId))||void 0===i?void 0:i.alertIds)&&void 0!==n?n:[];r.length>0&&r.forEach((i=>{e.visibilityState.set(i,t?"hidden":"visible"),e.alertsToUpdate.add(i)}))}else{const i=new Set(null!==e.focusedItemId&&null!==(s=null===(r=e.items.get(e.focusedItemId))||void 0===r?void 0:r.alertIds)&&void 0!==s?s:[]),n=new Set(null!==(c=null===(l=e.items.get(t.itemId))||void 0===l?void 0:l.alertIds)&&void 0!==c?c:[]),o=w.e5(pn.j.AlertId.eq)(i)(n);w.e5(pn.j.AlertId.eq)(n)(i).forEach((t=>{const i=e.alertsToItems.get(t),n=null!==d&&i&&1===i.size&&i.has(d);e.visibilityState.set(t,n?"hidden":"visible"),e.alertsToUpdate.add(t)})),o.forEach((t=>{e.visibilityState.set(t,"emphasized"),e.alertsToUpdate.add(t)}))}else if("activeFeedChanges"===t.kind){if(t.feedChanged){for(const t of e.visibilityState.values())if("hidden"!==t){u=!0;break}e.items.clear(),e.alertsToItems.clear(),e.alertsToUpdate.clear(),e.visibilityState.clear()}(0,a.zG)(t.itemsChanges,bn.vh.forEach(((t,i)=>e.items.delete(i)),((t,i,n)=>{e.items.set(n,i),d=wr(i.content)?n:d}),((t,i)=>{e.items.set(i,t),d=wr(t.content)?i:d}))),(0,a.zG)(t.alertsToItemsChanges,bn.vh.forEach(((t,i)=>{e.visibilityState.set(i,"hidden"),e.alertsToUpdate.add(i),e.alertsToItems.delete(i)}),((t,i,n)=>{const r=null!==e.upgradeHookItemId&&t.has(e.upgradeHookItemId)&&1===t.size,s=null!==d&&i.has(d)&&1===i.size,o=null!==e.focusedItemId&&t.has(e.focusedItemId),a=null!==e.focusedItemId&&i.has(e.focusedItemId);!o&&a?(e.visibilityState.set(n,"emphasized"),e.alertsToUpdate.add(n)):o&&!a?(e.visibilityState.set(n,null!==d&&1===i.size&&i.has(d)?"hidden":"visible"),e.alertsToUpdate.add(n)):!r&&s?(e.visibilityState.set(n,"hidden"),e.alertsToUpdate.add(n)):r&&!s&&(e.visibilityState.set(n,"visible"),e.alertsToUpdate.add(n)),e.alertsToItems.set(n,i)}),((t,i)=>{const n=null!==e.focusedItemId&&t.has(e.focusedItemId),r=null!==d&&1===t.size&&t.has(d);n?(e.visibilityState.set(i,"emphasized"),e.alertsToUpdate.add(i)):r||(e.visibilityState.set(i,"visible"),e.alertsToUpdate.add(i)),e.alertsToItems.set(i,t)})))}else if("activeFeedMounted"===t.kind){const i=(0,a.zG)(Array.from(e.visibilityState.entries()),E.hX((([e,t])=>"hidden"!==t))),n=t.mounted&&i.length>0?(0,a.zG)(i,E.UI((([e,t])=>({alertId:e,visibility:t}))),(e=>o.G({changes:e,isReset:!0}))):!t.mounted&&i.length>0?o.G({changes:[],isReset:!0}):o.YP;return Object.assign(Object.assign({},e),{feedMounted:t.mounted,alertsToUpdate:new Set,output:n})}const m=e.feedMounted&&(e.alertsToUpdate.size>0||"activeFeedChanges"===t.kind&&t.feedChanged&&u)?(0,a.zG)(Array.from(e.alertsToUpdate),E.UI((t=>(0,a.zG)(o.ij(e.visibilityState.get(t)),o.UI((e=>({alertId:t,visibility:e})))))),E.oA,(e=>o.G({changes:e,isReset:"activeFeedChanges"===t.kind&&t.feedChanged}))):o.YP;return Object.assign(Object.assign({},e),{upgradeHookItemId:d,focusedItemId:"focusedItem"===t.kind?t.itemId:e.focusedItemId,output:m,alertsToUpdate:o.pC(m)?new Set:e.alertsToUpdate})}),{visibilityState:new Map,alertsToUpdate:new Set,alertsToItems:new Map,items:new Map,feedMounted:!1,upgradeHookItemId:null,focusedItemId:null,output:o.YP}),O.U((e=>e.output)),U.oA)),N.b((e=>this._logger.debug("Received alert visibility changes.",e))),Er.z((({changes:e,isReset:t})=>t?(0,Ee.Dx)(this._params.alertService.setAlertsVisibility(e)).pipe(f.q(1),Sr.l(),yi.K((t=>p.of(function(e){return{kind:"error",source:"revision",name:"setAlertsVisibilityFailed",data:e}}({alertsVisibilityInfo:e,reason:(0,Ce.N)(t).message}))))):(0,Ee.Dx)(this._params.alertService.updateAlertsVisibility(e)).pipe(f.q(1),Sr.l(),yi.K((t=>p.of(function(e){return{kind:"error",source:"revision",name:"updateAlertsVisibilityFailed",data:e}}({alertsVisibilityInfo:e,reason:(0,Ce.N)(t).message})))))))).subscribe((e=>{this._params.logService.logEvent(e)})))}notifyFeedMount(){this._feedMounted.set(!0)}notifyFeedUnmount(){this._feedMounted.set(!1)}dispose(){this._subs.unsubscribe()}}var Ar=i(62552),Fr=i(39256),Pr=i(55341);function Mr(e,t){return(0,a.zG)(e,E.u4([],((e,i)=>i.alertIds.some((e=>t.has(e)))?[...e,i]:e)),E.DY(V.Zy(V.Zt(((e,i)=>{const n=e.alertIds.filter((e=>t.has(e))).length,r=i.alertIds.filter((e=>t.has(e))).length;if(n!==r){return n-r>0?1:-1}{const t=i.alertIds.length-e.alertIds.length;return t>0?1:t<0?-1:0}})))),E.YM,o.UI((e=>e.id)))}class Or{constructor(e){this._params=e,this._subs=new u.w0,this._logger=this._params.logService.getLogger(Or.name),this._activeFeed=new Ar.X(o.YP),this._sduiCheckingFinishedOnce=this._sduiFullTextCheckingCompletedOnceProxy(),this.focusCard=this._getSelectAlertByIdRequest().pipe(m.w((e=>e?this._getFocusCardRequest(e).pipe(N.b((t=>this._logger.debug(`Focus request for card ${t} with alertId ${e}`))),O.U((e=>({kind:"focusCard",cardId:e})))):this._getFocusFirstCardRequest().pipe(N.b((()=>this._logger.debug("Focus request for first card."))),O.U((()=>({kind:"focusFirstCard"}))))))),this._subs.add(this._params.activeFeed.subscribe(this._activeFeed))}dispose(){this._subs.unsubscribe()}_getFocusCardRequest(e){return this._activeFeed.pipe(O.U((t=>(0,a.zG)(t,o.tS((t=>Mr(Sn(t.collection),new Set([e]))))))),U.oA,f.q(1))}_getFocusFirstCardRequest(){const e=this._activeFeed.pipe(U.oA,O.U((e=>this._params.isShortFormFeed(e)&&0===kn(e.collection))),A.x(),h.h(a.yR)),t=this._activeFeed.pipe(R.skipBy(o.Eh(C.Uz((e=>e.id))(pn.j.Item.Id.eq))),U.oA);return mn.T(t,e).pipe(ai.M(this._activeFeed),m.w((([e,t])=>{var i;return T.S(this._sduiCheckingFinishedOnce.pipe(h.h(a.yR),f.q(1)),R.timer((null===(i=o.WG(t))||void 0===i?void 0:i.id)===cn.lensAllSuggestionFeedShortForm?2e3:Number.MAX_SAFE_INTEGER)).pipe(m.w((()=>this._activeFeed.pipe(h.h(o.Gg((e=>kn(e.collection)>0))),Fr.o((0,a.ls)(o.tS((e=>Cn(e.collection))),o.Wi))))))})))}_sduiFullTextCheckingCompletedOnceProxy(){const e=new Ar.X(!1),t=new Pr.t(1);return this._subs.add(this._params.sduiChangesSettled.subscribe(t)),this._subs.add(this._params.checkingFinishedOnce.pipe(f.q(1),m.w((()=>T.S(R.timer(500).pipe(pt.h(!0)),t))),h.h(a.yR)).subscribe(e)),e}_getSelectAlertByIdRequest(){const e=new Ar.X(null);return this._subs.add((0,Ee.Dx)(this._params.selectedAlertId).pipe(m.w((e=>e?mn.T(this._activeFeed.pipe(h.h((t=>(0,a.zG)(t,o.tS((e=>Cn(e.collection))),o.Gg((t=>t.alertIds.includes(pn.j.AlertId.from(e))))))),pt.h(null)),this._params.alertCollection.changes.pipe(h.h((t=>!!t.find((t=>(0,br.nq)(t)&&t.alertId===e)))),pt.h(null))).pipe(ht.O(e)):p.of(null)))).subscribe({next:t=>e.next(t)})),e.pipe(ht.O(null),A.x())}}class Tr{constructor(e){var t,i;this._subs=new u.w0,this._autofocusNextLongFormCardOnApplyOrDismiss=d.h.create(!0),this._autofocusNextLongFormCardOnAlertRefEmpty=d.h.create(!1),this.autofocusNextLongFormCardOnApplyOrDismiss=this._autofocusNextLongFormCardOnApplyOrDismiss.view(),this.autofocusNextLongFormCardOnAlertRefEmpty=this._autofocusNextLongFormCardOnAlertRefEmpty.view(),this._subs.add(null===(t=e.autofocusNextLongFormCardOnAlertRefEmpty)||void 0===t?void 0:t.subscribe({next:g.wW(this._autofocusNextLongFormCardOnAlertRefEmpty)})),this._subs.add(null===(i=e.autofocusNextLongFormCardOnApplyOrDismiss)||void 0===i?void 0:i.subscribe({next:g.wW(this._autofocusNextLongFormCardOnApplyOrDismiss)}))}dispose(){this._subs.unsubscribe()}}var Rr=i(57428);function Br(e){return{kind:"warn",source:"revision",name:"sduiUserActionFailed",data:e}}const Ur=/^.*(@(Short|Long)).*$/;function Gr(e,t){const i=e.match(Ur);return null!==i?e.replace(i[1],"shortForm"===t?"@Short":"@Long"):e}var Nr=function(e,t,i,n){return new(i||(i=Promise))((function(r,s){function o(e){try{l(n.next(e))}catch(e){s(e)}}function a(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))};class Lr{constructor(e){this._params=e,this._subs=new u.w0,this._logger=this._params.logService.getLogger(Lr.name),this._processedActionStatus=new l.x,this._disposed=!1,this.processedActionStatus=this._processedActionStatus.asObservable(),this._openPlansPageInNewTabTreatment=d.h.create(null),this._sduiFeedManagerLifecycleOnActiveFeedEmpty(),this._sduiFeedManagerLifecycleOnActiveFeedRemoved(),this._sduiFeedManagerLifecycleOnAlertsRefEmpty(),this._peekOpenPlansPageInNewTabTreatment()}_peekOpenPlansPageInNewTabTreatment(){(0,_e.t)("peekOpenPlansPageInNewTabTreatment",(0,a.zG)(this._params.experimentService?this._params.experimentService.peekTreatment(Oe.V.OpenPlansPageInNewTab):I.F2(!1),I.Vn((e=>new Error(e)))),this._logger,(e=>this._openPlansPageInNewTabTreatment.set(e)))}_sduiFeedManagerLifecycleOnAlertsRefEmpty(){this._subs.add(this._params.sduiManagerProxy.onAlertsRefEmpty.subscribe((e=>(0,a.zG)(this._params.feedManager.feed.get(),o.tS((e=>Cn(e.collection))),o.hX((t=>t.id===e.sduiRootId)),D.bw((()=>{const t=this._params.autofocusSettingsService.autofocusNextLongFormCardOnAlertRefEmpty.get(),i=e.emptyStrongAlertRef.onEmpty.filter((e=>"nextCard"!==e.type&&"prevCard"!==e.type||t));this._logger.debug("Handling alerts ref empty.",{actions:e.emptyStrongAlertRef.onEmpty,patchedActions:i,itemId:e.sduiId,autofocusNextCardOnAlertRefEmptyEnabled:t}),i.length>0&&this._processActions(i,e.sduiId,e.emptyStrongAlertRef.alertIds,e.sduiId)}))))))}_sduiFeedManagerLifecycleOnActiveFeedEmpty(){this._subs.add(this._params.feedManager.onActiveFeedEmpty.subscribe((e=>{var t;"assistantFeed"===e.content.type?this._processActions(null!==(t=e.content.onEmpty)&&void 0!==t?t:[],e.id,[],e.id):this._params.logService.logEvent({kind:"warn",source:"revision",name:"sduiFeedOnEmptyDSLActionsSkipped",data:null})})))}_sduiFeedManagerLifecycleOnActiveFeedRemoved(){this._subs.add(this._params.feedManager.onActiveFeedRemove.subscribe((e=>{"assistantFeed"===e.content.type?this._processActions(e.content.onRemove,e.id,e.alertIds,e.content.id):this._params.logService.logEvent({kind:"warn",source:"revision",name:"sduiFeedOnRemoveDSLActionsSkipped",data:null})})))}_switchViewWithinFocusedItem(e){(0,a.zG)(this._params.feedManager.feed.get(),o.tS((e=>Cn(e.collection))),o.hX((t=>e.sduiRootId!==t.id)),D.bw((t=>this._params.sduiManagerProxy.pushSwitchView(Object.assign(Object.assign({},e),{sduiRootId:t.id})))))}_switchViewWithinCurrentFeed(e){(0,a.zG)(this._params.feedManager.feed.get(),o.hX((({id:t})=>e.sduiRootId!==t)),D.bw((({id:t})=>this._params.sduiManagerProxy.pushSwitchView(Object.assign(Object.assign({},e),{sduiRootId:t})))))}_onAssistantClose(){(0,a.zG)(this._params.feedManager.feed.get(),o.tS((e=>{var t;return o.ij(null===(t=this._params.feedManager.feeds.get().get(e.id))||void 0===t?void 0:t.feed)})),D.bw((e=>{var t,i,n;(null!==(i=null===(t=e.content.onAssistantClose)||void 0===t?void 0:t.length)&&void 0!==i?i:0)>0&&this._processActions(null!==(n=e.content.onAssistantClose)&&void 0!==n?n:[],e.id,e.alertIds,e.content.id)})))}_executeAsyncCommand(e,t){return Nr(this,void 0,void 0,(function*(){try{return yield Ie(e()),!0}catch(e){return t(e),!1}}))}_logOpenPlansPageInNewTabTreatment(e){return Nr(this,void 0,void 0,(function*(){if(null!==e)return(0,_e.t)("logOpenPlansPageInNewTabTreatment",(0,a.zG)(this._params.experimentService?this._params.experimentService.logTreatment(Oe.V.OpenPlansPageInNewTab,e):I.t$("No experiment service"),I.Vn((e=>new Error(e)))),this._logger)}))}_openSDUICardLink(e,t){return e.includes("advancedIssues")?this._executeAsyncCommand((()=>this._params.uphookService.executeUphook({name:"advancedIssues",slot:"longFormAssistant",variant:"pro"},o.of({upgradeHookName:"advancedIssues",upgradeHookSlot:"longFormAssistant",upgradeHookVariant:"pro",upgradeHookSubVariant:"default",content:{ctaUrl:e}}))),(e=>{this._params.logService.logEvent((0,ae.Nm)({uphook:"advancedIssues",reason:(0,Ce.N)(e).message}))})):this._executeAsyncCommand((()=>this._params.lifecycleService.openUrl(e,"test"===t?{target:"_blank"}:void 0)),(e=>{this._params.logService.logEvent(function(e){return{kind:"error",source:"revision",name:"sduiCardOpenLinkFailed",data:e}}({reason:(0,Ce.N)(e).message}))}))}_processActions(e,t,i,n){return Nr(this,void 0,void 0,(function*(){const r=function(e){return e.some((e=>"notify"===e.type&&e.userAction===ar.nz.Click))&&e.some((e=>"removeRoot"===e.type))?e.filter((e=>"nextCard"!==e.type&&"prevCard"!==e.type)):e}(e);this._logger.debug("Processing SDUI actions.",{actions:r,dslActions:e,itemId:t,alertIdsInScope:i,sourceId:n});for(const e of r){this._logger.debug("Processing SDUI action.",{action:e}),this._processedActionStatus.next({action:e,status:"pending",itemId:t});const s=yield(0,a.zG)(e,(e=>Nr(this,void 0,void 0,(function*(){var s;switch(e.type){case"notify":{const t=null!==(s=e.sourceId)&&void 0!==s?s:n,i=Gr(t,this._params.feedForm.get());return t!==i&&this._logger.debug("Patched user action component ID.",{componentId:t,patchedComponentId:i}),(0,a.zG)(yield this._params.capiService.user_action({userAction:e.userAction,componentId:i})(),S.g_((i=>(this._params.logService.logEvent(this._disposed&&Rr.YG.isNotConnectedError(i)?Br({componentId:t,userAction:e.userAction,reason:(0,Ce.N)(i).message}):zt({componentId:t,userAction:e.userAction,reason:(0,Ce.N)(i).message})),!1)),(()=>!0)))}case"applyAlerts":{const t=i.map((t=>({alertId:t,alternativeIndex:e.alternativeIndex,feedForm:this._params.feedForm.get()})));return this._executeAsyncCommand((()=>this._params.alertService.applyAlerts(t)),(e=>{this._params.logService.logEvent(Dt({applyAlertsInfo:t,reason:(0,Ce.N)(e).message}))}))}case"removeAlerts":{const e=r.some((e=>"applyAlerts"===e.type)),t=i.map((t=>({alertId:t,removalReason:e?"alertApplied":"other"})));return this._executeAsyncCommand((()=>this._params.alertService.removeAlerts(t)),(e=>{this._params.logService.logEvent(jt({removeAlertsInfo:t,reason:(0,Ce.N)(e).message}))}))}case"removeRoot":return this._params.sduiManagerProxy.pushRemovedRoot([t,"removeRoot"]),!0;case"pushAssistantFeed":return this._params.feedManager.pushFeed(e.feedId,e.cardId),!0;case"popAssistantFeed":return this._params.feedManager.popFeed(e.fallbackFeed),!0;case"positionedClick":case"focusAssistantCard":return this._params.feedManager.focusCard("focusAssistantCard"===e.type?pn.j.Item.Id.from(e.cardId):t),!0;case"prevCard":return this._params.feedManager.focusPrev(),!0;case"nextCard":return this._params.feedManager.focusNext(),!0;case"switchView":{const i={where:e.where,selected:e.selected,sduiRootId:t};return this._params.sduiManagerProxy.pushSwitchView(i),this._switchViewWithinFocusedItem(i),this._switchViewWithinCurrentFeed(i),!0}case"highlightAlert":return this._params.setEmphasizedAlerts([i[0]]),!0;case"openLink":return this._params.metricService.report(se(n,this._params.feedForm.get())),yield this._logOpenPlansPageInNewTabTreatment(this._openPlansPageInNewTabTreatment.get()),this._openSDUICardLink(e.url,this._openPlansPageInNewTabTreatment.get());case"upgradeToPremium":return this._params.metricService.report(oe(n,this._params.feedForm.get())),this._executeAsyncCommand((()=>this._params.uphookService.executeUphook({name:"blurredSuggestion",slot:"plagiarismView",variant:"premiumTrial"},o.YP,e.url)),(e=>{this._params.logService.logEvent(Kt({reason:(0,Ce.N)(e).message}))}));case"copyToClipboard":return this._executeAsyncCommand((()=>this._params.textEditorService.copyText(e.text)),(e=>{this._params.logService.logEvent(Vt({reason:(0,Ce.N)(e).message}))}));case"enablePlagiarismCheck":return this._params.plagiarismService.enablePlagiarismChecks(),!0;case"disablePlagiarismCheck":return this._params.plagiarismService.disablePlagiarismChecks(),!0;case"enableWritingExpertCheck":return this._params.writingExpertService.enableWritingExpertChecks(),!0;case"disableWritingExpertCheck":return this._params.writingExpertService.disableWritingExpertChecks(),!0;case"enableAiStudioCheck":return this._params.aiStudioService.enableAiStudioChecks(e.playbookId),!0;case"disableAiStudioCheck":return this._params.aiStudioService.disableAiStudioChecks(),!0;case"hoverStateChanged":case"transition":return!0;case"selectAlternative":case"hideHighlights":case"showHighlights":case"nativeOpenAssistant":case"openCreateSnippetModal":case"newRevision":case"interactPopover":case"closePopover":case"closeCard":case"openGrammarlyGo":case"openToneDetector":case"stopApplyingAlerts":case"openSettings":case"openFeedback":case"openPerformanceScore":case"nativeOpenUserSatisfactionFeedback":case"openLearnMore":case"enableAudienceAdaptCheck":case"disableAudienceAdaptCheck":return this._logger.warn("Processing unsupported SDUI action, this is a no-op.",{actionType:e.type}),!1;default:(0,c.L0)(e)}}))));this._processedActionStatus.next({action:e,status:s?"successful":"failed",itemId:t})}}))}processActions(e,t,i,n){return this._processActions(e,t,null!=i?i:[],null!=n?n:t)}dispose(){this._disposed=!0,this._onAssistantClose(),this._subs.unsubscribe()}}var Dr=i(1906),jr=i(97225),zr=i(8065);function Vr(e){return t=>{const i=Kr(t.content);return!o.Wi(i)&&e.reduce(((e,t)=>!1===e?e:(0,a.zG)(i,o.tS((e=>o.ij(e[t.property]))),o.g_((()=>t.condition===ar.j2.NotEqualTo),(e=>t.condition===ar.j2.EqualTo?e===t.value:e!==t.value)))),!0)}}function Kr(e){try{for(const t of tr.ab.traverse(e)){if("longFormCard"===t.type)return o.G(t.feedProperties);if("assistantCard"===t.type&&t.properties)return o.G(t.properties)}return o.YP}catch(e){return o.YP}}const Zr=E.Eh(C.MW({property:C.yv,condition:C.yv,value:C.lr})),Hr=E.Eh(C.MW({orderBy:C.yv,direction:C.yv}));function $r(e){return e.pipe(_r.R((({feedsState:e,items:t,alertsToItems:i},n)=>{(0,a.zG)(n,bn.vh.forEach((i=>{if(Wr(i))e.delete(i.id);else{t.delete(i.id);for(const t of e.values())t.removeItem(i)}}),((i,n)=>{if(Wr(n)){let i=e.get(n.id);i?i.updateFeed(n,t):(i=new Yr(n.id,n,t),e.set(n.id,i))}else{t.set(n.id,n);for(const t of e.values())t.updateItem(i,n)}}),(i=>{if(Wr(i))e.set(i.id,new Yr(i.id,i,t));else{t.set(i.id,i);for(const t of e.values())t.addItem(i)}})));const r=new Map(Array.from(e.entries()).map((([e,t])=>[e,{id:e,feed:t.feed,itemCount:t.itemCount,alertCount:t.alertCount,items:t.items,itemsChanges:t.getItemsChangesAndReset(),alertsToItems:t.alertsToItems,alertsToItemsChanges:t.getAlertsToItemsChangesAndReset()}])));return{feedsState:e,items:t,alertsToItems:i,output:r}}),{feedsState:new Map,items:new Map,alertsToItems:new Map,output:new Map})).pipe(O.U((({output:e})=>e)))}function Wr(e){return"assistantFeed"===e.content.type}class Yr{constructor(e,t,i){this.id=e,this.feed=t,this._filter=Vr(this.feed.content.filtering),this._items=new Map,this._alertsToItems=new Map,this._itemsDiff=new Map,this._alertsToItemsDiff=new Map;for(const e of i.values())this.addItem(e)}updateFeed(e,t){const i=!Zr.equals(this.feed.content.filtering,e.content.filtering);this.feed=e,i&&(this._filter=Vr(e.content.filtering),this._items.forEach((e=>this.removeItem(e))),t.forEach((e=>this.addItem(e))))}addItem(e){this._filter(e)&&!this._items.has(e.id)&&(this._itemsDiff.set(e.id,jr.F2(e)),this._items.set(e.id,e),this._addAlertsForItem(e))}updateItem(e,t){const i=this._items.delete(e.id),n=this._filter(t);(i||n)&&this._itemsDiff.set(t.id,n&&i?jr.Hk(e,t):n?jr.F2(t):jr.t$(e)),i&&this._removeAlertsForItem(e),n&&(this._items.set(t.id,t),this._addAlertsForItem(t))}removeItem(e){this._items.delete(e.id)&&(this._itemsDiff.set(e.id,jr.t$(e)),this._removeAlertsForItem(e))}_removeAlertsForItem(e){for(const t of e.alertIds){const i=this._alertsToItems.get(t);if(!i)return;i.delete(e.id)&&(0===i.size?(this._alertsToItems.delete(t),this._alertsToItemsDiff.set(t,jr.t$([e.id]))):this._alertsToItemsDiff.set(t,jr.Hk([...i].concat(e.id),[...i])))}}_addAlertsForItem(e){var t;for(const i of e.alertIds){const n=null!==(t=this._alertsToItems.get(i))&&void 0!==t?t:new Set;if(!n.has(e.id)){const t=[...n];this._alertsToItems.set(i,n.add(e.id)),this._alertsToItemsDiff.set(i,0===t.length?jr.F2([e.id]):jr.Hk(t,[...n]))}}}getItemsChangesAndReset(){const e=bn.vh.fromMutation((e=>this._itemsDiff.forEach(((t,i)=>e.set(i,t)))));return this._itemsDiff.clear(),e}getAlertsToItemsChangesAndReset(){const e=bn.vh.fromMutation((e=>this._alertsToItemsDiff.forEach(((t,i)=>e.set(i,(0,a.zG)(t,jr.Pd((e=>new Set(e)),(e=>new Set(e)))))))));return this._alertsToItemsDiff.clear(),e}get items(){return this._items}get alertsToItems(){return this._alertsToItems}get itemCount(){return this._items.size}get alertCount(){return this._alertsToItems.size}}var qr=i(24332);var Xr=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const Qr={show:e=>`[${e.id} - ${kn(e.collection)} items - focus at ${o.ZN(Dr._3).show((0,a.zG)(Cn(e.collection),o.UI((e=>e.id))))}]`};class Jr{constructor(e){this._params=e,this._subs=new u.w0,this._logger=this._params.logService.getLogger(Jr.name),this._focusCommandsQueue=[],this._evalFocusCommand=new Pr.t(1),this._feedStack=new Ar.X([]),this._feed=d.h.create(o.YP),this._feedsState=new Ar.X(new Map),this._feeds=d.h.create(new Map),this._sduiItemsCollectionDiff=new l.x,this._sduiFeedChanges=this._sduiFeedAddedAndRemovedObs(),this._activeFeedChanges=new l.x,this.onActiveFeedRemove=new l.x,this.onActiveFeedEmpty=new l.x,this.feed=this._feed.view(),this.activeFeedChanges=this._activeFeedChanges.asObservable(),this.feeds=this._feeds.view(),this._subs.add(this._sduiItemsCollectionDiff.pipe($r).subscribe((e=>{this._feedsState.next(e),this._feeds.set(new Map(Array.from(e.entries()).map((e=>{var[t,i]=e,{itemsChanges:n,items:r,alertsToItems:s,alertsToItemsChanges:o}=i;return[t,Xr(i,["itemsChanges","items","alertsToItems","alertsToItemsChanges"])]}))))}))),this._subs.add(this._getActiveFeedChanges().subscribe(this._activeFeedChanges)),this._subs.add(this._emitOnFeedRemove()),this._subs.add(this._updateActiveFeed()),this._subs.add(this._invalidateFeedsFromStack()),this._subs.add(this.feed.subscribe((e=>this._logger.debug("Feed state changed.",o.ZN(Qr).show(e))))),this._subs.add(this.feeds.subscribe((e=>this._logger.debug("Feeds changed.",Array.from(e.keys()))))),this._subs.add(this._params.sduiItemsCollectionDiff.subscribe(this._sduiItemsCollectionDiff))}pushFeed(e,t,i){const n=this._feedStack.getValue(),r=this._feedsState.getValue(),s=(0,a.zG)(o.ij(t),o.hX((t=>{var i,n;return!!(null===(n=null===(i=r.get(pn.j.Item.Id.from(e)))||void 0===i?void 0:i.items)||void 0===n?void 0:n.get(pn.j.Item.Id.from(t)))})),o.wp((()=>{var t,n,s;return i?Mr(Array.from(null!==(s=null===(n=null===(t=r.get(pn.j.Item.Id.from(e)))||void 0===t?void 0:t.items)||void 0===n?void 0:n.values())&&void 0!==s?s:[]),i):o.YP}))),l=(0,a.zG)(this._feed.get(),o.tS((e=>Cn(e.collection))),o.UI((e=>e.id))),c=(0,a.zG)(n,E.Z$,o.UI((({feedId:e,valid:t})=>({feedId:e,itemIdToFocus:l,valid:t}))));this._logger.debug("Pushing feed.",{feedId:e,itemIdToFocus:s}),this._feedStack.next((0,yn.KN)(n).concat(E.oA([c])).concat({feedId:pn.j.Item.Id.from(e),itemIdToFocus:s,valid:!0}))}replaceFeed(e,t,i){const n=this._feedsState.getValue(),r=(0,a.zG)(o.ij(t),o.hX((t=>{var i,r;return!!(null===(r=null===(i=n.get(pn.j.Item.Id.from(e)))||void 0===i?void 0:i.items)||void 0===r?void 0:r.get(pn.j.Item.Id.from(t)))})),o.wp((()=>{var t,r,s;return i?Mr(Array.from(null!==(s=null===(r=null===(t=n.get(pn.j.Item.Id.from(e)))||void 0===t?void 0:t.items)||void 0===r?void 0:r.values())&&void 0!==s?s:[]),i):o.YP})));this._logger.debug("Replacing feed.",{feedId:e,itemIdToFocus:r}),this._feedStack.next(E.Ss((0,yn.KN)(this._feedStack.getValue()),{feedId:pn.j.Item.Id.from(e),itemIdToFocus:r,valid:!0}))}popFeed(e){const t=this._feedStack.getValue();this._logger.debug("Popping feed.",{fallbackFeed:e}),t.filter((e=>e.valid)).length>1?this._feedStack.next(function(e){const t=[...e];for(let e=t.length-1;e>=0&&!t[e].valid;--e)t.pop();return t}((0,yn.KN)(t))):(0,a.zG)(o.ij(e),o.g_((()=>{this._logger.warn("Popped feed with less than 2 valid feeds in the feed stack and no fallback feed, this is a no-op.")}),(e=>{this.pushFeed(pn.j.Item.Id.from(e.feedId),e.cardId),this._logger.debug(`Popped feed with less than 2 valid feeds in the feed stack. Switching to fallback feed. ${JSON.stringify(e)}`)})))}focusFirst(){this._logger.debug("Focusing first card on feed."),this._focusCommandsQueue.push({kind:"focusFirst"}),this._evalFocusCommand.next(void 0)}focusCard(e){this._logger.debug("Focusing card on feed.",{itemId:e}),this._focusCommandsQueue.push({kind:"focusCard",itemId:e}),this._evalFocusCommand.next(void 0)}focusNext(){this._logger.debug("Focusing next card on feed."),this._focusCommandsQueue.push({kind:"focusNext"}),this._evalFocusCommand.next(void 0)}focusPrev(){this._logger.debug("Focusing previous card on feed."),this._focusCommandsQueue.push({kind:"focusPrev"}),this._evalFocusCommand.next(void 0)}dispose(){this._subs.unsubscribe()}_updateActiveFeed(){return this._getActiveFeedMeta().pipe(m.w(o.g_((()=>p.of(o.YP)),(({ordering:e,feedId:t,itemIdToFocus:i})=>{const n=this._getFeedItemsAndChanges(t).pipe(O.U((e=>({kind:"sduiChange",diff:e})))),r=(0,a.zG)(i,o.g_((()=>L.E),(e=>p.of({kind:"focusCard",itemId:e})))),s=(c=e,l=(0,qr.g_)(V.iP())(c.map((e=>(0,a.zG)(V.Mh,V.Uz((0,a.ls)(Kr,o.tS((t=>o.ij(t[e.orderBy]))),o.g_((()=>Number.MAX_VALUE),(t=>e.direction===ar.di.Asc?t:-1*t)))))))),V.Uz((e=>e.content))(l));var l,c;return mn.T(n,r,this._evalFocusCommand.pipe(ht.O(null),m.w((()=>Nt.D(this._focusCommandsQueue.splice(0)))))).pipe(_r.R(((e,i)=>(0,a.zG)(e,"sduiChange"===i.kind?function(e,t,i=a.W8){return(0,a.ls)(xn().unwrap,(n=>(0,a.zG)(e,bn.vh.reduce({items:new Map(n.items),added:new Set,updated:new Set,removed:new Set},((e,t,i)=>(e.removed.add(i),e)),((e,t,i,n)=>(e.items.set(n,i),e.updated.add(n),e)),((e,t,i)=>(e.items.set(i,t),e.added.add(i),e))),(({items:e,added:r,updated:s,removed:l})=>{const c=(0,a.zG)(n.order.focus,o.Gg((e=>l.has(e)))),d=Mn(n.order).filter((e=>!s.has(e))),u=(0,yn.UJ)(d,[...s,...r],An(e,t)),m=(0,a.zG)(u,E.hX((e=>!l.has(e)||(0,a.zG)(n.order.focus,o.Gg((t=>t===e))))));l.forEach((t=>e.delete(t)));const p=(0,a.zG)(n.order.focus,o.g_((()=>Pn((0,a.zG)(m,E.hX((e=>!l.has(e)))),o.YP,[])),(t=>(0,a.zG)(Fn(m,o.G(m.indexOf(t))),c?o.tS(i(e)?On:Tn):a.yR,o.fS((()=>Pn((0,a.zG)(m,E.hX((e=>!l.has(e)))),o.YP,[])))))));return{items:e,order:p}}))),xn().wrap)}(i.diff,s,(e=>1===e.size&&wr(Array.from(e.values())[0].content)||this._params.autofocusNextCard(t))):a.yR,"focusNext"===i.kind?wn:a.yR,"focusPrev"===i.kind?In:a.yR,"focusCard"===i.kind?_n(Sn(e).findIndex((e=>e.id===i.itemId))):a.yR,"focusFirst"===i.kind?_n((0,a.zG)(Sn(e),(e=>1===e.length?0:e.findIndex((e=>!wr(e.content)))))):a.yR)),xn().wrap({items:new Map,order:Pn([],o.YP,[])})),O.U((e=>o.G({id:t,collection:e}))))}))),N.b((e=>this._emitOnActiveFeedEmptyIfNewFeedIsEmpty(e,this._feed.get())))).subscribe(g.wW(this._feed))}_getFeedItemsAndChanges(e){return fr.z(p.of((0,a.zG)(this._feedsState.getValue(),Me.P5(pn.j.Item.Id.eq)(e),o.UI((e=>e.items)),o.UI((e=>bn.vh.fromMutation((t=>e.forEach(((e,i)=>t.set(i,jr.F2(e)))))))))),this._feedsState.pipe(B.T(1),O.U((0,a.ls)(Me.P5(pn.j.Item.Id.eq)(e),o.UI((e=>e.itemsChanges)))))).pipe(U.oA)}_getActiveFeedChanges(){return this._feed.pipe(O.U(o.UI((e=>e.id))),ht.O(o.YP),R.skipBy(o.Eh(pn.j.Item.Id.eq)),O.U((e=>o.WG(k.Yt(o.Kw)({feedId:e,feedItems:(0,a.zG)(e,o.tS((e=>{var t;return o.ij(null===(t=this._feedsState.getValue().get(e))||void 0===t?void 0:t.items)}))),feedAlerts:(0,a.zG)(e,o.tS((e=>{var t;return o.ij(null===(t=this._feedsState.getValue().get(e))||void 0===t?void 0:t.alertsToItems)})))})))),vi.G(),m.w((([e,t])=>null===t?null===e?L.E:p.of({feedChanged:!0,itemsChanges:bn.vh.empty(),alertsToItemsChanges:bn.vh.empty()}):fr.z(p.of({feedChanged:!0,itemsChanges:bn.vh.fromMutation((e=>{for(const i of t.feedItems.values())e.set(i.id,jr.F2(i))})),alertsToItemsChanges:bn.vh.fromMutation((e=>{for(const[i,n]of t.feedAlerts.entries())e.set(i,jr.F2(n))}))}),this._feedsState.pipe(B.T(1),O.U((0,a.ls)(Me.P5(pn.j.Item.Id.eq)(t.feedId),o.UI((e=>({feedChanged:!1,itemsChanges:e.itemsChanges,alertsToItemsChanges:e.alertsToItemsChanges})))))).pipe(U.oA)))),h.h((e=>e.feedChanged||!bn.vh.isEmpty(e.itemsChanges)||!bn.vh.isEmpty(e.alertsToItemsChanges))))}_getActiveFeedMeta(){return this._feedStack.pipe(O.U((0,yn.aW)((e=>e.valid))),m.w(o.g_((()=>p.of(o.YP)),(e=>this._feedsState.pipe(O.U(Me.P5(pn.j.Item.Id.eq)(e.feedId)),O.U(o.UI((({feed:t})=>({ordering:t.content.ordering,feedId:t.id,itemIdToFocus:e.itemIdToFocus})))))))),R.skipBy(o.Eh(es)))}_sduiFeedAddedAndRemovedObs(){const e=C.Uz((e=>e.id))(pn.j.Item.Id.eq),t=this._feedsState.pipe(O.U((0,a.ls)((e=>Array.from(e.values())),E.UI((e=>e.feed)),w.nI(e))),ht.O(new Set),vi.G()),i=w.e5(e),n=t.pipe(O.U((([e,t])=>i(t)(e))),zr.b((e=>Nt.D(e))),R.shareReplay({bufferSize:1,refCount:!0}));return{added:t.pipe(O.U((([e,t])=>i(e)(t))),zr.b((e=>Nt.D(e))),R.shareReplay({bufferSize:1,refCount:!0})),removed:n}}_invalidateFeedsFromStack(){const e=this._sduiFeedChanges.removed.subscribe((e=>{const t=this._feedStack.getValue();if(t.find((t=>t.feedId===e.id))){const i=t.map((t=>t.feedId===e.id?Object.assign(Object.assign({},t),{valid:!1}):t));this._feedStack.next(i)}})),t=this._sduiFeedChanges.added.subscribe((e=>{const t=this._feedStack.getValue();if(t.find((t=>t.feedId===e.id))){const i=t.map((t=>t.feedId===e.id?Object.assign(Object.assign({},t),{valid:!0}):t));this._feedStack.next(i)}}));return()=>{e.unsubscribe(),t.unsubscribe()}}_emitOnFeedRemove(){return this._sduiFeedChanges.removed.pipe(ai.M(this._feedStack.pipe(O.U(E.Z$))),h.h((([e,t])=>{var i;return(null===(i=o.WG(t))||void 0===i?void 0:i.feedId)===e.id})),O.U((([e,t])=>e))).subscribe(this.onActiveFeedRemove)}_emitOnActiveFeedEmptyIfNewFeedIsEmpty(e,t){(0,a.zG)(k.Yt(o.Kw)({currentFeed:t,newFeed:e}),o.hX((({currentFeed:e,newFeed:t})=>e.id===t.id&&kn(e.collection)>0&&0===kn(t.collection))),o.tS((({currentFeed:e})=>o.ij(this._feeds.get().get(e.id)))),o.UI((({feed:e})=>this.onActiveFeedEmpty.next(e))))}}const es=C.MW({feedId:pn.j.Item.Id.eq,itemIdToFocus:o.Eh(pn.j.Item.Id.eq),ordering:Hr});class ts extends Jr{constructor(e){super(e),this._initialForm=null,this.allSuggestionsFeedId=this.feeds.view((e=>{var t,i;return(0,a.zG)(o.ij(null===(i=null===(t=e.get(pn.j.Item.Id.from("longForm"===this._initialForm?cn.lensAllSuggestionFeed:cn.lensAllSuggestionFeedShortForm)))||void 0===t?void 0:t.feed)||void 0===i?void 0:i.id))})),this._initialForm=e.initialForm}pushFeed(e,t,i){super.pushFeed(pn.j.Item.Id.from(e),t,i)}replaceFeed(e,t,i){super.replaceFeed(pn.j.Item.Id.from(e),t,i)}popFeed(e){super.popFeed(null!=e?e:(0,a.zG)(this.allSuggestionsFeedId.get(),o.UI((e=>({feedId:e}))),o.FS))}}class is{constructor(e){this._params=e,this._subs=new u.w0,this._deepLinkStatus=d.h.create({available:!1,active:!1}),this.deepLinkStatusChanges=this._deepLinkStatus.view(),this._subs.add(this._focusPremiumSuggestionsUphook()),this._subs.add(this._trackPremiumSuggestionsUphookAvailability()),this._subs.add(this._deepLinkStatus.view("active").subscribe((e=>{var t,i;null===(i=(t=this._params.uphookService).notifyPremiumSuggestionsUphookFocusChanged)||void 0===i||i.call(t,e)}))),this._subs.add(this._params.routingViewModel.activeView.view((e=>"home"!==e.kind)).subscribe((()=>this._deepLinkStatus.lens("active").set(!1))))}onFocusedSDUIItemMount(e){this._deepLinkStatus.lens("active").set(wr(e.content))}handleDeepLinkRequest(){this._params.routingViewModel.has({kind:"home"})&&(this._params.routingViewModel.popUntil((e=>"home"===e.kind)),(0,a.zG)(this._params.feedManager.feed.get(),o.tS((({collection:e})=>this._findUphookItem(e))),o.UI((e=>this._params.feedManager.focusCard(e.id)))))}_focusPremiumSuggestionsUphook(){var e;return(null!==(e=this._params.uphookService.requestFocusPremiumSuggestionsUphook)&&void 0!==e?e:L.E).subscribe({next:()=>this.handleDeepLinkRequest()})}_trackPremiumSuggestionsUphookAvailability(){return this._params.feedManager.feed.pipe(G.e(100),O.U(o.Gg((e=>o.pC(this._findUphookItem(e.collection)))))).subscribe((e=>{var t,i;null===(i=(t=this._params.uphookService).notifyPremiumSuggestionsUphookAvailabilityChanged)||void 0===i||i.call(t,e),this._deepLinkStatus.lens("available").set(e)}))}_findUphookItem(e){return(0,a.zG)(Sn(e),"shortForm"===this._params.feedFormViewModel.state.get().feedForm?E.dF((e=>wr(e.content))):E.Ew((e=>wr(e.content))))}dispose(){this._subs.unsubscribe()}}var ns=i(84766),rs=i(54115),ss=i(28556),os=i(87083),as=i(6096);class ls{constructor(e){this._params=e,this._subs=new u.w0,this._logger=this._params.logService.getLogger(ls.name),this._sduiEvents=new l.x,this._localSDUIBuffer=[],this._localSDUIBufferChanged=new l.x,this._flush=new l.x,this._sduiManagerFactory=()=>new ss.G(this._sduiEvents.asObservable(),o.DT((e=>this._params.alertCollection.hasAlert(e))),void 0,mn.T(ns.F(100).pipe(ht.O(0)),this._flush.pipe(pt.h(0)))),this._sduiManager=d.h.create(this._sduiManagerFactory()),this._state=d.h.create(this._sduiManager.get().state.get()),this._sduiReset=new l.x,this._sduiItemCollectionChanges=new l.x,this._sduiChangesSettled=new Ar.X(!1),this.sduiReset=this._sduiReset.asObservable(),this.state=this._state.view(),this.onAlertsRefEmpty=(0,a.zG)(this._sduiManager.view((e=>e.onAlertsRefEmpty)),rs.B()),this.sduiChangesSettled=this._sduiChangesSettled.pipe(A.x()),this._sduiProcessingSub=null,this._subs.add(this._processAlertChanges()),this._subs.add(this._processInboundSDUIMessages(this._sduiItemCollectionChanges)),this._subs.add(this._computeSDUIChangesSettled().subscribe(this._sduiChangesSettled)),this._subs.add(this._sduiManager.pipe(m.w((e=>e.state))).subscribe(g.wW(this._state))),this._subs.add(this._sduiEvents.pipe(xr.f(this._sduiEvents.pipe(fi.b(0)))).subscribe((e=>{const t=e.filter((e=>e.kind===os.e.SduiEventKind.Add)),i=e.filter((e=>e.kind===os.e.SduiEventKind.Update)),n=e.filter((e=>e.kind===os.e.SduiEventKind.Remove));(t.length>0||i.length>0||n.length>0)&&this._logger.debug(`Received SDUI events - insertions: [${t.map((e=>e.sduiRootId)).join(",")}] - updates: [${i.map((e=>e.sduiRootId)).join(",")}] - removals: [${n.map((e=>e.sduiRootId)).join(",")}]`)}))),this._subs.add((0,Ee.Dx)(this._params.sduiItemCollectionChanges).subscribe(this._sduiItemCollectionChanges))}pushRemovedRoot(e){this._sduiManager.get().pushRemovedRoot(e),this._sduiManager.get().flush()}pushRemovedAlerts([e,t]){this._sduiManager.get().pushRemovedAlerts([e,t])}pushSwitchView(e){this._sduiManager.get().pushSwitchView(e)}dispose(){this._cancelSDUIBufferProcessing(),this._subs.unsubscribe(),this._sduiManager.get().dispose()}_computeSDUIChangesSettled(){const e=this._sduiManager.pipe(m.w((e=>e.unresolvedItemsQueueSize)),O.U((e=>0===e))),t=this._localSDUIBufferChanged.pipe(O.U((()=>0===this._localSDUIBuffer.length))),i=qt.a([e,t]).pipe(O.U((([e,t])=>e&&t)),A.x()),n=this._sduiItemCollectionChanges.pipe(O.U((e=>0===e.pendingChangesCount)),ht.O(!0),A.x());return qt.a([i,n]).pipe(m.w((([e,t])=>e?t?p.of(!0):R.timer(500).pipe(pt.h(!0)):R.timer(500).pipe(pt.h(!0),ht.O(!1)))),A.x())}_parseSDUIMessage(e,t,i=!1){return i?(0,a.zG)(tr.ab.dslRootParser(e),S.Vn((e=>(this._params.logService.logEvent(function(e){return{kind:"error",source:"revision",name:"sduiDSLParseFailed",data:e}}({sduiRootId:t,reason:(0,Ce.N)(e).message})),e))),o.Uo):o.G(e)}_processInboundSDUIMessages(e){var t;return e.pipe(O.U((e=>e.changes)),Jn.u(),h.h(cs),O.U((e=>(0,as.tC)(e)?(0,a.zG)(this._parseSDUIMessage(e.sdui,e.sduiRootId),o.UI((t=>({kind:os.e.SduiEventKind.Add,sdui:t,sduiRootId:os.e.RawSduiItem.Id.create(e.sduiRootId),rev:0})))):(0,as.Y9)(e)?(0,a.zG)(this._parseSDUIMessage(e.sdui,e.sduiRootId),o.UI((t=>({kind:os.e.SduiEventKind.Update,sdui:t,sduiRootId:os.e.RawSduiItem.Id.create(e.sduiRootId),rev:0})))):(0,as.zi)(e)?o.G({kind:os.e.SduiEventKind.Remove,sduiRootId:os.e.RawSduiItem.Id.create(e.sduiRootId),rev:0}):(0,as.Zb)(e)?(this._cancelSDUIBufferProcessing(),this._localSDUIBuffer=[],this._localSDUIBufferChanged.next(void 0),this._sduiManager.modify((e=>(e.dispose(),this._sduiManagerFactory()))),this._sduiReset.next(void 0),o.YP):void(0,c.L0)(e))),U.oA,null!==(t=this._params.sduiEventTransformer)&&void 0!==t?t:a.yR).subscribe((e=>{this._localSDUIBuffer.push(e),this._localSDUIBufferChanged.next(void 0),this._startSDUIBufferProcessing()}))}_cancelSDUIBufferProcessing(){null!==this._sduiProcessingSub&&(this._sduiProcessingSub.unsubscribe(),this._sduiProcessingSub=null)}_startSDUIBufferProcessing(){null===this._sduiProcessingSub&&(this._sduiProcessingSub=this._enqueueSDUIProcessing())}_enqueueSDUIProcessing(){return R.timer(0).pipe(N.b((()=>{this._processBatchFromSDUIBuffer(),this._localSDUIBuffer.length>0?(this._cancelSDUIBufferProcessing(),this._startSDUIBufferProcessing()):this._sduiProcessingSub=null}))).subscribe()}_processBatchFromSDUIBuffer(){if(this._localSDUIBuffer.length>0){this._localSDUIBuffer.splice(0,100).forEach((e=>this._sduiEvents.next(e))),this._sduiManager.get().notifyAlertsChanged(),this._flush.next(void 0),this._localSDUIBufferChanged.next(void 0)}}_processAlertChanges(){return this._params.alertCollection.changes.subscribe((e=>{const t=e.reduce(((e,t)=>{var i;return(0,br.nq)(t)&&"textChange"===t.reason&&e.set("textChange",(null!==(i=e.get("textChange"))&&void 0!==i?i:[]).concat(pn.j.AlertId.from(t.alertId))),e}),new Map);e.length>0&&(this._sduiManager.get().notifyAlertsChanged(),t.size>0&&this._logger.debug("Optimistically removing alerts.",t),t.forEach(((e,t)=>this.pushRemovedAlerts([e,t]))))}))}}function cs(e){return"sduiItemAdd"!==e.kind&&"sduiItemUpdate"!==e.kind||!function(e,t=new Set(["inlineCard"])){return!(null==e||"object"!=typeof e||!("type"in e)||"string"!=typeof e.type||!t.has(e.type))}(e.sdui)}var ds=i(77066);function us(e){return e.pipe(ht.O(ds.a.empty),vi.G(),O.U((([e,t])=>ds.a.diff(e,t))))}const ms="long-form-suggestion-card",ps="long-form-lens",gs="feed-order",hs="short-form-feed-order",fs=(0,a.ls)(_r.R(((e,t)=>{var i;const n=[],r=new Map(e.updatedLongFormFeeds),s=new Set(e.longFormFeedFilteringValues),l=e=>{const t=(i=r.values(),s=e,(0,a.zG)(Array.from(i),E.DZ((e=>(0,a.zG)("assistantFeed"===e.sdui.type?o.G(e.sdui):o.YP,o.UI((e=>function(e,t){return Object.assign(Object.assign({},e),{filtering:[...e.filtering,{property:ps,value:t,condition:ar.j2.NotEqualTo}]})}(e,s))),o.UI((t=>Object.assign(Object.assign({},e),{kind:os.e.SduiEventKind.Update,sdui:t}))))))));var i,s;t.forEach((e=>r.set(e.sduiRootId,e))),n.push(...t)};if(t.kind===os.e.SduiEventKind.Add||t.kind===os.e.SduiEventKind.Update)if(wr(t.sdui))"longFormCard"===t.sdui.type?n.push(Object.assign(Object.assign({},t),{sdui:bs(t.sdui)})):"strongAlertRef"===t.sdui.type&&"longFormCard"===t.sdui.child.type&&n.push(Object.assign(Object.assign({},t),{sdui:Object.assign(Object.assign({},t.sdui),{child:bs(t.sdui.child)})}));else if("longFormCard"===t.sdui.type||"strongAlertRef"===t.sdui.type&&"longFormCard"===t.sdui.child.type){const e=null!==(i=("longFormCard"===t.sdui.type?t.sdui.feedProperties:"strongAlertRef"===t.sdui.type&&"longFormCard"===t.sdui.child.type?t.sdui.child.feedProperties:{})[ps])&&void 0!==i?i:void 0;void 0===e||s.has(e)||l(e),"longFormCard"===t.sdui.type?n.push(Object.assign(Object.assign({},t),{sdui:ys(t.sdui)})):"strongAlertRef"===t.sdui.type&&"longFormCard"===t.sdui.child.type&&n.push(Object.assign(Object.assign({},t),{sdui:Object.assign(Object.assign({},t.sdui),{child:ys(t.sdui.child)})}))}else if("assistantFeed"===t.sdui.type&&t.sdui.id===String(cn.lensAllSuggestionFeed)){const e=os.e.RawSduiItem.Id.create(cn.lensAllSuggestionFeedShortForm);n.push(t,Object.assign(Object.assign({},t),{sduiRootId:e,sdui:xs(e,t.sdui)}))}else"assistantFeed"===t.sdui.type&&(0,a.zG)(function(e,t){var i;const n=e.filtering.find(vs);if(n){const r=Array.from(t).filter((e=>e!==n.value));return o.G({sdui:Object.assign(Object.assign({},e),{filtering:[...e.filtering.filter((e=>!vs(e))),...r.map((e=>({property:ps,value:e,condition:ar.j2.NotEqualTo})))]}),filteringValue:null!==(i=null==n?void 0:n.value)&&void 0!==i?i:null})}return o.YP}(t.sdui,e.longFormFeedFilteringValues),o.UI((({sdui:e,filteringValue:i})=>{const o=!s.has(i);s.add(i),o&&l(i),r.set(t.sduiRootId,Object.assign(Object.assign({},t),{sdui:e})),n.push(Object.assign(Object.assign({},t),{sdui:e}))})));else t.sduiRootId===String(cn.lensAllSuggestionFeed)?n.push(t,Object.assign(Object.assign({},t),{sduiRootId:os.e.RawSduiItem.Id.create(cn.lensAllSuggestionFeedShortForm)})):t.kind===os.e.SduiEventKind.Remove?r.delete(t.sduiRootId):(0,c.L0)(t);return{events:n.length>0?n:[t],longFormFeedFilteringValues:s,updatedLongFormFeeds:r}}),{events:[],longFormFeedFilteringValues:new Set(E.w6(0,6)),updatedLongFormFeeds:new Map}),zr.b((({events:e})=>Nt.D(e))));function vs(e){return e.property===ps&&e.condition===ar.j2.EqualTo}const bs=e=>Object.assign(Object.assign({},e),{feedProperties:Object.assign(Object.assign({},e.feedProperties),{[ms]:1,[gs]:Number.MIN_SAFE_INTEGER,[hs]:Number.MAX_SAFE_INTEGER})}),ys=e=>Object.assign(Object.assign({},e),{feedProperties:Object.assign(Object.assign({},e.feedProperties),{[hs]:e.feedProperties[gs]})});function xs(e,t){return Object.assign(Object.assign({},t),{id:e,ordering:[{orderBy:hs,direction:ar.di.Asc},...t.ordering.filter((e=>e.orderBy!==gs))]})}class ks{constructor(e){this._subs=new u.w0,this._state=d.h.create({firstCheckingFinished:!1,sduiEventsSettledOnce:!1}),this._firstCheckingFinishedAndSduiEventsSettledTimedOut=d.h.create(!1),this.firstCheckingFinishedAndSduiEventsSettled=this._state.view((e=>e.firstCheckingFinished&&e.sduiEventsSettledOnce)),this.firstCheckingFinishedAndSduiEventsSettledTimedOut=this._firstCheckingFinishedAndSduiEventsSettledTimedOut.view(),this._subs.add(e.sduiChangesSettled.pipe(h.h(a.yR)).subscribe((()=>this._state.lens("sduiEventsSettledOnce").set(!0)))),this._subs.add(e.lastFinishedMessage.subscribe((()=>this._state.lens("firstCheckingFinished").set(!0))));const t=R.timer(1e4).subscribe((()=>this._firstCheckingFinishedAndSduiEventsSettledTimedOut.set(!0)));this._subs.add(t),this._subs.add(this.firstCheckingFinishedAndSduiEventsSettled.pipe(h.h(a.yR)).subscribe((()=>t.unsubscribe())))}dispose(){this._subs.unsubscribe()}}const Ss={[cn.lensAllSuggestionFeed]:"all-suggestions",[cn.lensAllSuggestionFeedShortForm]:"all-suggestions",[cn.lensCorrectnessFeed]:"correctness",[cn.lensClarityFeed]:"clarity",[cn.lensDeliveryFeed]:"delivery",[cn.lensEngagementFeed]:"engagement",[cn.lensStyleGuideFeed]:"style-guide",[cn.plagiarismFeed]:"plagiarism",[cn.writingExpertFeed]:"writing-expert",[cn.aiStudioFeed]:"ai-studio"};function Cs(e){return(0,a.zG)(hn(e.id),o.UI((e=>Ss[e])))}class Es{constructor(e){this._params=e,this._feedForm=d.h.create(this._params.supportedForms[0]),this.requestedSupportedForms=this._params.supportedForms,this.state=d.h.combine(this._feedForm,this._params.feedManager.feeds,((e,t)=>({feedForm:e,supportedForms:(0,a.zG)(new Set(this._params.supportedForms),w.hX((e=>t.has(pn.j.Item.Id.from(fn[e])))))})))}onToggleFeedForm(e){this._feedForm.set(e);const t=this._params.feedManager.feed.get();this._params.tracking.feedFormChanged(e,(0,a.zG)(t,o.tS(Cs),o.WG),(0,a.zG)(t,o.UI((e=>kn(e.collection))),o.WG));const i=(0,a.zG)(t,o.tS((e=>Cn(e.collection))));this._params.feedManager.replaceFeed("longForm"===e?cn.lensAllSuggestionFeed:cn.lensAllSuggestionFeedShortForm,(0,a.zG)(i,o.g_((()=>{}),(e=>e.id))),(0,a.zG)(i,o.tS((e=>tr.ab.getAlertIds(e.content))),o.g_((()=>{}),(e=>new Set(e)))))}}class _s{constructor(e){this._params=e,this._subs=new u.w0,this._outcomeScores=d.h.create(o.YP),this._styleGuideEnabled=d.h.create(!1),this._availableFeeds=d.h.create(new Map),this.lenses=d.h.combine(this._outcomeScores,this._availableFeeds,this._styleGuideEnabled,((e,t,i)=>(0,a.zG)([cn.lensAllSuggestionFeed,cn.lensCorrectnessFeed,cn.lensClarityFeed,cn.lensEngagementFeed,cn.lensDeliveryFeed,cn.lensStyleGuideFeed],E.hX((e=>t.has(pn.j.Item.Id.from(e)))),E.hX((e=>!!i||e!==cn.lensStyleGuideFeed)),E.UI((t=>({lensId:t,label:gn[t],percent:(0,a.zG)(e,o.g_((()=>0),(e=>e[t])))}))),(e=>new Map(e.map((e=>[e.lensId,e]))))))),this._subs.add(this._params.availableFeeds.subscribe(g.wW(this._availableFeeds))),this._subs.add(this._params.userInstitutionInfo.pipe(O.U(o.Gg((e=>!0===e.styleGuideEnabled)))).subscribe(g.wW(this._styleGuideEnabled))),this._subs.add(qt.a([this._params.lastFinishedMessage,this._availableFeeds]).subscribe((([{outcomeScores:e},t])=>{const i=function(e,t){return i=>{var n,r;const s=null===(n=e.get(pn.j.Item.Id.from(i)))||void 0===n?void 0:n.alertCount,a=function(e,t){switch(t){case cn.lensAllSuggestionFeed:case cn.lensAllSuggestionFeedShortForm:return null==e?void 0:e.GeneralScore;case cn.lensClarityFeed:return null==e?void 0:e.Clarity;case cn.lensCorrectnessFeed:return null==e?void 0:e.Correctness;case cn.lensDeliveryFeed:return null==e?void 0:e.Tone;case cn.lensEngagementFeed:return null==e?void 0:e.Engagement;case cn.lensStyleGuideFeed:return null==e?void 0:e["Style guide"];case cn.plagiarismFeed:case cn.writingExpertFeed:case cn.aiStudioFeed:return;default:(0,c.L0)(t)}}(t,i);return 0===s?1:null!==(l=a,r=o.WG(Zn(l)))&&void 0!==r?r:0;var l}}(t,e);this._outcomeScores.set(o.G({[cn.lensAllSuggestionFeed]:i(cn.lensAllSuggestionFeed),[cn.lensClarityFeed]:i(cn.lensClarityFeed),[cn.lensCorrectnessFeed]:i(cn.lensCorrectnessFeed),[cn.lensEngagementFeed]:i(cn.lensEngagementFeed),[cn.lensDeliveryFeed]:i(cn.lensDeliveryFeed),[cn.lensStyleGuideFeed]:i(cn.lensStyleGuideFeed)}))})))}onToggleLens(e){const t=(0,a.zG)(this._params.feedManager.feed.get(),o.UI((e=>e.id)),o.Gg((t=>t===e)));this._params.tracking.feedLensButtonClicked(Ss[e]);const i=(0,a.zG)(this._params.feedManager.feed.get(),o.tS((e=>Cn(e.collection))),o.g_((()=>{}),(e=>e.id)));t?this._params.feedManager.replaceFeed(cn.lensAllSuggestionFeed,i):this._params.feedManager.replaceFeed(e,i)}dispose(){this._subs.unsubscribe()}}var ws;function Is(e){return"assistantCard"===e.content.type?o.G(e.content):"strongAlertRef"===e.content.type&&"assistantCard"===e.content.child.type?o.G(e.content.child):"strongAlertRef"===e.content.type&&"longFormCard"===e.content.child.type&&"assistantCard"===e.content.child.fullContent.type?o.G(e.content.child.fullContent):"longFormCard"===e.content.type&&"assistantCard"===e.content.fullContent.type?o.G(e.content.fullContent):o.YP}!function(e){const t=[];e.notifyFeedUnmount=function(){t.forEach((e=>e()))},e.registerFeedUnmountHandler=function(e){return t.push(e),e},e.unregisterFeedUnmountHandler=function(e){const i=t.findIndex((t=>t===e));i>=0&&t.splice(i,1)}}(ws||(ws={}));class As{constructor(e){this._params=e,this._subs=new u.w0,this._focusedItem=d.h.create(o.YP),this._feedReset=d.h.create(!1),this._feedItemRendered=new l.x,this._isWaitingForAlertsToBeApplied=d.h.create(!1),this.isAllSuggestionsFeedEnabled=d.h.create(this._params.isAllSuggestionsFeedEnabled),this.feed=this._params.feedManager.feed.view(),this.feedReset=this._feedReset.view(),this.isWaitingForAlertsToBeApplied=this._isWaitingForAlertsToBeApplied.view(),this._subs.add(this._params.sduiReset.pipe(m.w((()=>R.timer(5e3).pipe(pt.h(!1),ht.O(!0))))).subscribe(g.wW(this._feedReset))),this._subs.add(this._trackFeedShows().subscribe()),this._subs.add(this._params.feedActionService.processedActionStatus.pipe(h.h((({action:e})=>"applyAlerts"===e.type)),_r.R(((e,{status:t,itemId:i})=>(0,a.zG)(e,"pending"===t?w.$T(pn.j.Item.Id.eq)(i):w.Od(pn.j.Item.Id.eq)(i))),new Set),O.U((e=>e.size>0))).subscribe(g.wW(this._isWaitingForAlertsToBeApplied)))}_interactionReady(e){const t=this._params.feedFormViewModel.state.view("feedForm").get(),i=(0,a.zG)(this.feed.get(),o.tS(Cs),o.pF((()=>"unknown")));this._params.lifecycleViewModel.onInteractionReady({kind:"revision",feedForm:t,feedName:i,success:e})}processActions(e,t,i,n){this._params.feedActionService.processActions(e,t.id,i.alertRefs,n)}_onFocusedItemMount(e){(0,a.zG)(this._focusedItem.get(),o.hX((t=>t.id!==e.id)),o.tS((e=>(0,a.zG)(Is(e),o.UI((t=>({actions:t.onBlur,item:e,sourceId:t.id})))))),o.UI((({actions:e,item:t,sourceId:i})=>this._params.feedActionService.processActions(e,t.id,void 0,i)))),(0,a.zG)(Is(e),o.UI((t=>({actions:t.onFocus,item:e,sourceId:t.id}))),o.UI((({actions:e,item:t,sourceId:i})=>this._params.feedActionService.processActions(e,t.id,void 0,i)))),this._params.onFocusedSDUIItemMount(e),this._focusedItem.set(o.G(e)),"shortForm"===this._params.feedFormViewModel.state.view("feedForm").get()&&this._interactionReady(!0)}onItemMount(e,t){e&&this._onFocusedItemMount(t),"longForm"===this._params.feedFormViewModel.state.view("feedForm").get()&&this._interactionReady(!0),this._feedItemRendered.next(void 0)}onFeedMount(){const e=ws.registerFeedUnmountHandler((()=>{ws.unregisterFeedUnmountHandler(e),this._params.alertVisibilityManager.notifyFeedUnmount(),(0,a.zG)(this._focusedItem.get(),o.tS((e=>(0,a.zG)(Is(e),o.UI((t=>({actions:t.onBlur,item:e,sourceId:t.id})))))),o.UI((({actions:e,item:t,sourceId:i})=>this._params.feedActionService.processActions(e,t.id,void 0,i))))}));this._params.alertVisibilityManager.notifyFeedMount()}onSuccessStateMount(){(0,a.zG)(this.feed.get(),o.tS(Cs),o.UI((e=>this._params.tracking.feedSuccessStateShown(e,"applied")))),this._interactionReady(!0),this._feedItemRendered.next(void 0)}onEmptyStateMount(e){(0,a.zG)(this.feed.get(),o.tS(Cs),o.UI((e=>this._params.tracking.feedSuccessStateShown(e,"nothingToCheck")))),this._interactionReady(!e),e||this._feedItemRendered.next(void 0)}dispose(){this._subs.unsubscribe()}_trackFeedShows(){return this.feed.pipe(O.U(o.tS(Cs)),R.skipBy(o.Eh(C.yv)),U.oA,m.w((e=>this._feedItemRendered.pipe(f.q(1),pt.h(e))))).pipe(N.b((e=>this._params.tracking.feedLensShown(e))))}}class Fs{constructor(e){this._params=e,this._subs=new u.w0,this._showPartialPageModeNotification=this._params.showPartialPageModeNotification,this._pageRange=d.h.create(o.YP),this._partialPageModeNotificationShown=!1,this.pageRange=this._pageRange.view(),this._subs.add(this._params.partialPageRange.pipe(O.U(o.G)).subscribe(g.wW(this._pageRange)))}partialPageRangeHeaderMount(){const e=(0,a.zG)(this._pageRange.get(),o.hX((()=>this._showPartialPageModeNotification&&!this._partialPageModeNotificationShown)),o.g_((()=>L.E),(e=>this._params.notificationService.notify(Se.create("warning",`Grammarly shows suggestions for ${e.endPage-e.startPage+1} document pages at a time. Scroll into the page you want to review to see suggestions for that section.`,"partialPageMode",!0)))));this._subs.add(e.subscribe((()=>{this._params.tracking.partialPageModeNotificationDismissed(),this._partialPageModeNotificationShown=!0})))}dispose(){this._subs.unsubscribe()}}class Ps{constructor(e){this._params=e,this._subs=new u.w0,this._state=d.h.create({allSuggestionsCount:0,activeFeedSuggestionCount:0,allSuggestionsEmpty:!0,someSuggestionsAddressed:!1}),this.state=this._state.view();const t=d.h.combine(this._params.isAllSuggestionsFeedEnabled,this._params.feedManagerProxy.allSuggestionsFeedId,((e,t)=>e?t:o.YP));this._subs.add(t.pipe(m.w(o.g_((()=>p.of(0)),(e=>this._params.feedManagerProxy.feeds.view((t=>{var i,n;return null!==(n=null===(i=t.get(e))||void 0===i?void 0:i.itemCount)&&void 0!==n?n:0})))))).subscribe(g.wW(this._state.lens("allSuggestionsCount")))),this._subs.add(d.h.combine(this._params.isAllSuggestionsFeedEnabled,this._params.feedManagerProxy.allSuggestionsFeedId,this._params.feedManagerProxy.feed,((e,t,i)=>(0,a.zG)(i,o.hX((i=>!(i.id===o.WG(t)&&!e)))))).view(o.g_((()=>0),(e=>kn(e.collection)))).subscribe(g.wW(this._state.lens("activeFeedSuggestionCount")))),this._subs.add(t.pipe(m.w(o.g_((()=>p.of(!0)),(e=>this._params.feedManagerProxy.feeds.view((t=>{var i,n;return 0===(null!==(n=null===(i=t.get(e))||void 0===i?void 0:i.itemCount)&&void 0!==n?n:0)}))))),A.x()).subscribe((e=>{this._state.lens("allSuggestionsEmpty").set(e),e||this._state.lens("someSuggestionsAddressed").set(!1)})))}onSuggestionAddressed(){this._state.lens("someSuggestionsAddressed").set(!0)}getFeedSuggestionCount(e){return this._params.feedManagerProxy.feeds.view((t=>(0,a.zG)(o.ij(t.get(pn.j.Item.Id.from(e))),o.g_((()=>0),(e=>e.itemCount)))))}dispose(){this._subs.unsubscribe()}}function Ms(e){var t,i,n,r;const s=new u.w0,p=e.logService.getLogger(Ms.name),g=new l.x,v=null!==(t=e.sduiService.supportedForms)&&void 0!==t?t:["shortForm","longForm"],b=new l.x,y=new l.x,x=new yr({alertCollectionChanges:y,logService:e.logService}),k=new ls({sduiItemCollectionChanges:b,alertCollection:x,sduiEventTransformer:fs,logService:e.logService}),S=new l.x;s.add(k.state.pipe(us).subscribe(S));const C=new er({capiService:e.capiService,logService:e.logService,aiDetectorEnabled:void 0===e.isAiDetectorEnabled?d.h.create(o.YP):e.isAiDetectorEnabled,experimentService:e.experimentService}),E=new or({capiService:e.capiService}),_=new Zt({capiService:e.capiService}),w=new Tr({autofocusNextLongFormCardOnAlertRefEmpty:e.sduiService.autofocusNextLongFormCardOnAlertRefEmpty,autofocusNextLongFormCardOnApplyOrDismiss:e.sduiService.autofocusNextLongFormCardOnApplyOrDismiss}),I=new ts({sduiItemsCollectionDiff:S,initialForm:v[0],autofocusNextCard:e=>e===cn.lensAllSuggestionFeedShortForm||w.autofocusNextLongFormCardOnApplyOrDismiss.get(),logService:e.logService}),A=new Or({activeFeed:I.feed,checkingFinishedOnce:e.capiService.relevantInboundCAPIMessages.pipe(h.h(te.JS.Finished.is)),sduiChangesSettled:k.sduiChangesSettled,selectedAlertId:e.alertService.selectedAlertId,alertCollection:x,isShortFormFeed:e=>e.id===cn.lensAllSuggestionFeedShortForm,logService:e.logService});s.add(A.focusCard.pipe(dn.Q(un.E)).subscribe((e=>{switch(e.kind){case"focusFirstCard":return I.focusFirst();case"focusCard":return I.focusCard(e.cardId);default:(0,c.L0)(e)}})));const F=new Es({supportedForms:v,feedManager:I,tracking:e.trackingService}),P=new Lr({feedManager:I,sduiManagerProxy:k,capiService:e.capiService,alertService:e.alertService,plagiarismService:C,writingExpertService:E,aiStudioService:_,textEditorService:e.textEditorService,lifecycleService:e.lifecycleService,uphookService:e.uphookService,autofocusSettingsService:w,feedForm:F.state.view("feedForm"),logService:e.logService,metricService:e.metricService,setEmphasizedAlerts:e=>g.next(new Set(e)),experimentService:e.experimentService}),M=null!==(i=e.defaultFeed)&&void 0!==i?i:I.allSuggestionsFeedId.pipe(U.oA,f.q(1));s.add(M.subscribe((e=>{p.debug("Pushing default feed.",{feedId:e}),I.pushFeed(e)})));const T=new Ir({focusedItem:I.feed.pipe(O.U(o.tS((e=>Cn(e.collection))))),activeFeedChanges:I.activeFeedChanges,resetEmphasizedAlerts:g,alertService:e.alertService,logService:e.logService}),R=new Cr({activeFeed:I.feed,alertService:e.alertService,sduiActions:P.processedActionStatus.pipe(O.U((e=>e.action))),logService:e.logService}),B=new is({feedManager:I,routingViewModel:e.routingViewModel,uphookService:e.uphookService,feedFormViewModel:F}),G=e.deepLinkManager.registerDeepLinkHandler("premiumSuggestionsUphook",B),D=new _s({feedManager:I,availableFeeds:I.feeds,lastFinishedMessage:e.capiService.relevantInboundCAPIMessages.pipe(h.h(te.JS.Finished.is)),userInstitutionInfo:e.userViewModel.institutionInfo,tracking:e.trackingService}),j=new As({isAllSuggestionsFeedEnabled:e.isAllSuggestionsFeedEnabled,feedManager:I,feedActionService:P,alertVisibilityManager:T,onFocusedSDUIItemMount:e=>B.onFocusedSDUIItemMount(e),feedFormViewModel:F,sduiReset:k.sduiReset,tracking:e.trackingService,lifecycleViewModel:e.lifecycleViewModel,experimentService:e.experimentService,logService:e.logService,userViewModel:e.userViewModel}),z=new ks({lastFinishedMessage:e.capiService.relevantInboundCAPIMessages.pipe(h.h(te.JS.Finished.is)),sduiChangesSettled:k.sduiChangesSettled}),V=new Fs({showPartialPageModeNotification:null!==(r=null===(n=e.partialPageModeSettings)||void 0===n?void 0:n.showPartialPageModeNotification)&&void 0!==r&&r,partialPageRange:(0,a.zG)(o.ij(e.textEditorService.partialPageRange),o.g_((()=>L.E),Ee.Dx)),tracking:e.trackingService,notificationService:e.notificationService}),K=new Ps({isAllSuggestionsFeedEnabled:j.isAllSuggestionsFeedEnabled,feedManagerProxy:I}),Z=(0,Ee.Dx)(e.textEditorService.textUpdated),H=e.capiService.relevantInboundCAPIMessages.pipe(h.h(te.JS.AsyncCheckFinished.is)),$=new l.x,W=new sr({uphookService:e.uphookService,feedManager:I,sduiItemsCollectionDiff:S,feedActionService:P,routingViewModel:e.routingViewModel,userViewModel:e.userViewModel,assistantUIActions:e.assistantUIActions,textUpdated:Z,lastAsyncCheckFinishedMessage:H,isPlagiarismEnabled:e.isPlagiarismEnabled,plagiarismChecksEnabled:C.plagiarismChecksEnabled,aiDetectorEnabled:C.aiDetectorEnabled,trackingService:e.trackingService,plagiarismDeepLinkRequest:$}),Y=new Xn({activeView:e.routingViewModel.activeView.view("kind"),plagiarismAvailable:W.plagiarismAction.view(o.pC),handlePlagiarismDeepLinkRequest:()=>$.next(void 0)}),q=e.deepLinkManager.registerDeepLinkHandler("plagiarismView",Y),X=new hr({feedManager:I,feedActionService:P,sduiItemsCollectionDiff:S,routingViewModel:e.routingViewModel,userViewModel:e.userViewModel,assistantUIActions:e.assistantUIActions,lastAsyncCheckFinishedMessage:H,isWritingExpertEnabled:e.isWritingExpertEnabled,writingExpertChecksEnabled:E.writingExpertChecksEnabled,capiService:e.capiService,logService:e.logService}),Q=new Vn({isAiStudioEnabled:e.isAiStudioEnabled,feedManager:I,feedActionService:P,sduiItemsCollectionDiff:S,routingViewModel:e.routingViewModel,userViewModel:e.userViewModel,assistantUIActions:e.assistantUIActions,capiService:e.capiService,logService:e.logService,experimentService:e.experimentService}),J=new Yn({featureOptions:e.performanceScoreOptions,lastFinishedMessage:e.capiService.relevantInboundCAPIMessages.pipe(h.h(te.JS.Finished.is)),feeds:I.feeds,tracking:e.trackingService,logService:e.logService}),ee=new Kn({performanceScoreViewAvailable:J.performanceScore.view(o.pC),routingViewModel:e.routingViewModel,assistantUIActions:e.assistantUIActions}),ie=e.deepLinkManager.registerDeepLinkHandler("performanceScoreView",ee),ne=new l.x;return s.add(ne.pipe(f.q(1),m.w((()=>mn.T((0,Ee.Dx)(e.alertService.alertCollectionChanges).pipe(N.b((e=>y.next(e)))),(0,Ee.Dx)(e.sduiService.sduiItemCollectionChanges).pipe(N.b((e=>b.next(e)))))))).subscribe()),{start:()=>ne.next(void 0),viewModels:{feed:j,feedLens:D,feedForm:F,checkingState:z,suggestionCount:K,plagiarism:W,writingExpert:X,aiStudio:Q,performanceScore:J,shortFormFeedMode:e.shortFormFeedMode,pageRange:V},dispose:()=>{s.unsubscribe(),x.dispose(),w.dispose(),A.dispose(),ie(),G(),q(),ee.dispose(),B.dispose(),J.dispose(),K.dispose(),W.dispose(),X.dispose(),Q.dispose(),C.dispose(),D.dispose(),z.dispose(),T.dispose(),R.dispose(),P.dispose(),I.dispose(),k.dispose(),V.dispose()}}}class Os{constructor(e){this._params=e,this._subs=new u.w0,this._subs.add(this._params.assistantUIActions.subscribe((e=>{if(e.kind===xt.i.Kind.settingsButtonClick)return"withView"===this._params.options.kind?this._params.routingViewModel.push({kind:"settings"}):this._params.options.onClick(e.buttonRect)})))}getView(){return"withView"===this._params.options.kind?o.G(this._params.options.getView()):o.YP}dispose(){this._subs.unsubscribe()}}function Ts(e,t){return t in e&&!!e[t]&&"object"==typeof e[t]}var Rs,Bs=i(80891);function Us(e,t,i){if(!function(e){try{return new URL(e),!0}catch(e){return!1}}(e))return e;const n=new URL(e),r=[];return t&&r.push(Gs("defaultFields",t)),i&&r.push(Gs("startupOptions",i)),r.length&&(n.hash=r.join("&")),n.toString()}function Gs(e,t){return`${e}=${encodeURIComponent(JSON.stringify(t))}`}!function(e){let t;e.create=function(e,i,n,r,s,o,a,l){return{id:t.create(e),iconUrl:i,displayName:n,srcUrl:r,tags:s,dateLastAccessed:o,label:a,skillParams:l}},e.createUrlWithHashParams=function(e){var t,i;return Us(e.srcUrl,null===(t=e.skillParams)||void 0===t?void 0:t.defaultFields,null===(i=e.skillParams)||void 0===i?void 0:i.startupOptions)},function(e){e.create=function(e){return e}}(t=e.Id||(e.Id={}))}(Rs||(Rs={}));const Ns=new Bs.KS("ext_translation_discoverability",["control","test"]),Ls=new Bs.KS("recent_app_actions",["control","test"]);class Ds{constructor(e){this._params=e,this._subs=new u.w0,this._logger=this._params.logService.getLogger(Ds.name),this._state=d.h.create(o.YP),this.state=this._state.view(),this.translationDiscoverabilityTreatmentEnabled=d.h.create(!1),this.recentAppActionsTreatmentEnabled=d.h.create(!1),this._params.skillService&&this._subs.add(this._params.skillService.skillRequests.subscribe({next:e=>{e.close?(this._onSkillClosed(),this._state.set(o.YP)):e.size&&this._state.modify(o.UI((t=>Object.assign(Object.assign({},t),{size:e.size}))))}})),(0,_e.t)("peekTranslationDiscoverabilityTreatment",(0,a.zG)(this._params.experimentService?this._params.experimentService.peekTreatment(Ns):I.F2(null),I.Vn((e=>new Error(e)))),this._logger,(e=>{this.translationDiscoverabilityTreatmentEnabled.set("test"===e)})),(0,_e.t)("peekRecentAppActionsTreatment",(0,a.zG)(this._params.experimentService?this._params.experimentService.peekTreatment(Ls):I.F2(null),I.Vn((e=>new Error(e)))),this._logger,(e=>{this.recentAppActionsTreatmentEnabled.set("test"===e)})),this._subs.add(this._params.assistantUIActions.subscribe((e=>this._handleUIAction(e))))}get recentAppActionsEnabled(){return d.h.combine(this._params.isTranslationAvailable,this.recentAppActionsTreatmentEnabled,((e,t)=>!e&&t))}dispose(){this._subs.unsubscribe()}_handleUIAction(e){switch(e.kind){case xt.i.Kind.actionBrickClick:if("regularAction"===e.action.kind&&J.isSkillAction(e.action.action)){const t=e.action.action.skill;this.openSkill(t)}break;case xt.i.Kind.mount:e.name===Xt.e.skill&&(0,_e.t)("initSkill",(0,a.zG)((0,a.zG)(this._state.get(),I.Yo((()=>new Error("Cannot init Skill. No Skill state available.")))),I.tS((t=>this._params.skillService?(0,a.zG)(this._params.skillService.initSkill(t.skill,e.element),I.UI((e=>Object.assign(Object.assign({},t),{size:e})))):I.t$(new Error("Cannot init Skill. No `SkillService` available."))))),this._logger,(e=>this._state.set(o.G(Object.assign(Object.assign({},e),{status:"ready"})))),(e=>{this._state.modify(o.UI((e=>Object.assign(Object.assign({},e),{status:"error"})))),this._params.logService.logEvent(function(e){return{kind:"error",source:"skill",name:"initSkillFailed",data:e}}({skillId:(0,a.zG)(this._state.get(),o.UI((e=>e.skill.id)),o.WG),reason:(0,Ce.N)(e).message}))}));break;case xt.i.Kind.unmount:if(e.name===Xt.e.skill&&!this._params.routingViewModel.has({kind:"skill"}).get()){const e=this._state.get();(0,_e.t)("terminateSkill",(0,a.zG)(e,I.Yo((()=>new Error("Cannot terminate Skill. No Skill state available."))),I.tS((e=>this._params.skillService?(0,a.zG)(this._params.skillService.terminateSkill(e.skill),I.UI((()=>e))):I.t$(new Error("Cannot terminate Skill. No `SkillService` available."))))),this._logger,(()=>this._state.set(o.YP)),(t=>{this._params.logService.logEvent(function(e){return{kind:"error",source:"skill",name:"terminateSkillFailed",data:e}}({skillId:(0,a.zG)(this._state.get(),o.UI((e=>e.skill.id)),o.WG),reason:(0,Ce.N)(t).message})),this._state.get()===e&&this._state.set(o.YP)}))}}}_onSkillOpened(){this._params.routingViewModel.push({kind:"skill"})}_onSkillClosed(){"skill"===this._params.routingViewModel.activeView.get().kind&&this._params.routingViewModel.pop()}openSkill(e,t){const i=Rs.create(e.id,e.iconUrl,e.displayName,e.srcUrl,e.tags,e.dateLastAccessed,e.label,t);"skill"!==this._params.routingViewModel.activeView.get().kind&&(this._onSkillOpened(),this._state.set(o.G({skill:i,status:"loading",size:{width:416,height:245}})))}}var js=i(59833);class zs{constructor(e){this._params=e,this._subscriptions=new M.w.Keeper,this._logger=this._params.logService.getLogger(zs.name),this._state=d.h.create(o.YP),this.state=this._state.view(),this.getToneAlertsSummary=()=>this._params.externalService.getToneAlertsSummary(),this._subscriptions.push(this._params.capiService.relevantInboundCAPIMessages.pipe(h.h(te.JS.TonesResult.is)).subscribe((e=>this._handleTonesResultMessage(e))))}submitToneFeedback(e,t){const i=t===oi.positive?j.y_.EMOTION_LIKE:t===oi.negative?j.y_.EMOTION_DISLIKE:(0,c.L0)(t);(0,_e.t)("submitToneFeedback",this._params.capiService.feedback({emotion:e,type:i,subtype:j.e3.Inline}),this._logger)}_handleTonesResultMessage(e){const t=!0===e.brandTonesEnabled;this._state.set(o.G({tones:(0,a.zG)(e.emotions,(0,js.UI)((({name:e,emojiId:t,confidence:i,brandToneLabel:n,brandToneDescription:r})=>({name:e,emojiId:t,confidence:i,brandToneInfo:void 0!==n?o.G({status:Ks(n),description:o.ij(r)}):o.YP}))),Vs,E.DY(t?di:li)),hidden:!0===e.hidden,brandTonesEnabled:t,institutionLogo:o.ij(e.institutionLogo)}))}dispose(){this._subscriptions.dispose()}}function Vs(e){const t=e.reduce(((e,t)=>e+t.confidence),0);return e.map((e=>{let i;return i=e.confidence<.25?ri.Slight:e.confidence<.5?ri.Moderate:e.confidence/t>.5?ri.VeryStrong:ri.Strong,Object.assign(Object.assign({},e),{prevalence:i})}))}function Ks(e){switch(e){case"on":return si.On;case"off":return si.Off;default:return(0,c.L0)(e)}}class Zs{constructor(e){this._params=e,this._subs=new u.w0,this._logger=this._params.logService.getLogger(Zs.name),this._improvedPlagiarismAiUphookTreatment=d.h.create(null),this._uphookHubTreatment=d.h.create(null),this._uphookHubActiveSlots=["plagiarismView","emogenieReport"],this._inProductDiscountTreatment=d.h.create(null),this.isEligibleForFreeTrial=d.h.create(!1),this.isEligibleForInProductDiscountSpecialOffer=d.h.create(!1),this.isEligibleForInProductDiscount=d.h.combine(this._params.userViewModel.isPremium,this._inProductDiscountTreatment,this.isEligibleForInProductDiscountSpecialOffer,((e,t,i)=>!e&&"enabled"===t&&i)),this.uphookConfigurationPerSlot=d.h.create(o.YP),this.hasImprovedUphookTestTreatment=this._improvedPlagiarismAiUphookTreatment.view((e=>"test"===e)),this.hasUphookHubEnabled=this._uphookHubTreatment.view((e=>"test"===e)),this.isEligibleForUphookHub=this._params.userViewModel.isPremium.view((e=>!e)),(0,_e.t)("peekCheetahUphookHubTreatment",(0,a.zG)(this._params.experimentService?this._params.experimentService.peekTreatment(Oe.V.CheetahUphookHub):I.F2(!1),I.Vn((e=>new Error(e)))),this._logger,(e=>this._uphookHubTreatment.set(e))),(0,_e.t)("peekImprovedPlagiarismAiUphook",(0,a.zG)(this._params.experimentService?this._params.experimentService.peekTreatment(Oe.V.ImprovedPlagiarismAiUphook):I.F2(!1),I.Vn((e=>new Error(e)))),this._logger,(e=>this._improvedPlagiarismAiUphookTreatment.set(e))),(0,_e.t)("peekInProductDiscount",(0,a.zG)(this._params.experimentService&&!this._params.userViewModel.isPremium.get()?this._params.experimentService.peekTreatment(Oe.V.InProductDiscount):I.F2(null),I.Vn((e=>new Error(e)))),this._logger,(e=>this._inProductDiscountTreatment.set(e))),void 0!==this._params.uphookService.isEligibleForFreeTrial&&this._subs.add((0,Ee.Dx)(this._params.uphookService.isEligibleForFreeTrial).subscribe((e=>{this.isEligibleForFreeTrial.set(e)}))),void 0!==this._params.uphookService.isEligibleForInProductDiscount&&this._subs.add((0,Ee.Dx)(this._params.uphookService.isEligibleForInProductDiscount).subscribe((e=>{this.isEligibleForInProductDiscountSpecialOffer.set(e)}))),this.isEligibleForUphookHub.get()&&this._subs.add(this._uphookHubTreatment.subscribe((e=>{"test"!==e&&"control"!==e||this.getUphookConfiguration(this._uphookHubActiveSlots).then((e=>{this.uphookConfigurationPerSlot.set(o.G(e))}))})))}getUphookConfiguration(e){return Ie(this._params.uphookService.getUphookConfiguration(e)).then((e=>{if(!e)throw new Error("Uphook configuration is undefined");return e}))}_logTreatment(e,t,i){(0,_e.t)(e,(0,a.zG)(this._params.experimentService?this._params.experimentService.logTreatment(i,t):I.t$("No experiment service"),I.Vn((e=>new Error(e)))),this._logger)}onUphookShow(e,t,i){const n=this._improvedPlagiarismAiUphookTreatment.get();"plagiarismView"===t&&null!==n&&this._logTreatment("logImprovedPlagiarismAiUphookTreatment",n,Oe.V.ImprovedPlagiarismAiUphook);const r=this._uphookHubTreatment.get();this._uphookHubActiveSlots.includes(t)&&null!==r&&this._logTreatment("logCheetahUphookHubTreatment",r,Oe.V.CheetahUphookHub);const s=this._inProductDiscountTreatment.get();this.isEligibleForInProductDiscountSpecialOffer.get()&&null!==s&&this._logTreatment("logInProductDiscountTreatment",s,Oe.V.InProductDiscount),Ie(this._params.uphookService.trackUphookShown({name:e,slot:t,variant:this._getUphookVariant()},i)).catch((t=>{this._params.logService.logEvent((0,ae.ix)({uphook:e,reason:(0,Ce.N)(t).message}))}))}onUphookClick(e,t,i){Ie(this._params.uphookService.trackUphookClicked({name:e,slot:t,variant:this._getUphookVariant()},i)).catch((t=>{this._params.logService.logEvent((0,ae.ol)({uphook:e,reason:(0,Ce.N)(t).message}))})),this.onUphookExecute(e,t,this._uphookHubActiveSlots.includes(t)&&this.hasUphookHubEnabled.get()?i:o.YP)}onUphookExecute(e,t,i){Ie(this._params.uphookService.executeUphook({name:e,slot:t,variant:this._getUphookVariant()},i)).catch((t=>{this._params.logService.logEvent((0,ae.Nm)({uphook:e,reason:(0,Ce.N)(t).message}))}))}onUphookDismiss(e,t,i){Ie(this._params.uphookService.trackUphookDismissed({name:e,slot:t,variant:this._getUphookVariant()},i)).catch((t=>{this._params.logService.logEvent((0,ae.xg)({uphook:e,reason:(0,Ce.N)(t).message}))}))}_getUphookVariant(){return this.isEligibleForFreeTrial.get()?"premiumTrial":this.isEligibleForInProductDiscount.get()?"discountPro":"pro"}dispose(){this._subs.unsubscribe()}}var Hs,$s,Ws=i(65486);function Ys(e){return{source:"userSurvey",kind:"error",name:"submitSurveyFailed",data:e}}!function(e){let t;!function(e){let t;!function(e){e.Rating="rating",e.Feedback="feedback",e.Completed="completed",e.Closed="closed"}(t=e.Type||(e.Type={})),e.isOpen=e=>e!==t.Closed,e.toCAPIStage=e=>{switch(e){case t.Rating:return Ws.v0.Survey.Data.OpenAnswerScoreSurvey.scoreStage;case t.Feedback:case t.Closed:case t.Completed:return Ws.v0.Survey.Data.OpenAnswerScoreSurvey.submitStage;default:(0,c.L0)(e)}}}(t=e.Stage||(e.Stage={}))}(Hs||(Hs={}));class qs{constructor(e){this._params=e,this._subs=new M.w.Keeper,this._logger=this._params.logService.getLogger(qs.name),this._activeSurvey=d.h.create(o.YP),this.activeSurvey=this._activeSurvey.view(),this._init()}dispose(){this._subs.dispose()}submitSurveyResult(e){(0,_e.t)("submitSurveyResult",this._params.capiService.submit_survey_result({placement:e.placement,score:e.rating,stage:Hs.Stage.toCAPIStage(e.stage),open_answer:o.fS((()=>""))(e.openAnswer),detailed_placement:e.detailedPlacement,type:e.type}),this._logger,void 0,(()=>{this._params.logService.logEvent(Ys({surveyType:e.type,surveyPlacement:e.placement,surveyDetailedPlacement:e.detailedPlacement}))}))}dismissSurvey(e){(0,_e.t)("submitSurveyResult",this._params.capiService.submit_survey_result({placement:e.placement,score:"declined",stage:Hs.Stage.toCAPIStage(e.stage),detailed_placement:e.detailedPlacement,type:e.type}),this._logger,void 0,(()=>{this._params.logService.logEvent(Ys({surveyType:e.type,surveyPlacement:e.placement,surveyDetailedPlacement:e.detailedPlacement}))}))}_init(){this._subs.push(this._params.capiService.relevantInboundCAPIMessages.pipe(h.h(te.JS.ShowSurvey.is)).subscribe((e=>this._handleShowSurvey(e))))}_handleShowSurvey(e){(0,a.zG)(e.survey,o.DT((e=>{const t=e.placement===Ws.v0.Survey.Data.BaseSurvey.Placement.ggo,i="ai_studio_feed"===e.placement;return t||i})),o.tS((e=>"open_answer_score"===e.type?o.G(e):o.YP)),o.tS((e=>{var t;return"string"==typeof e.detailed_placement&&2===(null===(t=e.detailed_placement)||void 0===t?void 0:t.split(":").length)?o.G({survey:e,detailedPlacement:e.detailed_placement}):o.YP})),o.tS((({survey:e,detailedPlacement:t})=>{const[i,n]=t.split(":"),r=Math.abs(Number.parseInt(n,10));return Number.isNaN(r)?o.YP:o.G({survey:e,detailedPlacement:t,sessionId:i,resultOrItemId:n})})),o.g_((()=>{this._params.logService.logEvent(function(e){return{source:"userSurvey",kind:"warn",name:"unexpectedSurveyFormatReceived",data:e}}({surveyType:e.survey.type,surveyPlacement:e.survey.placement,surveyDetailedPlacement:e.survey.detailed_placement}))}),(({survey:e,detailedPlacement:t,resultOrItemId:i})=>{this._activeSurvey.modify((()=>o.G({placement:e.placement,title:e.title,detailedPlacement:t,type:Ws.v0.Survey.Data.OpenAnswerScoreSurvey.type,resultOrItemId:i,maxScore:e.max_score,boxText:o.ij(e.box_text),ratingLabels:e.score_labels,acknowledgmentTitle:o.ij(e.acknowledgment_title),acknowledgment:o.ij(e.acknowledgment),skipOpenAnswerFrom:e.skip_open_answer_from,openAnswer:o.ij({placeholder:e.open_answer.placeholder,maxLen:e.open_answer.max_len,minLen:o.ij(e.open_answer.min_len)})})))})))}}!function(e){e.empty={activeSurvey:o.YP,stage:Hs.Stage.Type.Rating,transitionStage:Hs.Stage.Type.Rating,rating:o.YP,errors:o.YP,openAnswer:o.YP}}($s||($s={}));class Xs{constructor(e){this._params=e,this._state=d.h.create($s.empty),this._subs=new u.w0,this._stageTimeoutClear=void 0,this.state=this._state.view(),this._updateStageAfterTransition(),this._subscribeToActiveSurvey(),this._subs.add(this._params.assistantUIActions.subscribe((e=>{(0,P.Kg)(xt.i.isSurveyAction,xt.i.isSurveyImplicitDismissAction)(e)&&this._handleUIAction(e)})))}get _activeSurvey(){return this.state.get().activeSurvey}_subscribeToActiveSurvey(){this._subs.add(this._params.userSurveyService.activeSurvey.subscribe((e=>{(0,a.zG)(e,o.UI((e=>{(0,a.zG)(this._activeSurvey,o.g_((()=>this._updateActiveSurvey(e)),(t=>{t.detailedPlacement!==e.detailedPlacement&&this._updateActiveSurvey(e)})))})))})))}_updateActiveSurvey(e){this._state.set(Object.assign(Object.assign({},$s.empty),{activeSurvey:o.G(e)}))}_handleUIAction(e){switch(e.kind){case xt.i.Kind.surveySubmitButtonClick:case xt.i.Kind.surveyKeyPressShiftEnter:this._onSurveyCompleted();break;case xt.i.Kind.surveyCancelButtonClick:case xt.i.Kind.surveyCloseButtonClick:this._onDismissExplicitly();break;case xt.i.Kind.surveyOpenAnswerChange:this._onOpenAnswerChange(e.openAnswer);break;case xt.i.Kind.surveyRatingSelectionChange:this._onRatingSelectionChange(e.rating);break;case xt.i.Kind.promptSubmitButtonClick:case xt.i.Kind.actionBrickClick:case xt.i.Kind.resultCardInsertButtonClick:case xt.i.Kind.resultCardRephraseButtonClick:case xt.i.Kind.resultCardHeaderClick:case xt.i.Kind.resultCardDismissButtonClick:this._onDismissImplicitly();break;default:(0,c.L0)(e)}}_onRatingSelectionChange(e){(0,a.zG)(this._activeSurvey,o.UI((e=>e.skipOpenAnswerFrom)),o.UI((t=>{e<t?this._state.modify((t=>Object.assign(Object.assign({},t),{rating:o.G(e),transitionStage:Hs.Stage.Type.Feedback}))):this._state.modify((t=>Object.assign(Object.assign({},t),{rating:o.G(e),transitionStage:Hs.Stage.Type.Completed}))),this._reportCompleting()})))}_onOpenAnswerChange(e){(0,a.zG)(this._activeSurvey,o.tS((({openAnswer:e})=>e)),o.UI((({maxLen:t})=>{e.length<=t&&this._state.modify((t=>Object.assign(Object.assign({},t),{openAnswer:o.G(e),errors:o.YP})))})))}_onSurveyCompleted(){(0,a.zG)(this._activeSurvey,o.tS((({openAnswer:e})=>e)),o.tS((({minLen:e})=>e)),o.g_((()=>this._complete()),(e=>{(0,a.zG)(this._state.get().openAnswer,o.g_((()=>this._setOpenAnswerError("This field is required.")),(t=>{t.length<e?this._setOpenAnswerError(e>0?`Please enter at least ${e} characters.`:"This field is required."):this._complete()})))})))}_complete(){this._reportCompleting(),this._state.lens("transitionStage").set(Hs.Stage.Type.Completed)}_reportCompleting(){(0,a.zG)(this._activeSurvey,o.tS((e=>(0,a.zG)(this._state.get().rating,o.UI((t=>({survey:e,rating:t})))))),o.UI((({survey:e,rating:t})=>this._params.userSurveyService.submitSurveyResult({rating:t,openAnswer:this._state.get().openAnswer,placement:e.placement,detailedPlacement:e.detailedPlacement,stage:this.state.get().stage,type:e.type}))))}_setOpenAnswerError(e){this._state.lens("errors").set(o.G({openAnswerError:o.G(e)}))}_onDismissExplicitly(){(0,a.zG)(this._activeSurvey,o.UI((e=>{const t=this.state.get().stage;t===Hs.Stage.Type.Rating&&this._params.userSurveyService.dismissSurvey({placement:e.placement,detailedPlacement:e.detailedPlacement,type:e.type,stage:t})}))),this._state.lens("transitionStage").set(Hs.Stage.Type.Closed)}_onDismissImplicitly(){this._state.lens("transitionStage").set(Hs.Stage.Type.Closed)}_updateStageAfterTransition(){this._subs.add(this._state.subscribe((e=>{this._clearStageTimeout(),this._stageTimeoutClear=setTimeout((()=>{this._state.lens("stage").set(e.transitionStage)}),Qs[e.transitionStage])})))}_clearStageTimeout(){void 0!==this._stageTimeoutClear&&(clearTimeout(this._stageTimeoutClear),this._stageTimeoutClear=void 0)}dispose(){this._subs.unsubscribe(),this._clearStageTimeout()}}const Qs={[Hs.Stage.Type.Rating]:0,[Hs.Stage.Type.Feedback]:300,[Hs.Stage.Type.Completed]:0,[Hs.Stage.Type.Closed]:0};var Js;!function(e){e.set=function(e,t){return i=>Object.assign(Object.assign({},i),{[e]:t})}}(Js||(Js={}));class eo{constructor(e){this._params=e,this._subs=new u.w0,this._logger=this._params.logService.getLogger(eo.name),this._state=d.h.create({stagingNewVoiceProfile:o.YP,stagingVoiceProfile:o.YP}),this.state=this._state.view(),this._subs.add(this._params.assistantUIActions.subscribe((e=>this._handleUIAction(e))))}dispose(){this._subs.unsubscribe()}_handleUIAction(e){switch(e.kind){case xt.i.Kind.headerGoBackButtonClick:return this._handleGoBack(e.goBackFrom);case xt.i.Kind.headerVoiceButtonClick:return this._openVoiceProfile("toolbar");case xt.i.Kind.setVoiceButtonClick:return this._openVoiceProfile("banner");case xt.i.Kind.voiceProfileCloseButtonClick:return this._closeVoiceProfile();case xt.i.Kind.voiceProfileUseVoiceButtonClick:return this._applyVoiceProfile();case xt.i.Kind.toneToggleClick:return this._toggleTone(e.id,e.selected);case xt.i.Kind.styleToggleClick:return this._selectStyle(e.id);case xt.i.Kind.roleTypeaheadSelectionChange:return this._selectRole((0,a.zG)(e.role,o.UI((e=>e.id))));case xt.i.Kind.dialectDropdownSelectionChange:return this._selectDialect(e.dialect.id);case xt.i.Kind.voiceProfileTabChange:return this._switchNewVoiceProfileTab(e.profileName);case xt.i.Kind.voiceTagPopoverRemoveButtonClick:return this._removeVoiceTag(e);case xt.i.Kind.voiceTagPopoverClose:return this._closeVoiceTagPopover();case xt.i.Kind.voiceTagPopoverKeepButtonClick:return this._keepVoiceTagPopover();case xt.i.Kind.voiceTagClick:return this._toggleVoiceTag(e);case xt.i.Kind.voiceDialectDropdownSelectionChange:return this._selectNewVoiceDialect(e.dialect.id);case xt.i.Kind.voiceRoleDropdownSelectionChange:return this._selectNewVoiceRole(e.role.id);case xt.i.Kind.voiceSelectionsSaveButtonClick:return this._saveNewVoiceSelections();case xt.i.Kind.voiceSelectionsCancelButtonClick:return this._cancelNewVoiceSelectionChanges();case xt.i.Kind.voiceSelectionsEditButtonClick:return this._editNewVoiceSelections();case xt.i.Kind.promptFieldKeyPressEscape:case xt.i.Kind.headerCloseButtonClick:return this._trySaveNewProfileIfChanged();default:return}}_handleGoBack(e){"voiceProfile"!==e.kind&&"legacyVoiceProfile"!==e.kind||(0,a.zG)(this._params.genAISessionService.get(),o.tS((e=>le.toStarted(e.session.get()))),o.UI((e=>{"newVoiceProfile"===e.voiceProfile.kind?(this._trySaveNewProfileIfChanged(),this._state.lens("stagingNewVoiceProfile").set(o.YP)):"legacyVoiceProfile"===e.voiceProfile.kind&&this._state.lens("stagingVoiceProfile").set(o.YP)})))}_createVoiceProfile(e){var t;return"newVoiceProfile"===e.kind?Js.set("stagingNewVoiceProfile",o.G({selectedRole:e.selectedRole,selectedDialect:e.selectedDialect,isEnabledByDefault:e.isEnabledByDefault,profiles:e.profiles,activeTagId:o.YP,activeProfileName:o.ij(null===(t=e.profiles.find((e=>e.selected)))||void 0===t?void 0:t.name),stagingSelections:o.YP})):Js.set("stagingVoiceProfile",o.G({selectedStyle:e.selectedStyle,selectedTonesPerStyle:e.selectedTonesPerStyle,selectedRole:e.selectedRole,selectedDialect:e.selectedDialect,needsSetup:e.needsSetup}))}_openVoiceProfile(e){(0,a.zG)(this._params.genAISessionService.get(),o.tS((e=>le.toStarted(e.session.get()))),o.UI((t=>{this._params.userActionTrackingService.trackVoiceProfileOpen(e),this._params.routingViewModel.push({kind:"newVoiceProfile"===t.voiceProfile.kind?"voiceProfile":"legacyVoiceProfile"}),this._state.modify(this._createVoiceProfile(t.voiceProfile))})))}_closeVoiceProfile(){this._params.userActionTrackingService.trackVoiceProfileSkip(),this._params.routingViewModel.pop(),this._state.lens("stagingVoiceProfile").set(o.YP)}_applyVoiceProfile(){const e=this._state.get().stagingVoiceProfile;this._params.routingViewModel.pop(),this._state.lens("stagingVoiceProfile").set(o.YP),(0,a.zG)(e,o.UI((e=>{const t=o.WG(this._params.genAISessionService.get());t&&(0,_e.t)("setVoiceProfile",t.setVoiceProfile(e),this._logger)})))}_toggleTone(e,t){this._state.lens("stagingVoiceProfile").modify(o.UI((i=>{return Object.assign(Object.assign({},i),{selectedTonesPerStyle:(0,a.zG)(i.selectedTonesPerStyle,t?(n=Fe.Style.Id.eq,(e,t)=>i=>(0,a.zG)(i,Me.cq(n)(e,(0,a.ls)(o.G,t)),o.fS((()=>(0,a.zG)(i,Me.ZQ(n)(e,t(o.YP)))))))(i.selectedStyle,o.g_((()=>new Set([e])),w.$T(Fe.Tone.Id.eq)(e))):(0,a.ls)(Me.cq(Fe.Style.Id.eq)(i.selectedStyle,w.Od(Fe.Tone.Id.eq)(e)),o.fS((()=>i.selectedTonesPerStyle))))});var n})))}_selectStyle(e){this._state.lens("stagingVoiceProfile").modify(o.UI((t=>Object.assign(Object.assign({},t),{selectedStyle:e}))))}_selectRole(e){this._state.lens("stagingVoiceProfile").modify(o.UI((t=>Object.assign(Object.assign({},t),{selectedRole:e}))))}_selectDialect(e){this._state.lens("stagingVoiceProfile").modify(o.UI((t=>Object.assign(Object.assign({},t),{selectedDialect:e}))))}_editNewVoiceSelections(){this._updateNewProfileStateIfAny((e=>Object.assign(Object.assign({},e),{stagingSelections:o.G({selectedDialect:e.selectedDialect,selectedRole:e.selectedRole})})))}_cancelNewVoiceSelectionChanges(){this._updateNewProfileStateIfAny((e=>Object.assign(Object.assign({},e),{stagingSelections:o.YP})))}_saveNewVoiceSelections(){this._updateNewProfileStateIfAny((e=>Object.assign(Object.assign({},e),{selectedDialect:(0,a.zG)(e.stagingSelections,o.g_((()=>e.selectedDialect),(e=>e.selectedDialect))),selectedRole:(0,a.zG)(e.stagingSelections,o.g_((()=>e.selectedRole),(e=>e.selectedRole))),stagingSelections:o.YP})))}_selectNewVoiceRole(e){this._updateNewProfileStateIfAny((t=>Object.assign(Object.assign({},t),{stagingSelections:(0,a.zG)(t.stagingSelections,o.UI((t=>Object.assign(Object.assign({},t),{selectedRole:o.G(e)}))))})))}_selectNewVoiceDialect(e){this._updateNewProfileStateIfAny((t=>Object.assign(Object.assign({},t),{stagingSelections:(0,a.zG)(t.stagingSelections,o.UI((t=>Object.assign(Object.assign({},t),{selectedDialect:e}))))})))}_updateNewProfileStateIfAny(e){this._state.lens("stagingNewVoiceProfile").modify(o.UI(e))}_keepVoiceTagPopover(){this._params.userActionTrackingService.trackVoiceProfileKeepTag(),this._closeVoiceTagPopover()}_closeVoiceTagPopover(){this._updateNewProfileStateIfAny((e=>Object.assign(Object.assign({},e),{activeTagId:o.YP})))}_toggleVoiceTag({tagName:e,sectionName:t,profileName:i}){this._updateNewProfileStateIfAny((n=>Object.assign(Object.assign({},n),{activeTagId:o.WG(n.activeTagId)===Pe.createId({tagName:e,sectionName:t,profileName:i})?o.YP:o.G(Pe.createId({tagName:e,sectionName:t,profileName:i}))})))}_removeVoiceTag({tagName:e,profileName:t,sectionName:i}){this._params.userActionTrackingService.trackVoiceProfileRemoveTag(),this._updateNewProfileStateIfAny((n=>Object.assign(Object.assign({},n),{profiles:(0,a.zG)(n.profiles,E.UI((n=>n.name===t?Object.assign(Object.assign({},n),{sections:n.sections.map((t=>t.name===i?Object.assign(Object.assign({},t),{tags:t.tags.filter((t=>t.name!==e))}):t))}):n)))})))}_switchNewVoiceProfileTab(e){this._updateNewProfileStateIfAny((t=>Object.assign(Object.assign({},t),{activeProfileName:o.G(e)})))}_trySaveNewProfileIfChanged(){(0,a.zG)(k.Yt(o.Kw)({editedVoiceProfile:this._state.view("stagingNewVoiceProfile").get(),sessionVoiceProfile:(0,a.zG)(this._params.genAISessionService.get(),o.tS((e=>le.toStarted(e.session.get()))),o.UI((e=>e.voiceProfile)),o.tS(Fe.toNewVoiceProfile))}),o.hX((({editedVoiceProfile:e,sessionVoiceProfile:t})=>!Fe.NewSelections.eqByRoleDialectProfileAndIsEnabledByDefault.equals(e,t))),o.UI((({editedVoiceProfile:e})=>{const t=o.WG(this._params.genAISessionService.get());t&&(0,_e.t)("setNewVoiceProfile",t.setNewVoiceProfile({selectedDialect:e.selectedDialect,selectedRole:e.selectedRole,isEnabledByDefault:e.isEnabledByDefault,profiles:e.profiles}),this._logger)})))}}var to,io=i(90517);function no(e,t){return(0,a.zG)(le.toStarted(e),o.tS((e=>(0,a.zG)(function(e){return(0,a.zG)(e.split(/\s/).filter((e=>e.length>3&&e.includes("."))),_.nI)}(t),o.UI(E.DZ((t=>{var i;return null!==(i=e.detectedReferences.get(t))&&void 0!==i?i:o.YP}))),o.tS(_.c2)))))}!function(e){e.eq=S.Eh(C.yv,ce.x.Id.eq),e.card=function(e){return S.F2(e)},e.uiItem=function(e){return S.t$(e)},e.toCard=function(e){return o.Uo(e)},e.toUIItem=function(e){return(0,a.zG)(e,S.g_(o.G,(()=>o.YP)))}}(to||(to={}));var ro,so,oo=function(e,t,i,n){return new(i||(i=Promise))((function(r,s){function o(e){try{l(n.next(e))}catch(e){s(e)}}function a(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))},ao=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};!function(e){let t;!function(e){e.make=function(e){return{kind:"regularAction",action:e}}}(t=e.RegularAction||(e.RegularAction={}))}(ro||(ro={})),function(e){e.create=function(){return{textBox:"",selectedAction:o.YP,promptAutofocusToken:0,cardsState:{hoveredCard:o.YP,focusedCard:o.YP},reportMenuVisible:o.YP,referencesVisibility:new Map,detectedReferences:o.YP,overrideCardVoice:new Map}}}(so||(so={}));class lo{constructor(e){this._params=e,this._subs=new u.w0,this._logger=this._params.logService.getLogger(lo.name),this._state=d.h.create(so.create()),this._reportMenuVisibleDebounced=d.h.create(o.YP),this._disposed=new l.x,this._genAISession=d.h.create(o.YP),this._genAIPromptsFulfilled=d.h.create(0),this._paramsStateDeps=d.h.combine(this._params.userService.user,this._params.genAIAvailability,this._genAISession,this._params.routingViewModel.activeView,((e,t,i,n)=>({user:e,genAIAvailability:t,genAISession:i,activeView:n}))),this.state=d.h.combine(this._state,this._paramsStateDeps,this._reportMenuVisibleDebounced,this._params.textIsEmpty,((e,t,i,n)=>{var{cardsState:r,reportMenuVisible:s,textBox:l}=e,c=ao(e,["cardsState","reportMenuVisible","textBox"]),d=t.user,u=t.genAIAvailability,m=t.genAISession;return Object.assign(Object.assign({},c),{textBox:l,user:d,userCanSignIn:!fe(d)&&!!this._params.userService.signIn,genAIAvailability:u,genAISession:m,userPromptAction:(0,a.zG)(m,o.tS(le.toStarted),o.tS((e=>e.activeContext.userPromptAction)),o.UI((e=>Object.assign(Object.assign({},e),{arg:Object.assign(Object.assign({},e.arg),{kind:"string",label:(0,a.zG)(n,o.g_((()=>""),(0,P.RN)("Try “Write an ode to the em dash”","Tell us to...")))})})))),activeCards:new Set((0,a.zG)([r.hoveredCard,(0,a.zG)(r.focusedCard,o.wp((()=>(0,a.zG)(i,o.tS(to.toCard)))))],E.oA)),canScroll:o.Wi(s)})})),this._subs.add(this.state.subscribe((e=>this._logger.debug("Assistant view model state updated.",e)))),this._subs.add(this._params.genAISessionService.pipe(m.w(o.g_((()=>p.of(o.YP)),(e=>e.session.view(o.G))))).subscribe(g.wW(this._genAISession))),this._params.hasRevision||this._subs.add(this._showErrorOnSessionStart().subscribe()),this._subs.add(this._updateGenAIPromptsFulfilled().subscribe(g.wW(this._genAIPromptsFulfilled))),this._subs.add(mn.T(this._state.view("reportMenuVisible").pipe(U.oA,O.U(o.G)),this._state.view("reportMenuVisible").pipe(R.skipBy(o.Eh(to.eq)),fi.b(250),h.h(o.Wi))).subscribe(g.wW(this._reportMenuVisibleDebounced))),this._subs.add(this._params.routingViewModel.activeView.subscribe((()=>this._state.modify((0,a.ls)(Js.set("reportMenuVisible",o.YP),Js.set("cardsState",{hoveredCard:o.YP,focusedCard:o.YP})))))),this._subs.add(this._params.assistantUIActions.subscribe((e=>{this._handleUIAction(e)}))),this._subs.add(this._params.userService.user.subscribe((e=>this._handleUserUpdate(e))))}focusPromptField(){this._state.lens("promptAutofocusToken").modify((e=>e+1))}getContextById(e){var t,i;return null!==(i=null===(t=o.WG(this._params.genAISessionService.get()))||void 0===t?void 0:t.getContextById(e))&&void 0!==i?i:o.YP}dispose(){this._disposed.next(null),this._disposed.complete(),this._subs.unsubscribe()}_showErrorOnSessionStart(){return mn.T(this._genAISession.view((0,a.ls)(o.tS(le.toStarting),o.tS((e=>e.error)),o.UI((()=>this._params.routingViewModel.replace({kind:"error"}))))))}_updateGenAIPromptsFulfilled(){return mn.T(this._genAISession.view((0,a.ls)(o.tS(le.toStarted),o.UI((e=>e.results.length)))).pipe(U.oA,_r.R(((e,t)=>({lastResultsCount:t,promptsFulfilled:e.promptsFulfilled+(t>e.lastResultsCount?1:0)})),{lastResultsCount:0,promptsFulfilled:0}),io.j("promptsFulfilled")))}_handleUIAction(e){var t,i,n;switch(e.kind){case xt.i.Kind.headerCloseButtonClick:return void this._onClose(e);case xt.i.Kind.headerGoBackButtonClick:case xt.i.Kind.radioOptionsCancelButtonClick:return this._goBack();case xt.i.Kind.promptFieldTextChange:return this._updateTextBox(e.text);case xt.i.Kind.actionBrickClick:return this._trackActionClick(e),this._executeAction(e.action);case xt.i.Kind.actionBrickMount:return this._trackActionMount(e);case xt.i.Kind.actionBrickShow:return this._trackActionShow(e);case xt.i.Kind.promptSubmitButtonClick:return this._go(o.YP);case xt.i.Kind.userPromptSubmit:return this._go(o.G(e.prompt));case xt.i.Kind.radioOptionsSubmitButtonClick:return this._submitSelectedAction({selectedRadioOption:e.selectedOption});case xt.i.Kind.generateStopButtonClick:return this._stop();case xt.i.Kind.resultCardInsertButtonClick:return this._insert(e.result,e.selectedVoice);case xt.i.Kind.resultCardCopyButtonClick:return this._copy(e.result,e.selectedVoice);case xt.i.Kind.resultCardCopyToClipboard:return null===(t=o.WG(this._params.genAISessionService.get()))||void 0===t?void 0:t.trackResultCopy(e.result.id,e.selectedVoice===ce.x.GeneratedTextVoice.user);case xt.i.Kind.resultCardRephraseButtonClick:return this._rephrase(e.result,e.selectedVoice);case xt.i.Kind.resultCardDismissButtonClick:return this._dismissResult(e.result);case xt.i.Kind.errorCardDismissButtonClick:return this._dismissError();case xt.i.Kind.reportOffensiveResultButtonClick:return this._reportOffensiveResult(e.result);case xt.i.Kind.reportOffensiveActionsButtonClick:return this._reportOffensiveActions();case xt.i.Kind.resultCardHeaderClick:return this._clickResultHeader(e.prompt);case xt.i.Kind.creditsInfoHover:return this._onCreditsInfoHover();case xt.i.Kind.creditsInfoMount:return this._onCreditsInfoMount(e.isUphook);case xt.i.Kind.creditsInfoClick:return this._onCreditsInfoClick(e.isUphook);case xt.i.Kind.resultCardHoverChange:return this._onCardHover(e.resultId,e.hovered);case xt.i.Kind.resultCardFocusChange:return this._onCardFocus(e.resultId,e.focused);case xt.i.Kind.resultCardToggleGenericVoiceButtonClick:return this._onToggleGenericVoice(e.resultId,e.voice);case xt.i.Kind.reportMenuVisibilityChange:return this._onCardReportMenuVisibilityChange(e.trigger,e.visible);case xt.i.Kind.referencesVisibilityChange:return this._onCardReferencesVisibilityChange(e.resultId,e.visible);case xt.i.Kind.regenerateWithoutReferenceButtonClick:return this._regenerateWithoutReference(e.result,e.referenceId,e.selectedVoice);case xt.i.Kind.mount:return this._handleMount(e);case xt.i.Kind.promptFieldKeyPressEscape:return this._onPromptFieldKeyPressEscape(e);case xt.i.Kind.promptFieldKeyPressEnter:return this._checkForGenAIUnavailableError(),"ready"!==e.fieldReadyState||v._.isUnavailable(this.state.view("genAIAvailability").get())?void 0:e.text.trim().length>0?this._go(o.YP):this._tryInsertLatestResult();case xt.i.Kind.restoreHistoryButtonClick:return this._handleHistoryButtonClick();case xt.i.Kind.removeSelectionContextClick:return this._onRemoveSelectionContextClick();case xt.i.Kind.selectionContextInteraction:return this._onSelectionContextInteraction(e);case xt.i.Kind.signInButtonClick:return null===(n=(i=this._params.userService).signIn)||void 0===n?void 0:n.call(i);case xt.i.Kind.actionsMount:return void(0,a.zG)(this._genAISession.get(),o.UI((e=>e.error)),o.UI((e=>{const t=o.Wi(e);this._logger.debug("Actions mounted for the first time, notifying gen-ai interaction ready.",{success:t}),this._params.lifecycleViewModel.onInteractionReady({kind:"gen-ai",success:t})})));default:return}}_handleHistoryButtonClick(){(0,a.zG)(this._genAISession.get(),o.tS(le.toStarted),o.UI((e=>o.pC(e.inProgressResult)||e.results.length>0)),o.UI((e=>{var t;e?this._params.routingViewModel.push({kind:"thread"}):(null===(t=o.WG(this._params.genAISessionService.get()))||void 0===t||t.restoreHistory(),this._subs.add(this._genAISession.view(o.tS(le.toStarted)).pipe(U.oA,h.h((e=>void 0!==e.results.find(ce.x.isHistory))),f.q(1)).subscribe((()=>this._params.routingViewModel.push({kind:"thread"})))))})))}_handleMount(e){e.name===Xt.e.historyButtonActive&&this._params.userActionTrackingService.trackHistoryButtonView()}_handleUserUpdate(e){ve(e)?this._params.routingViewModel.replace({kind:"signedOut"}):fe(e)&&"signedOut"===this._params.routingViewModel.activeView.get().kind&&this._params.routingViewModel.push({kind:"home"})}_onCardHover(e,t){this._state.lens("cardsState").lens("hoveredCard").modify(t?()=>o.G(e):o.hX((t=>t!==e)))}_onCardFocus(e,t){this._state.lens("cardsState").lens("focusedCard").modify(t?()=>o.G(e):o.hX((t=>t!==e)))}_onCardReportMenuVisibilityChange(e,t){this._state.modify((i=>Object.assign(Object.assign({},i),{reportMenuVisible:t?o.G(e):(0,a.zG)(i.reportMenuVisible,o.hX((t=>!to.eq.equals(t,e)))),cardsState:Object.assign(Object.assign({},i.cardsState),{hoveredCard:(0,a.zG)(to.toCard(e),o.g_((()=>i.cardsState.hoveredCard),(e=>t?i.cardsState.hoveredCard:(0,a.zG)(i.cardsState.hoveredCard,o.hX((t=>t!==e))))))})})))}_onCardReferencesVisibilityChange(e,t){this._state.lens("referencesVisibility").modify((i=>new Map(i).set(e,t)))}_onToggleGenericVoice(e,t){this._state.lens("overrideCardVoice").modify((i=>{var n;const r=new Map(i),s=(null!==(n=i.get(e))&&void 0!==n?n:t)===ce.x.GeneratedTextVoice.generic?ce.x.GeneratedTextVoice.user:ce.x.GeneratedTextVoice.generic;return r.set(e,s),this._params.userActionTrackingService.trackMyVoiceCardToggle(s===ce.x.GeneratedTextVoice.user),r}))}_onRemoveSelectionContextClick(){var e;return this._params.tracking.selectionContextRemoveButtonClicked(),null===(e=o.WG(this._params.genAISessionService.get()))||void 0===e?void 0:e.dismissActiveBoundaryContext("thread"===this._params.routingViewModel.activeView.get().kind)}_onSelectionContextInteraction(e){switch(e.visibility){case"attention":this._params.tracking.selectionContextClicked();break;case"visible":this._params.tracking.selectionContextHovered();break;case"hidden":break;default:(0,c.L0)(e.visibility)}return this._params.textEditorService.setContextHighlight(e.range,e.visibility)}_onClose(e){xt.i.is(xt.i.Kind.headerCloseButtonClick)(e)&&this._params.userActionTrackingService.trackAssistantClose(),this._params.lifecycleViewModel.onClose()}_goBack(){"followUpPrompt"===this._params.routingViewModel.activeView.get().kind&&this._state.modify((e=>Object.assign(Object.assign({},e),{selectedAction:o.YP,textBox:""}))),this._params.routingViewModel.pop()}_updateTextBox(e){this._state.lens("textBox").set(e),this._searchReferences(e)}_executeAction(e){var t;if("regularAction"===e.kind)if(e.action.disabled)(0,a.zG)(e.action.notificationOnAttempt,o.UI((e=>{this._params.notificationService.notify(Se.create("information",e,void 0,void 0,5e3)),this._params.userActionTrackingService.trackContexNotification("action")})));else if(J.isFollowUpQuestionActionInput(e.action)){const t=e.action;this._state.modify((e=>Object.assign(Object.assign({},e),{textBox:"",selectedAction:o.G(t)}))),this._params.routingViewModel.push({kind:"followUpPrompt",inputType:Q.match({radio:()=>"radio",string:()=>"string"})(e.action.args[0])})}else J.isQuickActionInput(e.action)?(this._state.modify((e=>Object.assign(Object.assign({},e),{selectedAction:o.YP,textBox:""}))),null===(t=o.WG(this._params.genAISessionService.get()))||void 0===t||t.submitAction(e.action,o.FS(this._lastResultSelectedVoice())),this._params.routingViewModel.push({kind:"thread"})):J.isAiStudioAction(e.action)&&e.action.label!==q?(Nt.D(this._params.capiService.toggle_checks({checks:{ai_studio:!0},params:{ai_studio:{playbook_id:e.action.playbookId}}})()),this._params.lifecycleViewModel.onClose()):J.isPlaybooksAction(e.action)||(0,P.Kg)(J.isSkillAction,J.isToneAction,J.isPlagiarismAction,J.isWritingExpertAction,J.isPerformanceScoreAction,J.isHumanWritingReportAction,J.isAiStudioAction)(e.action)||(0,c.L0)(e.action);else"allResults"===e.kind?this._checkForGenAIUnavailableError():"go"===e.kind?this._go(o.YP):(0,c.L0)(e)}_trackActionClick(e){"regularAction"===e.action.kind?this._params.tracking.actionButtonClicked(e.action.action.label,e.action.action.id,e.placement,e.position,this._genAIPromptsFulfilled.get()):"allResults"===e.action.kind?this._params.tracking.moreActionsButtonClicked(e.placement,e.position,this._genAIPromptsFulfilled.get()):"go"===e.action.kind||(0,c.L0)(e.action)}_trackActionMount(e){"regularAction"===e.action.kind?this._params.tracking.actionButtonRendered(e.action.action.label,e.action.action.id,e.placement,e.position,this._genAIPromptsFulfilled.get()):"allResults"===e.action.kind?this._params.tracking.actionButtonRendered("Show more","more",e.placement,e.position,this._genAIPromptsFulfilled.get()):"go"===e.action.kind||(0,c.L0)(e.action)}_trackActionShow(e){"regularAction"===e.action.kind?this._params.tracking.actionButtonShown(e.action.action.label,e.action.action.id,e.placement,e.position,this._genAIPromptsFulfilled.get()):"allResults"===e.action.kind?this._params.tracking.actionButtonShown("Show more","more",e.placement,e.position,this._genAIPromptsFulfilled.get()):"go"===e.action.kind||(0,c.L0)(e.action)}_handleAIUsageNotificationOnPromptSubmit(){(0,a.zG)(this._genAISession.get(),o.tS(le.toStarted),o.tS((e=>e.activeContext.specialView)),o.hX((e=>"aiUsageAlert"===e.kind)),o.UI((()=>this._params.userActionTrackingService.trackAINotificationDismiss("document"))))}_checkForGenAIUnavailableError(){(0,a.zG)(this._params.genAISessionService.get(),o.UI((e=>e.session.get())),o.tS((e=>e.error)),o.UI((()=>{this._params.notificationService.notify(Se.create("information","Generative AI features are temporarily unavailable."))})))}_go(e){var t;o.pC(e)?(this._handleAIUsageNotificationOnPromptSubmit(),null===(t=o.WG(this._params.genAISessionService.get()))||void 0===t||t.submitAction(e.value,o.FS(this._lastResultSelectedVoice())),this._params.routingViewModel.push({kind:"thread"})):o.pC(this._state.get().selectedAction)?this._submitSelectedAction({textBox:this._state.get().textBox}):(this._handleAIUsageNotificationOnPromptSubmit(),this._submitUserPromptAction())}_stop(){var e,t;return oo(this,void 0,void 0,(function*(){yield null===(t=null===(e=o.WG(this._params.genAISessionService.get()))||void 0===e?void 0:e.stopInProgressResult())||void 0===t?void 0:t();(0,a.zG)(this._genAISession.get(),o.g_(a.jv,le.fold({starting:a.jv,contextless:a.jv,started:e=>0===e.results.length})))&&"thread"===this._params.routingViewModel.activeView.get().kind&&this._params.routingViewModel.pop()}))}_insert(e,t){(0,_e.t)("insertText",this._params.textEditorService.insertText((0,Ue.l)((0,a.zG)(e.replacementDelta,S.g_(a.yR,(e=>t===ce.x.GeneratedTextVoice.user?e.user:e.generic))),"")),this._logger,(()=>{var i;return null===(i=o.WG(this._params.genAISessionService.get()))||void 0===i?void 0:i.trackResultInsert(e.id,t===ce.x.GeneratedTextVoice.user)}),(t=>{this._params.logService.logEvent((0,ae.Kf)({resultId:e.id,reason:(0,Ce.N)(t).message}))}))}_copy(e,t){this._subscribeToCommand((()=>this._params.textEditorService.copyText((0,Ue.l)((0,a.zG)(e.replacementDelta,S.g_(a.yR,(e=>t===ce.x.GeneratedTextVoice.user?e.user:e.generic))),""))),(t=>(0,ae.Nu)({resultId:e.id,reason:(0,Ce.N)(t).message})),(()=>{var i,n;return null===(n=null===(i=o.WG(this._params.genAISessionService.get()))||void 0===i?void 0:i.trackResultCopy)||void 0===n?void 0:n.call(i,e.id,t===ce.x.GeneratedTextVoice.user)}))}_subscribeToCommand(e,t,i=a.Q1){try{(0,Ee.Dx)(e()).pipe(f.q(1),Lt.R(this._disposed)).subscribe(i,(e=>{this._params.logService.logEvent(t(e))}))}catch(e){this._params.logService.logEvent(t(e))}}_tryInsertLatestResult(){(0,a.zG)(this._genAISession.get(),o.tS(le.toStarted),o.UI((e=>e.results)),o.tS(E.YM),o.hX(ce.x.isStandardCompletedResult),o.UI((e=>this._insert(e,(0,a.zG)(this._lastResultSelectedVoice(),o.fS((()=>ce.x.GeneratedTextVoice.generic)))))))}_onPromptFieldKeyPressEscape(e){e.menuOpened||(0,a.zG)(this._genAISession.get(),o.tS(le.toStarted),o.tS((e=>e.inProgressResult)),o.g_((()=>this._onClose(e)),(()=>this._stop())))}_rephrase(e,t){var i;null===(i=o.WG(this._params.genAISessionService.get()))||void 0===i||i.regenerateResult(e.id,{omitReferenceIds:o.YP},t)}_dismissResult(e){var t;null===(t=o.WG(this._params.genAISessionService.get()))||void 0===t||t.dismissResult(e.id),this._state.modify((t=>Object.assign(Object.assign({},t),{reportMenuVisible:(0,a.zG)(t.reportMenuVisible,o.hX((t=>!to.eq.equals(t,to.card(e.id))))),cardsState:{hoveredCard:(0,a.zG)(t.cardsState.hoveredCard,o.hX((t=>t!==e.id))),focusedCard:(0,a.zG)(t.cardsState.hoveredCard,o.hX((t=>t!==e.id)))}})));(0,a.zG)(this._genAISession.get(),o.g_(a.jv,le.fold({starting:a.jv,contextless:a.jv,started:e=>0===e.results.length&&o.Wi(e.inProgressResult)})))&&"thread"===this._params.routingViewModel.activeView.get().kind&&this._params.routingViewModel.pop()}_dismissError(){var e;null===(e=o.WG(this._params.genAISessionService.get()))||void 0===e||e.dismissError()}_reportOffensiveResult(e){var t;null===(t=o.WG(this._params.genAISessionService.get()))||void 0===t||t.trackResultOffensive(e.id)}_reportOffensiveActions(){var e;null===(e=o.WG(this._params.genAISessionService.get()))||void 0===e||e.trackActionsOffensive()}_clickResultHeader(e){this._state.modify((t=>Object.assign(Object.assign({},t),{textBox:e,promptAutofocusToken:t.promptAutofocusToken+1})))}_onCreditsInfoHover(){this._params.userActionTrackingService.trackUsageInfoHover()}_onCreditsInfoMount(e){fe(this._params.userService.user.get())?e&&this._params.uphookViewModel.onUphookShow("grammarlyGoPrompts","grammarlyGo",o.YP):this._logger.warn("grammarlyGo prompts tooltip mounted by logged out user; this should not happen.")}_onCreditsInfoClick(e){this._params.userActionTrackingService.trackUsageInfoClick();fe(this._params.userService.user.get())?e?this._params.uphookViewModel.onUphookClick("grammarlyGoPrompts","grammarlyGo",o.YP):this._params.uphookViewModel.onUphookExecute("grammarlyGoPrompts","grammarlyGo",o.YP):this._logger.warn("grammarlyGoPrompts uphook clicked by logged out user; this should not happen.")}_submitSelectedAction(e){(0,a.zG)(this._state.get().selectedAction,o.tS((t=>(0,a.zG)(t.args[0],Q.match({string:()=>{var i;return(0,a.zG)(o.ij(null===(i=e.textBox)||void 0===i?void 0:i.trim()),o.hX((e=>e.length>0)),o.UI((e=>J.FollowUpQuestionActionValue.fromTextInput(t,e))))},radio:()=>(0,a.zG)(o.ij(e.selectedRadioOption),o.UI((e=>J.FollowUpQuestionActionValue.fromRadioInput(t,e))))})))),o.UI((e=>{var t;this._state.modify((e=>Object.assign(Object.assign({},e),{selectedAction:o.YP,textBox:""}))),null===(t=o.WG(this._params.genAISessionService.get()))||void 0===t||t.submitAction(e,o.FS(this._lastResultSelectedVoice())),o.pC(e.generatesTextType)&&(this._popFollowUpPromptViews(),"home"===this._params.routingViewModel.activeView.get().kind&&this._params.routingViewModel.push({kind:"thread"}))})))}_lastResultSelectedVoice(){return(0,a.zG)(this._genAISession.get(),o.tS(le.toStarted),o.UI((e=>e.results)),o.tS(E.YM),o.tS((e=>o.ij(this._state.lens("overrideCardVoice").view((t=>t.get(e.id))).get()))))}_submitUserPromptAction(){(0,a.zG)(this._state.get().textBox.trim(),o.DT((e=>""!==e)),o.tS((e=>(0,a.zG)(this._genAISession.get(),o.tS(le.toStarted),o.tS((t=>(0,a.zG)(t.activeContext.userPromptAction,o.UI((i=>({text:e,session:t,userPromptAction:i}))))))))),o.UI((({text:e,session:t,userPromptAction:i})=>{var n;this._state.lens("textBox").set(""),null===(n=o.WG(this._params.genAISessionService.get()))||void 0===n||n.submitAction(J.UserPromptActionValue.fromInput(i,e,(0,a.zG)(no(t,e),o.UI(E.DZ((e=>(0,a.zG)(e.url,o.UI((t=>({url:t,referenceId:e.id}))))))),o.tS(_.nI)),o.YP),o.FS(this._lastResultSelectedVoice())),this._popFollowUpPromptViews(),"home"===this._params.routingViewModel.activeView.get().kind&&this._params.routingViewModel.push({kind:"thread"})})))}_popFollowUpPromptViews(){for(;"followUpPrompt"===this._params.routingViewModel.activeView.get().kind;)this._params.routingViewModel.pop()}_regenerateWithoutReference(e,t,i){var n;null===(n=o.WG(this._params.genAISessionService.get()))||void 0===n||n.regenerateResult(e.id,{omitReferenceIds:o.G([t])},i)}_searchReferences(e){(0,a.zG)(function(e){return(0,a.zG)(e.split(/\s/).filter((e=>e.length>3&&e.includes("."))),_.nI)}(e),o.UI((e=>e.forEach((e=>{var t;return null===(t=o.WG(this._params.genAISessionService.get()))||void 0===t?void 0:t.searchReferences(e)})))))}}var co=i(13712),uo=i(40618),mo=i(59267),po=function(e,t,i,n){return new(i||(i=Promise))((function(r,s){function o(e){try{l(n.next(e))}catch(e){s(e)}}function a(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))};class go{constructor(e){this._params=e,this._sub=new u.w0,this._isVisuallyReady=d.h.create(!1),this._heightBehavior=d.h.create({kind:"fitContent",maxHeight:uo.Z3}),this._widthBehavior=d.h.create({kind:"fitContent",minWidth:uo.wU,maxWidth:uo.jy}),this._dragBehavior=d.h.create({kind:"notDraggable"}),this._size=d.h.create(null),this._focusState=d.h.create({isFocused:!0}),this._interactionReadyStateByFeature=new Map,this.isVisuallyReady=this._isVisuallyReady.view(),this.heightBehavior=this._heightBehavior.view(),this.widthBehavior=this._widthBehavior.view(),this.dragBehavior=this._dragBehavior.view(),this.size=this._size.view(),this._onStart(),this._sub.add(this._params.lifecycleService.sizeBehavior.subscribe({next:e=>{var t;this._heightBehavior.set("fitContent"===e.heightBehavior.kind?{kind:e.heightBehavior.kind,maxHeight:null!==(t=e.heightBehavior.maxHeight)&&void 0!==t?t:uo.Z3,height:e.heightBehavior.height}:{kind:e.heightBehavior.kind}),this._widthBehavior.set(function(e){var t,i,n,r;return"fitContent"===e.widthBehavior.kind?{kind:e.widthBehavior.kind,minWidth:null!==(t=e.widthBehavior.minWidth)&&void 0!==t?t:(r=e.widthBehavior.maxWidth,null!==r&&r<uo.wU?r:uo.wU),maxWidth:null!==(i=e.widthBehavior.maxWidth)&&void 0!==i?i:(n=e.widthBehavior.minWidth,n&&n>uo.jy?n:uo.jy)}:{kind:e.widthBehavior.kind}}(e))}})),this._sub.add(this._params.lifecycleService.dragBehavior.subscribe({next:g.wW(this._dragBehavior)})),this._sub.add(this._focusState.pipe(fi.b(100),co.g("isFocused")).subscribe((e=>{Ie(this._params.lifecycleService.focusStateChanged(e)).catch((t=>{this._params.logService.logEvent((0,ae.B$)({focusState:e,reason:(0,Ce.N)(t).message}))}))})))}_onStart(){return po(this,void 0,void 0,(function*(){try{yield Ie(this._params.lifecycleService.starting()),this._params.metricService.report({name:"assistant_lifecycle_starting",labels:void 0},{startMarks:[mo.V.assistantOpenAttempt]})}catch(e){this._params.logService.logEvent((0,ae.pA)({reason:(0,Ce.N)(e).message}))}}))}onVisuallyReady(e){return po(this,void 0,void 0,(function*(){try{yield Ie(this._params.lifecycleService.visuallyReady(e)),this._params.metricService.report({name:"assistant_lifecycle_visually_ready",labels:void 0},{startMarks:["assistant_lifecycle_starting"],durationBetweenMarks:[mo.V.assistantOpenAttempt,mo.V.preStartServicesReady,n.assistantGetStart,n.assistantGetEnd,n.assistantComponentStart,n.assistantViewModelsCreated,n.assistantComponentEnd,n.assistantContainerMounted]}),this._isVisuallyReady.set(!0)}catch(e){this._params.logService.logEvent((0,ae.o9)({reason:(0,Ce.N)(e).message}))}}))}onInteractionReady(e){return po(this,void 0,void 0,(function*(){if(!this._interactionReadyStateByFeature.has(e.kind))try{this._interactionReadyStateByFeature.set(e.kind,"pending"),yield Ie(this._params.lifecycleService.interactionReady(e)),this._interactionReadyStateByFeature.set(e.kind,"fulfilled"),yield this._params.metricService.report(function(e){return{name:"assistant_lifecycle_interaction_ready",labels:{feature:"gen-ai"===e.kind?"gen_ai":"revision"===e.kind?`revision_${e.feedForm}_${e.feedName}`:"tone-detector"===e.kind?"tone_detector":(0,c.L0)(e),success:e.success?"true":"false"}}}(e),{startMarks:["assistant_lifecycle_starting","assistant_lifecycle_visually_ready",mo.V.assistantOpenAttempt]})}catch(t){"pending"===this._interactionReadyStateByFeature.get(e.kind)&&this._interactionReadyStateByFeature.delete(e.kind),this._params.logService.logEvent((0,ae.Qw)({interactionReadyInfo:e,reason:(0,Ce.N)(t).message}))}}))}onReadyToDrag(e){return po(this,void 0,void 0,(function*(){if("draggable"===this._dragBehavior.get().kind)try{yield Ie(this._params.lifecycleService.readyToDrag(e)),this._params.metricService.report({name:"assistant_lifecycle_ready_to_drag",labels:void 0},{startMarks:["assistant_lifecycle_starting",mo.V.assistantOpenAttempt]})}catch(e){this._params.logService.logEvent((0,ae.IL)({reason:(0,Ce.N)(e).message}))}}))}onFocusStateChange(e){this._focusState.set(e)}onSizeChange(e){this._size.set({width:e.width,height:e.height})}onClose(){return po(this,void 0,void 0,(function*(){try{yield new Promise((e=>setTimeout(e))),yield this._params.lifecycleService.close()}catch(e){this._params.logService.logEvent((0,ae.CN)({reason:(0,Ce.N)(e).message}))}}))}dispose(){this._sub.unsubscribe()}}class ho{constructor(e,t){this._initialViewStack=e,this._viewEq=t,this._viewStack=d.h.create(this._initialViewStack),this.activeView=this._viewStack.view(_.YM)}push(e){this._viewStack.modify((t=>this._viewEq.equals(e,t[0])?t:_.QI(e,t)))}pop(){this._viewStack.modify((0,a.ls)(_.pW,(([e,t])=>(0,a.zG)(_.c2(t),o.fS((()=>[e]))))))}popUntil(e){this._viewStack.modify((t=>{const i=t.findIndex(e);return(0,a.zG)(i>=0?o.G(i):o.G(0),o.tS((e=>_.c2(t.slice(e)))),o.fS((()=>t)))}))}replace(e){this._viewStack.modify((t=>(0,a.zG)(_.QI(e,_.Gb(t)))))}has(e){return this._viewStack.view((t=>void 0!==t.find((t=>this._viewEq.equals(t,e)))))}}class fo{constructor(e){this._subs=new u.w0,this._state=d.h.create({hasBeenNonEmpty:o.YP,textLength:o.YP,wordCount:o.YP}),this.state=this._state.view(),this._subs.add((0,Ee.Dx)(e.textEditorService.trimmedTextLength).subscribe((e=>{const t=0===e;this._state.modify((i=>Object.assign(Object.assign({},i),{hasBeenNonEmpty:t?i.hasBeenNonEmpty:o.G(!0),textLength:o.G(e)})))}))),this._subs.add((0,Ee.Dx)(e.textEditorService.wordCount).subscribe((e=>{this._state.lens("wordCount").set(o.G(e))})))}dispose(){this._subs.unsubscribe()}}var vo=i(13301);class bo{constructor(e){this._params=e,this.institutionInfo=this._params.userService.user.view((e=>fe(e)?e.institution:o.YP)),this.isGrammarlyInstitutionMember=this._params.userService.user.view(he),this.isPremium=this._params.userService.user.view(be),this.isPlagiarismDisabled=this._params.userService.user.view((e=>{var t;return!fe(e)||!0===(null===(t=e.editorFeatures)||void 0===t?void 0:t.plagiarismDisabled)}))}}function yo(e){var t,i,n,r,s;const k=new ct({hostInfo:e.lifecycleService.hostInfo,user:e.userService.user.get(),experience:e.kind}),S=k.getLogger(yo.name);S.debug("Creating assistant view models.");const C=e.capiService instanceof y.t?null===(t=e.capiService.logEvents)||void 0===t?void 0:t.subscribe((e=>{k.logEvent(e)})):void 0,w="revision"===e.kind?d.h.create({kind:v._.Kind.disabled}).view():e.genAIAvailabilityService.availability,I=new u.w0,F=new l.x,P=new mt({lifecycleService:e.lifecycleService,experience:e.kind,logService:k}),M=new bt({capiService:e.capiService,genAIAvailability:w,logService:k}),T="revision"!==e.kind?d.h.create(o.G(new st(Object.assign(Object.assign({},e),{genAIStartSessionOptions:e.genAIStartSessionOptions,genAIAvailability:w,userActionTrackingService:M,selectionContextAvailability:null===(i=e.selectionContextAvailabilityService)||void 0===i?void 0:i.availability,metricService:P,logService:k})))):d.h.create(o.YP),B=d.h.create(o.YP);I.add(T.pipe(m.w(o.g_((()=>p.of(o.YP)),(e=>e.session.view(o.G))))).subscribe(g.wW(B))),"revision"!==e.kind&&I.add(B.subscribe((t=>{var i;return null===(i=e.notifyGenAISessionStateChanged)||void 0===i?void 0:i.call(e,(0,a.zG)(t,o.tS((e=>"contextless"===e.kind?o.YP:o.G({kind:e.kind,mode:e.mode,resultCount:"started"===e.kind?e.results.length:0})))))})));const N=new gt;I.add(T.view(o.UI((e=>e.registerNotificationHandler((e=>N.notify(e)))))).subscribe());const L=t=>{var i;null===(i=e.notifyAssistantUIAction)||void 0===i||i.call(e,t),F.next(t)},D=new go({lifecycleService:e.lifecycleService,metricService:P,logService:k}),j=new ho(function(e,t){var i,n,r;const s=null===(r=null===(n=null===(i=null==e?void 0:e.session)||void 0===i?void 0:i.get)||void 0===n?void 0:n.call(i))||void 0===r?void 0:r.mode;return _.Ss(E.oA(["toneReport"===t?o.G({kind:"toneReport"}):o.YP,"pushRewrite"===s||"quickRewrite"===s||"compliance"===s?o.G({kind:"thread"}):o.YP]),{kind:"home"})}(o.WG(T.get()),function(e){if("revision"!==e.kind&&"genAIAndRevision"!==e.kind)return;switch(e.initialView){case void 0:return;case"toneReport":return e.toneDetectorService?e.initialView:void 0;default:(0,c.L0)(e.initialView)}}(e)),ni.eq),z=new vo.e(null!==(n=e.theme)&&void 0!==n?n:d.h.create(b.u)),V=function(e){const t=(0,Ee.Dx)(e.textUpdated).pipe(G.e(500),ht.O(null),m.w((()=>e.getText({start:0,end:Number.MAX_SAFE_INTEGER})())),O.U(o.Uo),U.oA,O.U((e=>e.trim())),A.x(),R.shareReplay({bufferSize:1,refCount:!0}));return Object.assign(e,{trimmedTextLength:(e.trimmedTextLength?(0,Ee.Dx)(e.trimmedTextLength):t.pipe(O.U((e=>e.length)))).pipe(A.x(),R.shareReplay({bufferSize:1,refCount:!0})),wordCount:(e.wordCount?(0,Ee.Dx)(e.wordCount):t.pipe(O.U((e=>ft(e).length)))).pipe(A.x(),R.shareReplay({bufferSize:1,refCount:!0}))})}(e.textEditorService),K=new fo({textEditorService:V}),Z=new eo({assistantUIActions:F,userActionTrackingService:M,genAISessionService:T,routingViewModel:j,logService:k}),H=new $t({assistantUIActions:F,feedbackService:e.feedbackService,routingViewModel:j,logService:k}),$=o.ij(e.humanWritingReportService?new Wt({assistantUIActions:F,humanWritingReportService:e.humanWritingReportService}):void 0),W=o.ij("revision"!==e.kind&&"genAIAndRevision"!==e.kind||!e.toneDetectorService?void 0:new zs({externalService:e.toneDetectorService,capiService:e.capiService,logService:k})),Y=(0,a.zG)(W,o.UI((t=>new mi({assistantUIActions:F,toneDetectorServiceInternal:t,userService:e.userService,trackingService:e.trackingService,uphookService:e.uphookService,routingViewModel:j,lifecycleViewModel:D,logService:k})))),q=new bo({userService:e.userService}),X=new x(e.deepLinkService),Q=(0,a.zG)(o.ij("genAI"!==e.kind?Object.assign(Object.assign({},e),{performanceScoreOptions:"genAIAndWritingExpert"!==e.kind?e.performanceScoreOptions:void 0,isAllSuggestionsFeedEnabled:"genAIAndWritingExpert"!==e.kind,isPlagiarismEnabled:"genAIAndWritingExpert"!==e.kind&&e.isPlagiarismEnabled,isWritingExpertEnabled:"genAIAndWritingExpert"===e.kind||e.isWritingExpertEnabled,isAiStudioEnabled:"genAIAndWritingExpert"!==e.kind?e.isAiStudioEnabled:d.h.create(o.G(!1)),partialPageModeSettings:"genAIAndWritingExpert"!==e.kind?e.partialPageModeSettings:void 0,shortFormFeedMode:"genAIAndRevision"===e.kind?"compact":"standard"}):void 0),o.UI((t=>Ms(Object.assign(Object.assign({},t),{routingViewModel:j,userViewModel:q,uphookService:e.uphookService,assistantUIActions:F,logService:k,metricService:P,lifecycleViewModel:D,deepLinkManager:X,experimentService:e.experimentService,notificationService:N})))));I.add(D.isVisuallyReady.pipe(h.h(a.yR),f.q(1)).subscribe((()=>{var e;return null===(e=o.WG(Q))||void 0===e?void 0:e.start()})));const J=(0,a.zG)(Q,o.UI((e=>e.viewModels))),ee=new Zs({uphookService:e.uphookService,userViewModel:q,trackingService:e.trackingService,logService:k,experimentService:e.experimentService}),te=new lo({assistantUIActions:F,lifecycleViewModel:D,routingViewModel:j,genAIAvailability:w,genAISessionService:T,textEditorService:V,userActionTrackingService:M,uphookViewModel:ee,userService:e.userService,notificationService:N,logService:k,hasRevision:o.pC(J),textIsEmpty:K.state.view("textLength").view(o.UI((e=>0===e))),tracking:e.trackingService,capiService:e.capiService}),ie=new Ht({assistantUIActions:F,capiService:e.capiService,experimentService:e.experimentService,logService:k,userService:e.userService,trackingService:e.trackingService,routingViewModel:j,notify:L,shouldDisplayAction:"revision"===e.kind||"genAIAndRevision"===e.kind}),ne=new pi({genAISession:B,activeView:j.activeView,genAIAvailability:w,toneDetectorViewModel:Y,plagiarismViewModel:(0,a.zG)(J,o.UI((e=>e.plagiarism))),writingExpertViewModel:(0,a.zG)(J,o.UI((e=>e.writingExpert))),aiStudioViewModel:(0,a.zG)(J,o.UI((e=>e.aiStudio))),textEditorState:K.state,performanceScoreViewModel:(0,a.zG)(J,o.UI((e=>e.performanceScore))),humanWritingReportViewModel:$,playbooksViewModel:ie}),re=new ln(F,ne.state.view("contextualActions"),ne.state.view("skillActions"),ne.state.view("toneAction"),ne.state.view("plagiarismAction"),ne.state.view("writingExpertAction"),ne.state.view("aiStudioBrandVoiceAction"),ne.state.view("performanceScoreAction"),ne.state.view("humanWritingReportAction"),M,(()=>o.pC(te.state.get().selectedAction)),(()=>te.focusPromptField()),S),se=new Yt(N,F,j.activeView),oe=new qs({capiService:e.capiService,logService:k}),ae=new Xs({userSurveyService:oe,assistantUIActions:F}),le=new Ds({assistantUIActions:F,logService:k,routingViewModel:j,skillService:"revision"!==e.kind?e.skillService:void 0,isTranslationAvailable:"revision"!==e.kind?d.h.create(null!==(r=e.isTranslationAvailable)&&void 0!==r&&r):d.h.create(!1),experimentService:e.experimentService});"revision"!==e.kind&&e.selectionContextAvailabilityService&&e.selectionContextAvailabilityService.augment((e=>d.h.combine(e,j.activeView,((e,t)=>ei(t)?e:{contextUpdatesClient:!1,contextUpdatesServer:!1}))));const ce=(0,a.zG)(o.ij("revision"===e.kind||"genAIAndRevision"===e.kind?e.settingsOptions:void 0),o.UI((e=>new Os({assistantUIActions:F,routingViewModel:j,options:e})))),de=new Jt({assistantUIActions:F,onboardingService:o.ij(e.onboardingService)}),ue=new Bt({assistantUIActions:F,genAISessionService:T,logService:k,routingViewModel:j});return"revision"!==e.kind&&I.add(null===(s=e.skillService)||void 0===s?void 0:s.skills.subscribe({next:t=>{if("translate"===e.genAIStartSessionOptions.mode){const e=t.find((({id:e})=>"25"===e));e&&le.openSkill(e)}else if("appActionDeeplink"===e.genAIStartSessionOptions.mode){const i=e.genAIStartSessionOptions.appActionDeeplinkContext.appActionId;if(i){const n=t.find((({id:e})=>e===i));n&&le.openSkill(n,function(e){const{payload:t}=e;if(!t||"object"!=typeof t)return{};if(!("defaultFields"in t)&&!("startupOptions"in t))return{defaultFields:t};let i={};return Ts(t,"defaultFields")&&(i=Object.assign(Object.assign({},i),{defaultFields:t.defaultFields})),Ts(t,"startupOptions")&&(i=Object.assign(Object.assign({},i),{startupOptions:t.startupOptions})),i}(e.genAIStartSessionOptions.appActionDeeplinkContext))}}}})),{experience:e.kind,lifecycle:D,assistant:te,textEditor:K,promptActions:ne,promptMenu:re,notifications:se,voiceProfile:Z,feedbackForm:H,userSurvey:ae,skill:le,theme:z,settings:ce,revision:J,toneDetector:Y,onboarding:de,routing:j,user:q,logger:S,a11y:ue,uphook:ee,playbooks:ie,notify:L,dispose:()=>{var t,i,n,r,s;S.debug("Disposing of assistant view models."),null==C||C.unsubscribe(),ue.dispose(),null===(t=e.dispose)||void 0===t||t.call(e),I.unsubscribe(),null===(i=o.WG(Q))||void 0===i||i.dispose(),K.dispose(),te.dispose(),re.dispose(),se.dispose(),null==Z||Z.dispose(),H.dispose(),ae.dispose(),le.dispose(),P.dispose(),de.dispose(),null===(n=o.WG(Y))||void 0===n||n.dispose(),null===(r=o.WG(T.get()))||void 0===r||r.dispose(),X.dispose(),ee.dispose(),ie.dispose(),null===(s=o.WG($))||void 0===s||s.dispose()}}}(0,c.L0)(void 0);const xo=s.UI.Node.make((({state:e})=>r.createElement(Mi.F.div,{className:ko,"data-testid":"a11y-notification","aria-live":"polite",role:"status"},e.pipe(O.U((({messageId:e,messageText:t})=>t?r.createElement("span",{key:e,"data-testid":"a11y-notification-text"},t):null)))))),ko=Ei.ux.style({position:"absolute",width:"1px",height:"1px",padding:0,margin:"-1px",overflow:"hidden",clip:"rect(0,0,0,0)",border:0});var So=i(43059),Co=i(85947);const Eo=e=>r.createElement(Ri.a1,Object.assign({width:"24",height:"24",viewBox:"0 0 24 24",fill:Pi.I.Background.Brand.Default},e),r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22ZM18.2071 9.20711C18.5976 8.81658 18.5976 8.18342 18.2071 7.79289C17.8166 7.40237 17.1834 7.40237 16.7929 7.79289L10 14.5858L8.20711 12.7929C7.81658 12.4024 7.18342 12.4024 6.79289 12.7929C6.40237 13.1834 6.40237 13.8166 6.79289 14.2071L10 17.4142L18.2071 9.20711Z",stroke:"none"})),_o=(0,wi.I)("color",(({title:e,titleId:t,desc:i,descId:n,...s})=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true","data-icon":"InterfaceInfo",stroke:"transparent","aria-labelledby":t,"aria-describedby":n,...s},i?r.createElement("desc",{id:n},i):null,e?r.createElement("title",{id:t},e):null,r.createElement("path",{stroke:"#646B81",strokeLinecap:"round",strokeLinejoin:"round",d:"M8 7.487v3.3m0-5.511v.011M13.5 8a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0"})))),wo=()=>r.createElement(_i.J,{icon:_o,size:"large",accessibilityLabel:""}),Io=e=>r.createElement(Ri.a1,Object.assign({width:"18",height:"18",viewBox:"0 0 18 18"},e),r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.0607 3.64286C9.5893 2.78571 8.4107 2.78571 7.93926 3.64286L3.16592 12.3214C2.69448 13.1786 3.28378 14.25 4.22667 14.25H13.7733C14.7162 14.25 15.3055 13.1786 14.8341 12.3214L10.0607 3.64286ZM8.25 6C8.25 5.58579 8.58579 5.25 9 5.25C9.41421 5.25 9.75 5.58579 9.75 6V9.75C9.75 10.1642 9.41421 10.5 9 10.5C8.58579 10.5 8.25 10.1642 8.25 9.75V6ZM9.75 12C9.75 12.4142 9.41421 12.75 9 12.75C8.58579 12.75 8.25 12.4142 8.25 12C8.25 11.5858 8.58579 11.25 9 11.25C9.41421 11.25 9.75 11.5858 9.75 12Z",stroke:"none"})),Ao=s.UI.Node.make((({state:e,notify:t})=>r.createElement(Mi.F.div,{className:Po,"data-id":e.pipe(O.U((({id:e})=>e))),onMouseOver:t({kind:"mouseOver"}),onMouseOut:t({kind:"mouseOut"})},e.pipe(O.U((e=>{switch(e.kind){case"feedbackSubmitted":return r.createElement(r.Fragment,null,r.createElement(Eo,{className:Mo}),r.createElement("div",null,"Thanks for the feedback!"));case"voiceTagRemoved":return r.createElement(r.Fragment,null,r.createElement(Eo,{className:Mo}),r.createElement("div",null,"Removed"));case"information":return r.createElement(r.Fragment,null,r.createElement(wo,null),r.createElement("div",null,e.text));case"warning":return r.createElement(r.Fragment,null,r.createElement(Io,{className:Oo}),r.createElement("div",null,e.text));default:return(0,c.L0)(e)}}))),e.pipe(O.U((({id:e})=>r.createElement(Co.x,{name:"notificationClose",onClick:t({kind:"dismissNotification",id:e})}))))))),Fo=Ei.ux.keyframes({from:{transform:`translateY(${Ei.ux.rem(.25)})`,opacity:0},to:{transform:"translateY(0)",opacity:1}}),Po=Ei.ux.style({background:Li.NeutralGray100,color:Pi.I.Text.Base.Inverse,borderRadius:Ei.ux.rem(So.xB+So.fe),display:"flex",flexDirection:"row",alignItems:"center",padding:`${Ei.ux.rem(Fi.qp)} ${Ei.ux.rem(Fi.qp)}`,gap:Ei.ux.rem(Fi.qp),fontSize:Ei.ux.rem(.75),lineHeight:Ei.ux.rem(1.125),animation:`${Fo} 0.1s ease-in`}),Mo=Ei.ux.style(Object.assign({},(0,Hi.fx)(1.5))),Oo=Ei.ux.style({fill:"#FFC444"}),To=s.UI.List.make(E.bw,Ao),Ro=s.UI.Grid.make((({slots:e})=>r.createElement("div",{className:Uo},e.content))),Bo=s.UI.Knot.make(Ro,{content:To}),Uo=Ei.ux.style({display:"flex",flexDirection:"column",gap:Ei.ux.rem(Fi.x),transition:"top 0.1s ease-in"});var Go,No=i(99876);!function(e){e.interactOutside="interactOutside",e.closeButtonClick="closeButtonClick",e.unmount="unmount",e.other="other"}(Go||(Go={}));const Lo=s.UI.Node.make((({view:e,notify:t})=>r.createElement(Mi.F.Fragment,null,e("step").pipe(O.U(o.g_(a.gn,(e=>r.createElement(No.J2,{key:String(e.stepId),"data-testid":`onboarding-${String(e.stepId)}`,reference:e.reference,placement:e.placement,arrowAlignment:e.arrowAlignment,offset:e.offset,containerPadding:e.containerPadding,title:e.title,body:e.body,footer:e.footer,onClose:i=>t({kind:"onboardingStepUnmount",stepId:e.stepId,reason:i in Go?Go[i]:Go.other})(),onMount:t({kind:"onboardingStepMount",stepId:e.stepId})}))))))));var Do=i(99135),jo=i(52176),zo=i(85156),Vo=i(27114);const Ko=r.createContext({notifyUnmount:a.Q1}),Zo=e=>r.createElement(Ri.a1,Object.assign({width:"18",height:"18",viewBox:"0 0 18 18",fill:$i.Z.BrandGreen60},e),r.createElement("path",{d:"M17.1056 9.44721L0.992696 17.5037C0.607324 17.6963 0.174955 17.3439 0.285972 16.9276L1.83393 11.1228C1.93505 10.7436 2.24864 10.4586 2.63576 10.394L9.52041 9.2466C9.79894 9.20018 9.79894 8.79982 9.52041 8.7534L2.63576 7.60596C2.24864 7.54144 1.93505 7.25644 1.83393 6.87723L0.285971 1.07239C0.174955 0.656082 0.607322 0.303661 0.992694 0.496347L17.1056 8.55279C17.4741 8.73705 17.4741 9.26295 17.1056 9.44721Z",stroke:"none"})),Ho=e=>r.createElement(Ri.a1,Object.assign({width:"32",height:"32",fill:Pi.I.Text.Base.Subdued,viewBox:"0 0 32 32"},e),r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24 16a8 8 0 1 1-16 0 8 8 0 0 1 16 0Zm1 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-11-3a1 1 0 0 0-1 1v4a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-4a1 1 0 0 0-1-1h-4Z",stroke:"none"}));var $o=i(95295),Wo=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const Yo="#161719",qo=Pi.I.Background.Neutral.Default,Xo=e=>{var{children:t,style:i,name:n}=e,s=Wo(e,["children","style","name"]);const[a,l]=r.useState(null),c=r.useCallback((e=>{var t,i;let n=null;"contentDocument"in e.target&&(n=null!==(i=null===(t=e.target.contentDocument)||void 0===t?void 0:t.body)&&void 0!==i?i:null),l(n),n&&(n.style.margin="0",n.style.height="100vh",n.style.overflowY="hidden")}),[]),d=r.useContext(Do.u.Context);return r.useEffect((()=>{const e=d.subscribe((e=>{a&&Do.u.setRootCssVar(a,o.G(e))}));return()=>e.unsubscribe()}),[a]),r.createElement(r.Fragment,null,r.createElement("iframe",Object.assign({},s,{style:Object.assign({},i),onLoad:c,srcDoc:"<html><body></body></html>","data-testid":n})),a&&(0,$o.createPortal)(t,a))};function Qo(e){return ea(e)&&0===e.selectionStart}function Jo(e){return ea(e)&&e.selectionStart===e.value.length}function ea(e){return e.selectionStart===e.selectionEnd}const ta=({fitContentHeight:e,text:t,ariaLabel:i,ariaControls:n,ariaHaspopup:s,ariaExpanded:o,onChange:a,placeholder:l,disabled:c,className:d,onFocus:u,onBlur:m,onKeyDownEnter:p,autofocus:g,onKeyDownArrowUp:h,onKeyDownArrowDown:f,onKeyDownShiftEnter:v,theme:b})=>{var y,x,k,S,C,E,_,w,I,A,F,P,M,O,T,R,B,U,G,N,L,D,j,z,V,K,Z,H,$,W,Y;const q=null!==(y=null==b?void 0:b.lineHeightRems)&&void 0!==y?y:1.375,X=q+(null!==(k=null===(x=null==b?void 0:b.paddingRems)||void 0===x?void 0:x.top)&&void 0!==k?k:0)+(null!==(C=null===(S=null==b?void 0:b.paddingRems)||void 0===S?void 0:S.bottom)&&void 0!==C?C:0),[Q,J]=r.useState({kind:"rem",value:X}),[ee,te]=r.useState(null);return r.useEffect((()=>{ee&&void 0!==g&&(ee.focus(),ee.selectionStart=t.length,ee.selectionEnd=t.length)}),[g,ee]),r.useLayoutEffect((()=>{if(""===t)J({kind:"rem",value:X});else{const e=null==ee?void 0:ee.scrollHeight;J(e?{kind:"px",value:e}:{kind:"rem",value:X})}}),[t,ee,l]),r.createElement(Xo,{className:d,style:{height:e?"rem"===Q.kind?Ei.ux.rem(Q.value):Ei.ux.px(Q.value):void 0,maxHeight:(null==b?void 0:b.maxHeightRems)?Ei.ux.rem(b.maxHeightRems):"none",minHeight:(null==b?void 0:b.minHeightRems)?Ei.ux.rem(b.minHeightRems):"none"},title:`${i} container`,name:"textarea-iframe"},r.createElement("style",{dangerouslySetInnerHTML:{__html:`\n      .textarea {\n        box-sizing: border-box;\n        border-radius: ${Ei.ux.rem(So.xB)};\n        overflow-y: auto;\n        padding: ${Ei.ux.rem(null!==(_=null===(E=null==b?void 0:b.paddingRems)||void 0===E?void 0:E.top)&&void 0!==_?_:0)} ${Ei.ux.rem(null!==(I=null===(w=null==b?void 0:b.paddingRems)||void 0===w?void 0:w.right)&&void 0!==I?I:0)} ${Ei.ux.rem(null!==(F=null===(A=null==b?void 0:b.paddingRems)||void 0===A?void 0:A.bottom)&&void 0!==F?F:0)} ${Ei.ux.rem(null!==(M=null===(P=null==b?void 0:b.paddingRems)||void 0===P?void 0:P.left)&&void 0!==M?M:0)};\n        width: 100%;\n        height: 100%;\n        border: none;\n        background: transparent;\n        resize: none;\n        font-family: Inter, sans-serif;\n        font-size: ${null!==(O=null==b?void 0:b.fontSize)&&void 0!==O?O:Ei.ux.rem(.875)};\n        font-weight: 400;\n        color: ${null!==(T=null==b?void 0:b.color)&&void 0!==T?T:Yo};\n      }\n      .textarea::placeholder {\n        color: ${qo};\n      }\n      .textarea:placeholder-shown {\n        padding: ${(null==b?void 0:b.placeholderPaddingRems)?`${Ei.ux.rem(null!==(B=null===(R=b.placeholderPaddingRems)||void 0===R?void 0:R.top)&&void 0!==B?B:0)} ${Ei.ux.rem(null!==(G=null===(U=b.placeholderPaddingRems)||void 0===U?void 0:U.right)&&void 0!==G?G:0)} ${Ei.ux.rem(null!==(L=null===(N=b.placeholderPaddingRems)||void 0===N?void 0:N.bottom)&&void 0!==L?L:0)} ${Ei.ux.rem(null!==(j=null===(D=b.placeholderPaddingRems)||void 0===D?void 0:D.left)&&void 0!==j?j:0)}`:`${Ei.ux.rem(null!==(V=null===(z=null==b?void 0:b.paddingRems)||void 0===z?void 0:z.top)&&void 0!==V?V:0)} ${Ei.ux.rem(null!==(Z=null===(K=null==b?void 0:b.paddingRems)||void 0===K?void 0:K.right)&&void 0!==Z?Z:0)} ${Ei.ux.rem(null!==($=null===(H=null==b?void 0:b.paddingRems)||void 0===H?void 0:H.bottom)&&void 0!==$?$:0)} ${Ei.ux.rem(null!==(Y=null===(W=null==b?void 0:b.paddingRems)||void 0===W?void 0:W.left)&&void 0!==Y?Y:0)}`};\n      }\n      .textarea:focus {\n        outline: none;\n      }\n      `.replace(/\s/g,"")}}),r.createElement("textarea",{"aria-label":i,"aria-controls":n,"aria-haspopup":s,"aria-expanded":o,spellCheck:"false",className:"textarea",style:{lineHeight:Ei.ux.rem(q)},value:t,ref:te,onChange:e=>a(e.target.value),placeholder:l,disabled:c,onFocus:()=>null==u?void 0:u(),onBlur:()=>null==m?void 0:m(),onKeyDown:e=>{p&&"Enter"===e.key&&!e.shiftKey?(e.preventDefault(),e.stopPropagation(),p()):"ArrowUp"===e.key&&h&&Qo(e.currentTarget)?(e.preventDefault(),e.stopPropagation(),h()):"ArrowDown"===e.key&&f&&Jo(e.currentTarget)?(e.preventDefault(),e.stopPropagation(),f()):"Enter"===e.key&&e.shiftKey&&(e.preventDefault(),e.stopPropagation(),null==v||v())},"data-grammarly-part":"prompt-input"}))};var ia=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const na=e=>{var{useIframeWrapper:t}=e,i=ia(e,["useIframeWrapper"]);return t?r.createElement(ta,Object.assign({},i)):r.createElement(ra,Object.assign({},i))},ra=({fitContentHeight:e,text:t,ariaLabel:i,ariaControls:n,ariaHaspopup:s,ariaExpanded:o,onChange:a,placeholder:l,disabled:c,onFocus:d,onBlur:u,onKeyDownEnter:m,autofocus:p,onKeyDownArrowUp:g,onKeyDownArrowDown:h,onKeyDownShiftEnter:f,theme:v,className:b})=>{var y,x,k,S,C;const E=null!==(y=null==v?void 0:v.lineHeightRems)&&void 0!==y?y:1.375,_=E+(null!==(k=null===(x=null==v?void 0:v.paddingRems)||void 0===x?void 0:x.top)&&void 0!==k?k:0)+(null!==(C=null===(S=null==v?void 0:v.paddingRems)||void 0===S?void 0:S.bottom)&&void 0!==C?C:0),[w,I]=r.useState({kind:"rem",value:_}),[A,F]=r.useState(null);return r.useEffect((()=>{A&&void 0!==p&&(A.focus(),A.selectionStart=t.length,A.selectionEnd=t.length)}),[p,A]),r.useLayoutEffect((()=>{if(""===t)I({kind:"rem",value:_});else{const e=null==A?void 0:A.scrollHeight;I(e?{kind:"px",value:e}:{kind:"rem",value:_})}}),[t,A,l]),r.createElement("div",{className:b,style:{height:e?"rem"===w.kind?Ei.ux.rem(w.value):Ei.ux.px(w.value):void 0,maxHeight:(null==v?void 0:v.maxHeightRems)?Ei.ux.rem(v.maxHeightRems):"none",minHeight:(null==v?void 0:v.minHeightRems)?Ei.ux.rem(v.minHeightRems):"none"},title:`${i} container`},r.createElement("textarea",{"aria-label":i,"aria-controls":n,"aria-haspopup":s,"aria-expanded":o,spellCheck:"false",className:sa(v),style:{lineHeight:Ei.ux.rem(E)},value:t,ref:F,onChange:e=>a(e.target.value),placeholder:l,disabled:c,onFocus:()=>null==d?void 0:d(),onBlur:()=>null==u?void 0:u(),onKeyDown:e=>{m&&"Enter"===e.key&&!e.shiftKey?(e.preventDefault(),e.stopPropagation(),m()):"ArrowUp"===e.key&&g&&Qo(e.currentTarget)?(e.preventDefault(),e.stopPropagation(),g()):"ArrowDown"===e.key&&h&&Jo(e.currentTarget)?(e.preventDefault(),e.stopPropagation(),h()):"Enter"===e.key&&e.shiftKey&&(e.preventDefault(),e.stopPropagation(),null==f||f())}}))},sa=e=>{var t,i,n,r,s,o,a,l,c,d,u,m,p,g,h,f,v,b,y,x,k,S,C,E,_,w;return Ei.ux.style({boxSizing:"border-box",borderRadius:Ei.ux.rem(So.xB),overflowY:"auto",padding:`${Ei.ux.rem(null!==(i=null===(t=null==e?void 0:e.paddingRems)||void 0===t?void 0:t.top)&&void 0!==i?i:0)} ${Ei.ux.rem(null!==(r=null===(n=null==e?void 0:e.paddingRems)||void 0===n?void 0:n.right)&&void 0!==r?r:0)} ${Ei.ux.rem(null!==(o=null===(s=null==e?void 0:e.paddingRems)||void 0===s?void 0:s.bottom)&&void 0!==o?o:0)} ${Ei.ux.rem(null!==(l=null===(a=null==e?void 0:e.paddingRems)||void 0===a?void 0:a.left)&&void 0!==l?l:0)}`,width:"100%",height:"100%",border:"none",background:"transparent",resize:"none",fontFamily:"Inter, sans-serif",fontSize:null!==(c=null==e?void 0:e.fontSize)&&void 0!==c?c:Ei.ux.rem(.875),fontWeight:400,color:null!==(d=null==e?void 0:e.color)&&void 0!==d?d:$i.Z.TextBaseDefault,$nest:{"&::placeholder":{color:$i.Z.TextBaseSubduedColor},"&:placeholder-shown":{padding:(null==e?void 0:e.placeholderPaddingRems)?`${Ei.ux.rem(null!==(m=null===(u=e.placeholderPaddingRems)||void 0===u?void 0:u.top)&&void 0!==m?m:0)} ${Ei.ux.rem(null!==(g=null===(p=e.placeholderPaddingRems)||void 0===p?void 0:p.right)&&void 0!==g?g:0)} ${Ei.ux.rem(null!==(f=null===(h=e.placeholderPaddingRems)||void 0===h?void 0:h.bottom)&&void 0!==f?f:0)} ${Ei.ux.rem(null!==(b=null===(v=e.placeholderPaddingRems)||void 0===v?void 0:v.left)&&void 0!==b?b:0)}`:`${Ei.ux.rem(null!==(x=null===(y=null==e?void 0:e.paddingRems)||void 0===y?void 0:y.top)&&void 0!==x?x:0)} ${Ei.ux.rem(null!==(S=null===(k=null==e?void 0:e.paddingRems)||void 0===k?void 0:k.right)&&void 0!==S?S:0)} ${Ei.ux.rem(null!==(E=null===(C=null==e?void 0:e.paddingRems)||void 0===C?void 0:C.bottom)&&void 0!==E?E:0)} ${Ei.ux.rem(null!==(w=null===(_=null==e?void 0:e.paddingRems)||void 0===_?void 0:_.left)&&void 0!==w?w:0)}`},"&:focus":{outline:"none"}}})};var oa=i(10098);const aa="goBtn",la="stopBtn",ca={top:Fi.x,right:3.5*Fi.qp,bottom:Fi.x,left:Fi.qp},da={top:Fi.x,right:Fi.qp,bottom:Fi.x,left:Fi.qp},ua=Ei.ux.style({display:"flex",position:"relative",alignItems:"flex-start",padding:0,gap:Ei.ux.rem(Fi.F2),justifyContent:"space-between"}),ma=Ei.ux.style({flexGrow:1,paddingTop:Ei.ux.rem(Fi.F2+Fi.W9)}),pa=Ei.ux.style({flexGrow:1,paddingTop:Ei.ux.rem(Fi.F2+Fi.W9),paddingBottom:Ei.ux.rem(Fi.F2+Fi.W9)}),ga=Ei.ux.style({width:Ei.ux.percent(100),border:"none"}),ha={position:"absolute",bottom:Ei.ux.rem(Fi.x),right:Ei.ux.rem(Fi.qp)},fa=(0,Hi.dD)(ha,la),va=(0,Hi.dD)(Object.assign(Object.assign({},ha),{$nest:{"&[data-disabled='true']":{opacity:1,$nest:{"& svg":{fill:Li.NeutralGray30}}}}}),aa),ba=Ei.ux.joinClasses([aa,Ei.ux.style(va)]),ya=Ei.ux.joinClasses([la,Ei.ux.style(fa)]),xa=s.UI.Node.make((({state:e,notify:t})=>{const{notifyUnmount:i}=r.useContext(Ko),{onMount:n}=(0,Vo.F)((0,a.ls)(N.b((e=>t({kind:xt.i.Kind.mount,name:Xt.e.promptInput,element:e})())),zo.x((()=>i({kind:xt.i.Kind.unmount,name:Xt.e.promptInput}))))),s=r.useContext(oa.N);return r.createElement(Mi.F.form,{className:ua,mount:n,"aria-label":"Find a prompt"},r.createElement(Mi.F.div,{className:s.view((e=>e.useIframeTextfieldWrapper?ma:pa))},qt.a([e,s]).pipe(O.U((([{placeholder:e,kind:i,text:n,autofocusToken:s,ariaControls:a,ariaExpanded:l},c])=>r.createElement(na,{text:n,theme:{paddingRems:ca,placeholderPaddingRems:da,maxHeightRems:20,minHeightRems:2},useIframeWrapper:c.useIframeTextfieldWrapper,ariaLabel:"Type a prompt, after typing your prompt press tab to review results, or enter to activate your prompt",ariaControls:a,ariaExpanded:l,className:ga,placeholder:"ready"===i?o.FS(e):void 0,fitContentHeight:!0,autofocus:s,onChange:e=>t({kind:xt.i.Kind.promptFieldTextChange,text:e})(),onKeyDownEnter:t({kind:xt.i.Kind.promptFieldKeyPressEnter,text:n,fieldReadyState:i}),onFocus:t({kind:xt.i.Kind.promptFieldFocusChange,focused:!0}),onBlur:t({kind:xt.i.Kind.promptFieldFocusChange,focused:!1}),onKeyDownArrowUp:t({kind:xt.i.Kind.promptFieldKeyPressArrowUp}),onKeyDownArrowDown:t({kind:xt.i.Kind.promptFieldKeyPressArrowDown}),"data-grammarly-part":"prompt-input"}))))),e.pipe(O.U((({kind:e,text:i,genAIAvailability:n})=>v._.isUnavailable(n)?null:"waitingForResult"===e?r.createElement(Oi.z,{variant:"tertiary",className:ya,onClick:t({kind:xt.i.Kind.generateStopButtonClick}),name:"generateStop",compact:!0,size:"large"},r.createElement(Ho,null)):"ready"===e&&""!==i.trim()?r.createElement(Oi.z,{variant:"tertiary",className:ba,onClick:t({kind:xt.i.Kind.promptSubmitButtonClick,text:i}),disabled:""===i.trim()||v._.isUnavailable(n),name:"promptSend",compact:!0,size:"large"},r.createElement(Zo,null)):null))))}));var ka=i(64570),Sa=i(7949);function Ca(e){return t=>{e.forEach((e=>{"function"==typeof e?e(t):null!==e&&(e.current=t)}))}}var Ea=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const _a=r.createContext({scrollableContainer:d.h.create(o.YP),registerIntersectionObserver:()=>({dispose:a.Q1}),scrolling:d.h.create(!1),isDefault:!0}),wa=r.forwardRef((function(e,t){var{children:i,className:n,onScroll:s,style:a}=e,l=Ea(e,["children","className","onScroll","style"]);const c=r.useMemo((()=>d.h.create(o.YP)),[]),u=r.useMemo((()=>new Map),[]),m=r.useCallback((e=>{const t=Array.from(u.entries());for(const[i,{observers:n}]of t)u.set(i,{intersectionObserver:Aa(e,i,n),observers:n})}),[u]),p=r.useCallback(((e,t,i)=>{var n,r;const s=u.get(e),a=null!==(n=null==s?void 0:s.observers)&&void 0!==n?n:new Map;a.set(t,i);const l=null!==(r=null==s?void 0:s.intersectionObserver)&&void 0!==r?r:Aa(o.WG(c.get()),e,a);return u.set(e,{intersectionObserver:l,observers:a}),l.observe(t),{dispose:()=>{const i=u.get(e);i&&(i.intersectionObserver.unobserve(t),i.observers.delete(t),0===i.observers.size&&(i.intersectionObserver.disconnect(),u.delete(e)))}}}),[u]);r.useEffect((()=>()=>{u.forEach((e=>{Array.from(e.observers.keys()).forEach((t=>{e.intersectionObserver.unobserve(t)})),e.observers.clear(),e.intersectionObserver.disconnect()})),u.clear()}),[]);const h=r.useMemo((()=>d.h.create(0)),[]),f=r.useMemo((()=>d.h.create(!1)),[]),v=r.useMemo((()=>g.Hl(h.pipe(B.T(1)),100,!0).pipe(ht.O(!1),N.b(g.wW(f)))),[h,f]);gi.P.useSubscriptionTo(v);const b=r.useMemo((()=>({scrollableContainer:c,registerIntersectionObserver:p,scrolling:f,isDefault:!1})),[c,p,f]),y=r.useMemo((()=>d.h.create(o.YP)),[]),x=r.useMemo((()=>d.h.create(o.YP)),[]),k=r.useMemo((()=>qt.a([Fa(c,y),Fa(c,x)]).pipe(O.U((([e,t])=>({topOverflow:e,bottomOverflow:t}))),ht.O({topOverflow:!1,bottomOverflow:!1}),R.skipBy(C.MW({topOverflow:C.vD,bottomOverflow:C.vD})))),[y,x,c]);return r.createElement(Mi.F.div,Object.assign({},l,{className:Ei.ux.joinClasses([Ia,n]),"data-role":"scroll",mount:Ca([t,e=>{m(e),c.set(o.ij(e))}]),onScroll:e=>{var t,i;null==s||s(e),h.set(null!==(i=null===(t=o.WG(c.get()))||void 0===t?void 0:t.scrollTop)&&void 0!==i?i:0)},style:a,"data-overflow-top":k.pipe(O.U((e=>e.topOverflow))),"data-overflow-bottom":k.pipe(O.U((e=>e.bottomOverflow)))}),r.createElement("div",{style:{margin:0,display:"none"},ref:e=>y.set(o.ij(e)),"aria-hidden":!0}),r.createElement(_a.Provider,{value:b},i),r.createElement("div",{style:{margin:0,display:"none"},ref:e=>x.set(o.ij(e)),"aria-hidden":!0}))})),Ia=Ei.ux.style({position:"relative",overflowY:"auto"});function Aa(e,t,i){return new IntersectionObserver((e=>e.forEach((e=>{var t;return null===(t=i.get(e.target))||void 0===t?void 0:t(e)}))),{root:e,rootMargin:t})}function Fa(e,t){return d.h.combine(e,t,((e,t)=>(0,a.zG)(k.gz(o.Kw)(e,t),o.UI((([e,t])=>function(e,t){const i={root:e,rootMargin:"0px",threshold:[0,1]};return ka.n(t,i).pipe(h.h(js.Od),O.U((e=>1!==e[0].intersectionRatio)),ht.O(t.offsetHeight>e.offsetHeight))}(e,t)))))).pipe(U.oA,m.w(a.yR),Sa.h(p.of(!0)))}var Pa=i(52826);const Ma=()=>{const{registerIntersectionObserver:e,isDefault:t}=r.useContext(_a),i=r.useRef([]),n=r.useRef(new l.x),s=r.useRef(n.current.pipe(G.e(0),dn.Q(Pa.Z),N.b((()=>{i.current=i.current.reduce(((e,t)=>(t.ref.isConnected?e.push(t):t.disposable.dispose(),e)),[])}))).subscribe());return r.useEffect((()=>function(){s.current.unsubscribe(),i.current.forEach((({disposable:e})=>e.dispose()))}),[]),{refCallback:r.useCallback(((r,s)=>o=>{if(o)if(r(),t)s();else{const t=e("",o,(e=>{e.isIntersecting&&(s(),t.dispose())}));i.current.push({ref:o,disposable:t}),n.current.next(void 0)}}),[e,t])}},Oa=()=>r.createElement("div",{className:Ei.ux.style({position:"relative",width:"100%"})},r.createElement("div",{className:Ei.ux.style({position:"absolute",bottom:0,left:Ei.ux.rem(en),right:Ei.ux.rem(tn),borderBottom:`0.5px solid ${$i.Z.BorderBaseSubduedColor}`})})),Ta=s.UI.Node.make((({view:e,notify:t})=>{const{refCallback:i}=Ma();return r.createElement(Mi.F.div,{className:Ra,"data-testid":"action-store",id:"prompt-studio-action-store","aria-label":"Prompt ideas, press arrow keys to navigate options, press enter to trigger the focused option, and escape to close the popover"},e("actionGroups").pipe(O.U((e=>{let n=-1;return e.map((({label:e,actions:s})=>r.createElement(r.Fragment,{key:e},e.trim().length>0&&r.createElement("h3",{className:Ba},e),s.map((({label:e,icon:s,action:a},l)=>{n++;const c="regularAction"===a.kind?o.FS(a.action.badge):void 0;return r.createElement(r.Fragment,{key:e},0!==l&&r.createElement(Oa,null),r.createElement(Yi,{key:e,label:e,icon:s,badge:c,onClick:t({kind:xt.i.Kind.actionBrickClick,action:a,position:n,placement:"allActions"}),ref:i(t({kind:xt.i.Kind.actionBrickMount,action:a,position:n,placement:"allActions"}),t({kind:xt.i.Kind.actionBrickShow,action:a,position:n,placement:"allActions"}))}))})))))}))))})),Ra=Ei.ux.style({padding:`${Ei.ux.rem(2.25)} 0 ${Ei.ux.rem(1)} 0`,display:"flex",flexDirection:"column"}),Ba=Ei.ux.style({margin:0,fontSize:Ei.ux.rem(.875),lineHeight:Ei.ux.rem(1.3125),fontWeight:700,padding:`${Ei.ux.rem(Fi.x)} ${Ei.ux.rem(Fi.mh)}`,color:Pi.I.Text.Base.Default});var Ua=i(36817);const Ga=s.UI.Node.make((()=>r.createElement("div",{className:Na},r.createElement(Ua.x,{as:"span",variant:"text-small"},"No results found")))),Na=Ei.ux.style({padding:`${Ei.ux.rem(9*Fi.W9)} ${Ei.ux.rem(Fi.qp)}`});var La=i(48906);const Da=e=>r.createElement(Ri.a1,Object.assign({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},e),r.createElement("path",{d:"M14 11.5H16.7929L8.92289 19.37L10.4851 13.1213L10.6404 12.5H10H7.20711L15.0771 4.62999L13.5149 10.8787L13.3596 11.5H14Z",stroke:Pi.I.Text.Base.Subdued,strokeMiterlimit:"4.25735"})),ja="brick",za=(0,Hi.dD)({padding:`0 ${Ei.ux.rem(Fi.x)} 0 ${Ei.ux.rem(Fi.F2)}`},ja),Va={display:"flex",alignItems:"center",gap:Ei.ux.rem(Fi.x)},Ka=(0,Hi.dD)({minHeight:Ei.ux.rem(1.75),fontSize:Ei.ux.rem(.75),lineHeight:Ei.ux.rem(1.125),color:Li.NeutralGray80},ja),Za=(0,Hi.dD)({minHeight:Ei.ux.rem(2),fontSize:Ei.ux.rem(.875),lineHeight:Ei.ux.rem(1.375),color:Pi.I.Text.Base.Default},ja),Ha=(0,Hi.dD)({boxShadow:`inset 0 0 0 ${Ei.ux.rem(.125)} ${$i.Z.BrandGreen60}`},ja),$a=(0,Hi.dD)({boxShadow:"none",color:Li.NeutralGray80,$nest:{"&:not([data-disabled='true'])[data-hovered='true'], &:not([data-disabled='true'])[data-active='true']":{color:$i.Z.NeutralGray80,boxShadow:`inset 0 0 0 1px ${$i.Z.NeutralGray40}`,backgroundColor:$i.Z.NeutralGray10}}},ja),Wa={textAlign:"left",whiteSpace:"initial",lineHeight:Ei.ux.rem(1.125),margin:`${Ei.ux.rem(.25)} 0 ${Ei.ux.rem(.25)} 0`},Ya=(0,Hi.fx)(1.5),qa=Ei.ux.joinClasses([ja,Ei.ux.style(za)]),Xa=Ei.ux.style(Va),Qa=(Ei.ux.style(Ka),Ei.ux.style(Za)),Ja=Ei.ux.style(Ha),el=(Ei.ux.style($a),Ei.ux.style(Wa)),tl=Ei.ux.style(Ya),il=(0,La.xb)(Oi.z),nl="actionBrick",rl=r.forwardRef((function({action:e,label:t,icon:i,onClick:n},s){return r.createElement(il,Object.assign({variant:"secondary",onClick:n,name:"actionBrick"},(0,La.Sh)(nl,qa,"go"===e.kind?Ja:null,Qa)),r.createElement("div",{className:Xa,ref:s},(0,a.zG)(i,S.g_((e=>{switch(e){case"go":return r.createElement(Da,{className:tl,"aria-hidden":!0});case"plagiarism":return r.createElement(ji,{className:tl,"aria-hidden":!0});case"plagiarismAndAiDetector":return r.createElement(Di,{className:tl,"aria-hidden":!0});case"writingExpert":return r.createElement(zi,{className:tl,"aria-hidden":!0});case"performanceScoreEmpty":return r.createElement(Gi,{className:tl,"aria-hidden":!0});case"performanceScoreSome":return r.createElement(Ui,{className:tl,"aria-hidden":!0});case"performanceScoreSuccess":return r.createElement(Ni,{className:tl,"aria-hidden":!0});case"humanWritingReport":return r.createElement(Ki,null,r.createElement(_i.J,{icon:Ii,accessibilityLabel:""}));default:return(0,c.L0)(e)}}),(e=>r.createElement("img",{src:e,className:ol,alt:""})))),r.createElement("span",Object.assign({className:el},W(t)))))})),sl=s.UI.Node.make((({notify:e,state:t})=>{const{refCallback:i}=Ma();return r.createElement(Mi.F.Fragment,null,t.pipe(O.U((({action:t,label:n,icon:s,position:o,placement:a})=>r.createElement(rl,{action:t,label:n,icon:s,onClick:e({kind:xt.i.Kind.actionBrickClick,action:t,position:o,placement:a}),ref:i(e({kind:xt.i.Kind.actionBrickMount,action:t,position:o,placement:a}),e({kind:xt.i.Kind.actionBrickShow,action:t,position:o,placement:a}))})))))})),ol=Ei.ux.style({width:Ei.ux.rem(1.25),height:Ei.ux.rem(1.25)}),al="prompt-studio-search-results",ll=s.UI.Grid.make((({slots:e,state:t,view:i,notify:n})=>{const{refCallback:s}=Ma(),{ref:a,onMount:l}=gi.P.useElWatcher();return gi.P.useSubscriptionTo(t.pipe(A.x(((e,t)=>e.query===t.query&&e.actions.length===t.actions.length)),ai.M(a.pipe(U.oA,A.x())),dn.Q(un.E),O.U((([{query:e,actions:t}])=>{n({kind:xt.i.Kind.promptSearchResultsUpdate,query:e,resultsCount:t.length})()})))),r.createElement("div",{className:ul,"data-testid":"search-results",id:al,"aria-label":"Prompt ideas, press arrow keys to navigate options, press enter to trigger the focused option, and escape to close the popover",ref:l},e.goAction,r.createElement("div",{className:pl,"aria-hidden":!0}),r.createElement(Mi.F.Fragment,null,i("actions").pipe(O.U((e=>e.map((({label:e,icon:t,action:i},a)=>{const l="regularAction"===i.kind?o.FS(i.action.badge):void 0;return r.createElement(r.Fragment,{key:e},0!==a&&r.createElement(Oa,null),r.createElement(Yi,{key:e,label:e,badge:l,icon:t,onClick:n({kind:xt.i.Kind.actionBrickClick,action:i,position:a,placement:"search"}),ref:s(n({kind:xt.i.Kind.actionBrickMount,action:i,position:a,placement:"search"}),n({kind:xt.i.Kind.actionBrickShow,action:i,position:a,placement:"search"}))}))})))))))})),cl=s.UI.Union.asOption(s.UI.Composite.make(s.UI.Grid.make((({slots:e})=>r.createElement("div",{className:ml,"aria-hidden":!0},e.action))),sl)),dl=s.UI.Knot.make(ll,{goAction:cl}),ul=Ei.ux.style({background:"transparent",display:"flex",flexDirection:"column",alignItems:"flex-start"}),ml=Ei.ux.style({padding:`${Ei.ux.rem(9*Fi.W9)} ${Ei.ux.rem(Fi.qp)} 0 ${Ei.ux.rem(Fi.qp)}`}),pl=Ei.ux.style({marginTop:Ei.ux.rem(7*Fi.W9)});var gl=i(82208),hl=i(36166),fl=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const vl={border:0,clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"};function bl(e){let{children:t,elementType:i="div",isFocusable:n,style:s}=e,o=fl(e,["children","elementType","isFocusable","style"]),{visuallyHiddenProps:a}=function(e={}){let{style:t,isFocusable:i}=e,[n,s]=(0,r.useState)(!1),{focusWithinProps:o}=(0,hl.L)({isDisabled:!i,onFocusWithinChange:e=>s(e)}),a=(0,r.useMemo)((()=>n?t:t?Object.assign(Object.assign({},vl),t):vl),[n]);return{visuallyHiddenProps:Object.assign(Object.assign({},o),{style:a})}}(e);return r.createElement(i,(0,gl.d)(o,a),t)}const yl=s.UI.Node.make((({view:e,notify:t})=>{const{ref:i,onMount:n}=gi.P.useElWatcher();return gi.P.useSubscriptionTo(e("query").pipe(A.x(),ai.M(i.pipe(U.oA,A.x())),dn.Q(un.E),O.U((([e])=>{t({kind:xt.i.Kind.promptSearchResultsUpdate,query:e,resultsCount:0})()})))),r.createElement(bl,null,r.createElement(Mi.F.Fragment,null,e("query").pipe(O.U((e=>r.createElement("div",{"data-testid":"empty-search-results",id:al,ref:n},Rt(0,e)))))))})),xl=s.UI.Union.make("kind",{none:s.UI.Node.empty,emptySearchResults:Ga,searchResults:dl,actionStore:Ta}),kl=s.UI.Knot.make(s.UI.Grid.make((({slots:e,notify:t})=>{const{onMount:i}=(0,Vo.F)(N.b((e=>t({kind:xt.i.Kind.mount,name:Xt.e.promptMenuContent,element:e})())));return r.createElement(r.Fragment,null,r.createElement(Oi.z,{variant:"tertiary",compact:!0,style:_l,onClick:t({kind:xt.i.Kind.collapsePromptMenuButtonClick}),name:"collapsePromptMenu",size:"small","aria-label":"Close popover",title:"Close popover"},r.createElement(Ri.JO.Arrow,{direction:Ri.n4.down})),r.createElement(wa,{className:El},r.createElement("div",{ref:i,onKeyDown:e=>{"ArrowDown"===e.key?t({kind:xt.i.Kind.promptMenuKeyPressArrowDown})():"ArrowUp"===e.key&&t({kind:xt.i.Kind.promptMenuKeyPressArrowUp})()}},e.content)))})),{content:xl}),Sl=s.UI.Union.make("kind",{none:s.UI.Node.empty,emptySearchResults:yl,popup:kl}),Cl=s.UI.Union.asOption(Sl),El=Ei.ux.style({$nest:{'&[data-role="scroll"]':{borderBottom:`0.5px solid ${Pi.I.Border.Base.Subdued}`}}}),_l={default:{position:"absolute",top:Ei.ux.rem(Fi.x),right:Ei.ux.rem(Fi.x),zIndex:1}},wl=s.UI.Grid.make((({slots:e,view:t,notify:i})=>{const{onMount:n,rect:s}=gi.P.useRectWatcher(),{notifyUnmount:l}=r.useContext(Ko),{ref:c,onMount:d}=(0,Vo.F)((0,a.ls)(N.b((e=>i({kind:xt.i.Kind.mount,name:Xt.e.promptInputAndMenuContainer,element:e})())),zo.x((()=>l({kind:xt.i.Kind.unmount,name:Xt.e.promptInputAndMenuContainer})))));return r.createElement(Mi.F.div,{className:Pl,"data-testid":"prompt-container"},r.createElement(Mi.F.div,{mount:d,className:Ml,"data-expanded":t("menuExpanded"),onKeyUp:t("menuExpanded").pipe(O.U((e=>t=>{"Escape"===t.key&&i({kind:xt.i.Kind.promptFieldKeyPressEscape,menuOpened:e})()}))),onFocus:()=>{var e;return i({kind:xt.i.Kind.promptFieldAndMenuFocusChange,focused:(null===(e=o.WG(c.get()))||void 0===e?void 0:e.contains(Z(document)))||!1})()},onBlur:()=>{var e;return i({kind:xt.i.Kind.promptFieldAndMenuFocusChange,focused:(null===(e=o.WG(c.get()))||void 0===e?void 0:e.contains(Z(document)))||!1})()}},e.promptStudioMenu,r.createElement("div",{ref:n},e.promptField)),qt.a([s,t("menuExpanded")]).pipe(O.U((([e,t])=>(0,a.zG)(e,o.hX((()=>t)),o.g_(a.gn,(({height:e})=>r.createElement("div",{className:Ol,style:{height:e},role:"presentation"}))))))))})),Il=s.UI.Knot.make(wl,{promptField:xa,promptStudioMenu:Cl}),Al=s.UI.Union.asOption(Il),Fl=Fi.mh,Pl=Ei.ux.style({position:"relative",margin:`${Ei.ux.rem(Fi.x)} ${Ei.ux.rem(Fi.mh)} ${Ei.ux.rem(Fl)} ${Ei.ux.rem(Fi.mh)}`}),Ml=Ei.ux.style({background:Pi.I.Background.Base.Default,boxShadow:jo.H8.boxShadow,border:jo.H8.border,borderRadius:Ei.ux.rem(So.xB+So.fe),$nest:{"&[data-expanded='true']":{boxShadow:jo.q_.boxShadow,border:jo.q_.border,position:"absolute",bottom:0,width:"100%",display:"grid",gridTemplateRows:"1fr auto",zIndex:10}}}),Ol=Ei.ux.style({opacity:0,pointerEvents:"none",visibility:"hidden"});var Tl=i(66125),Rl=i(60084),Bl=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const Ul="data-card",Gl=e=>{var{children:t,style:i}=e,n=Bl(e,["children","style"]);return r.createElement(Mi.F.article,Object.assign({[Ul]:!0,className:(0,Ee.Dx)(i).pipe(O.U((e=>Ei.ux.style({display:"flex",flexDirection:"column",color:Pi.I.Text.Base.Default,padding:Ei.ux.rem(Fi.mh),minWidth:0},e))))},n),t)};var Nl=i(49146),Ll=i(2123);function Dl(e,t=!1){return r.useMemo((()=>e.pipe(m.w(o.g_((()=>p.of(o.YP)),(e=>{return(t?(i=e,new ir.y((e=>{const t=new Nl.default((t=>{e.next(Ll.UL.fromRectLike(t[0].contentRect))}));return t.observe(i),()=>t.disconnect()}))):ka.YC(e)).pipe(ht.O(e),O.U((()=>o.G(e.getBoundingClientRect()))));var i}))))),[e])}var jl=i(3190);function zl(e,t){const i=r.useMemo((()=>qt.a([t.pipe(U.oA,O.U((e=>o.ij(K(e,3)))),U.oA),e.pipe(R.skipBy(o.Eh(C.w4)))]).pipe(G.e(0),O.U(jl.li),N.b((e=>{e.scrollTop=e.scrollHeight-e.clientHeight})))),[t]);gi.P.useSubscriptionTo(i)}const Vl="primaryBtn",Kl="rephraseBtn",Zl="reportBtn";var Hl=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const $l=e=>{var{isActive:t,children:i,onHovered:n,onFocused:s,onCopy:o,style:a}=e,l=Hl(e,["isActive","children","onHovered","onFocused","onCopy","style"]);const c=r.useRef(null);return r.createElement(Gl,Object.assign({},l,{mount:c,style:Object.assign(Object.assign({},Yl),a),"data-active":t,onMouseEnter:()=>null==n?void 0:n(!0),onMouseLeave:()=>null==n?void 0:n(!1),onFocus:()=>{var e;return null==s?void 0:s((null===(e=c.current)||void 0===e?void 0:e.contains(Z(document)))||!1)},onBlur:()=>{var e;return null==s?void 0:s((null===(e=c.current)||void 0===e?void 0:e.contains(Z(document)))||!1)},onCopy:o}),i)},Wl={backgroundColor:Pi.I.Background.Base.Default},Yl={backgroundColor:"transparent",gap:Ei.ux.rem(Fi.x),padding:Ei.ux.rem(Fi.mh),$nest:{[`& ${(0,Hi.s4)(Vl,Hi.Ki)}`]:{fontSize:Ei.ux.rem(.875)},[`& ${(0,Hi.s4)(Kl,Hi.Ki)}`]:{fontSize:Ei.ux.rem(.875)},"&:focus, &:hover":Object.assign({},Wl),"&[data-active='true']":Object.assign({},Wl)}};var ql=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const Xl="prompt-result",Ql="data-card-type",Jl=e=>{var{header:t,footer:i,isActive:n,onHovered:s,onFocused:o,onCopy:a,body:l,style:c}=e,d=ql(e,["header","footer","isActive","onHovered","onFocused","onCopy","body","style"]);return r.createElement($l,Object.assign({"aria-live":"polite"},d,{[Ql]:Xl,isActive:n,onHovered:s,onFocused:o,style:c,onCopy:a}),t,l,i)};var ec=i(10924);const tc=(0,La.xb)(wa),ic=e=>{var t;const i=r.useMemo((()=>{var t;return null!==(t=e.menuRef)&&void 0!==t?t:p.of(o.YP)}),[e.menuRef]),s=r.useMemo((()=>{var t;return null!==(t=e.scrollContentToBottomToken)&&void 0!==t?t:p.of(o.YP)}),[e.scrollContentToBottomToken]),{onMount:l,ref:c}=gi.P.useElWatcher(),{onMount:u,ref:m}=gi.P.useElWatcher(),{onMount:g,ref:h}=gi.P.useElWatcher();zl(s,m);const f=Dl(c),v=Dl(i),b=Dl(h),y=r.useMemo((()=>d.h.create(!1)),[]),x=r.useMemo((()=>m.pipe(O.U(o.g_((()=>{y.set(!1)}),(e=>{y.set(e.scrollTop>0)}))))),[m]),k=r.useMemo((()=>e.onRectChange?f.pipe(U.oA,O.U((t=>{var i;null===(i=e.onRectChange)||void 0===i||i.call(e,t)}))):L.E),[f]),S=r.useMemo((()=>b.pipe(O.U(o.g_((()=>0),(e=>e.height))))),[b]),C=r.useMemo((()=>{var t;return qt.a([v,f,e.heightBehavior,null!==(t=e.menuVerticalMargin)&&void 0!==t?t:p.of(void 0),S]).pipe(O.U((([e,t,i,n,r])=>(0,a.zG)(e,o.g_((()=>({sentinelHeight:void 0,menuMaxHeight:void 0})),(e=>{if("fitContent"===i.kind){const t=e.height+(null!=n?n:0);return{sentinelHeight:Math.min(i.maxHeight,t),menuMaxHeight:i.maxHeight-(null!=n?n:0)}}return{sentinelHeight:void 0,menuMaxHeight:(0,a.zG)(t,o.g_(a.r5,(e=>Math.max(e.height-(null!=n?n:0)-r,0))))}}))))),ht.O({sentinelHeight:void 0,menuMaxHeight:void 0}))}),[v,f]),E=r.useMemo((()=>i.pipe(U.cp((e=>C.pipe(N.b((({menuMaxHeight:t})=>{e.style.setProperty("max-height",`${t}px`)}))))))),[C,i]);gi.P.useSubscriptionTo(x),gi.P.useSubscriptionTo(C),gi.P.useSubscriptionTo(E),gi.P.useSubscriptionTo(k);const _=(0,Tl.Me)();return r.createElement(ec.l.Provider,{value:{portalContainer:c}},r.createElement(Mi.F.div,{dir:"ltr","data-testid":"assistant",role:"dialog","aria-labelledby":_,"data-dragging":e.dragBehavior.pipe(O.U((e=>"draggable"===e.kind&&e.isDragging))),tabIndex:0,onFocus:e.onFocus,onBlur:e.onBlur,className:Ei.ux.joinClasses([sc,e.containerClassName]),style:qt.a([e.heightBehavior,e.widthBehavior]).pipe(O.U((([e,t])=>Object.assign(Object.assign({},"fitContainer"===e.kind?{height:"100%"}:{maxHeight:e.maxHeight,height:e.height}),"fitContainer"===t.kind?{width:"100%"}:{minWidth:t.minWidth,maxWidth:t.maxWidth})))),mount:t=>{var i;performance.mark(n.assistantContainerMounted),l(t),null===(i=e.onMountContainer)||void 0===i||i.call(e,t)}},r.createElement(Rl.u,null,r.createElement("h2",{id:_},"Grammarly Assistant")),e.a11yNotification,r.createElement(Mi.F.div,{className:qt.a([y,e.dragBehavior]).pipe(O.U((([e,t])=>ac(e,"draggable"===t.kind)))),mount:t=>{var i;g(t),null===(i=e.onMountHeader)||void 0===i||i.call(e,t)}},e.header),r.createElement("div",{className:cc,"data-testid":"notifications"},r.createElement(Mi.F.div,{className:y.view((0,P.RN)(mc,uc))},e.notifications)),r.createElement(tc,{mount:u,className:Ei.ux.joinClasses([lc,e.contentClassName]),onScroll:e=>y.set(e.currentTarget.scrollTop>0),style:(null!==(t=e.canScrollContent)&&void 0!==t?t:p.of(!0)).pipe(O.U((0,P.RN)("auto","hidden")),O.U((e=>({overflowY:e}))))},e.content),r.createElement("div",{className:Ei.ux.joinClasses([pc,e.footerClassName])},e.footer),r.createElement(Mi.F.Fragment,null,C.pipe(O.U((({sentinelHeight:e})=>e?r.createElement("div",{key:"sentinel",className:gc,role:"presentation",style:{height:e}}):null)))),e.onboarding))},nc="header",rc="content",sc=Ei.ux.style({overflow:"hidden",fontFamily:"Inter, sans-serif",padding:0,margin:0,borderRadius:"inherit",display:"grid",gridTemplateColumns:"1fr 0",gridTemplateRows:"auto 0 1fr auto",gridTemplateAreas:'"header sentinel" "notifications sentinel" "content sentinel" "footer sentinel"',background:Pi.I.Background.Base.Default,color:Pi.I.Text.Base.Default,$nest:{[`&:has(.${nc} [role=button][data-hovered=true])`]:{$nest:{[`.${nc}`]:{background:"inherit"}}},"&[data-dragging='true']":{cursor:"grabbing",$nest:{[`.${rc}`]:{pointerEvents:"none"},[`.${nc}`]:{pointerEvents:"none",background:$i.Z.ButtonBackgroundTertiaryActive}}}}}),oc={minWidth:0},ac=(e,t)=>Ei.ux.joinClasses([nc,Ei.ux.style(Object.assign(Object.assign({},oc),{gridArea:"header",display:"flex",alignItems:"center",justifyContent:"space-between",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit",height:Ei.ux.rem(3),gap:Ei.ux.rem(Fi.x),padding:`0 ${Ei.ux.rem(Fi.x)} 0 ${Ei.ux.rem(Fi.mh)}`,boxSizing:"border-box",clipPath:e?"inset(0 0 -5px 0)":void 0,boxShadow:e?jo.H8.boxShadow:void 0,borderBottom:e?jo.H8.border:`0.5px solid ${$i.Z.BorderBaseSubduedColor}`,zIndex:e?1:void 0,cursor:t?"grab":void 0,position:"relative","--grammarly-app-region":"drag",$nest:{button:{"--grammarly-app-region":"no-drag"},"&:hover":{background:t?$i.Z.ButtonBackgroundTertiaryHover:void 0}}}))]),lc=Ei.ux.joinClasses([rc,Ei.ux.style(Object.assign(Object.assign({},oc),{gridArea:"content",display:"flex",flexDirection:"column",$nest:{"& [data-card] + [data-card]":{borderTop:`0.5px solid ${$i.Z.BorderBaseSubduedColor}`},'& [data-card-type="prompt-result"] + [data-card-type="prompt-result"]':{borderTop:0,position:"relative",$nest:{"&::before":{content:"''",position:"absolute",top:0,left:Ei.ux.rem(1),right:Ei.ux.rem(1),borderTop:`0.5px solid ${$i.Z.BorderBaseSubduedColor}`}}}}}))]),cc=Ei.ux.style({position:"relative",gridArea:"notifications"}),dc={zIndex:1e3,position:"absolute",right:Ei.ux.rem(Fi.x),marginLeft:Ei.ux.rem(Fi.x)},uc=Ei.ux.style(Object.assign(Object.assign({},dc),{top:0})),mc=Ei.ux.style(Object.assign(Object.assign({},dc),{top:Ei.ux.rem(Fi.F2)})),pc=Ei.ux.style(Object.assign(Object.assign({},oc),{gridArea:"footer",borderBottomLeftRadius:"inherit",borderBottomRightRadius:"inherit"})),gc=Ei.ux.style({gridArea:"sentinel",visibility:"hidden"});function hc(e){return"focus"===e.kind}function fc(e){return"mount"===e.kind}function vc(e){return"headerMount"===e.kind}function bc(e){return"rectChange"===e.kind}const yc=s.UI.Grid.make((({slots:e,notify:t,view:i})=>{const n=r.useContext(Do.u.Context);return r.createElement(ic,{key:"assistant-container",onFocus:t({kind:"focus",focused:!0}),onBlur:t({kind:"focus",focused:!1}),heightBehavior:i("heightBehavior"),widthBehavior:i("widthBehavior"),dragBehavior:i("dragBehavior"),menuRef:i("menuRef"),menuVerticalMargin:n.pipe(O.U((e=>(1+Fl)*e))),scrollContentToBottomToken:i("scrollContentToBottomToken"),canScrollContent:i("canScrollContent"),onMountContainer:e=>{e&&t({kind:"mount",element:e})()},onMountHeader:e=>{e&&t({kind:"headerMount",element:e})()},onRectChange:e=>{e&&t({kind:"rectChange",rect:e})()},header:e.header,content:e.content,footer:e.footer,notifications:e.notifications,onboarding:e.onboarding,a11yNotification:e.a11yNotification})})),xc=(0,La.xb)(na),kc=({placeholder:e,error:t,openAnswer:i,onOpenAnswerChange:n,onSubmitButtonClick:s,onCancelButtonClick:l,onKeypressShiftEnter:c})=>{const d=r.useContext(oa.N);return r.createElement("form",{className:Cc,onSubmit:e=>e.preventDefault()},r.createElement(xc,{className:wc,placeholder:null!=e?e:void 0,text:i,onChange:n,ariaLabel:"Open ended answer",fitContentHeight:!0,theme:{fontSize:Ei.ux.rem(.75),lineHeightRems:1.125},useIframeWrapper:d.view((e=>e.useIframeTextfieldWrapper)),onKeyDownShiftEnter:c}),(0,a.zG)(t,o.g_((()=>null),(e=>r.createElement("div",{className:Ic},e)))),r.createElement("div",{className:Sc},r.createElement("input",{type:"submit",value:"Submit",hidden:!0}),r.createElement(Oi.z,{variant:"secondary",style:Ec,onClick:s},"Submit"),r.createElement(Oi.z,{variant:"tertiary",style:_c,onClick:l},"Dismiss")))},Sc=Ei.ux.style({display:"flex",justifyContent:"flex-start",alignItems:"center"}),Cc=Ei.ux.style({width:Ei.ux.percent(100),display:"flex",flexDirection:"column",gap:Ei.ux.rem(Fi.x)}),Ec={default:{fontSize:Ei.ux.rem(.75),fontWeight:"bold",marginRight:Ei.ux.rem(Fi.x),minHeight:Ei.ux.rem(Fi.sD),lineHeight:Ei.ux.rem(Fi.sD)}},_c={default:{fontSize:Ei.ux.rem(.75),minHeight:Ei.ux.rem(Fi.sD),lineHeight:Ei.ux.rem(Fi.sD)}},wc=Ei.ux.style({border:`1px solid ${Li.NeutralGray10}`,minHeight:Ei.ux.rem(7.5*Fi.F2),backgroundColor:Li.White,borderRadius:Ei.ux.rem(Fi.x),width:Ei.ux.percent(100),padding:`${Ei.ux.rem(1.25*Fi.F2)} ${Ei.ux.rem(Fi.x)}`,boxSizing:"border-box"}),Ic=Ei.ux.style({color:Pi.I.Background.Critical.Default,fontSize:Ei.ux.rem(.75),marginBottom:Ei.ux.rem(Fi.F2)});var Ac=i(6233);const Fc=e=>r.createElement(Ri.a1,Object.assign({width:"18",height:"17",viewBox:"0 0 18 17",fill:"none"},e),r.createElement("path",{d:"M9 1L11.069 6.15226L16.6085 6.52786L12.3477 10.0877L13.7023 15.4721L9 12.52L4.29772 15.4721L5.65228 10.0877L1.39155 6.52786L6.931 6.15226L9 1Z",fill:"transparent",stroke:Pi.I.Icon.Base.Default,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})),Pc=({rating:e,ratingLabels:t,maxScore:i})=>(0,a.zG)(e,o.g_((()=>t.length>=i&&i>1?r.createElement("div",{className:Tc},r.createElement("span",{className:Oc},t[0]),r.createElement("span",{className:Oc},t[i-1])):null),(e=>e-1>=0&&t.length>=e?r.createElement("div",{className:Mc},r.createElement("span",null,t[e-1])):null))),Mc=Ei.ux.style({display:"flex",justifyContent:"center",alignItems:"center",width:"100%",fontWeight:"bold",fontSize:Ei.ux.rem(.75),lineHeight:Ei.ux.rem(.875)}),Oc=Ei.ux.style({color:Pi.I.Text.Base.Subdued}),Tc=Ei.ux.style({display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",fontSize:Ei.ux.rem(.75),lineHeight:Ei.ux.rem(.875)});var Rc=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const Bc=({disabled:e,rating:t,ratingLabels:i,maxScore:n,onSelectionChange:s})=>{const[l,c]=r.useState(o.YP),d=r.useMemo((()=>[]),[]),u=t=>{e||s(t+1)},m=t=>{e||c(o.G(t+1))},p=()=>{e||c(o.YP)};return r.createElement(r.Fragment,null,r.createElement("div",{className:Uc,style:{gridTemplateColumns:`repeat(${n}, minmax(${Ei.ux.rem(Fi.x0)}, ${Ei.ux.rem(Fi.Lw)}))`},role:"slider","aria-valuemin":0,"aria-valuenow":(0,a.zG)(t,o.fS((()=>0))),"aria-valuemax":5,"aria-valuetext":(0,a.zG)(t,o.g_((()=>"Not yet rated"),(e=>i[e-1])))},Array.from({length:n}).map(((s,c)=>r.createElement(Gc,{key:c,onClick:()=>u(c),isFilled:(0,a.zG)(t,o.g_((()=>!1),(e=>c<e)))||(0,a.zG)(l,o.g_((()=>!1),(e=>c<e))),onMouseEnter:()=>m(c),onMouseLeave:p,onFocus:()=>m(c),onBlur:p,isSelected:(0,a.zG)(t,o.g_((()=>!1),(e=>c+1===e))),isFocusable:(0,a.zG)(t,o.g_((()=>0===c),(e=>c+1===e))),ariaLabel:`Rate this generated output as ${i[c]}`,ref:e=>d.push(e),onKeyDown:t=>((t,i)=>{var r,s,c,m;e||("ArrowRight"!==t.key&&"ArrowUp"!==t.key||((0,a.zG)(l,o.g_((()=>!1),(e=>e<n)))?null===(r=d[i+1])||void 0===r||r.focus():null===(s=d[0])||void 0===s||s.focus()),"ArrowLeft"!==t.key&&"ArrowDown"!==t.key||((0,a.zG)(l,o.g_((()=>!1),(e=>e>1)))?null===(c=d[i-1])||void 0===c||c.focus():null===(m=d[4])||void 0===m||m.focus()),"Enter"!==t.key&&" "!==t.key||u(i))})(t,c),disabled:e})))),r.createElement(Pc,{rating:(0,a.zG)(t,o.g_((0,a.a9)(l),(0,a.a9)(t))),ratingLabels:i,maxScore:n}),r.createElement(Ac.L,{small:!0}))},Uc=Ei.ux.style({display:"grid",width:Ei.ux.percent(100),justifyContent:"center"}),Gc=r.forwardRef(((e,t)=>{var{isFilled:i,ariaLabel:n,disabled:s,isSelected:o,isFocusable:a}=e,l=Rc(e,["isFilled","ariaLabel","disabled","isSelected","isFocusable"]);return r.createElement("button",Object.assign({className:Nc,role:"radio","aria-label":n,disabled:s,"aria-checked":o,tabIndex:a?0:-1,ref:t},l),r.createElement(Fc,{className:i?Lc:""}))}));Gc.displayName="StarButton";const Nc=Ei.ux.style({border:"none",background:"none",cursor:"pointer",padding:0,borderRadius:Ei.ux.rem(Fi.F2),$nest:{"&:focus-visible":{outlineStyle:"none",boxShadow:`0 0 0 2px ${Pi.I.Text.Base.Subdued}`}}}),Lc=Ei.ux.style({$nest:{"& path":{fill:Li.Gold40,stroke:Li.Gold40}}});var Dc=i(3462),jc=i(64650);const zc=({stage:e,rating:t,initialTitle:i,acknowledgment:n,acknowledgmentTitle:s,onCloseButtonClick:o,className:a})=>r.createElement("div",{className:Ei.ux.joinClasses([Vc,a])},r.createElement(Dc.p,{className:Zc}),r.createElement(Hc,{stage:e,rating:t,initialTitle:i,acknowledgment:n,acknowledgmentTitle:s}),r.createElement(Oi.z,{variant:"tertiary","aria-label":"Close survey",style:{default:{marginLeft:"auto",padding:0,minWidth:Ei.ux.rem(Fi.sD),minHeight:Ei.ux.rem(Fi.sD)},hovered:{backgroundColor:Li.NeutralGray10},active:{backgroundColor:Li.NeutralGray10}},onClick:o},r.createElement(jc.V,null))),Vc=Ei.ux.style({display:"flex",alignItems:"center"}),Kc=Ei.ux.style({fontSize:Ei.ux.rem(.75)}),Zc=Ei.ux.style({width:Ei.ux.rem(1.25),height:Ei.ux.rem(1.25),marginRight:Ei.ux.rem(Fi.qp)}),Hc=({stage:e,rating:t,initialTitle:i,acknowledgmentTitle:n,acknowledgment:s})=>{switch(e){case Hs.Stage.Type.Rating:return r.createElement("span",{className:Kc},i);case Hs.Stage.Type.Feedback:return r.createElement("span",{className:Kc},"Your rating:"," ",Array.from({length:t}).map((()=>"⭐")).join(" "));case Hs.Stage.Type.Completed:return r.createElement("span",{className:Kc},(0,a.zG)(n,o.g_((()=>r.createElement("b",null,"Thank you!")),(e=>r.createElement("b",null,e))))," ",(0,a.zG)(s,o.g_((()=>"Your feedback helps us improve."),(e=>e))));case Hs.Stage.Type.Closed:return null;default:return(0,c.L0)(e)}},$c=(e,t,i)=>r.createElement(qc,Object.assign({},e,{style:i,onRatingSelectionChange:e=>{t({kind:xt.i.Kind.surveyRatingSelectionChange,rating:e})()},onOpenAnswerChange:e=>t({kind:xt.i.Kind.surveyOpenAnswerChange,openAnswer:e})(),onSubmitButtonClick:t({kind:xt.i.Kind.surveySubmitButtonClick}),onKeypressShiftEnter:t({kind:xt.i.Kind.surveyKeyPressShiftEnter}),onCancelButtonClick:t({kind:xt.i.Kind.surveyCancelButtonClick}),onCloseButtonClick:t({kind:xt.i.Kind.surveyCloseButtonClick})})),Wc=s.UI.Union.asOption(s.UI.Node.make((({notify:e,state:t})=>r.createElement(Mi.F.Fragment,null,t.pipe(O.U((t=>$c(t,e)))))))),Yc=s.UI.Union.asOption(s.UI.Node.make((({notify:e,state:t})=>r.createElement(Mi.F.Fragment,null,t.pipe(O.U((t=>$c(t,e,Xc)))))))),qc=({survey:e,stage:t,transitionStage:i,rating:n,errors:s,openAnswer:l,onOpenAnswerChange:c,onRatingSelectionChange:d,onCloseButtonClick:u,onCancelButtonClick:m,onSubmitButtonClick:p,onKeypressShiftEnter:g,style:h})=>r.createElement(Gl,{style:Object.assign(Object.assign({},Qc),h),"data-testid":`survey-${e.resultOrItemId}`},r.createElement(zc,{className:Ei.ux.joinClasses([i===Hs.Stage.Type.Feedback?td:void 0,t===Hs.Stage.Type.Feedback?id:void 0]),stage:t,rating:(0,a.zG)(n,o.fS((0,a.a9)(1))),initialTitle:e.title,acknowledgment:e.acknowledgment,acknowledgmentTitle:e.acknowledgmentTitle,onCloseButtonClick:u}),t!==Hs.Stage.Type.Completed&&r.createElement(r.Fragment,null,r.createElement("div",{className:Ei.ux.joinClasses([nd,i===Hs.Stage.Type.Feedback?td:void 0,t===Hs.Stage.Type.Feedback?id:void 0])},r.createElement("div",{className:sd,hidden:t!==Hs.Stage.Type.Rating},r.createElement(Bc,{onSelectionChange:d,rating:n,disabled:o.pC(n),maxScore:e.maxScore,ratingLabels:e.ratingLabels})),(0,a.zG)(e.openAnswer,o.g_((0,a.a9)("(Optional) Please share your feedback to help us improve."),(e=>e.placeholder)),(e=>r.createElement("div",{className:rd,hidden:t!==Hs.Stage.Type.Feedback},r.createElement(kc,{placeholder:e,onSubmitButtonClick:p,onKeypressShiftEnter:g,onCancelButtonClick:m,onOpenAnswerChange:c,openAnswer:l,error:(0,a.zG)(s,o.tS((e=>e.openAnswerError)))}))))))),Xc={borderRadius:Ei.ux.rem(So.ze),margin:`0 ${Ei.ux.rem(Fi.mh)} ${Ei.ux.rem(Fi.mh)} `},Qc={backgroundColor:Li.NeutralGray0,padding:`${Ei.ux.rem(Fi.x)} ${Ei.ux.rem(Fi.mh)}`},Jc=Ei.ux.keyframes({from:{opacity:1},to:{opacity:.3}}),ed=Ei.ux.keyframes({from:{opacity:.3},to:{opacity:1}}),td=Ei.ux.style({animation:`${Jc} 0.3s ease-in-out`}),id=Ei.ux.style({animation:`${ed} 0.3s ease-in-out`}),nd=Ei.ux.style({display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",marginTop:Ei.ux.rem(Fi.yC)}),rd=Ei.ux.style({width:Ei.ux.percent(100)}),sd=Ei.ux.style({maxWidth:Ei.ux.percent(100),width:"fit-content",paddingTop:Ei.ux.rem(Fi.F2)});var od=i(81141),ad=i(18827),ld=i(61168),cd=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const dd=r.forwardRef((function(e,t){var{defaultHeight:i,initialVisible:n=!1,resetHeightToDefault:s=L.E,visibleOffset:o=500,children:a}=e,l=cd(e,["defaultHeight","initialVisible","resetHeightToDefault","visibleOffset","children"]);const[c,d]=r.useState(n),[u,m]=r.useState(i),p=r.useRef(null),{registerIntersectionObserver:g}=r.useContext(_a);return r.useEffect((()=>{const e=s.subscribe((()=>m(i)));return()=>e.unsubscribe()}),[i]),r.useEffect((()=>{const e=p.current;if(e){const t=g(`${o}px 0px ${o}px 0px`,e,(t=>{t.isIntersecting||m(e.offsetHeight),d(t.isIntersecting)}));return()=>t.dispose()}return()=>{}}),[p]),r.createElement("div",Object.assign({},l,{ref:Ca([p,t])}),c?a:r.createElement("div",{style:{height:u}}))})),ud="accept",md="actions-menu-incorrect-report",pd="actions-menu-mute",gd="actions-menu-offensive-report",hd="dict",fd="dismiss",vd=({item:e,kind:t,notify:i})=>(n,r,s)=>{i({kind:t,item:e,sourceId:n,actions:r,scope:s})();if(!r.some((e=>"notify"===e.type&&e.userAction===ar.nz.Click)))return;const o=(e=>{if(!e)return;const t=e.lastIndexOf(":");return t<0?void 0:e.slice(t+1)})(n);switch(o){case ud:return void i({kind:xt.i.Kind.suggestionAcceptClick})();case md:return void i({kind:xt.i.Kind.actionsMenuReportIncorrectClick})();case pd:return void i({kind:xt.i.Kind.actionsMenuMuteClick})();case gd:return void i({kind:xt.i.Kind.actionsMenuReportOffensiveClick})();case hd:return void i({kind:xt.i.Kind.addToDictionaryClick})();case fd:return void i({kind:xt.i.Kind.suggestionDismissClick})();default:return}};var bd=i(65158);const yd=e=>{const t=r.useRef(null),i=function(e,t){switch(e){case"behavior:animation:fadeIn":return{className:Ei.ux.style(kd(Sd,Ed(t))),direction:"in"};case"behavior:animation:fadeOut":return{className:Ei.ux.style(kd(Cd,Ed(t))),direction:"out"};default:(0,c.vE)(e)}}(e.type,e.timeCurve),[n,s]=r.useState("in"===i.direction?i.className:void 0);return r.useEffect((()=>()=>{var e,n,r;t.current&&(e=t.current,!(null!==(r=null===(n=e.shadowRoot)||void 0===n?void 0:n.ownerDocument.defaultView)&&void 0!==r?r:self).matchMedia("(prefers-reduced-motion: reduce)").matches)&&function(e,t){(0,a.zG)((0,a.bc)((0,a.zG)(t,o.DT((e=>"out"===e.direction))),xd(e)),(0,a.og)(k.gz(o.Kw)),D.bw((([t,i])=>{var n,r;const s=null!==(r=null===(n=e.shadowRoot)||void 0===n?void 0:n.ownerDocument)&&void 0!==r?r:document,l=e.getBoundingClientRect(),c=e.cloneNode(!0);c.classList.add(t.className),c.style.position="absolute",c.style.top=`${l.top}px`,c.style.left=`${l.left}px`,c.style.width=`${l.width}px`,c.style.height=`${l.height}px`,requestAnimationFrame((()=>{(0,a.zG)(i.find((e=>s.contains(e))),o.ij,D.bw((e=>{c.addEventListener("animationend",(()=>{s.contains(c)&&c.remove()})),e.appendChild(c)})))}))})))}(t.current,i)}),[i]),r.createElement("div",{"data-testid":"behavior-animation-wrapper","data-animation":e.type,ref:t,className:n,onAnimationEnd:()=>s(void 0)},e.children)};function xd(e,t=[]){return(0,a.zG)(e.parentElement,o.ij,o.tS((e=>xd(e,[...t,e]))),o.wp((()=>_.nI(t))))}const kd=(e,t)=>({$nest:{"@media (prefers-reduced-motion: no-preference)":{animation:`${e} ${Ei.ux.seconds(.3)} ${t}`}}}),Sd=Ei.ux.keyframes({from:{opacity:0,visibility:"hidden"},to:{opacity:1,visibility:"visible"}}),Cd=Ei.ux.keyframes({from:{opacity:1,visibility:"visible"},to:{opacity:0,visibility:"hidden"}});function Ed(e){return e.replace(/[A-Z]/g,(e=>`-${e.toLowerCase()}`))}var _d=i(49003),wd=i(22047),Id=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const Ad=Ei.ux.keyframes({from:{transform:"rotate(0deg)"},to:{transform:"rotate(360deg)"}}),Fd=Ei.ux.style({animation:`${Ad} 1s linear infinite`,width:Ei.ux.rem(1),height:Ei.ux.rem(1),minWidth:Ei.ux.rem(1),minHeight:Ei.ux.rem(1)}),Pd=e=>{const{className:t}=e,i=Id(e,["className"]);return r.createElement(Ri.a1,Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},(0,La.Sh)(Fd,t),i),r.createElement("circle",{cx:"8",cy:"8",r:"5",stroke:"#C2C6D4",strokeWidth:"2"}),r.createElement("path",{d:"M13 8C13 8.76694 12.8236 9.5236 12.4844 10.2114C12.1452 10.8993 11.6523 11.4999 11.0438 11.9668C10.4354 12.4336 9.72765 12.7543 8.97545 12.9039C8.22325 13.0535 7.44671 13.0281 6.7059 12.8296",stroke:"#05735A",strokeWidth:"2",strokeLinecap:"round"}))};function Md(e,t){return!e||void 0===t||void 0===t.cardPosition||t.cardPosition.isFirst&&t.cardPosition.isLast?null:t.cardPosition.isLast?r.createElement(bl,null," and open previous suggestion"):r.createElement(bl,null," and open next suggestion")}function Od(e){return Object.assign(Object.assign({},(0,wd.ND)()),{ggoPrimary:t=>{const i=Md(t.name===ar.MU.ButtonAccept.toString(),e);return r.createElement(Oi.z,Object.assign({},Ud(t),{variant:"primary",style:[t.verticalAlign===ar.g$.Middle?Td:void 0,Bd(t.horizontalAlign)]}),t.text,i)},primary:t=>{const i=t.name===ar.MU.ButtonAccept.toString(),n=Md(i,e),s=i&&(null==e?void 0:e.acceptButtonsLoading),o=Ud(t);return r.createElement(Oi.z,Object.assign({},Ud(t),{variant:"primary",style:[t.verticalAlign===ar.g$.Middle?Td:void 0,Bd(t.horizontalAlign)],onClick:s?void 0:o.onClick,"aria-label":s?"Loading":o["aria-label"],"aria-disabled":!!s||t["aria-disabled"],animationMode:s?_d.m.None:void 0,"data-testid":`primary-button-${t.id}`}),s?r.createElement(r.Fragment,null,t.text,n,r.createElement(Pd,null)):r.createElement(r.Fragment,null,t.text,n))},secondary:t=>{const i=Md(t.name===ar.MU.ButtonDismiss.toString(),e);return r.createElement(Oi.z,Object.assign({},Ud(t),{variant:"tertiary",style:[t.verticalAlign===ar.g$.Middle?Td:void 0,Bd(t.horizontalAlign)]}),t.text,i)},toggle:e=>{const t=(e,t=1)=>`inset 0 0 0 ${t}px ${e}`,i=(e,i=1)=>`${t(e,i)}, 0 0 0 2px ${Pi.I.Text.Base.Inverse}, 0 0 0 4px ${$i.Z.BorderBrandDefault}`;return r.createElement(Oi.z,Object.assign({},Ud(e),{variant:"secondary",size:"small",style:[e.verticalAlign===ar.g$.Middle?Td:void 0,Bd(e.horizontalAlign),{default:{boxShadow:t(Pi.I.Border.Base.Subdued),$nest:Object.assign(Object.assign({},(0,Ti.Rv)(i(Pi.I.Border.Base.Subdued))),{"& > div > span, & > div, & > *":{color:Ei.ux.important(Pi.I.Text.Base.Default)}})},hovered:{backgroundColor:$i.Z.ButtonBackgroundSecondaryHover,boxShadow:t($i.Z.BorderBrandDefault),$nest:Object.assign(Object.assign({},(0,Ti.Rv)(i($i.Z.BorderBrandDefault))),{"& > div > span, & > div, & > *":{color:Ei.ux.important($i.Z.ButtonTextSecondaryHover)}})},active:{backgroundColor:$i.Z.ButtonBackgroundSecondaryActive,boxShadow:t($i.Z.BorderBrandDefault),$nest:Object.assign(Object.assign({},(0,Ti.Rv)(i($i.Z.BorderBrandDefault))),{"& > div > span, & > div, & > *":{color:Ei.ux.important($i.Z.ButtonTextSecondaryActive)}})},selected:{backgroundColor:"transparent",boxShadow:t($i.Z.BorderBrandDefault,1.5),$nest:Object.assign(Object.assign({},(0,Ti.Rv)(i($i.Z.BorderBrandDefault,1.5))),{"& > div > span, & > div, & > *":{color:Ei.ux.important($i.Z.ColorBrandDefault),fontWeight:Ei.ux.important("bold")}})}}]}),e.text)}})}const Td={default:{$nest:{"& span":{verticalAlign:"initial"}}}},Rd={[ar.Kq.Left]:{default:{textAlign:"left"}},[ar.Kq.Center]:{default:{textAlign:"center"}},[ar.Kq.Right]:{default:{textAlign:"end"}}};function Bd(e){return void 0!==e?Rd[e]:Rd[ar.Kq.Left]}function Ud(e){return Object.assign({name:e.name,onClick:e.onClick,"aria-label":e.meta.label,"aria-describedby":e["aria-describedby"],title:void 0!==e.tooltip&&e.state!==ar.BN.Disabled?(0,wd.a3)(e.tooltip):void 0},function(e){switch(e){case ar.BN.Enabled:return{disabled:!1};case ar.BN.Disabled:return{disabled:!0};case ar.BN.Selected:return{disabled:!1,active:!0};case ar.BN.Deselected:return{disabled:!1,active:!1};case ar.BN.Hidden:return{hidden:!0};default:return(0,c.L0)(e)}}(e.state))}var Gd=i(30418),Nd=i(71664),Ld=i(22098);let Dd=!1,jd=0;function zd(e){"touch"===e.pointerType&&(Dd=!0,setTimeout((()=>{Dd=!1}),50))}function Vd(){if("undefined"!=typeof document)return"undefined"!=typeof PointerEvent&&document.addEventListener("pointerup",zd),jd++,()=>{jd--,jd>0||"undefined"!=typeof PointerEvent&&document.removeEventListener("pointerup",zd)}}function Kd(e){let{onHoverStart:t,onHoverChange:i,onHoverEnd:n,isDisabled:s}=e,[o,a]=(0,r.useState)(!1),l=(0,r.useRef)({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;(0,r.useEffect)(Vd,[]);let{addGlobalListener:c,removeAllGlobalListeners:d}=(0,Gd.x)(),{hoverProps:u,triggerHoverEnd:m}=(0,r.useMemo)((()=>{let e=(e,t)=>{let r=l.target;l.pointerType="",l.target=null,"touch"!==t&&l.isHovered&&r&&(l.isHovered=!1,d(),n&&n({type:"hoverend",target:r,pointerType:t}),i&&i(!1),a(!1))},r={};return"undefined"!=typeof PointerEvent&&(r.onPointerEnter=n=>{Dd&&"mouse"===n.pointerType||((n,r)=>{if(l.pointerType=r,s||"touch"===r||l.isHovered||!n.currentTarget.contains(n.target))return;l.isHovered=!0;let o=n.currentTarget;l.target=o,c((0,Nd.r3)(n.target),"pointerover",(t=>{l.isHovered&&l.target&&!(0,Ld.bE)(l.target,t.target)&&e(t,t.pointerType)}),{capture:!0}),t&&t({type:"hoverstart",target:o,pointerType:r}),i&&i(!0),a(!0)})(n,n.pointerType)},r.onPointerLeave=t=>{!s&&t.currentTarget.contains(t.target)&&e(t,t.pointerType)}),{hoverProps:r,triggerHoverEnd:e}}),[t,i,n,s,l,c,d]);return(0,r.useEffect)((()=>{s&&m({currentTarget:l.target},l.pointerType)}),[s]),{hoverProps:u,isHovered:o}}const Zd=e=>{const t=`${e.id}-collapsed-content`,[i,n]=r.useState(!1),s=r.useCallback((t=>{n(t),e.onHoverChanged(t)}),[]),{hoverProps:o}=Kd({onHoverChange:s}),{focusWithinProps:a}=(0,hl.L)({onFocusWithinChange:s});return r.createElement("button",Object.assign({onClick:t=>{e.onPress({x:t.clientX,y:t.clientY})}},o,a,{className:Hd.button}),r.createElement("div",{id:t,className:Hd.content},e.child,r.createElement(bl,null,"Open suggestion card"),r.createElement("div",{role:"tooltip",style:{opacity:i?1:0}},e.quickActions)))},Hd=Ei.ux.stylesheet({button:[{position:"relative",minHeight:Ei.ux.rem(3.5),display:"flex",textAlign:"start",alignItems:"center",width:"100%",background:"transparent",cursor:"pointer",border:0}],content:[{display:"flex",alignItems:"center",$nest:{"& > div:first-of-type":{flexGrow:1}}}]});var $d;$d={"ar-AE":{longPressMessage:"اضغط مطولاً أو اضغط على Alt + السهم لأسفل لفتح القائمة"},"bg-BG":{longPressMessage:"Натиснете продължително или натиснете Alt+ стрелка надолу, за да отворите менюто"},"cs-CZ":{longPressMessage:"Dlouhým stiskem nebo stisknutím kláves Alt + šipka dolů otevřete nabídku"},"da-DK":{longPressMessage:"Langt tryk eller tryk på Alt + pil ned for at åbne menuen"},"de-DE":{longPressMessage:"Drücken Sie lange oder drücken Sie Alt + Nach-unten, um das Menü zu öffnen"},"el-GR":{longPressMessage:"Πιέστε παρατεταμένα ή πατήστε Alt + κάτω βέλος για να ανοίξετε το μενού"},"en-US":{longPressMessage:"Long press or press Alt + ArrowDown to open menu"},"es-ES":{longPressMessage:"Mantenga pulsado o pulse Alt + flecha abajo para abrir el menú"},"et-EE":{longPressMessage:"Menüü avamiseks vajutage pikalt või vajutage klahve Alt + allanool"},"fi-FI":{longPressMessage:"Avaa valikko painamalla pohjassa tai näppäinyhdistelmällä Alt + Alanuoli"},"fr-FR":{longPressMessage:"Appuyez de manière prolongée ou appuyez sur Alt + Flèche vers le bas pour ouvrir le menu."},"he-IL":{longPressMessage:"לחץ לחיצה ארוכה או הקש Alt + ArrowDown כדי לפתוח את התפריט"},"hr-HR":{longPressMessage:"Dugo pritisnite ili pritisnite Alt + strelicu prema dolje za otvaranje izbornika"},"hu-HU":{longPressMessage:"Nyomja meg hosszan, vagy nyomja meg az Alt + lefele nyíl gombot a menü megnyitásához"},"it-IT":{longPressMessage:"Premere a lungo o premere Alt + Freccia giù per aprire il menu"},"ja-JP":{longPressMessage:"長押しまたは Alt+下矢印キーでメニューを開く"},"ko-KR":{longPressMessage:"길게 누르거나 Alt + 아래쪽 화살표를 눌러 메뉴 열기"},"lt-LT":{longPressMessage:"Norėdami atidaryti meniu, nuspaudę palaikykite arba paspauskite „Alt + ArrowDown“."},"lv-LV":{longPressMessage:"Lai atvērtu izvēlni, turiet nospiestu vai nospiediet taustiņu kombināciju Alt + lejupvērstā bultiņa"},"nb-NO":{longPressMessage:"Langt trykk eller trykk Alt + PilNed for å åpne menyen"},"nl-NL":{longPressMessage:"Druk lang op Alt + pijl-omlaag of druk op Alt om het menu te openen"},"pl-PL":{longPressMessage:"Naciśnij i przytrzymaj lub naciśnij klawisze Alt + Strzałka w dół, aby otworzyć menu"},"pt-BR":{longPressMessage:"Pressione e segure ou pressione Alt + Seta para baixo para abrir o menu"},"pt-PT":{longPressMessage:"Prima continuamente ou prima Alt + Seta Para Baixo para abrir o menu"},"ro-RO":{longPressMessage:"Apăsați lung sau apăsați pe Alt + săgeată în jos pentru a deschide meniul"},"ru-RU":{longPressMessage:"Нажмите и удерживайте или нажмите Alt + Стрелка вниз, чтобы открыть меню"},"sk-SK":{longPressMessage:"Ponuku otvoríte dlhým stlačením alebo stlačením klávesu Alt + klávesu so šípkou nadol"},"sl-SI":{longPressMessage:"Za odprtje menija pritisnite in držite gumb ali pritisnite Alt+puščica navzdol"},"sr-SP":{longPressMessage:"Dugo pritisnite ili pritisnite Alt + strelicu prema dole da otvorite meni"},"sv-SE":{longPressMessage:"Håll nedtryckt eller tryck på Alt + pil nedåt för att öppna menyn"},"tr-TR":{longPressMessage:"Menüyü açmak için uzun basın veya Alt + Aşağı Ok tuşuna basın"},"uk-UA":{longPressMessage:"Довго або звичайно натисніть комбінацію клавіш Alt і стрілка вниз, щоб відкрити меню"},"zh-CN":{longPressMessage:"长按或按 Alt + 向下方向键以打开菜单"},"zh-TW":{longPressMessage:"長按或按 Alt+向下鍵以開啟功能表"}};var Wd=i(79530),Yd=i(63041),qd=i(68605),Xd=i(90753);let Qd="default",Jd="",eu=new WeakMap;function tu(e){if((0,qd.gn)()){if("default"===Qd){const t=(0,Nd.r3)(e);Jd=t.documentElement.style.webkitUserSelect,t.documentElement.style.webkitUserSelect="none"}Qd="disabled"}else if(e instanceof HTMLElement||e instanceof SVGElement){let t="userSelect"in e.style?"userSelect":"webkitUserSelect";eu.set(e,e.style[t]),e.style[t]="none"}}function iu(e){if((0,qd.gn)()){if("disabled"!==Qd)return;Qd="restoring",setTimeout((()=>{(0,Xd.Q)((()=>{if("restoring"===Qd){const t=(0,Nd.r3)(e);"none"===t.documentElement.style.webkitUserSelect&&(t.documentElement.style.webkitUserSelect=Jd||""),Jd="",Qd="default"}}))}),300)}else if((e instanceof HTMLElement||e instanceof SVGElement)&&e&&eu.has(e)){let t=eu.get(e),i="userSelect"in e.style?"userSelect":"webkitUserSelect";"none"===e.style[i]&&(e.style[i]=t),""===e.getAttribute("style")&&e.removeAttribute("style"),eu.delete(e)}}var nu=i(90187);function ru(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}function su(e,t,i){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,i)}function ou(e,t,i){return function(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}(e,ru(e,t,"set"),i),i}var au=i(39584);function lu(e,t){(0,au.b)((()=>{if(e&&e.ref&&t)return e.ref.current=t.current,()=>{e.ref&&(e.ref.current=null)}}))}var cu=i(43067),du=i(42584);const uu=(0,r.createContext)({isNative:!0,open:function(e,t){gu(e,(e=>pu(e,t)))},useHref:e=>e});function mu(){return(0,r.useContext)(uu)}function pu(e,t,i=!0){var n,r;let{metaKey:s,ctrlKey:o,altKey:a,shiftKey:l}=t;(0,qd.vU)()&&(null===(r=self.event)||void 0===r||null===(n=r.type)||void 0===n?void 0:n.startsWith("key"))&&"_blank"===e.target&&((0,qd.V5)()?s=!0:o=!0);let c=(0,qd.Pf)()&&(0,qd.V5)()&&!(0,qd.zc)()?new KeyboardEvent("keydown",{keyIdentifier:"Enter",metaKey:s,ctrlKey:o,altKey:a,shiftKey:l}):new MouseEvent("click",{metaKey:s,ctrlKey:o,altKey:a,shiftKey:l,bubbles:!0,cancelable:!0});pu.isOpening=i,(0,Wd.A)(e),e.dispatchEvent(c),pu.isOpening=!1}function gu(e,t){if(e instanceof HTMLAnchorElement)t(e);else if(e.hasAttribute("data-href")){let i=document.createElement("a");i.href=e.getAttribute("data-href"),e.hasAttribute("data-target")&&(i.target=e.getAttribute("data-target")),e.hasAttribute("data-rel")&&(i.rel=e.getAttribute("data-rel")),e.hasAttribute("data-download")&&(i.download=e.getAttribute("data-download")),e.hasAttribute("data-ping")&&(i.ping=e.getAttribute("data-ping")),e.hasAttribute("data-referrer-policy")&&(i.referrerPolicy=e.getAttribute("data-referrer-policy")),e.appendChild(i),t(i),e.removeChild(i)}}function hu(e){var t;const i=mu().useHref(null!==(t=null==e?void 0:e.href)&&void 0!==t?t:"");return{href:(null==e?void 0:e.href)?i:void 0,target:null==e?void 0:e.target,rel:null==e?void 0:e.rel,download:null==e?void 0:e.download,ping:null==e?void 0:e.ping,referrerPolicy:null==e?void 0:e.referrerPolicy}}pu.isOpening=!1;var fu=i(78487),vu=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};var bu=new WeakMap;class yu{continuePropagation(){ou(this,bu,!1)}get shouldStopPropagation(){return function(e,t){return t.get?t.get.call(e):t.value}(e=this,ru(e,bu,"get"));var e}constructor(e,t,i,n){var r;su(this,bu,{writable:!0,value:void 0}),ou(this,bu,!0);let s=null!==(r=null==n?void 0:n.target)&&void 0!==r?r:i.currentTarget;const o=null==s?void 0:s.getBoundingClientRect();let a,l,c=0,d=null;null!=i.clientX&&null!=i.clientY&&(l=i.clientX,d=i.clientY),o&&(null!=l&&null!=d?(a=l-o.left,c=d-o.top):(a=o.width/2,c=o.height/2)),this.type=e,this.pointerType=t,this.target=i.currentTarget,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.x=a,this.y=c}}const xu=Symbol("linkClicked"),ku="react-aria-pressable-style",Su="data-react-aria-pressable";function Cu(e){let t=function(e){let t=(0,r.useContext)(nu.O);if(t){let{register:i}=t,n=vu(t,["register"]);e=(0,gl.d)(n,e),i()}return lu(t,e.ref),e}(e),{onPress:i,onPressChange:n,onPressStart:s,onPressEnd:o,onPressUp:a,onClick:l,isDisabled:c,isPressed:d,preventFocusOnPress:u,shouldCancelOnPointerExit:m,allowTextSelectionOnPress:p,ref:g}=t,h=vu(t,["onPress","onPressChange","onPressStart","onPressEnd","onPressUp","onClick","isDisabled","isPressed","preventFocusOnPress","shouldCancelOnPointerExit","allowTextSelectionOnPress","ref"]),[f,v]=(0,r.useState)(!1),b=(0,r.useRef)({isPressed:!1,ignoreEmulatedMouseEvents:!1,didFirePressStart:!1,isTriggeringEvent:!1,activePointerId:null,target:null,isOverTarget:!1,pointerType:null,disposables:[]}),{addGlobalListener:y,removeAllGlobalListeners:x}=(0,Gd.x)(),k=(0,cu.i)(((e,t)=>{let i=b.current;if(c||i.didFirePressStart)return!1;let r=!0;if(i.isTriggeringEvent=!0,s){let i=new yu("pressstart",t,e);s(i),r=i.shouldStopPropagation}return n&&n(!0),i.isTriggeringEvent=!1,i.didFirePressStart=!0,v(!0),r})),S=(0,cu.i)(((e,t,r=!0)=>{let s=b.current;if(!s.didFirePressStart)return!1;s.didFirePressStart=!1,s.isTriggeringEvent=!0;let a=!0;if(o){let i=new yu("pressend",t,e);o(i),a=i.shouldStopPropagation}if(n&&n(!1),v(!1),i&&r&&!c){let n=new yu("press",t,e);i(n),a&&(a=n.shouldStopPropagation)}return s.isTriggeringEvent=!1,a})),C=(0,cu.i)(((e,t)=>{let i=b.current;if(c)return!1;if(a){i.isTriggeringEvent=!0;let n=new yu("pressup",t,e);return a(n),i.isTriggeringEvent=!1,n.shouldStopPropagation}return!0})),E=(0,cu.i)((e=>{let t=b.current;if(t.isPressed&&t.target){t.didFirePressStart&&null!=t.pointerType&&S(wu(t.target,e),t.pointerType,!1),t.isPressed=!1,t.isOverTarget=!1,t.activePointerId=null,t.pointerType=null,x(),p||iu(t.target);for(let e of t.disposables)e();t.disposables=[]}})),_=(0,cu.i)((e=>{m&&E(e)})),w=(0,cu.i)((e=>{null==l||l(e)})),I=(0,cu.i)(((e,t)=>{if(l){let i=new MouseEvent("click",e);(0,Yd.nh)(i,t),l((0,Yd.yA)(i))}})),A=(0,r.useMemo)((()=>{let e=b.current,t={onKeyDown(t){if(_u(t.nativeEvent,t.currentTarget)&&(0,Ld.bE)(t.currentTarget,(0,Ld.NI)(t.nativeEvent))){var n;Iu((0,Ld.NI)(t.nativeEvent),t.key)&&t.preventDefault();let r=!0;if(!e.isPressed&&!t.repeat){e.target=t.currentTarget,e.isPressed=!0,e.pointerType="keyboard",r=k(t,"keyboard");let n=t.currentTarget,s=t=>{_u(t,n)&&!t.repeat&&(0,Ld.bE)(n,(0,Ld.NI)(t))&&e.target&&C(wu(e.target,t),"keyboard")};y((0,Nd.r3)(t.currentTarget),"keyup",(0,du.t)(s,i),!0)}r&&t.stopPropagation(),t.metaKey&&(0,qd.V5)()&&(null===(n=e.metaKeyEvents)||void 0===n||n.set(t.key,t.nativeEvent))}else"Meta"===t.key&&(e.metaKeyEvents=new Map)},onClick(t){if((!t||(0,Ld.bE)(t.currentTarget,(0,Ld.NI)(t.nativeEvent)))&&t&&0===t.button&&!e.isTriggeringEvent&&!pu.isOpening){let i=!0;if(c&&t.preventDefault(),e.ignoreEmulatedMouseEvents||e.isPressed||"virtual"!==e.pointerType&&!(0,fu.Z)(t.nativeEvent)){if(e.isPressed&&"keyboard"!==e.pointerType){let n=e.pointerType||t.nativeEvent.pointerType||"virtual";i=S(wu(t.currentTarget,t),n,!0),e.isOverTarget=!1,w(t),E(t)}}else{let e=k(t,"virtual"),n=C(t,"virtual"),r=S(t,"virtual");w(t),i=e&&n&&r}e.ignoreEmulatedMouseEvents=!1,i&&t.stopPropagation()}}},i=t=>{var i;if(e.isPressed&&e.target&&_u(t,e.target)){var n;Iu((0,Ld.NI)(t),t.key)&&t.preventDefault();let i=(0,Ld.NI)(t),r=(0,Ld.bE)(e.target,(0,Ld.NI)(t));S(wu(e.target,t),"keyboard",r),r&&I(t,e.target),x(),"Enter"!==t.key&&Eu(e.target)&&(0,Ld.bE)(e.target,i)&&!t[xu]&&(t[xu]=!0,pu(e.target,t,!1)),e.isPressed=!1,null===(n=e.metaKeyEvents)||void 0===n||n.delete(t.key)}else if("Meta"===t.key&&(null===(i=e.metaKeyEvents)||void 0===i?void 0:i.size)){var r;let t=e.metaKeyEvents;e.metaKeyEvents=void 0;for(let i of t.values())null===(r=e.target)||void 0===r||r.dispatchEvent(new KeyboardEvent("keyup",i))}};if("undefined"!=typeof PointerEvent){t.onPointerDown=t=>{if(0!==t.button||!(0,Ld.bE)(t.currentTarget,(0,Ld.NI)(t.nativeEvent)))return;if((0,fu.c)(t.nativeEvent))return void(e.pointerType="virtual");e.pointerType=t.pointerType;let r=!0;if(!e.isPressed){e.isPressed=!0,e.isOverTarget=!0,e.activePointerId=t.pointerId,e.target=t.currentTarget,p||tu(e.target),r=k(t,e.pointerType);let s=(0,Ld.NI)(t.nativeEvent);"releasePointerCapture"in s&&s.releasePointerCapture(t.pointerId),y((0,Nd.r3)(t.currentTarget),"pointerup",i,!1),y((0,Nd.r3)(t.currentTarget),"pointercancel",n,!1)}r&&t.stopPropagation()},t.onMouseDown=t=>{if((0,Ld.bE)(t.currentTarget,(0,Ld.NI)(t.nativeEvent))&&0===t.button){if(u){let i=(0,Yd.WZ)(t.target);i&&e.disposables.push(i)}t.stopPropagation()}},t.onPointerUp=t=>{(0,Ld.bE)(t.currentTarget,(0,Ld.NI)(t.nativeEvent))&&"virtual"!==e.pointerType&&0===t.button&&C(t,e.pointerType||t.pointerType)},t.onPointerEnter=t=>{t.pointerId===e.activePointerId&&e.target&&!e.isOverTarget&&null!=e.pointerType&&(e.isOverTarget=!0,k(wu(e.target,t),e.pointerType))},t.onPointerLeave=t=>{t.pointerId===e.activePointerId&&e.target&&e.isOverTarget&&null!=e.pointerType&&(e.isOverTarget=!1,S(wu(e.target,t),e.pointerType,!1),_(t))};let i=t=>{if(t.pointerId===e.activePointerId&&e.isPressed&&0===t.button&&e.target){if((0,Ld.bE)(e.target,(0,Ld.NI)(t))&&null!=e.pointerType){let i=!1,n=setTimeout((()=>{e.isPressed&&e.target instanceof HTMLElement&&(i?E(t):((0,Wd.A)(e.target),e.target.click()))}),80);y(t.currentTarget,"click",(()=>i=!0),!0),e.disposables.push((()=>clearTimeout(n)))}else E(t);e.isOverTarget=!1}},n=e=>{E(e)};t.onDragStart=e=>{(0,Ld.bE)(e.currentTarget,(0,Ld.NI)(e.nativeEvent))&&E(e)}}else 0;return t}),[y,c,u,x,p,E,_,S,k,C,w,I]);return(0,r.useEffect)((()=>{if(!g)return;const e=(0,Nd.r3)(g.current);if(!e||!e.head||e.getElementById(ku))return;const t=e.createElement("style");t.id=ku,t.textContent="\n@layer {\n  [data-react-aria-pressable] {\n    touch-action: pan-x pan-y pinch-zoom;\n  }\n}\n    ".trim(),e.head.prepend(t)}),[g]),(0,r.useEffect)((()=>{let e=b.current;return()=>{var t;p||iu(null!==(t=e.target)&&void 0!==t?t:void 0);for(let t of e.disposables)t();e.disposables=[]}}),[p]),{isPressed:d||f,pressProps:(0,gl.d)(h,A,{[Su]:!0})}}function Eu(e){return"A"===e.tagName&&e.hasAttribute("href")}function _u(e,t){const{key:i,code:n}=e,r=t,s=r.getAttribute("role");return!("Enter"!==i&&" "!==i&&"Spacebar"!==i&&"Space"!==n||r instanceof(0,Nd.kR)(r).HTMLInputElement&&!Fu(r,i)||r instanceof(0,Nd.kR)(r).HTMLTextAreaElement||r.isContentEditable||("link"===s||!s&&Eu(r))&&"Enter"!==i)}function wu(e,t){let i=t.clientX,n=t.clientY;return{currentTarget:e,shiftKey:t.shiftKey,ctrlKey:t.ctrlKey,metaKey:t.metaKey,altKey:t.altKey,clientX:i,clientY:n}}function Iu(e,t){return e instanceof HTMLInputElement?!Fu(e,t):function(e){return!(e instanceof HTMLInputElement||(e instanceof HTMLButtonElement?"submit"===e.type||"reset"===e.type:Eu(e)))}(e)}const Au=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function Fu(e,t){return"checkbox"===e.type||"radio"===e.type?" "===t:Au.has(e.type)}let Pu=0;const Mu=new Map;function Ou(e){let[t,i]=(0,r.useState)();return(0,au.b)((()=>{if(!e)return;let t=Mu.get(e);if(t)i(t.element.id);else{let n="react-aria-description-"+Pu++;i(n);let r=document.createElement("div");r.id=n,r.style.display="none",r.textContent=e,document.body.appendChild(r),t={refCount:0,element:r},Mu.set(e,t)}return t.refCount++,()=>{t&&0==--t.refCount&&(t.element.remove(),Mu.delete(e))}}),[e]),{"aria-describedby":e?t:void 0}}const Tu=500;function Ru(e){let{isDisabled:t,onLongPressStart:i,onLongPressEnd:n,onLongPress:s,threshold:o=Tu,accessibilityDescription:a}=e;const l=(0,r.useRef)(void 0);let{addGlobalListener:c,removeGlobalListener:d}=(0,Gd.x)(),{pressProps:u}=Cu({isDisabled:t,onPressStart(e){if(e.continuePropagation(),("mouse"===e.pointerType||"touch"===e.pointerType)&&(i&&i(Object.assign(Object.assign({},e),{type:"longpressstart"})),l.current=setTimeout((()=>{e.target.dispatchEvent(new PointerEvent("pointercancel",{bubbles:!0})),(0,Nd.r3)(e.target).activeElement!==e.target&&(0,Wd.A)(e.target),s&&s(Object.assign(Object.assign({},e),{type:"longpress"})),l.current=void 0}),o),"touch"===e.pointerType)){let t=e=>{e.preventDefault()};c(e.target,"contextmenu",t,{once:!0}),c(self,"pointerup",(()=>{setTimeout((()=>{d(e.target,"contextmenu",t)}),30)}),{once:!0})}},onPressEnd(e){l.current&&clearTimeout(l.current),!n||"mouse"!==e.pointerType&&"touch"!==e.pointerType||n(Object.assign(Object.assign({},e),{type:"longpressend"}))}}),m=Ou(s&&!t?a:void 0);return{longPressProps:(0,gl.d)(u,m)}}const Bu=new Set(["Arab","Syrc","Samr","Mand","Thaa","Mend","Nkoo","Adlm","Rohg","Hebr"]),Uu=new Set(["ae","ar","arc","bcc","bqi","ckb","dv","fa","glk","he","ku","mzn","nqo","pnb","ps","sd","ug","ur","yi"]);function Gu(e){if(Intl.Locale){let t=new Intl.Locale(e).maximize(),i="function"==typeof t.getTextInfo?t.getTextInfo():t.textInfo;if(i)return"rtl"===i.direction;if(t.script)return Bu.has(t.script)}let t=e.split("-")[0];return Uu.has(t)}var Nu=i(9499);const Lu=Symbol.for("react-aria.i18n.locale");function Du(){let e="undefined"!=typeof self&&self[Lu]||"undefined"!=typeof navigator&&(navigator.language||navigator.userLanguage)||"en-US";try{Intl.DateTimeFormat.supportedLocalesOf([e])}catch(t){e="en-US"}return{locale:e,direction:Gu(e)?"rtl":"ltr"}}let ju=Du(),zu=new Set;function Vu(){ju=Du();for(let e of zu)e(ju)}function Ku(){let e=(0,Nu.Av)(),[t,i]=(0,r.useState)(ju);return(0,r.useEffect)((()=>(0===zu.size&&self.addEventListener("languagechange",Vu),zu.add(i),()=>{zu.delete(i),0===zu.size&&self.removeEventListener("languagechange",Vu)})),[]),e?{locale:"en-US",direction:"ltr"}:t}const Zu=r.createContext(null);function Hu(){let e=Ku();return(0,r.useContext)(Zu)||e}const $u=Symbol.for("react-aria.i18n.locale"),Wu=Symbol.for("react-aria.i18n.strings");let Yu;class qu{getStringForLocale(e,t){let i=this.getStringsForLocale(t)[e];if(!i)throw new Error(`Could not find intl message ${e} in ${t} locale`);return i}getStringsForLocale(e){let t=this.strings[e];return t||(t=function(e,t,i="en-US"){if(t[e])return t[e];let n=function(e){return Intl.Locale?new Intl.Locale(e).language:e.split("-")[0]}(e);if(t[n])return t[n];for(let e in t)if(e.startsWith(n+"-"))return t[e];return t[i]}(e,this.strings,this.defaultLocale),this.strings[e]=t),t}static getGlobalDictionaryForPackage(e){if("undefined"==typeof self)return null;let t=self[$u];if(void 0===Yu){let e=self[Wu];if(!e)return null;Yu={};for(let i in e)Yu[i]=new qu({[t]:e[i]},t)}let i=null==Yu?void 0:Yu[e];if(!i)throw new Error(`Strings for package "${e}" were not included by LocalizedStringProvider. Please add it to the list passed to createLocalizedStringDictionary.`);return i}constructor(e,t="en-US"){this.strings=Object.fromEntries(Object.entries(e).filter((([,e])=>e))),this.defaultLocale=t}}const Xu=new Map,Qu=new Map;class Ju{format(e,t){let i=this.strings.getStringForLocale(e,this.locale);return"function"==typeof i?i(t,this):i}plural(e,t,i="cardinal"){let n=t["="+e];if(n)return"function"==typeof n?n():n;let r=this.locale+":"+i,s=Xu.get(r);return s||(s=new Intl.PluralRules(this.locale,{type:i}),Xu.set(r,s)),n=t[s.select(e)]||t.other,"function"==typeof n?n():n}number(e){let t=Qu.get(this.locale);return t||(t=new Intl.NumberFormat(this.locale),Qu.set(this.locale,t)),t.format(e)}select(e,t){let i=e[t]||e.other;return"function"==typeof i?i():i}constructor(e,t){this.locale=e,this.strings=t}}const em=new WeakMap;function tm(e,t){return t&&qu.getGlobalDictionaryForPackage(t)||function(e){let t=em.get(e);return t||(t=new qu(e),em.set(e,t)),t}(e)}function im(e,t){let{locale:i}=Hu(),n=tm(e,t);return(0,r.useMemo)((()=>new Ju(i,n)),[i,n])}const nm=new WeakMap;function rm(e){let{triggerRef:t,isOpen:i,onClose:n}=e;(0,r.useEffect)((()=>{if(!i||null===n)return;let e=e=>{let i=e.target;if(!t.current||i instanceof Node&&!i.contains(t.current))return;if(e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement)return;let r=n||nm.get(t.current);r&&r()};return self.addEventListener("scroll",e,!0),()=>{self.removeEventListener("scroll",e,!0)}}),[i,n,t])}function sm(e,t,i){let n,{type:s}=e,{isOpen:o}=t;(0,r.useEffect)((()=>{i&&i.current&&nm.set(i.current,t.close)})),"menu"===s?n=!0:"listbox"===s&&(n="listbox");let a=(0,Tl.Me)();return{triggerProps:{"aria-haspopup":n,"aria-expanded":o,"aria-controls":o?a:void 0,onPress:t.toggle},overlayProps:{id:a}}}function om(e,t,i){let{type:n="menu",isDisabled:r,trigger:s="press"}=e,o=(0,Tl.Me)(),{triggerProps:a,overlayProps:l}=sm({type:n},t,i),c=im((d=$d)&&d.__esModule?d.default:d,"@react-aria/menu");var d;let{longPressProps:u}=Ru({isDisabled:r||"longPress"!==s,accessibilityDescription:c.format("longPressMessage"),onLongPressStart(){t.close()},onLongPress(){t.open("first")}}),m={preventFocusOnPress:!0,onPressStart(e){"touch"===e.pointerType||"keyboard"===e.pointerType||r||((0,Wd.A)(e.target),t.open("virtual"===e.pointerType?"first":null))},onPress(e){"touch"!==e.pointerType||r||((0,Wd.A)(e.target),t.toggle())}};return delete a.onPress,{menuTriggerProps:Object.assign(Object.assign(Object.assign({},a),"press"===s?m:u),{id:o,onKeyDown:e=>{if(!r&&("longPress"!==s||e.altKey)&&i&&i.current)switch(e.key){case"Enter":case" ":if("longPress"===s)return;case"ArrowDown":"continuePropagation"in e||e.stopPropagation(),e.preventDefault(),t.toggle("first");break;case"ArrowUp":"continuePropagation"in e||e.stopPropagation(),e.preventDefault(),t.toggle("last");break;default:"continuePropagation"in e&&e.continuePropagation()}}}),menuProps:Object.assign(Object.assign({},l),{"aria-labelledby":o,autoFocus:t.focusStrategy||!0,onClose:t.close})}}var am=i(53268);function lm(e){let t=(0,am.d)(e),[i,n]=(0,r.useState)(null),[s,o]=(0,r.useState)([]);return{focusStrategy:i,...t,open(e=null){n(e),t.open()},toggle(e=null){n(e),t.toggle()},close(){o([]),t.close()},expandedKeysStack:s,openSubmenu:(e,t)=>{o((i=>t>i.length?i:[...i.slice(0,t),e]))},closeSubmenu:(e,t)=>{o((i=>i[t]===e?i.slice(0,t):i))}}}var cm=i(58414);const dm=new WeakMap,um=new Set(["id"]),mm=new Set(["aria-label","aria-labelledby","aria-describedby","aria-details"]),pm=new Set(["href","hrefLang","target","rel","download","ping","referrerPolicy"]),gm=/^(data-.*)$/;function hm(e,t={}){let{labelable:i,isLink:n,propNames:r}=t,s={};for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(um.has(t)||i&&mm.has(t)||n&&pm.has(t)||(null==r?void 0:r.has(t))||gm.test(t))&&(s[t]=e[t]);return s}function fm(e){return(0,qd.ad)()?e.altKey:e.ctrlKey}function vm(e,t){var i,n;let r=`[data-key="${CSS.escape(String(t))}"]`,s=null===(i=e.current)||void 0===i?void 0:i.dataset.collection;return s&&(r=`[data-collection="${CSS.escape(s)}"]${r}`),null===(n=e.current)||void 0===n?void 0:n.querySelector(r)}const bm=new WeakMap;function ym(e){let t=(0,Tl.Me)();return bm.set(e,t),t}function xm(e){let{keyboardDelegate:t,selectionManager:i,onTypeSelect:n}=e,s=(0,r.useRef)({search:"",timeout:void 0}).current;return{typeSelectProps:{onKeyDownCapture:t.getKeyForSearch?e=>{let r=1!==(o=e.key).length&&/^[A-Z]/i.test(o)?"":o;var o;if(r&&!e.ctrlKey&&!e.metaKey&&e.currentTarget.contains(e.target)){if(" "===r&&s.search.trim().length>0&&(e.preventDefault(),"continuePropagation"in e||e.stopPropagation()),s.search+=r,null!=t.getKeyForSearch){let e=t.getKeyForSearch(s.search,i.focusedKey);null==e&&(e=t.getKeyForSearch(s.search)),null!=e&&(i.setFocusedKey(e),n&&n(e))}clearTimeout(s.timeout),s.timeout=setTimeout((()=>{s.search=""}),1e3)}}:void 0}}}function km(e){return(0,qd.V5)()?e.metaKey:e.ctrlKey}function Sm(e,t,i,n){let s=(0,cu.i)(i),o=null==i;(0,r.useEffect)((()=>{if(o||!e.current)return;let i=e.current;return i.addEventListener(t,s,n),()=>{i.removeEventListener(t,s,n)}}),[e,t,n,o,s])}function Cm(e,t){if(!e)return!1;let i=self.getComputedStyle(e),n=/(auto|scroll)/.test(i.overflow+i.overflowX+i.overflowY);return n&&t&&(n=e.scrollHeight!==e.clientHeight||e.scrollWidth!==e.clientWidth),n}function Em(e,t){const i=[];for(;e&&e!==document.documentElement;)Cm(e,t)&&i.push(e),e=e.parentElement;return i}function _m(e,t){let i=wm(e,t,"left"),n=wm(e,t,"top"),r=t.offsetWidth,s=t.offsetHeight,o=e.scrollLeft,a=e.scrollTop,{borderTopWidth:l,borderLeftWidth:c,scrollPaddingTop:d,scrollPaddingRight:u,scrollPaddingBottom:m,scrollPaddingLeft:p}=getComputedStyle(e),g=o+parseInt(c,10),h=a+parseInt(l,10),f=g+e.clientWidth,v=h+e.clientHeight,b=parseInt(d,10)||0,y=parseInt(m,10)||0,x=parseInt(u,10)||0,k=parseInt(p,10)||0;i<=o+k?o=i-parseInt(c,10)-k:i+r>f-x&&(o+=i+r-f+x),n<=h+b?a=n-parseInt(l,10)-b:n+s>v-y&&(a+=n+s-v+y),e.scrollLeft=o,e.scrollTop=a}function wm(e,t,i){const n="left"===i?"offsetLeft":"offsetTop";let r=0;for(;t.offsetParent&&(r+=t[n],t.offsetParent!==e);){if(t.offsetParent.contains(e)){r-=e[n];break}t=t.offsetParent}return r}function Im(e,t){if(e&&document.contains(e)){let o=document.scrollingElement||document.documentElement;if("hidden"===self.getComputedStyle(o).overflow){let t=Em(e);for(let i of t)_m(i,e)}else{var i;let{left:o,top:a}=e.getBoundingClientRect();null==e||null===(i=e.scrollIntoView)||void 0===i||i.call(e,{block:"nearest"});let{left:l,top:c}=e.getBoundingClientRect();var n,r,s;if(Math.abs(o-l)>1||Math.abs(a-c)>1)null==t||null===(r=t.containingElement)||void 0===r||null===(n=r.scrollIntoView)||void 0===n||n.call(r,{block:"center",inline:"center"}),null===(s=e.scrollIntoView)||void 0===s||s.call(e,{block:"nearest"})}}}function Am(e,t){const i=(0,r.useRef)(!0),n=(0,r.useRef)(null);(0,au.b)((()=>(i.current=!0,()=>{i.current=!1})),[]),(0,au.b)((()=>{i.current?i.current=!1:n.current&&!t.some(((e,t)=>!Object.is(e,n[t])))||e(),n.current=t}),t)}var Fm=i(33411),Pm=i(58726),Mm=i(98365);function Om(e){let t=function(e){let t=(0,Ld.vY)(e),i=null==t?void 0:t.getAttribute("aria-activedescendant");return i&&e.getElementById(i)||t}((0,Nd.r3)(e));t!==e&&(t&&function(e,t){e.dispatchEvent(new FocusEvent("blur",{relatedTarget:t})),e.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:t}))}(t,e),e&&function(e,t){e.dispatchEvent(new FocusEvent("focus",{relatedTarget:t})),e.dispatchEvent(new FocusEvent("focusin",{bubbles:!0,relatedTarget:t}))}(e,t))}function Tm(e){let{selectionManager:t,keyboardDelegate:i,ref:n,autoFocus:s=!1,shouldFocusWrap:o=!1,disallowEmptySelection:a=!1,disallowSelectAll:l=!1,escapeKeyBehavior:c="clearSelection",selectOnFocus:d="replace"===t.selectionBehavior,disallowTypeAhead:u=!1,shouldUseVirtualFocus:m,allowsTabNavigation:p=!1,isVirtualized:g,scrollRef:h=n,linkBehavior:f="action"}=e,{direction:v}=Hu(),b=mu(),y=(0,r.useRef)({top:0,left:0});Sm(h,"scroll",g?void 0:()=>{var e,t,i,n;y.current={top:null!==(i=null===(e=h.current)||void 0===e?void 0:e.scrollTop)&&void 0!==i?i:0,left:null!==(n=null===(t=h.current)||void 0===t?void 0:t.scrollLeft)&&void 0!==n?n:0}});let x=(0,r.useRef)(!1);Sm(n,"react-aria-focus",m?e=>{let{detail:i}=e;e.stopPropagation(),t.setFocused(!0),"first"===(null==i?void 0:i.focusStrategy)&&(x.current=!0)}:void 0);let k=(0,cu.i)((()=>{var e,r;let s=null!==(r=null===(e=i.getFirstKey)||void 0===e?void 0:e.call(i))&&void 0!==r?r:null;null==s?(Om(n.current),t.collection.size>0&&(x.current=!1)):(t.setFocusedKey(s),x.current=!1)}));Am((()=>{x.current&&k()}),[t.collection,k]);let S=(0,cu.i)((()=>{t.collection.size>0&&(x.current=!1)}));Am((()=>{S()}),[t.focusedKey,S]),Sm(n,"react-aria-clear-focus",m?e=>{var i;e.stopPropagation(),t.setFocused(!1),(null===(i=e.detail)||void 0===i?void 0:i.clearFocusKey)&&t.setFocusedKey(null)}:void 0);const C=(0,r.useRef)(s),E=(0,r.useRef)(!1);(0,r.useEffect)((()=>{if(C.current){var e,r;let l=null;var o,a;"first"===s&&(l=null!==(o=null===(e=i.getFirstKey)||void 0===e?void 0:e.call(i))&&void 0!==o?o:null),"last"===s&&(l=null!==(a=null===(r=i.getLastKey)||void 0===r?void 0:r.call(i))&&void 0!==a?a:null);let c=t.selectedKeys;if(c.size)for(let e of c)if(t.canSelectItem(e)){l=e;break}t.setFocused(!0),t.setFocusedKey(l),null==l&&!m&&n.current&&(0,Pm.e)(n.current),t.collection.size>0&&(C.current=!1,E.current=!0)}}));let _=(0,r.useRef)(t.focusedKey),w=(0,r.useRef)(null);(0,r.useEffect)((()=>{if(t.isFocused&&null!=t.focusedKey&&(t.focusedKey!==_.current||E.current)&&h.current&&n.current){let e=(0,Fm.Jz)(),i=vm(n,t.focusedKey);if(!(i instanceof HTMLElement))return;("keyboard"===e||E.current)&&(w.current&&cancelAnimationFrame(w.current),w.current=requestAnimationFrame((()=>{h.current&&_m(h.current,i)})),"virtual"!==e&&Im(i,{containingElement:n.current}))}!m&&t.isFocused&&null==t.focusedKey&&null!=_.current&&n.current&&(0,Pm.e)(n.current),_.current=t.focusedKey,E.current=!1})),(0,r.useEffect)((()=>()=>{w.current&&cancelAnimationFrame(w.current)}),[]),Sm(n,"react-aria-focus-scope-restore",(e=>{e.preventDefault(),t.setFocused(!0)}));let I,A={onKeyDown:e=>{var r;if(e.altKey&&"Tab"===e.key&&e.preventDefault(),!(null===(r=n.current)||void 0===r?void 0:r.contains(e.target)))return;const s=(i,r)=>{if(null!=i){if(t.isLink(i)&&"selection"===f&&d&&!fm(e)){(0,$o.flushSync)((()=>{t.setFocusedKey(i,r)}));let s=vm(n,i),o=t.getItemProps(i);return void(s&&b.open(s,e,o.href,o.routerOptions))}if(t.setFocusedKey(i,r),t.isLink(i)&&"override"===f)return;e.shiftKey&&"multiple"===t.selectionMode?t.extendSelection(i):d&&!fm(e)&&t.replaceSelection(i)}};switch(e.key){case"ArrowDown":if(i.getKeyBelow){var u,m,g;let n=null!=t.focusedKey?null===(u=i.getKeyBelow)||void 0===u?void 0:u.call(i,t.focusedKey):null===(m=i.getFirstKey)||void 0===m?void 0:m.call(i);null==n&&o&&(n=null===(g=i.getFirstKey)||void 0===g?void 0:g.call(i,t.focusedKey)),null!=n&&(e.preventDefault(),s(n))}break;case"ArrowUp":if(i.getKeyAbove){var h,y,x;let n=null!=t.focusedKey?null===(h=i.getKeyAbove)||void 0===h?void 0:h.call(i,t.focusedKey):null===(y=i.getLastKey)||void 0===y?void 0:y.call(i);null==n&&o&&(n=null===(x=i.getLastKey)||void 0===x?void 0:x.call(i,t.focusedKey)),null!=n&&(e.preventDefault(),s(n))}break;case"ArrowLeft":if(i.getKeyLeftOf){var k,S,C;let n=null!=t.focusedKey?null===(k=i.getKeyLeftOf)||void 0===k?void 0:k.call(i,t.focusedKey):null;null==n&&o&&(n="rtl"===v?null===(S=i.getFirstKey)||void 0===S?void 0:S.call(i,t.focusedKey):null===(C=i.getLastKey)||void 0===C?void 0:C.call(i,t.focusedKey)),null!=n&&(e.preventDefault(),s(n,"rtl"===v?"first":"last"))}break;case"ArrowRight":if(i.getKeyRightOf){var E,_,w;let n=null!=t.focusedKey?null===(E=i.getKeyRightOf)||void 0===E?void 0:E.call(i,t.focusedKey):null;null==n&&o&&(n="rtl"===v?null===(_=i.getLastKey)||void 0===_?void 0:_.call(i,t.focusedKey):null===(w=i.getFirstKey)||void 0===w?void 0:w.call(i,t.focusedKey)),null!=n&&(e.preventDefault(),s(n,"rtl"===v?"last":"first"))}break;case"Home":if(i.getFirstKey){if(null===t.focusedKey&&e.shiftKey)return;e.preventDefault();let n=i.getFirstKey(t.focusedKey,km(e));t.setFocusedKey(n),null!=n&&(km(e)&&e.shiftKey&&"multiple"===t.selectionMode?t.extendSelection(n):d&&t.replaceSelection(n))}break;case"End":if(i.getLastKey){if(null===t.focusedKey&&e.shiftKey)return;e.preventDefault();let n=i.getLastKey(t.focusedKey,km(e));t.setFocusedKey(n),null!=n&&(km(e)&&e.shiftKey&&"multiple"===t.selectionMode?t.extendSelection(n):d&&t.replaceSelection(n))}break;case"PageDown":if(i.getKeyPageBelow&&null!=t.focusedKey){let n=i.getKeyPageBelow(t.focusedKey);null!=n&&(e.preventDefault(),s(n))}break;case"PageUp":if(i.getKeyPageAbove&&null!=t.focusedKey){let n=i.getKeyPageAbove(t.focusedKey);null!=n&&(e.preventDefault(),s(n))}break;case"a":km(e)&&"multiple"===t.selectionMode&&!0!==l&&(e.preventDefault(),t.selectAll());break;case"Escape":"clearSelection"!==c||a||0===t.selectedKeys.size||(e.stopPropagation(),e.preventDefault(),t.clearSelection());break;case"Tab":if(!p){if(e.shiftKey)n.current.focus();else{let e,t,i=(0,Mm.QL)(n.current,{tabbable:!0});do{t=i.lastChild(),t&&(e=t)}while(t);e&&!e.contains(document.activeElement)&&(0,Wd.A)(e)}break}}},onFocus:e=>{if(t.isFocused)e.currentTarget.contains(e.target)||t.setFocused(!1);else if(e.currentTarget.contains(e.target)){if(t.setFocused(!0),null==t.focusedKey){var r,s;let n=e=>{null!=e&&(t.setFocusedKey(e),d&&!t.isSelected(e)&&t.replaceSelection(e))},l=e.relatedTarget;var o,a;l&&e.currentTarget.compareDocumentPosition(l)&Node.DOCUMENT_POSITION_FOLLOWING?n(null!==(o=t.lastSelectedKey)&&void 0!==o?o:null===(r=i.getLastKey)||void 0===r?void 0:r.call(i)):n(null!==(a=t.firstSelectedKey)&&void 0!==a?a:null===(s=i.getFirstKey)||void 0===s?void 0:s.call(i))}else!g&&h.current&&(h.current.scrollTop=y.current.top,h.current.scrollLeft=y.current.left);if(null!=t.focusedKey&&h.current){let e=vm(n,t.focusedKey);if(e instanceof HTMLElement){e.contains(document.activeElement)||m||(0,Wd.A)(e),"keyboard"===(0,Fm.Jz)()&&Im(e,{containingElement:n.current})}}}},onBlur:e=>{e.currentTarget.contains(e.relatedTarget)||t.setFocused(!1)},onMouseDown(e){h.current===e.target&&e.preventDefault()}},{typeSelectProps:F}=xm({keyboardDelegate:i,selectionManager:t});u||(A=(0,gl.d)(F,A)),m||(I=null==t.focusedKey?0:-1);let P=ym(t.collection);return{collectionProps:(0,gl.d)(A,{tabIndex:I,"data-collection":P})}}class Rm{getItemRect(e){let t=this.ref.current;if(!t)return null;let i=null!=e?vm(this.ref,e):null;if(!i)return null;let n=t.getBoundingClientRect(),r=i.getBoundingClientRect();return{x:r.left-n.left+t.scrollLeft,y:r.top-n.top+t.scrollTop,width:r.width,height:r.height}}getContentSize(){let e=this.ref.current;var t,i;return{width:null!==(t=null==e?void 0:e.scrollWidth)&&void 0!==t?t:0,height:null!==(i=null==e?void 0:e.scrollHeight)&&void 0!==i?i:0}}getVisibleRect(){let e=this.ref.current;var t,i,n,r;return{x:null!==(t=null==e?void 0:e.scrollLeft)&&void 0!==t?t:0,y:null!==(i=null==e?void 0:e.scrollTop)&&void 0!==i?i:0,width:null!==(n=null==e?void 0:e.offsetWidth)&&void 0!==n?n:0,height:null!==(r=null==e?void 0:e.offsetHeight)&&void 0!==r?r:0}}constructor(e){this.ref=e}}class Bm{isDisabled(e){var t;return"all"===this.disabledBehavior&&((null===(t=e.props)||void 0===t?void 0:t.isDisabled)||this.disabledKeys.has(e.key))}findNextNonDisabled(e,t){let i=e;for(;null!=i;){let e=this.collection.getItem(i);if("item"===(null==e?void 0:e.type)&&!this.isDisabled(e))return i;i=t(i)}return null}getNextKey(e){let t=e;return t=this.collection.getKeyAfter(t),this.findNextNonDisabled(t,(e=>this.collection.getKeyAfter(e)))}getPreviousKey(e){let t=e;return t=this.collection.getKeyBefore(t),this.findNextNonDisabled(t,(e=>this.collection.getKeyBefore(e)))}findKey(e,t,i){let n=e,r=this.layoutDelegate.getItemRect(n);if(!r||null==n)return null;let s=r;do{if(n=t(n),null==n)break;r=this.layoutDelegate.getItemRect(n)}while(r&&i(s,r)&&null!=n);return n}isSameRow(e,t){return e.y===t.y||e.x!==t.x}isSameColumn(e,t){return e.x===t.x||e.y!==t.y}getKeyBelow(e){return"grid"===this.layout&&"vertical"===this.orientation?this.findKey(e,(e=>this.getNextKey(e)),this.isSameRow):this.getNextKey(e)}getKeyAbove(e){return"grid"===this.layout&&"vertical"===this.orientation?this.findKey(e,(e=>this.getPreviousKey(e)),this.isSameRow):this.getPreviousKey(e)}getNextColumn(e,t){return t?this.getPreviousKey(e):this.getNextKey(e)}getKeyRightOf(e){let t="ltr"===this.direction?"getKeyRightOf":"getKeyLeftOf";return this.layoutDelegate[t]?(e=this.layoutDelegate[t](e),this.findNextNonDisabled(e,(e=>this.layoutDelegate[t](e)))):"grid"===this.layout?"vertical"===this.orientation?this.getNextColumn(e,"rtl"===this.direction):this.findKey(e,(e=>this.getNextColumn(e,"rtl"===this.direction)),this.isSameColumn):"horizontal"===this.orientation?this.getNextColumn(e,"rtl"===this.direction):null}getKeyLeftOf(e){let t="ltr"===this.direction?"getKeyLeftOf":"getKeyRightOf";return this.layoutDelegate[t]?(e=this.layoutDelegate[t](e),this.findNextNonDisabled(e,(e=>this.layoutDelegate[t](e)))):"grid"===this.layout?"vertical"===this.orientation?this.getNextColumn(e,"ltr"===this.direction):this.findKey(e,(e=>this.getNextColumn(e,"ltr"===this.direction)),this.isSameColumn):"horizontal"===this.orientation?this.getNextColumn(e,"ltr"===this.direction):null}getFirstKey(){let e=this.collection.getFirstKey();return this.findNextNonDisabled(e,(e=>this.collection.getKeyAfter(e)))}getLastKey(){let e=this.collection.getLastKey();return this.findNextNonDisabled(e,(e=>this.collection.getKeyBefore(e)))}getKeyPageAbove(e){let t=this.ref.current,i=this.layoutDelegate.getItemRect(e);if(!i)return null;if(t&&!Cm(t))return this.getFirstKey();let n=e;if("horizontal"===this.orientation){let e=Math.max(0,i.x+i.width-this.layoutDelegate.getVisibleRect().width);for(;i&&i.x>e&&null!=n;)n=this.getKeyAbove(n),i=null==n?null:this.layoutDelegate.getItemRect(n)}else{let e=Math.max(0,i.y+i.height-this.layoutDelegate.getVisibleRect().height);for(;i&&i.y>e&&null!=n;)n=this.getKeyAbove(n),i=null==n?null:this.layoutDelegate.getItemRect(n)}return null!=n?n:this.getFirstKey()}getKeyPageBelow(e){let t=this.ref.current,i=this.layoutDelegate.getItemRect(e);if(!i)return null;if(t&&!Cm(t))return this.getLastKey();let n=e;if("horizontal"===this.orientation){let e=Math.min(this.layoutDelegate.getContentSize().width,i.y-i.width+this.layoutDelegate.getVisibleRect().width);for(;i&&i.x<e&&null!=n;)n=this.getKeyBelow(n),i=null==n?null:this.layoutDelegate.getItemRect(n)}else{let e=Math.min(this.layoutDelegate.getContentSize().height,i.y-i.height+this.layoutDelegate.getVisibleRect().height);for(;i&&i.y<e&&null!=n;)n=this.getKeyBelow(n),i=null==n?null:this.layoutDelegate.getItemRect(n)}return null!=n?n:this.getLastKey()}getKeyForSearch(e,t){if(!this.collator)return null;let i=this.collection,n=t||this.getFirstKey();for(;null!=n;){let t=i.getItem(n);if(!t)return null;let r=t.textValue.slice(0,e.length);if(t.textValue&&0===this.collator.compare(r,e))return n;n=this.getNextKey(n)}return null}constructor(...e){if(1===e.length){let t=e[0];this.collection=t.collection,this.ref=t.ref,this.collator=t.collator,this.disabledKeys=t.disabledKeys||new Set,this.disabledBehavior=t.disabledBehavior||"all",this.orientation=t.orientation||"vertical",this.direction=t.direction,this.layout=t.layout||"stack",this.layoutDelegate=t.layoutDelegate||new Rm(t.ref)}else this.collection=e[0],this.disabledKeys=e[1],this.ref=e[2],this.collator=e[3],this.layout="stack",this.orientation="vertical",this.disabledBehavior="all",this.layoutDelegate=new Rm(this.ref);"stack"===this.layout&&"vertical"===this.orientation&&(this.getKeyLeftOf=void 0,this.getKeyRightOf=void 0)}}let Um=new Map;function Gm(e){let{locale:t}=Hu(),i=t+(e?Object.entries(e).sort(((e,t)=>e[0]<t[0]?-1:1)).join():"");if(Um.has(i))return Um.get(i);let n=new Intl.Collator(t,e);return Um.set(i,n),n}function Nm(e){let{selectionManager:t,collection:i,disabledKeys:n,ref:s,keyboardDelegate:o,layoutDelegate:a}=e,l=Gm({usage:"search",sensitivity:"base"}),c=t.disabledBehavior,d=(0,r.useMemo)((()=>o||new Bm({collection:i,disabledKeys:n,disabledBehavior:c,ref:s,collator:l,layoutDelegate:a})),[o,a,i,n,s,l,c]),{collectionProps:u}=Tm(Object.assign(Object.assign({},e),{ref:s,selectionManager:t,keyboardDelegate:d}));return{listProps:u}}var Lm=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};class Dm{*[Symbol.iterator](){yield*this.iterable}get size(){return this.keyMap.size}getKeys(){return this.keyMap.keys()}getKeyBefore(e){let t=this.keyMap.get(e);var i;return t&&null!==(i=t.prevKey)&&void 0!==i?i:null}getKeyAfter(e){let t=this.keyMap.get(e);var i;return t&&null!==(i=t.nextKey)&&void 0!==i?i:null}getFirstKey(){return this.firstKey}getLastKey(){return this.lastKey}getItem(e){var t;return null!==(t=this.keyMap.get(e))&&void 0!==t?t:null}at(e){const t=[...this.getKeys()];return this.getItem(t[e])}constructor(e,{expandedKeys:t}={}){this.keyMap=new Map,this.firstKey=null,this.lastKey=null,this.iterable=e,t=t||new Set;let i=e=>{if(this.keyMap.set(e.key,e),e.childNodes&&("section"===e.type||t.has(e.key)))for(let t of e.childNodes)i(t)};for(let t of e)i(t);let n=null,r=0;for(let[e,t]of this.keyMap)n?(n.nextKey=e,t.prevKey=n.key):(this.firstKey=e,t.prevKey=void 0),"item"===t.type&&(t.index=r++),n=t,n.nextKey=void 0;var s;this.lastKey=null!==(s=null==n?void 0:n.key)&&void 0!==s?s:null}}class jm extends Set{constructor(e,t,i){super(e),e instanceof jm?(this.anchorKey=null!=t?t:e.anchorKey,this.currentKey=null!=i?i:e.currentKey):(this.anchorKey=null!=t?t:null,this.currentKey=null!=i?i:null)}}var zm=i(29335);function Vm(e){let{selectionMode:t="none",disallowEmptySelection:i=!1,allowDuplicateSelectionEvents:n,selectionBehavior:s="toggle",disabledBehavior:o="all"}=e,a=(0,r.useRef)(!1),[,l]=(0,r.useState)(!1),c=(0,r.useRef)(null),d=(0,r.useRef)(null),[,u]=(0,r.useState)(null),m=(0,r.useMemo)((()=>Km(e.selectedKeys)),[e.selectedKeys]),p=(0,r.useMemo)((()=>Km(e.defaultSelectedKeys,new jm)),[e.defaultSelectedKeys]),[g,h]=(0,zm.z)(m,p,e.onSelectionChange),f=(0,r.useMemo)((()=>e.disabledKeys?new Set(e.disabledKeys):new Set),[e.disabledKeys]),[v,b]=(0,r.useState)(s);"replace"===s&&"toggle"===v&&"object"==typeof g&&0===g.size&&b("replace");let y=(0,r.useRef)(s);return(0,r.useEffect)((()=>{s!==y.current&&(b(s),y.current=s)}),[s]),{selectionMode:t,disallowEmptySelection:i,selectionBehavior:v,setSelectionBehavior:b,get isFocused(){return a.current},setFocused(e){a.current=e,l(e)},get focusedKey(){return c.current},get childFocusStrategy(){return d.current},setFocusedKey(e,t="first"){c.current=e,d.current=t,u(e)},selectedKeys:g,setSelectedKeys(e){!n&&function(e,t){if(e.size!==t.size)return!1;for(let i of e)if(!t.has(i))return!1;return!0}(e,g)||h(e)},disabledKeys:f,disabledBehavior:o}}function Km(e,t){return e?"all"===e?"all":new jm(e):t}function Zm(e,t){return"function"==typeof t.getChildren?t.getChildren(e.key):e.childNodes}function Hm(e){return function(e,t){if(t<0)return;let i=0;for(let n of e){if(i===t)return n;i++}}(e,0)}function $m(e,t,i){if(t.parentKey===i.parentKey)return t.index-i.index;let n=[...Wm(e,t),t],r=[...Wm(e,i),i],s=n.slice(0,r.length).findIndex(((e,t)=>e!==r[t]));return-1!==s?(t=n[s],i=r[s],t.index-i.index):n.findIndex((e=>e===i))>=0?1:(r.findIndex((e=>e===t)),-1)}function Wm(e,t){let i=[],n=t;for(;null!=(null==n?void 0:n.parentKey);)n=e.getItem(n.parentKey),n&&i.unshift(n);return i}class Ym{get selectionMode(){return this.state.selectionMode}get disallowEmptySelection(){return this.state.disallowEmptySelection}get selectionBehavior(){return this.state.selectionBehavior}setSelectionBehavior(e){this.state.setSelectionBehavior(e)}get isFocused(){return this.state.isFocused}setFocused(e){this.state.setFocused(e)}get focusedKey(){return this.state.focusedKey}get childFocusStrategy(){return this.state.childFocusStrategy}setFocusedKey(e,t){(null==e||this.collection.getItem(e))&&this.state.setFocusedKey(e,t)}get selectedKeys(){return"all"===this.state.selectedKeys?new Set(this.getSelectAllKeys()):this.state.selectedKeys}get rawSelection(){return this.state.selectedKeys}isSelected(e){if("none"===this.state.selectionMode)return!1;let t=this.getKey(e);return null!=t&&("all"===this.state.selectedKeys?this.canSelectItem(t):this.state.selectedKeys.has(t))}get isEmpty(){return"all"!==this.state.selectedKeys&&0===this.state.selectedKeys.size}get isSelectAll(){if(this.isEmpty)return!1;if("all"===this.state.selectedKeys)return!0;if(null!=this._isSelectAll)return this._isSelectAll;let e=this.getSelectAllKeys(),t=this.state.selectedKeys;return this._isSelectAll=e.every((e=>t.has(e))),this._isSelectAll}get firstSelectedKey(){let e=null;for(let t of this.state.selectedKeys){let i=this.collection.getItem(t);(!e||i&&$m(this.collection,i,e)<0)&&(e=i)}var t;return null!==(t=null==e?void 0:e.key)&&void 0!==t?t:null}get lastSelectedKey(){let e=null;for(let t of this.state.selectedKeys){let i=this.collection.getItem(t);(!e||i&&$m(this.collection,i,e)>0)&&(e=i)}var t;return null!==(t=null==e?void 0:e.key)&&void 0!==t?t:null}get disabledKeys(){return this.state.disabledKeys}get disabledBehavior(){return this.state.disabledBehavior}extendSelection(e){if("none"===this.selectionMode)return;if("single"===this.selectionMode)return void this.replaceSelection(e);let t,i=this.getKey(e);if(null!=i){if("all"===this.state.selectedKeys)t=new jm([i],i,i);else{let e=this.state.selectedKeys;var n;let s=null!==(n=e.anchorKey)&&void 0!==n?n:i;var r;t=new jm(e,s,i);for(let n of this.getKeyRange(s,null!==(r=e.currentKey)&&void 0!==r?r:i))t.delete(n);for(let e of this.getKeyRange(i,s))this.canSelectItem(e)&&t.add(e)}this.state.setSelectedKeys(t)}}getKeyRange(e,t){let i=this.collection.getItem(e),n=this.collection.getItem(t);return i&&n?$m(this.collection,i,n)<=0?this.getKeyRangeInternal(e,t):this.getKeyRangeInternal(t,e):[]}getKeyRangeInternal(e,t){var i;if(null===(i=this.layoutDelegate)||void 0===i?void 0:i.getKeyRange)return this.layoutDelegate.getKeyRange(e,t);let n=[],r=e;for(;null!=r;){let e=this.collection.getItem(r);if(e&&("item"===e.type||"cell"===e.type&&this.allowsCellSelection)&&n.push(r),r===t)return n;r=this.collection.getKeyAfter(r)}return[]}getKey(e){let t=this.collection.getItem(e);if(!t)return e;if("cell"===t.type&&this.allowsCellSelection)return e;for(;t&&"item"!==t.type&&null!=t.parentKey;)t=this.collection.getItem(t.parentKey);return t&&"item"===t.type?t.key:null}toggleSelection(e){if("none"===this.selectionMode)return;if("single"===this.selectionMode&&!this.isSelected(e))return void this.replaceSelection(e);let t=this.getKey(e);if(null==t)return;let i=new jm("all"===this.state.selectedKeys?this.getSelectAllKeys():this.state.selectedKeys);i.has(t)?i.delete(t):this.canSelectItem(t)&&(i.add(t),i.anchorKey=t,i.currentKey=t),this.disallowEmptySelection&&0===i.size||this.state.setSelectedKeys(i)}replaceSelection(e){if("none"===this.selectionMode)return;let t=this.getKey(e);if(null==t)return;let i=this.canSelectItem(t)?new jm([t],t,t):new jm;this.state.setSelectedKeys(i)}setSelectedKeys(e){if("none"===this.selectionMode)return;let t=new jm;for(let i of e){let e=this.getKey(i);if(null!=e&&(t.add(e),"single"===this.selectionMode))break}this.state.setSelectedKeys(t)}getSelectAllKeys(){let e=[],t=i=>{for(;null!=i;){if(this.canSelectItem(i)){var n;let s=this.collection.getItem(i);var r;"item"===(null==s?void 0:s.type)&&e.push(i),(null==s?void 0:s.hasChildNodes)&&(this.allowsCellSelection||"item"!==s.type)&&t(null!==(r=null===(n=Hm(Zm(s,this.collection)))||void 0===n?void 0:n.key)&&void 0!==r?r:null)}i=this.collection.getKeyAfter(i)}};return t(this.collection.getFirstKey()),e}selectAll(){this.isSelectAll||"multiple"!==this.selectionMode||this.state.setSelectedKeys("all")}clearSelection(){!this.disallowEmptySelection&&("all"===this.state.selectedKeys||this.state.selectedKeys.size>0)&&this.state.setSelectedKeys(new jm)}toggleSelectAll(){this.isSelectAll?this.clearSelection():this.selectAll()}select(e,t){"none"!==this.selectionMode&&("single"===this.selectionMode?this.isSelected(e)&&!this.disallowEmptySelection?this.toggleSelection(e):this.replaceSelection(e):"toggle"===this.selectionBehavior||t&&("touch"===t.pointerType||"virtual"===t.pointerType)?this.toggleSelection(e):this.replaceSelection(e))}isSelectionEqual(e){if(e===this.state.selectedKeys)return!0;let t=this.selectedKeys;if(e.size!==t.size)return!1;for(let i of e)if(!t.has(i))return!1;for(let i of t)if(!e.has(i))return!1;return!0}canSelectItem(e){var t;if("none"===this.state.selectionMode||this.state.disabledKeys.has(e))return!1;let i=this.collection.getItem(e);return!(!i||(null==i||null===(t=i.props)||void 0===t?void 0:t.isDisabled)||"cell"===i.type&&!this.allowsCellSelection)}isDisabled(e){var t,i;return"all"===this.state.disabledBehavior&&(this.state.disabledKeys.has(e)||!!(null===(i=this.collection.getItem(e))||void 0===i||null===(t=i.props)||void 0===t?void 0:t.isDisabled))}isLink(e){var t,i;return!!(null===(i=this.collection.getItem(e))||void 0===i||null===(t=i.props)||void 0===t?void 0:t.href)}getItemProps(e){var t;return null===(t=this.collection.getItem(e))||void 0===t?void 0:t.props}withCollection(e){return new Ym(e,this.state,{allowsCellSelection:this.allowsCellSelection,layoutDelegate:this.layoutDelegate||void 0})}constructor(e,t,i){var n;this.collection=e,this.state=t,this.allowsCellSelection=null!==(n=null==i?void 0:i.allowsCellSelection)&&void 0!==n&&n,this._isSelectAll=null,this.layoutDelegate=(null==i?void 0:i.layoutDelegate)||null}}class qm{build(e,t){return this.context=t,Xm((()=>this.iterateCollection(e)))}*iterateCollection(e){let{children:t,items:i}=e;if(r.isValidElement(t)&&t.type===r.Fragment)yield*this.iterateCollection({children:t.props.children,items:i});else if("function"==typeof t){if(!i)throw new Error("props.children was a function but props.items is missing");let e=0;for(let n of i)yield*this.getFullNode({value:n,index:e},{renderer:t}),e++}else{let e=[];r.Children.forEach(t,(t=>{t&&e.push(t)}));let i=0;for(let t of e){let e=this.getFullNode({element:t,index:i},{});for(let t of e)i++,yield t}}}getKey(e,t,i,n){if(null!=e.key)return e.key;if("cell"===t.type&&null!=t.key)return`${n}${t.key}`;let r=t.value;if(null!=r){var s;let e=null!==(s=r.key)&&void 0!==s?s:r.id;if(null==e)throw new Error("No key found for item");return e}return n?`${n}.${t.index}`:`$.${t.index}`}getChildState(e,t){return{renderer:t.renderer||e.renderer}}*getFullNode(e,t,i,n){if(r.isValidElement(e.element)&&e.element.type===r.Fragment){let o=[];var s;r.Children.forEach(e.element.props.children,(e=>{o.push(e)}));let a=null!==(s=e.index)&&void 0!==s?s:0;for(const e of o)yield*this.getFullNode({element:e,index:a++},t,i,n);return}let o=e.element;if(!o&&e.value&&t&&t.renderer){let i=this.cache.get(e.value);if(i&&(!i.shouldInvalidate||!i.shouldInvalidate(this.context)))return i.index=e.index,i.parentKey=n?n.key:null,void(yield i);o=t.renderer(e.value)}if(r.isValidElement(o)){let r=o.type;if("function"!=typeof r&&"function"!=typeof r.getCollectionNode){let e=o.type;throw new Error(`Unknown element <${e}> in collection.`)}let s=r.getCollectionNode(o.props,this.context);var a;let m=null!==(a=e.index)&&void 0!==a?a:0,p=s.next();for(;!p.done&&p.value;){let r=p.value;var l;e.index=m;let a=null!==(l=r.key)&&void 0!==l?l:null;null==a&&(a=r.element?null:this.getKey(o,e,t,i));let g=[...this.getFullNode({...r,key:a,index:m,wrapper:Qm(e.wrapper,r.wrapper)},this.getChildState(t,r),i?`${i}${o.key}`:o.key,n)];for(let t of g){var c,d,u;if(t.value=null!==(d=null!==(c=r.value)&&void 0!==c?c:e.value)&&void 0!==d?d:null,t.value&&this.cache.set(t.value,t),e.type&&t.type!==e.type)throw new Error(`Unsupported type <${Jm(t.type)}> in <${Jm(null!==(u=null==n?void 0:n.type)&&void 0!==u?u:"unknown parent type")}>. Only <${Jm(e.type)}> is supported.`);m++,yield t}p=s.next(g)}return}if(null==e.key||null==e.type)return;let m=this;var p,g;let h={type:e.type,props:e.props,key:e.key,parentKey:n?n.key:null,value:null!==(p=e.value)&&void 0!==p?p:null,level:n?n.level+1:0,index:e.index,rendered:e.rendered,textValue:null!==(g=e.textValue)&&void 0!==g?g:"","aria-label":e["aria-label"],wrapper:e.wrapper,shouldInvalidate:e.shouldInvalidate,hasChildNodes:e.hasChildNodes||!1,childNodes:Xm((function*(){if(!e.hasChildNodes||!e.childNodes)return;let i=0;for(let n of e.childNodes()){null!=n.key&&(n.key=`${h.key}${n.key}`);let e=m.getFullNode({...n,index:i},m.getChildState(t,n),h.key,h);for(let t of e)i++,yield t}}))};yield h}constructor(){this.cache=new WeakMap}}function Xm(e){let t=[],i=null;return{*[Symbol.iterator](){for(let e of t)yield e;i||(i=e());for(let e of i)t.push(e),yield e}}}function Qm(e,t){return e&&t?i=>e(t(i)):e||(t||void 0)}function Jm(e){return e[0].toUpperCase()+e.slice(1)}function ep(e,t,i){let n=(0,r.useMemo)((()=>new qm),[]),{children:s,items:o,collection:a}=e;return(0,r.useMemo)((()=>{if(a)return a;let e=n.build({children:s,items:o},i);return t(e)}),[n,s,o,a,i,t])}function tp(e){let{onExpandedChange:t}=e,[i,n]=(0,zm.z)(e.expandedKeys?new Set(e.expandedKeys):void 0,e.defaultExpandedKeys?new Set(e.defaultExpandedKeys):new Set,t),s=Vm(e),o=(0,r.useMemo)((()=>e.disabledKeys?new Set(e.disabledKeys):new Set),[e.disabledKeys]),a=ep(e,(0,r.useCallback)((e=>new Dm(e,{expandedKeys:i})),[i]),null);(0,r.useEffect)((()=>{null==s.focusedKey||a.getItem(s.focusedKey)||s.setFocusedKey(null)}),[a,s.focusedKey]);return{collection:a,expandedKeys:i,disabledKeys:o,toggleKey:e=>{n(function(e,t){let i=new Set(e);i.has(t)?i.delete(t):i.add(t);return i}(i,e))},setExpandedKeys:n,selectionManager:new Ym(a,s)}}const ip=new WeakMap;function np(e){let t=ip.get(e);if(null!=t)return t;let i=0,n=t=>{for(let r of t)"section"===r.type?n(Zm(r,e)):"item"===r.type&&i++};return n(e),ip.set(e,i),i}function rp(e){if(!e)return;let t=!0;return i=>{let n=Object.assign(Object.assign({},i),{preventDefault(){i.preventDefault()},isDefaultPrevented:()=>i.isDefaultPrevented(),stopPropagation(){t=!0},continuePropagation(){t=!1},isPropagationStopped:()=>t});e(n),t&&i.stopPropagation()}}function sp(e){return{keyboardProps:e.isDisabled?{}:{onKeyDown:rp(e.onKeyDown),onKeyUp:rp(e.onKeyUp)}}}function op(e){let{isDisabled:t,onFocus:i,onBlur:n,onFocusChange:s}=e;const o=(0,r.useCallback)((e=>{if(e.target===e.currentTarget)return n&&n(e),s&&s(!1),!0}),[n,s]),a=(0,Yd.d0)(o),l=(0,r.useCallback)((e=>{const t=(0,Nd.r3)(e.target),n=t?(0,Ld.vY)(t):(0,Ld.vY)();e.target===e.currentTarget&&n===(0,Ld.NI)(e.nativeEvent)&&(i&&i(e),s&&s(!0),a(e))}),[s,i,a]);return{focusProps:{onFocus:!t&&(i||s||n)?l:void 0,onBlur:t||!n&&!s?void 0:o}}}function ap(e){let{id:t,selectionManager:i,key:n,ref:s,shouldSelectOnPressUp:o,shouldUseVirtualFocus:a,focus:l,isDisabled:c,onAction:d,allowsDifferentPressOrigin:u,linkBehavior:m="action"}=e,p=mu();t=(0,Tl.Me)(t);let g=e=>{if("keyboard"===e.pointerType&&fm(e))i.toggleSelection(n);else{if("none"===i.selectionMode)return;if(i.isLink(n)){if("selection"===m&&s.current){let t=i.getItemProps(n);return p.open(s.current,e,t.href,t.routerOptions),void i.setSelectedKeys(i.selectedKeys)}if("override"===m||"none"===m)return}"single"===i.selectionMode?i.isSelected(n)&&!i.disallowEmptySelection?i.toggleSelection(n):i.replaceSelection(n):e&&e.shiftKey?i.extendSelection(n):"toggle"===i.selectionBehavior||e&&(km(e)||"touch"===e.pointerType||"virtual"===e.pointerType)?i.toggleSelection(n):i.replaceSelection(n)}};(0,r.useEffect)((()=>{n===i.focusedKey&&i.isFocused&&(a?Om(s.current):l?l():document.activeElement!==s.current&&s.current&&(0,Pm.e)(s.current))}),[s,n,i.focusedKey,i.childFocusStrategy,i.isFocused,a]),c=c||i.isDisabled(n);let h={};a||c?c&&(h.onMouseDown=e=>{e.preventDefault()}):h={tabIndex:n===i.focusedKey?0:-1,onFocus(e){e.target===s.current&&i.setFocusedKey(n)}};let f=i.isLink(n)&&"override"===m,v=i.isLink(n)&&"selection"!==m&&"none"!==m,b=!c&&i.canSelectItem(n)&&!f,y=(d||v)&&!c,x=y&&("replace"===i.selectionBehavior?!b:!b||i.isEmpty),k=y&&b&&"replace"===i.selectionBehavior,S=x||k,C=(0,r.useRef)(null),E=S&&b,_=(0,r.useRef)(!1),w=(0,r.useRef)(!1),I=e=>{if(d&&d(),v&&s.current){let t=i.getItemProps(n);p.open(s.current,e,t.href,t.routerOptions)}},A={ref:s};var F;o?(A.onPressStart=e=>{C.current=e.pointerType,_.current=E,"keyboard"!==e.pointerType||S&&!cp()||g(e)},u?(A.onPressUp=x?void 0:e=>{"mouse"===e.pointerType&&b&&g(e)},A.onPress=x?I:e=>{"keyboard"!==e.pointerType&&"mouse"!==e.pointerType&&b&&g(e)}):A.onPress=e=>{if(x||k&&"mouse"!==e.pointerType){if("keyboard"===e.pointerType&&!lp())return;I(e)}else"keyboard"!==e.pointerType&&b&&g(e)}):(A.onPressStart=e=>{C.current=e.pointerType,_.current=E,w.current=x,b&&("mouse"===e.pointerType&&!x||"keyboard"===e.pointerType&&(!y||cp()))&&g(e)},A.onPress=e=>{("touch"===e.pointerType||"pen"===e.pointerType||"virtual"===e.pointerType||"keyboard"===e.pointerType&&S&&lp()||"mouse"===e.pointerType&&w.current)&&(S?I(e):b&&g(e))}),h["data-collection"]=(F=i.collection,bm.get(F)),h["data-key"]=n,A.preventFocusOnPress=a,a&&(A=(0,gl.d)(A,{onPressStart(e){"touch"!==e.pointerType&&(i.setFocused(!0),i.setFocusedKey(n))},onPress(e){"touch"===e.pointerType&&(i.setFocused(!0),i.setFocusedKey(n))}}));let{pressProps:P,isPressed:M}=Cu(A),O=k?e=>{"mouse"===C.current&&(e.stopPropagation(),e.preventDefault(),I(e))}:void 0,{longPressProps:T}=Ru({isDisabled:!E,onLongPress(e){"touch"===e.pointerType&&(g(e),i.setSelectionBehavior("toggle"))}}),R=i.isLink(n)?e=>{pu.isOpening||e.preventDefault()}:void 0;return{itemProps:(0,gl.d)(h,b||x||a&&!c?P:{},E?T:{},{onDoubleClick:O,onDragStartCapture:e=>{"touch"===C.current&&_.current&&e.preventDefault()},onClick:R,id:t},a?{onMouseDown:e=>e.preventDefault()}:void 0),isPressed:M,isSelected:i.isSelected(n),isFocused:i.isFocused&&i.focusedKey===n,isDisabled:c,allowsSelection:b,hasAction:S}}function lp(){let e=self.event;return"Enter"===(null==e?void 0:e.key)}function cp(){let e=self.event;return" "===(null==e?void 0:e.key)||"Space"===(null==e?void 0:e.code)}function dp(e,t,i){let{id:n,key:r,closeOnSelect:s,isVirtualized:o,"aria-haspopup":a,onPressStart:l,onPressUp:c,onPress:d,onPressChange:u,onPressEnd:m,onHoverStart:p,onHoverChange:g,onHoverEnd:h,onKeyDown:f,onKeyUp:v,onFocus:b,onFocusChange:y,onBlur:x,selectionManager:k=t.selectionManager}=e,S=!!a,C=S&&"true"===e["aria-expanded"];var E;let _=null!==(E=e.isDisabled)&&void 0!==E?E:k.isDisabled(r);var w;let I=null!==(w=e.isSelected)&&void 0!==w?w:k.isSelected(r),A=dm.get(t),F=t.collection.getItem(r),P=e.onClose||A.onClose,M=mu(),O=t=>{var i;if(!S){if((null==F||null===(i=F.props)||void 0===i?void 0:i.onAction)?F.props.onAction():e.onAction&&e.onAction(r),A.onAction){(0,A.onAction)(r)}t.target instanceof HTMLAnchorElement&&F&&M.open(t.target,t,F.props.href,F.props.routerOptions)}},T="menuitem";S||("single"===k.selectionMode?T="menuitemradio":"multiple"===k.selectionMode&&(T="menuitemcheckbox"));let R=(0,Tl.mp)(),B=(0,Tl.mp)(),U=(0,Tl.mp)(),G={id:n,"aria-disabled":_||void 0,role:T,"aria-label":e["aria-label"],"aria-labelledby":R,"aria-describedby":[B,U].filter(Boolean).join(" ")||void 0,"aria-controls":e["aria-controls"],"aria-haspopup":a,"aria-expanded":e["aria-expanded"]};"none"===k.selectionMode||S||(G["aria-checked"]=I),o&&(G["aria-posinset"]=null==F?void 0:F.index,G["aria-setsize"]=np(t.collection));let N=()=>{!S&&P&&(null!=s?s:"multiple"!==k.selectionMode||k.isLink(r))&&P()},{itemProps:L,isFocused:D}=ap({id:n,selectionManager:k,key:r,ref:i,shouldSelectOnPressUp:!0,allowsDifferentPressOrigin:!0,linkBehavior:"none",shouldUseVirtualFocus:A.shouldUseVirtualFocus}),{pressProps:j,isPressed:z}=Cu({onPressStart:e=>{"keyboard"===e.pointerType&&O(e),null==l||l(e)},onPress:e=>{"keyboard"!==e.pointerType&&"mouse"!==e.pointerType&&(O(e),N()),null==d||d(e)},onPressUp:e=>{"mouse"===e.pointerType&&(O(e),N()),null==c||c(e)},onPressChange:u,onPressEnd:m,isDisabled:_}),{hoverProps:V}=Kd({isDisabled:_,onHoverStart(e){(0,Fm.E)()||C&&a||(k.setFocused(!0),k.setFocusedKey(r)),null==p||p(e)},onHoverChange:g,onHoverEnd:h}),{keyboardProps:K}=sp({onKeyDown:e=>{if(e.repeat)e.continuePropagation();else switch(e.key){case" ":_||"none"!==k.selectionMode||S||!1===s||!P||P();break;case"Enter":_||!1===s||S||!P||P();break;default:S||e.continuePropagation(),null==f||f(e)}},onKeyUp:v}),{focusProps:Z}=op({onBlur:x,onFocus:b,onFocusChange:y}),H=hm(null==F?void 0:F.props);delete H.id;let $=hu(null==F?void 0:F.props);return{menuItemProps:Object.assign(Object.assign(Object.assign({},G),(0,gl.d)(H,$,S?{onFocus:L.onFocus,"data-collection":L["data-collection"],"data-key":L["data-key"]}:L,j,V,K,Z,A.shouldUseVirtualFocus||S?{onMouseDown:e=>e.preventDefault()}:void 0)),{tabIndex:null!=L.tabIndex&&C&&!A.shouldUseVirtualFocus?-1:L.tabIndex}),labelProps:{id:R},descriptionProps:{id:B},keyboardShortcutProps:{id:U},isFocused:D,isFocusVisible:D&&k.isFocused&&(0,Fm.E)()&&!C,isSelected:I,isPressed:z,isDisabled:_}}function up({item:e,state:t,className:i,name:n,ariaLabel:s}){const o=r.useMemo((()=>n?`${n}-item`:"menu-item"),[n]),a=r.useRef(null),{menuItemProps:l,isDisabled:c,isSelected:d}=dp({key:e.key},t,a);return gi.P.useEffectOnDidMount((()=>{if(null!==a.current)try{const e=a.current.focus.bind(a.current);a.current.focus=t=>{var i;(null===(i=a.current)||void 0===i?void 0:i.matches(":hover"))||e(t)}}catch(e){}})),r.createElement("li",Object.assign({"data-testid":o},l,{ref:a,className:Ei.ux.joinClasses([pp(c,d),i]),"aria-label":s}),r.createElement("span",{className:mp},e.rendered))}const mp=Ei.ux.style({display:"flex",alignItems:"center",fontFamily:"Inter",fontSize:Ei.ux.rem(.875),lineHeight:Ei.ux.rem(1.3125),fontWeight:400,color:$i.Z.TextBaseDefault}),pp=(e,t)=>Ei.ux.style(Object.assign(Object.assign({display:"flex",alignItems:"center",minHeight:Ei.ux.rem(2),padding:`${Ei.ux.rem(Fi.F2)} ${Ei.ux.rem(Fi.sD)} ${Ei.ux.rem(Fi.F2)} ${Ei.ux.rem(Fi.qp)}`,borderRadius:Ei.ux.rem(So.xB),opacity:e?.4:void 0,cursor:"pointer"},t&&!e?{background:$i.Z.MenuBackgroundSelected,boxShadow:`inset  0 0 0 1px ${$i.Z.MenuBorderDefault}`}:{}),{$nest:{"&:hover":e?{}:{background:$i.Z.MenuBackgroundHover,boxShadow:`inset  0 0 0 1px ${$i.Z.MenuBorderDefault}`,$nest:{"& i":{stroke:$i.Z.MenuIconHover,fill:$i.Z.MenuIconHover}}},"&:focus, &:focus-visible":e?{}:{boxShadow:`0 0 0 1px ${Pi.I.Background.Base.Default}, 0 0 0 3px ${$i.Z.BorderBrandDefault}`,outline:"none",background:$i.Z.MenuBackgroundSelected,$nest:{"& i":{stroke:$i.Z.MenuIconSelected,fill:$i.Z.MenuIconSelected}}},"& i":{marginLeft:Ei.ux.rem(-Fi.F2),marginRight:Ei.ux.rem(Fi.x),minWidth:Ei.ux.rem(1.5),minHeight:Ei.ux.rem(1.5)},"& span":{fontWeight:t?700:void 0}}}));function gp({name:e,section:t,state:i,onAction:n,theme:s={}}){const o=r.useMemo((()=>e?`${e}-section`:"dropdown-menu-section"),[e]),{itemProps:a,headingProps:l,groupProps:c}=function(e){let{heading:t,"aria-label":i}=e,n=(0,Tl.Me)();return{itemProps:{role:"presentation"},headingProps:t?{id:n,role:"presentation"}:{},groupProps:{role:"group","aria-label":i,"aria-labelledby":t?n:void 0}}}({heading:t.rendered,"aria-label":t["aria-label"]}),{separatorProps:d}=function(e){let t,i=hm(e,{labelable:!0});return"vertical"===e.orientation&&(t="vertical"),"hr"!==e.elementType?{separatorProps:Object.assign(Object.assign({},i),{role:"separator","aria-orientation":t})}:{separatorProps:i}}({elementType:"li"});return r.createElement(r.Fragment,null,t.key!==i.collection.getFirstKey()&&r.createElement("li",Object.assign({},d,{className:vp})),r.createElement("li",Object.assign({"data-testid":o},a,{className:Ei.ux.joinClasses([hp,s.section])}),Boolean(t.rendered)&&r.createElement("h5",Object.assign({},l,{className:fp}),t.rendered),r.createElement("ul",Object.assign({},c,{className:bp}),Array.from(t.childNodes).map((t=>r.createElement(up,{key:t.key,item:t,state:i,onAction:n,className:s.item,name:e}))))))}const hp=Ei.ux.style({padding:0}),fp=Ei.ux.style({margin:0,fontSize:Ei.ux.rem(.75),fontWeight:400,lineHeight:Ei.ux.rem(1.125),color:Pi.I.Text.Base.Subdued,padding:`${Ei.ux.rem(Fi.x)} ${Ei.ux.rem(Fi.sD)} ${Ei.ux.rem(Fi.x)} ${Ei.ux.rem(Fi.qp)}`}),vp=Ei.ux.style({borderTop:`1px solid ${Pi.I.Border.Base.Subdued}`,margin:`${Ei.ux.rem(Fi.x)} ${Ei.ux.rem(-Fi.mh)}`}),bp=Ei.ux.style({listStyle:"none",margin:0,padding:0,outline:Ei.ux.important("none")});var yp=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};function xp(e){var{name:t,className:i,theme:n={},onMouseOver:s,onMouseLeave:o}=e,a=yp(e,["name","className","theme","onMouseOver","onMouseLeave"]);const l=r.useMemo((()=>t?`${t}-list`:"menu-list"),[t]),c=tp(a),d=r.useRef(null),{menuProps:u}=function(e,t,i){let{shouldFocusWrap:n=!0,onKeyDown:r,onKeyUp:s}=e,o=Lm(e,["shouldFocusWrap","onKeyDown","onKeyUp"]);!e["aria-label"]&&e["aria-labelledby"];let a=hm(e,{labelable:!0}),{listProps:l}=Nm(Object.assign(Object.assign({},o),{ref:i,selectionManager:t.selectionManager,collection:t.collection,disabledKeys:t.disabledKeys,shouldFocusWrap:n,linkBehavior:"override"}));return dm.set(t,{onClose:e.onClose,onAction:e.onAction,shouldUseVirtualFocus:e.shouldUseVirtualFocus}),{menuProps:(0,gl.d)(a,{onKeyDown:r,onKeyUp:s},Object.assign(Object.assign({role:"menu"},l),{onKeyDown:t=>{var i;("Escape"!==t.key||e.shouldUseVirtualFocus)&&(null===(i=l.onKeyDown)||void 0===i||i.call(l,t))}}))}}(a,c,d),m=(0,gl.d)(u,{onMouseOver:s,onMouseLeave:o});return r.createElement("ul",Object.assign({"data-testid":l},m,{ref:d,className:Ei.ux.joinClasses([kp,n.list,i])}),Array.from(c.collection).map((e=>"section"===e.type?r.createElement(gp,{key:e.key,section:e,state:c,theme:n}):r.createElement(up,{key:e.key,name:t,item:e,state:c,className:n.item,ariaLabel:e["aria-label"]}))))}const kp=Ei.ux.style({listStyle:"none",margin:0,outline:Ei.ux.important("none"),padding:`${Ei.ux.rem(Fi.x)} ${Ei.ux.rem(Fi.mh)}`});var Sp,Cp=i(85651);function Ep(e,t){let{id:i,"aria-label":n,"aria-labelledby":r}=e;if(i=(0,Tl.Me)(i),r&&n){let e=new Set([i,...r.trim().split(/\s+/)]);r=[...e].join(" ")}else r&&(r=r.trim().split(/\s+/).join(" "));return n||r||!t||(n=t),{id:i,"aria-label":n,"aria-labelledby":r}}Sp={"ar-AE":{dismiss:"تجاهل"},"bg-BG":{dismiss:"Отхвърляне"},"cs-CZ":{dismiss:"Odstranit"},"da-DK":{dismiss:"Luk"},"de-DE":{dismiss:"Schließen"},"el-GR":{dismiss:"Απόρριψη"},"en-US":{dismiss:"Dismiss"},"es-ES":{dismiss:"Descartar"},"et-EE":{dismiss:"Lõpeta"},"fi-FI":{dismiss:"Hylkää"},"fr-FR":{dismiss:"Rejeter"},"he-IL":{dismiss:"התעלם"},"hr-HR":{dismiss:"Odbaci"},"hu-HU":{dismiss:"Elutasítás"},"it-IT":{dismiss:"Ignora"},"ja-JP":{dismiss:"閉じる"},"ko-KR":{dismiss:"무시"},"lt-LT":{dismiss:"Atmesti"},"lv-LV":{dismiss:"Nerādīt"},"nb-NO":{dismiss:"Lukk"},"nl-NL":{dismiss:"Negeren"},"pl-PL":{dismiss:"Zignoruj"},"pt-BR":{dismiss:"Descartar"},"pt-PT":{dismiss:"Dispensar"},"ro-RO":{dismiss:"Revocare"},"ru-RU":{dismiss:"Пропустить"},"sk-SK":{dismiss:"Zrušiť"},"sl-SI":{dismiss:"Opusti"},"sr-SP":{dismiss:"Odbaci"},"sv-SE":{dismiss:"Avvisa"},"tr-TR":{dismiss:"Kapat"},"uk-UA":{dismiss:"Скасувати"},"zh-CN":{dismiss:"取消"},"zh-TW":{dismiss:"關閉"}};var _p=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};function wp(e){let{onDismiss:t}=e;var i;let n=Ep(_p(e,["onDismiss"]),im((i=Sp)&&i.__esModule?i.default:i,"@react-aria/overlays").format("dismiss"));return r.createElement(bl,null,r.createElement("button",Object.assign(Object.assign({},n),{tabIndex:-1,onClick:()=>{t&&t()},style:{width:1,height:1}})))}function Ip(e,t=-1/0,i=1/0){return Math.min(Math.max(e,t),i)}const Ap={top:"top",bottom:"top",left:"left",right:"left"},Fp={top:"bottom",bottom:"top",left:"right",right:"left"},Pp={top:"left",left:"top"},Mp={top:"height",left:"width"},Op={width:"totalWidth",height:"totalHeight"},Tp={};let Rp="undefined"!=typeof document?self.visualViewport:null;function Bp(e){let t=0,i=0,n=0,r=0,s=0,o=0,a={};var l;let c=(null!==(l=null==Rp?void 0:Rp.scale)&&void 0!==l?l:1)>1;if("BODY"===e.tagName){let l=document.documentElement;var d,u;n=l.clientWidth,r=l.clientHeight,t=null!==(d=null==Rp?void 0:Rp.width)&&void 0!==d?d:n,i=null!==(u=null==Rp?void 0:Rp.height)&&void 0!==u?u:r,a.top=l.scrollTop||e.scrollTop,a.left=l.scrollLeft||e.scrollLeft,Rp&&(s=Rp.offsetTop,o=Rp.offsetLeft)}else({width:t,height:i,top:s,left:o}=zp(e)),a.top=e.scrollTop,a.left=e.scrollLeft,n=t,r=i;var m,p;(0,qd.Pf)()&&("BODY"===e.tagName||"HTML"===e.tagName)&&c&&(a.top=0,a.left=0,s=null!==(m=null==Rp?void 0:Rp.pageTop)&&void 0!==m?m:0,o=null!==(p=null==Rp?void 0:Rp.pageLeft)&&void 0!==p?p:0);return{width:t,height:i,totalWidth:n,totalHeight:r,scroll:a,top:s,left:o}}function Up(e,t,i,n,r,s,o){var a;let l=null!==(a=r.scroll[e])&&void 0!==a?a:0,c=n[Mp[e]],d=n.scroll[Ap[e]]+s,u=c+n.scroll[Ap[e]]-s,m=t-l+o[e]-n[Ap[e]],p=t-l+i+o[e]-n[Ap[e]];return m<d?d-m:p>u?Math.max(u-p,d-m):0}function Gp(e){if(Tp[e])return Tp[e];let[t,i]=e.split(" "),n=Ap[t]||"right",r=Pp[n];Ap[i]||(i="center");let s=Mp[n],o=Mp[r];return Tp[e]={placement:t,crossPlacement:i,axis:n,crossAxis:r,size:s,crossSize:o},Tp[e]}function Np(e,t,i,n,r,s,o,a,l,c){let{placement:d,crossPlacement:u,axis:m,crossAxis:p,size:g,crossSize:h}=n,f={};var v,b,y,x,k;f[p]=null!==(v=e[p])&&void 0!==v?v:0,"center"===u?f[p]+=((null!==(b=e[h])&&void 0!==b?b:0)-(null!==(y=i[h])&&void 0!==y?y:0))/2:u!==p&&(f[p]+=(null!==(x=e[h])&&void 0!==x?x:0)-(null!==(k=i[h])&&void 0!==k?k:0)),f[p]+=s;const S=e[p]-i[h]+l+c,C=e[p]+e[h]-l-c;if(f[p]=Ip(f[p],S,C),d===m){const i=a?o[g]:t[Op[g]];f[Fp[m]]=Math.floor(i-e[m]+r)}else f[m]=Math.floor(e[m]+e[g]+r);return f}function Lp(e,t,i,n,r,s){let{placement:o,axis:a,size:l}=s;var c,d,u;return o===a?Math.max(0,i[a]-e[a]-(null!==(c=e.scroll[a])&&void 0!==c?c:0)+t[a]-(null!==(d=n[a])&&void 0!==d?d:0)-n[Fp[a]]-r):Math.max(0,e[l]+e[a]+e.scroll[a]-t[a]-i[a]-i[l]-(null!==(u=n[a])&&void 0!==u?u:0)-n[Fp[a]]-r)}function Dp(e,t,i,n,r,s,o,a,l,c,d,u,m,p,g,h){let f=Gp(e),{size:v,crossAxis:b,crossSize:y,placement:x,crossPlacement:k}=f,S=Np(t,a,i,f,d,u,c,m,g,h),C=d,E=Lp(a,c,t,r,s+d,f);if(o&&n[v]>E){let e=Gp(`${Fp[x]} ${k}`),n=Np(t,a,i,e,d,u,c,m,g,h);Lp(a,c,t,r,s+d,e)>E&&(f=e,S=n,C=d)}let _="bottom";"top"===f.axis?"top"===f.placement?_="top":"bottom"===f.placement&&(_="bottom"):"top"===f.crossAxis&&("top"===f.crossPlacement?_="bottom":"bottom"===f.crossPlacement&&(_="top"));let w=Up(b,S[b],i[y],a,l,s,c);S[b]+=w;let I=function(e,t,i,n,r,s,o,a){const l=n?i.height:t[Op.height];var c;let d=null!=e.top?i.top+e.top:i.top+(l-(null!==(c=e.bottom)&&void 0!==c?c:0)-o);var u,m,p,g,h,f;let v="top"!==a?Math.max(0,t.height+t.top+(null!==(u=t.scroll.top)&&void 0!==u?u:0)-d-((null!==(m=r.top)&&void 0!==m?m:0)+(null!==(p=r.bottom)&&void 0!==p?p:0)+s)):Math.max(0,d+o-(t.top+(null!==(g=t.scroll.top)&&void 0!==g?g:0))-((null!==(h=r.top)&&void 0!==h?h:0)+(null!==(f=r.bottom)&&void 0!==f?f:0)+s));return Math.min(t.height-2*s,v)}(S,a,c,m,r,s,i.height,_);p&&p<I&&(I=p),i.height=Math.min(i.height,I),S=Np(t,a,i,f,C,u,c,m,g,h),w=Up(b,S[b],i[y],a,l,s,c),S[b]+=w;let A={},F=t[b]+.5*t[y]-S[b]-r[Ap[b]];const P=g/2+h;var M,O,T,R;const B="left"===Ap[b]?(null!==(M=r.left)&&void 0!==M?M:0)+(null!==(O=r.right)&&void 0!==O?O:0):(null!==(T=r.top)&&void 0!==T?T:0)+(null!==(R=r.bottom)&&void 0!==R?R:0),U=i[y]-B-g/2-h,G=Ip(F,t[b]+g/2-(S[b]+r[Ap[b]]),t[b]+t[y]-g/2-(S[b]+r[Ap[b]]));return A[b]=Ip(G,P,U),{position:S,maxHeight:I,arrowOffsetLeft:A.left,arrowOffsetTop:A.top,placement:f.placement}}function jp(e){let{placement:t,targetNode:i,overlayNode:n,scrollNode:r,padding:s,shouldFlip:o,boundaryElement:a,offset:l,crossOffset:c,maxHeight:d,arrowSize:u=0,arrowBoundaryOffset:m=0}=e,p=n instanceof HTMLElement?function(e){let t=e.offsetParent;t&&t===document.body&&"static"===self.getComputedStyle(t).position&&!Kp(t)&&(t=document.documentElement);if(null==t)for(t=e.parentElement;t&&!Kp(t);)t=t.parentElement;return t||document.documentElement}(n):document.documentElement,g=p===document.documentElement;const h=self.getComputedStyle(p).position;let f=!!h&&"static"!==h,v=g?zp(i):Vp(i,p);if(!g){let{marginTop:e,marginLeft:t}=self.getComputedStyle(i);v.top+=parseInt(e,10)||0,v.left+=parseInt(t,10)||0}let b=zp(n),y=function(e){let t=self.getComputedStyle(e);return{top:parseInt(t.marginTop,10)||0,bottom:parseInt(t.marginBottom,10)||0,left:parseInt(t.marginLeft,10)||0,right:parseInt(t.marginRight,10)||0}}(n);var x,k,S,C;b.width+=(null!==(x=y.left)&&void 0!==x?x:0)+(null!==(k=y.right)&&void 0!==k?k:0),b.height+=(null!==(S=y.top)&&void 0!==S?S:0)+(null!==(C=y.bottom)&&void 0!==C?C:0);let E={top:(_=r).scrollTop,left:_.scrollLeft,width:_.scrollWidth,height:_.scrollHeight};var _;let w=Bp(a),I=Bp(p),A="BODY"===a.tagName?zp(p):Vp(p,a);return"HTML"===p.tagName&&"BODY"===a.tagName&&(I.scroll.top=0,I.scroll.left=0),Dp(t,v,b,E,y,s,o,w,I,A,l,c,f,d,u,m)}function zp(e){let{top:t,left:i,width:n,height:r}=e.getBoundingClientRect(),{scrollTop:s,scrollLeft:o,clientTop:a,clientLeft:l}=document.documentElement;return{top:t+s-a,left:i+o-l,width:n,height:r}}function Vp(e,t){let i,n=self.getComputedStyle(e);if("fixed"===n.position){let{top:t,left:n,width:r,height:s}=e.getBoundingClientRect();i={top:t,left:n,width:r,height:s}}else{i=zp(e);let n=zp(t),r=self.getComputedStyle(t);n.top+=(parseInt(r.borderTopWidth,10)||0)-t.scrollTop,n.left+=(parseInt(r.borderLeftWidth,10)||0)-t.scrollLeft,i.top-=n.top,i.left-=n.left}return i.top-=parseInt(n.marginTop,10)||0,i.left-=parseInt(n.marginLeft,10)||0,i}function Kp(e){let t=self.getComputedStyle(e);return"none"!==t.transform||/transform|perspective/.test(t.willChange)||"none"!==t.filter||"paint"===t.contain||"backdropFilter"in t&&"none"!==t.backdropFilter||"WebkitBackdropFilter"in t&&"none"!==t.WebkitBackdropFilter}function Zp(e){const{ref:t,box:i,onResize:n}=e;(0,r.useEffect)((()=>{let e=null==t?void 0:t.current;if(e){if(void 0===self.ResizeObserver)return self.addEventListener("resize",n,!1),()=>{self.removeEventListener("resize",n,!1)};{const t=new self.ResizeObserver((e=>{e.length&&n()}));return t.observe(e,{box:i}),()=>{e&&t.unobserve(e)}}}}),[n,t,i])}let Hp="undefined"!=typeof document?self.visualViewport:null;function $p(e){let{direction:t}=Hu(),{arrowSize:i=0,targetRef:n,overlayRef:s,scrollRef:o=s,placement:a="bottom",containerPadding:l=12,shouldFlip:c=!0,boundaryElement:d=("undefined"!=typeof document?document.body:null),offset:u=0,crossOffset:m=0,shouldUpdatePosition:p=!0,isOpen:g=!0,onClose:h,maxHeight:f,arrowBoundaryOffset:v=0}=e,[b,y]=(0,r.useState)(null),x=[p,a,s.current,n.current,o.current,l,c,d,u,m,g,t,f,v,i],k=(0,r.useRef)(null==Hp?void 0:Hp.scale);(0,r.useEffect)((()=>{g&&(k.current=null==Hp?void 0:Hp.scale)}),[g]);let S=(0,r.useCallback)((()=>{if(!(!1!==p&&g&&s.current&&n.current&&d))return;if((null==Hp?void 0:Hp.scale)!==k.current)return;let e=null;if(o.current&&o.current.contains(document.activeElement)){var r;let t=null===(r=document.activeElement)||void 0===r?void 0:r.getBoundingClientRect(),i=o.current.getBoundingClientRect();var h,b;if(e={type:"top",offset:(null!==(h=null==t?void 0:t.top)&&void 0!==h?h:0)-i.top},e.offset>i.height/2)e.type="bottom",e.offset=(null!==(b=null==t?void 0:t.bottom)&&void 0!==b?b:0)-i.bottom}let x=s.current;var S,C;!f&&s.current&&(x.style.top="0px",x.style.bottom="",x.style.maxHeight=(null!==(C=null===(S=self.visualViewport)||void 0===S?void 0:S.height)&&void 0!==C?C:self.innerHeight)+"px");let E=jp({placement:Wp(a,t),overlayNode:s.current,targetNode:n.current,scrollNode:o.current||s.current,padding:l,shouldFlip:c,boundaryElement:d,offset:u,crossOffset:m,maxHeight:f,arrowSize:i,arrowBoundaryOffset:v});if(E.position){if(x.style.top="",x.style.bottom="",x.style.left="",x.style.right="",Object.keys(E.position).forEach((e=>x.style[e]=E.position[e]+"px")),x.style.maxHeight=null!=E.maxHeight?E.maxHeight+"px":"",e&&document.activeElement&&o.current){let t=document.activeElement.getBoundingClientRect(),i=o.current.getBoundingClientRect(),n=t[e.type]-i[e.type];o.current.scrollTop+=n-e.offset}y(E)}}),x);var C;(0,au.b)(S,x),C=S,(0,au.b)((()=>(self.addEventListener("resize",C,!1),()=>{self.removeEventListener("resize",C,!1)})),[C]),Zp({ref:s,onResize:S}),Zp({ref:n,onResize:S});let E=(0,r.useRef)(!1);(0,au.b)((()=>{let e,t=()=>{E.current=!0,clearTimeout(e),e=setTimeout((()=>{E.current=!1}),500),S()},i=()=>{E.current&&t()};return null==Hp||Hp.addEventListener("resize",t),null==Hp||Hp.addEventListener("scroll",i),()=>{null==Hp||Hp.removeEventListener("resize",t),null==Hp||Hp.removeEventListener("scroll",i)}}),[S]);let _=(0,r.useCallback)((()=>{E.current||null==h||h()}),[h,E]);var w,I;return rm({triggerRef:n,isOpen:g,onClose:h&&_}),{overlayProps:{style:Object.assign(Object.assign({position:"absolute",zIndex:1e5},null==b?void 0:b.position),{maxHeight:null!==(w=null==b?void 0:b.maxHeight)&&void 0!==w?w:"100vh"})},placement:null!==(I=null==b?void 0:b.placement)&&void 0!==I?I:null,arrowProps:{"aria-hidden":"true",role:"presentation",style:{left:null==b?void 0:b.arrowOffsetLeft,top:null==b?void 0:b.arrowOffsetTop}},updatePosition:S}}function Wp(e,t){return"rtl"===t?e.replace("start","right").replace("end","left"):e.replace("start","left").replace("end","right")}function Yp(e,t){let i=e;for(Cm(i,t)&&(i=i.parentElement);i&&!Cm(i,t);)i=i.parentElement;return i||document.scrollingElement||document.documentElement}const qp="undefined"!=typeof document&&self.visualViewport,Xp=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);let Qp,Jp=0;function eg(e={}){let{isDisabled:t}=e;(0,au.b)((()=>{if(!t)return Jp++,1===Jp&&(Qp=(0,qd.gn)()?function(){let e,t,i=i=>{e=Yp(i.target,!0),e===document.documentElement&&e===document.body||e instanceof HTMLElement&&"auto"===self.getComputedStyle(e).overscrollBehavior&&(t=tg(e,"overscrollBehavior","contain"))},n=t=>{e&&e!==document.documentElement&&e!==document.body?e.scrollHeight===e.clientHeight&&e.scrollWidth===e.clientWidth&&t.preventDefault():t.preventDefault()},r=()=>{t&&t()},s=e=>{let t=e.target;(function(e){return e instanceof HTMLInputElement&&!Xp.has(e.type)||e instanceof HTMLTextAreaElement||e instanceof HTMLElement&&e.isContentEditable})(t)&&(a(),t.style.transform="translateY(-2000px)",requestAnimationFrame((()=>{t.style.transform="",qp&&(qp.height<self.innerHeight?requestAnimationFrame((()=>{ng(t)})):qp.addEventListener("resize",(()=>ng(t)),{once:!0}))})))},o=null,a=()=>{if(o)return;let e=()=>{self.scrollTo(0,0)},t=self.pageXOffset,i=self.pageYOffset;o=(0,du.t)(ig(self,"scroll",e),tg(document.documentElement,"paddingRight",self.innerWidth-document.documentElement.clientWidth+"px"),tg(document.documentElement,"overflow","hidden"),tg(document.body,"marginTop",`-${i}px`),(()=>{self.scrollTo(t,i)})),self.scrollTo(0,0)},l=(0,du.t)(ig(document,"touchstart",i,{passive:!1,capture:!0}),ig(document,"touchmove",n,{passive:!1,capture:!0}),ig(document,"touchend",r,{passive:!1,capture:!0}),ig(document,"focus",s,!0));return()=>{null==t||t(),null==o||o(),l()}}():(0,du.t)(tg(document.documentElement,"paddingRight",self.innerWidth-document.documentElement.clientWidth+"px"),tg(document.documentElement,"overflow","hidden"))),()=>{Jp--,0===Jp&&Qp()}}),[t])}function tg(e,t,i){let n=e.style[t];return e.style[t]=i,()=>{e.style[t]=n}}function ig(e,t,i,n){return e.addEventListener(t,i,n),()=>{e.removeEventListener(t,i,n)}}function ng(e){let t=document.scrollingElement||document.documentElement,i=e;for(;i&&i!==t;){let e=Yp(i);if(e!==document.documentElement&&e!==document.body&&e!==i){let t=e.getBoundingClientRect().top,n=i.getBoundingClientRect().top;n>t+i.clientHeight&&(e.scrollTop+=n-t)}i=e.parentElement}}var rg=i(94005),sg=i(40929),og=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};var ag=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const lg=e=>{var t,{children:i,className:n,state:s,offset:o=4,onTransitionEnd:a,portalContainer:l}=e,c=ag(e,["children","className","state","offset","onTransitionEnd","portalContainer"]);const d=r.useRef(null),{popoverProps:u}=function(e,t){const{triggerRef:i,popoverRef:n,isNonModal:r,isKeyboardDismissDisabled:s}=e,o=og(e,["triggerRef","popoverRef","isNonModal","isKeyboardDismissDisabled"]),{overlayProps:a,underlayProps:l}=(0,sg.I)({isOpen:t.isOpen,onClose:t.close,shouldCloseOnBlur:!0,isDismissable:!1!==r,isKeyboardDismissDisabled:s,shouldCloseOnInteractOutside:(e,t)=>{const i=null==t?void 0:t.composedPath();return!i||!i.some((e=>{var t;return e instanceof Node&&(null===(t=n.current)||void 0===t?void 0:t.contains(e))}))}},n),{overlayProps:c,arrowProps:d,placement:u}=$p(Object.assign(Object.assign({},o),{targetRef:i,overlayRef:n,isOpen:t.isOpen,onClose:void 0}));return eg({isDisabled:r}),(0,au.b)((()=>t.isOpen&&!r&&n.current?(0,rg.R)([n.current]):()=>{}),[r,t.isOpen,n]),{popoverProps:(0,gl.d)(a,c),arrowProps:d,underlayProps:l,placement:u}}(Object.assign(Object.assign({},c),{isNonModal:!0,offset:o,popoverRef:d}),s);return r.createElement(Cp.aV,{portalContainer:l},r.createElement("div",Object.assign({},u,{style:Object.assign(Object.assign({},u.style),{minWidth:null===(t=c.triggerRef.current)||void 0===t?void 0:t.clientWidth}),ref:d,className:Ei.ux.joinClasses([dg,n]),onTransitionEnd:e=>{if(e.target===d.current)return null==a?void 0:a()}}),r.createElement(wp,{onDismiss:s.close}),r.createElement("div",{className:cg},i),r.createElement(wp,{onDismiss:s.close})))},cg=Ei.ux.style({width:Ei.ux.percent(100)}),dg=Ei.ux.style({display:"flex",flexDirection:"column",alignItems:"flex-start",background:Pi.I.Background.Base.Default,boxShadow:jo.H8.boxShadow,border:jo.H8.border,borderRadius:Ei.ux.rem(So.xB)});var ug=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};function mg(e){var{placement:t="bottom start",theme:i={},name:n,portalContainer:s,title:o}=e,a=ug(e,["placement","theme","name","portalContainer","title"]);const l=r.useMemo((()=>n?`${n}-trigger`:"menu-trigger"),[n]),c=r.useRef(null),d=lm(a),u=om(Object.assign(Object.assign({},a),{type:"menu"}),d,c),m=u.menuTriggerProps,{onPress:p,onPressStart:g}=m,h=ug(m,["onPress","onPressStart"]),{menuProps:f}=u;return r.createElement(r.Fragment,null,r.createElement(Oi.z,Object.assign({},h,{variant:"tertiary",name:l,onClick:()=>d.open(),mount:e=>c.current=e,active:d.isOpen,"aria-label":a["aria-label"],title:null!=o?o:a["aria-label"],className:i.button,style:i.buttonStyle}),a.label),r.createElement(cm.n,{in:d.isOpen},((e,o)=>r.createElement(lg,{state:d,triggerRef:c,placement:t,portalContainer:s,className:e,onTransitionEnd:o},r.createElement(xp,Object.assign({},a,f,{name:n,theme:i,onAction:e=>{var t;return null===(t=a.onAction)||void 0===t?void 0:t.call(a,e)}}))))))}function pg(e){return null}pg.getCollectionNode=function*(e){let{children:t,title:i,items:n}=e;yield{type:"section",props:e,hasChildNodes:!0,rendered:i,"aria-label":e["aria-label"],*childNodes(){if("function"==typeof t){if(!n)throw new Error("props.children was a function but props.items is missing");for(let e of n)yield{type:"item",value:e,renderer:t}}else{let e=[];r.Children.forEach(t,(t=>{e.push({type:"item",element:t})})),yield*e}}}};let gg=pg;function hg(e){return null}function fg(e){return null!=e.hasChildItems?e.hasChildItems:!!e.childItems||!!(e.title&&r.Children.count(e.children)>0)}hg.getCollectionNode=function*(e,t){let{childItems:i,title:n,children:s}=e,o=e.title||e.children,a=e.textValue||("string"==typeof o?o:"")||e["aria-label"]||"";!a&&(null==t||t.suppressTextValueWarning),yield{type:"item",props:e,rendered:o,textValue:a,"aria-label":e["aria-label"],hasChildNodes:fg(e),*childNodes(){if(i)for(let e of i)yield{type:"item",value:e};else if(n){let e=[];r.Children.forEach(s,(t=>{e.push({type:"item",element:t})})),yield*e}}}};let vg=hg;const bg=e=>{const t=t=>"known"===t.source.kind?r.createElement(e.designSystem.icon[t.source.name],{key:t.source.name,backgroundColor:t.backgroundColor}):r.createElement(e.designSystem.image,Object.assign({key:t.source.name,backgroundColor:t.backgroundColor},t.source));return r.createElement(ec.l.Consumer,null,(({portalContainer:i})=>r.createElement(Mi.F.Fragment,null,i.view(o.g_(a.gn,(i=>r.createElement(mg,{label:t(e.icon),portalContainer:i,placement:"bottom right",theme:{button:yg,item:xg},"aria-label":e.menu.meta.label,onAction:t=>(0,a.zG)(e.menu.sections,E.tS((e=>e.items)),E.Ew((e=>e.id===String(t))),D.bw((t=>e.onClick(t.onClickActions,t.id)()))),title:e.menu.meta.label},e.menu.sections.map(((e,i)=>r.createElement(gg,{key:i,title:e.title},e.items.map((e=>r.createElement(vg,{key:e.id,textValue:e.id},e.icon&&t(e.icon),e.text)))))))))))))},yg=Ei.ux.style({flexShrink:0,alignItems:"center",justifyContent:"center",height:Ei.ux.rem(2),width:Ei.ux.rem(2)}),xg=Ei.ux.style({$nest:{"& i":{height:Ei.ux.rem(2),width:Ei.ux.rem(2)}}});var kg=i(54777);const Sg={width:Ei.ux.rem(1.5),height:Ei.ux.rem(1.5),minWidth:Ei.ux.rem(1.5),minHeight:Ei.ux.rem(1.5)},Cg=Ei.ux.style(Sg);function Eg(e){return Object.assign(Object.assign({},bd.k),{animation:yd,button:Od(null==e?void 0:e.buttonDesignSystemParams),icon:Object.assign(Object.assign({},kg.y),{[ar.Tb.More]:e=>r.createElement(Ri.JO.EllipsisSmall,{className:Cg})}),text:e=>bd.k.text(function(e){var t,i;if(e.format.includes(ar.SQ.Bold)&&(null===(t=e.meta.label)||void 0===t?void 0:t.startsWith("insert"))&&e.textColor.startsWith("CoreBlue"))return Object.assign(Object.assign({},e),{textColor:ar.Il.CoreNeutral90,outlineColor:e.format.includes(ar.SQ.Outline)?ar.Il.CoreNeutral90:e.outlineColor});if(e.format.includes(ar.SQ.Bold)&&(null===(i=e.meta.label)||void 0===i?void 0:i.startsWith("delete")))return Object.assign(Object.assign({},e),{textColor:ar.Il.CoreNeutral50,outlineColor:e.format.includes(ar.SQ.Outline)?ar.Il.CoreNeutral50:e.outlineColor});return e}(e)),dropDownMenuButton:bg,collapsedCard:Zd,nativeExperimentalGBConsistencyUpsellFooter:bd.k.nativeExperimentalGBConsistencyUpsellFooter})}const _g=C.MW({item:pn.j.Item.eq,isFocused:C.vD,isFirst:C.vD,isLast:C.vD,isWaitingForAlertsToBeApplied:C.vD,prevFocusedItemPosition:o.Eh(od.GK)}),wg=s.UI.Node.make((({state:e,notify:t})=>{const{scrolling:i}=r.useContext(_a);return r.createElement(Mi.F.Fragment,null,mn.T(e.pipe(f.q(1)),e.pipe(G.e(50))).pipe(O.U((({item:e,isFocused:n,isFirst:s,isLast:l,isWaitingForAlertsToBeApplied:c})=>r.createElement(r.Fragment,null,s?null:r.createElement(jg,null),r.createElement("div",{className:n?Fg:Ag},r.createElement(ld.P,{key:`${e.id}-${n?"expanded":"collapsed"}`,sduiRootId:e.id,content:e.content,designSystem:Eg({buttonDesignSystemParams:{acceptButtonsLoading:c,cardPosition:{isFirst:s,isLast:l}}}),notify:(n,r,s)=>{const o=i.get()?r.filter((e=>"hoverStateChanged"!==e.type)):r;o.length>0&&vd({item:e,kind:"longFormCardSduiNotify",notify:t})(n,o,s)},transitions:[],prevContent:o.YP,onAnimationEnd:a.Q1,onMount:t({isFocused:n,kind:"longFormCardMount",item:e}),longFormCardState:{viewKind:n?"focused":"collapsed"}})))))))})),Ig=e=>({padding:`${Ei.ux.rem(Fi.F2)} 0`,borderRadius:"inherit",$nest:{"&:hover":{backgroundColor:e?void 0:Pi.I.Background.Base.Subdued}}}),Ag=Ei.ux.style(Ig(!1)),Fg=Ei.ux.style(Ig(!0)),Pg=Ei.ux.keyframes({from:{transform:"scaleY(1)",opacity:1},to:{transform:"scaleY(0.75)",opacity:0}}),Mg={animation:`${Ei.ux.keyframes({from:{transform:"scaleY(0.75)",opacity:0},to:{transform:"scaleY(1)",opacity:1}})} 200ms ease-in-out`},Og={animation:`${Pg} 200ms ease-in-out`,position:"absolute",width:"100%"},Tg=Ei.ux.style(Object.assign(Object.assign({},Mg),{transformOrigin:"bottom"})),Rg=Ei.ux.style(Object.assign(Object.assign({},Mg),{transformOrigin:"top"})),Bg=Ei.ux.style(Object.assign(Object.assign({},Og),{transformOrigin:"bottom"})),Ug=Ei.ux.style(Object.assign(Object.assign({},Og),{transformOrigin:"top"})),Gg=s.UI.Transition.make({collapseForward:Bg,collapseBackward:Ug},{expandForward:Tg,expandBackward:Rg}),Ng=Ei.ux.style({position:"relative"}),Lg=C.MW({isFocused:C.vD,itemId:C.yv}),Dg=s.UI.Knot.make(s.UI.Grid.make((({slots:e,view:t})=>{const i=r.useContext(Do.u.Context),{ref:n,onMount:s}=gi.P.useElWatcher(),o=r.useMemo((()=>t("isFocused").pipe(vi.G(),h.h((([e,t])=>e&&!t)),pt.h(null))),[]),{scrollableContainer:a}=r.useContext(_a),l=r.useMemo((()=>t("isFocused").pipe(ht.O(!1),vi.G(),h.h((([e,t])=>!e&&t)),m.w((()=>n.pipe(U.oA,f.q(1)))),ai.M(a.pipe(U.oA)),ad.g(200),N.b((([e,t])=>{e.offsetTop<t.scrollTop?t.scroll({top:e.offsetTop,left:0,behavior:"smooth"}):e.offsetTop+e.offsetHeight>t.scrollTop+t.offsetHeight?t.scroll({top:e.offsetTop-t.offsetHeight/2,left:0,behavior:"smooth"}):e.scrollIntoView({behavior:"smooth",block:"nearest"})})))),[n]);return gi.P.useSubscriptionTo(l),r.createElement(Mi.F.Fragment,null,qt.a([i,t("itemId"),t("isFocused")]).pipe(O.U((([t,i,n])=>r.createElement(dd,{"data-grammarly-part":n?"focused":"collapsed",visibleOffset:500,defaultHeight:4*t,resetHeightToDefault:o,"data-testid":i,"data-name":"long-form-card",className:Ng,ref:s,role:"listitem"},e.content)))))})),{content:s.UI.Animated.make(Gg,wg)}),jg=()=>r.createElement("div",{className:zg}),zg=Ei.ux.style({margin:`0 ${Ei.ux.rem(Fi.mh)}`,borderBottom:`1px solid ${Pi.I.Border.Base.Subdued}`}),Vg=s.UI.Grid.make((({slots:e})=>r.createElement(Mi.F.Fragment,null,e.LongFormCard,e.Survey))),Kg=s.UI.Knot.make(Vg,{LongFormCard:wg,Survey:Yc}),Zg=s.UI.List.make(E.bw,Kg),Hg=Ei.ux.keyframes({"0%":{transform:"translateX(-300px)"},"85%, 100%":{transform:"translateX(calc(100%))"}}),$g=Ei.ux.style({overflow:"hidden",position:"absolute",top:0,right:0,bottom:0,left:0}),Wg=e=>{var t,i,n;const r=Ei.ux.color(null!==(t=e.overlayGradientCenterColor)&&void 0!==t?t:"rgba(0, 0, 0, 1)"),s=Ei.ux.color(null!==(i=e.overlayGradientEndColor)&&void 0!==i?i:"rgba(255, 255, 255, 0)"),o=`rgba(${r.red()}, ${r.green()}, ${r.blue()}, ${r.alpha()})`,a=`rgba(${s.red()}, ${s.green()}, ${s.blue()}, ${s.alpha()})`;return Ei.ux.style({width:"100%",height:"100%",pointerEvents:"none",mixBlendMode:null!==(n=e.overlayBlendMode)&&void 0!==n?n:"overlay",background:`linear-gradient(90deg,${a} 0px,${o} 120px,${o} 180px,${a} 300px)`,backgroundRepeat:"no-repeat",animationDelay:"300ms",animationDuration:"1.5s",animationName:Hg,animationTimingFunction:"linear",animationIterationCount:"infinite"})},Yg=e=>r.createElement("div",{className:$g},r.createElement("div",{className:Wg(e)})),qg=Ei.ux.style({display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"space-between"}),Xg=Ei.ux.style({position:"relative",height:Ei.ux.rem(1),borderRadius:Ei.ux.rem(.25),overflow:"hidden"}),Qg=e=>`linear-gradient(90deg, ${e[0]} 0%, ${e[1]} 100%)`,Jg=({lineColorGradient:e=["#F5F5F5","#D9D9D9"],gapInRem:t=.6,lineWidthPercents:i=[95,85,75],overlayGradient:n=[]})=>{const s={background:Qg(e)},o={gap:Ei.ux.rem(t)},a=r.createElement(Yg,{overlayBlendMode:"soft-light",overlayGradientCenterColor:n[0],overlayGradientEndColor:n[1]});return r.createElement("div",{className:qg,style:o},r.createElement("div",{className:Xg,style:Object.assign(Object.assign({},s),{width:Ei.ux.percent(i[0])})},a),r.createElement("div",{className:Xg,style:Object.assign(Object.assign({},s),{width:Ei.ux.percent(i[1])})},a),r.createElement("div",{className:Xg,style:Object.assign(Object.assign({},s),{width:Ei.ux.percent(i[2])})},a))},eh=s.UI.Node.make((()=>r.createElement(Gl,{"aria-live":"polite","data-testid":"ai-studio-loading",style:ih},r.createElement(dh,null),r.createElement(Mi.F.div,{"aria-busy":"true",className:nh},[1,2,3,4].map((e=>r.createElement("div",{key:e,className:rh},r.createElement("div",{className:th}),r.createElement("div",{style:{flex:1}},r.createElement(Jg,null))))))))),th=Ei.ux.style({height:Ei.ux.rem(Fi.mh),width:Ei.ux.rem(Fi.mh),content:'" "',borderRadius:"50%",background:Li.NeutralGray0}),ih={padding:0,paddingBottom:Ei.ux.rem(Fi.mh)},nh=Ei.ux.style({padding:`0 ${Ei.ux.rem(1)}`,display:"flex",flexDirection:"column",gap:Ei.ux.rem(1.75)}),rh=Ei.ux.style({display:"flex",gap:Ei.ux.rem(Fi.x),flexDirection:"row"}),sh=s.UI.Node.make((({state:e,notify:t})=>r.createElement(Gl,{"aria-busy":"false","aria-live":"assertive","data-testid":"ai-studio-empty",style:ah},r.createElement(Mi.F.div,{className:oh},e.pipe(O.U((({sduiItem:e})=>r.createElement("div",{className:oh,key:`ai-studio-feed-state-${e.id}`},r.createElement(ld.P,{sduiRootId:e.id,content:e.content.content,designSystem:Eg(),notify:vd({item:e,kind:"longFormCardSduiNotify",notify:t}),transitions:[],prevContent:o.YP,onAnimationEnd:a.Q1,onMount:a.Q1}))))))))),oh=Ei.ux.style({textAlign:"center",padding:`${Ei.ux.rem(Ci.mh)} ${Ei.ux.rem(Ci.mh)} 0 ${Ei.ux.rem(Ci.mh)}`}),ah={padding:`${Ei.ux.rem(Ci.mh)}`,display:"flex",flexDirection:"column-reverse",justifyContent:"center",alignItems:"center",gap:`${Ei.ux.rem(Ci.mh)}`,height:"100%",boxSizing:"border-box"},lh=s.UI.Grid.make((({slots:e,notify:t})=>{const{onMount:i}=(0,Vo.F)((0,a.ls)(N.b(t({kind:"aiStudioFeedMount"})),zo.x(ws.notifyFeedUnmount)));return r.createElement(Gl,{"data-testid":"ai-studio-non-empty",style:mh,mount:i,"aria-live":"polite"},r.createElement(wa,{className:ph},e.cardList))})),ch=s.UI.Knot.make(lh,{cardList:Zg}),dh=({children:e})=>r.createElement(Mi.F.div,{style:{display:"flex",flexDirection:"column",padding:Ei.ux.rem(Fi.mh),gap:Ei.ux.rem(Fi.qp)}},e),uh=s.UI.Union.make("kind",{[Ln.Kind.loadingSuggestions]:eh,[Ln.Kind.empty]:sh,[Ln.Kind.error]:sh,[Ln.Kind.nonEmpty]:ch}),mh={padding:0,display:"grid",gridTemplateRows:"auto 1fr auto",height:"100%"},ph=Ei.ux.style({$nest:{'&[data-overflow-top="true"]':{borderTop:`0.5px solid ${$i.Z.BorderBaseSubduedColor}`}}}),gh=({children:e,style:t})=>r.createElement(Mi.F.h3,{className:(0,Ee.Dx)(t).pipe(O.U((e=>Ei.ux.style({color:Pi.I.Text.Base.Default,margin:0,padding:`0 0 ${Ei.ux.rem(Fi.x)} 0`,fontWeight:700,fontSize:Ei.ux.rem(1),lineHeight:Ei.ux.rem(1.5),overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},e))))},e),hh=s.UI.Node.make((()=>r.createElement(Gl,{key:"playbooks-empty","data-testid":"playbooks-empty",style:fh},r.createElement(gh,{style:vh},"Get Started with Playbooks"),r.createElement("p",{className:bh},"Bring clarity and consistency to your work. Set up a Playbook to receive suggestions that follow your unique guidelines."),r.createElement(Oi.z,{variant:"secondary",onClick:()=>self.open("https://account.grammarly.com/admin/playbooks")},"Create a New Playbook")))),fh={padding:`${Ei.ux.rem(Fi.mh)}`,display:"flex",justifyContent:"center",alignItems:"center",gap:`${Ei.ux.rem(Fi.mh)}`,boxSizing:"border-box"},vh={whiteSpace:"normal",padding:0},bh=Ei.ux.style({margin:0,color:$i.Z.TextBaseSubduedColor,fontSize:Ei.ux.rem(.875),lineHeight:Ei.ux.rem(1.5),fontWeight:400,textAlign:"center"});var yh=i(26329),xh=i(11834),kh=i(15543);const Sh=s.UI.Node.make((({state:e,notify:t})=>{const[i,n]=r.useState(""),s=r.useRef(null),[o,a]=r.useState(null);gi.P.useEffectOnDidMount((()=>{a(s.current)}));const l=e.pipe(O.U((({playbooks:e})=>e.filter((e=>e.label.toLowerCase().includes(i)))))),c=e.pipe(O.U((({playbooks:e})=>e.length>7)));return r.createElement(Gl,{key:"playbooks","data-testid":"playbooks"},c.pipe(O.U((e=>e?r.createElement("div",{className:Ih,key:"search"},r.createElement(yh.n,{label:"Search agents",labelDisplay:"hidden",iconStart:xh.D,value:i,onChange:e=>n(e.toLowerCase())})):null))),r.createElement("div",{className:Ch},r.createElement(Ua.x,{as:"span",variant:"text-xsmall",color:"base-subdued"},"Select an agent")),r.createElement(Mi.F.div,{className:Eh,"data-testid":"playbook-items"},l.pipe(O.U((e=>e.map((e=>r.createElement(kh.u,{key:e.id,placement:"top",openDelay:1e3},r.createElement(kh.aJ,{asChild:!0},r.createElement("div",{className:_h,onClick:t({kind:xt.i.Kind.playbookSelected,playbookId:e.id})},r.createElement(Ua.x,{as:"span",variant:"text-small",weight:"semibold",color:"base-default",className:wh},e.label),e.description&&r.createElement(Ua.x,{as:"span",variant:"text-small",className:wh},e.description))),e.description&&o&&r.createElement(kh._v,{root:o},e.description)))))))),r.createElement("div",{ref:s}))})),Ch=Ei.ux.style({padding:"var(--space-2)"}),Eh=Ei.ux.style({display:"flex",flexDirection:"column",gap:"var(--space-1)"}),_h=Ei.ux.style({display:"flex",flexDirection:"column",gap:"var(--space-1)",padding:"var(--space-2)",cursor:"pointer",borderRadius:"var(--radius-2)",color:"var(--color-text-base-subdued)",$nest:{"&:hover":{backgroundColor:"var(--neutral-gray-10)",color:"var(--color-text-base-default)"}}}),wh=Ei.ux.style({overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}),Ih=Ei.ux.style({marginBottom:Ei.ux.rem(Fi.mh)}),Ah=s.UI.Node.make((()=>r.createElement(Gl,{style:Fh},r.createElement(Pd,null),r.createElement("span",{className:Ph},"Loading...")))),Fh={display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",minHeight:Ei.ux.rem(9.5)},Ph=Ei.ux.style({color:Pi.I.Text.Base.Subdued,fontSize:Ei.ux.rem(.75),fontFamily:"Inter",lineHeight:Ei.ux.rem(1.125)}),Mh=s.UI.Union.make("kind",{loading:Ah,loadedEmpty:hh,loadedNonEmpty:Sh}),Oh=new WeakMap;function Th(e){let{id:t,label:i,"aria-labelledby":n,"aria-label":r,labelElementType:s="label"}=e;t=(0,Tl.Me)(t);let o=(0,Tl.Me)(),a={};return i&&(n=n?`${o} ${n}`:o,a={id:o,htmlFor:"label"===s?t:void 0}),{labelProps:a,fieldProps:Ep({id:t,"aria-label":r,"aria-labelledby":n})}}function Rh(e){let{description:t,errorMessage:i,isInvalid:n,validationState:r}=e,{labelProps:s,fieldProps:o}=Th(e),a=(0,Tl.mp)([Boolean(t),Boolean(i),n,r]),l=(0,Tl.mp)([Boolean(t),Boolean(i),n,r]);return o=(0,gl.d)(o,{"aria-describedby":[a,l,e["aria-describedby"]].filter(Boolean).join(" ")||void 0}),{labelProps:s,fieldProps:o,descriptionProps:{id:a},errorMessageProps:{id:l}}}function Bh(e,t,i){let n=(0,r.useRef)(t),s=(0,cu.i)((()=>{i&&i(n.current)}));(0,r.useEffect)((()=>{var t;let i=null==e||null===(t=e.current)||void 0===t?void 0:t.form;return null==i||i.addEventListener("reset",s),()=>{null==i||i.removeEventListener("reset",s)}}),[e,s])}var Uh=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};let Gh=r.createContext(null);function Nh(e,t){let{focusProps:i}=op(e),{keyboardProps:n}=sp(e),s=(0,gl.d)(i,n),o=function(e){let t=(0,r.useContext)(Gh)||{};lu(t,e);let{ref:i}=t;return Uh(t,["ref"])}(t),a=e.isDisabled?{}:o,l=(0,r.useRef)(e.autoFocus);(0,r.useEffect)((()=>{l.current&&t.current&&(0,Pm.e)(t.current),l.current=!1}),[t]);let c=e.excludeFromTabOrder?-1:0;return e.isDisabled&&(c=void 0),{focusableProps:(0,gl.d)(Object.assign(Object.assign({},s),{tabIndex:c}),a)}}function Lh(e,t,i){let{validationBehavior:n,focus:s}=e;(0,au.b)((()=>{if("native"===n&&(null==i?void 0:i.current)&&!i.current.disabled){let e=t.realtimeValidation.isInvalid?t.realtimeValidation.validationErrors.join(" ")||"Invalid value.":"";i.current.setCustomValidity(e),i.current.hasAttribute("title")||(i.current.title=""),t.realtimeValidation.isInvalid||t.updateValidation(function(e){return{isInvalid:!e.validity.valid,validationDetails:Dh(e),validationErrors:e.validationMessage?[e.validationMessage]:[]}}(i.current))}}));let o=(0,cu.i)((()=>{t.resetValidation()})),a=(0,cu.i)((e=>{var n;t.displayValidation.isInvalid||t.commitValidation();let r=null==i||null===(n=i.current)||void 0===n?void 0:n.form;var o;!e.defaultPrevented&&i&&r&&function(e){for(let t=0;t<e.elements.length;t++){let i=e.elements[t];if(!i.validity.valid)return i}return null}(r)===i.current&&(s?s():null===(o=i.current)||void 0===o||o.focus(),(0,Fm._w)("keyboard"));e.preventDefault()})),l=(0,cu.i)((()=>{t.commitValidation()}));(0,r.useEffect)((()=>{let e=null==i?void 0:i.current;if(!e)return;let t=e.form;return e.addEventListener("invalid",a),e.addEventListener("change",l),null==t||t.addEventListener("reset",o),()=>{e.removeEventListener("invalid",a),e.removeEventListener("change",l),null==t||t.removeEventListener("reset",o)}}),[i,a,l,o,n])}function Dh(e){let t=e.validity;return{badInput:t.badInput,customError:t.customError,patternMismatch:t.patternMismatch,rangeOverflow:t.rangeOverflow,rangeUnderflow:t.rangeUnderflow,stepMismatch:t.stepMismatch,tooLong:t.tooLong,tooShort:t.tooShort,typeMismatch:t.typeMismatch,valueMissing:t.valueMissing,valid:t.valid}}function jh(e,t,i){let{value:n,children:r,"aria-label":s,"aria-labelledby":o}=e;const a=e.isDisabled||t.isDisabled;let l=t.selectedValue===n,{pressProps:c,isPressed:d}=Cu({isDisabled:a}),{pressProps:u,isPressed:m}=Cu({isDisabled:a,onPress(){var e;t.setSelectedValue(n),null===(e=i.current)||void 0===e||e.focus()}}),{focusableProps:p}=Nh((0,gl.d)(e,{onFocus:()=>t.setLastFocusedValue(n)}),i),g=(0,gl.d)(c,p),h=hm(e,{labelable:!0}),f=-1;null!=t.selectedValue?t.selectedValue===n&&(f=0):t.lastFocusedValue!==n&&null!=t.lastFocusedValue||(f=0),a&&(f=void 0);let{name:v,descriptionId:b,errorMessageId:y,validationBehavior:x}=Oh.get(t);return Bh(i,t.selectedValue,t.setSelectedValue),Lh({validationBehavior:x},t,i),{labelProps:(0,gl.d)(u,{onClick:e=>e.preventDefault()}),inputProps:(0,gl.d)(h,Object.assign(Object.assign({},g),{type:"radio",name:v,tabIndex:f,disabled:a,required:t.isRequired&&"native"===x,checked:l,value:n,onChange:e=>{e.stopPropagation(),t.setSelectedValue(n)},"aria-describedby":[e["aria-describedby"],t.isInvalid?y:null,b].filter(Boolean).join(" ")||void 0})),isDisabled:a,isSelected:l,isPressed:d||m}}const zh={badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valueMissing:!1,valid:!0},Vh={...zh,customError:!0,valid:!1},Kh={isInvalid:!1,validationDetails:zh,validationErrors:[]},Zh=(0,r.createContext)({}),Hh="__formValidationState"+Date.now();function $h(e){if(e[Hh]){let{realtimeValidation:t,displayValidation:i,updateValidation:n,resetValidation:r,commitValidation:s}=e[Hh];return{realtimeValidation:t,displayValidation:i,updateValidation:n,resetValidation:r,commitValidation:s}}return function(e){let{isInvalid:t,validationState:i,name:n,value:s,builtinValidation:o,validate:a,validationBehavior:l="aria"}=e;i&&(t||(t="invalid"===i));let c=void 0!==t?{isInvalid:t,validationErrors:[],validationDetails:Vh}:null,d=(0,r.useMemo)((()=>{if(!a||null==s)return null;let e=function(e,t){if("function"==typeof e){let i=e(t);if(i&&"boolean"!=typeof i)return Wh(i)}return[]}(a,s);return Yh(e)}),[a,s]);(null==o?void 0:o.validationDetails.valid)&&(o=void 0);let u=(0,r.useContext)(Zh),m=(0,r.useMemo)((()=>n?Array.isArray(n)?n.flatMap((e=>Wh(u[e]))):Wh(u[n]):[]),[u,n]),[p,g]=(0,r.useState)(u),[h,f]=(0,r.useState)(!1);u!==p&&(g(u),f(!1));let v=(0,r.useMemo)((()=>Yh(h?[]:m)),[h,m]),b=(0,r.useRef)(Kh),[y,x]=(0,r.useState)(Kh),k=(0,r.useRef)(Kh),S=()=>{if(!C)return;E(!1);let e=d||o||b.current;qh(e,k.current)||(k.current=e,x(e))},[C,E]=(0,r.useState)(!1);return(0,r.useEffect)(S),{realtimeValidation:c||v||d||o||Kh,displayValidation:"native"===l?c||v||y:c||v||d||o||y,updateValidation(e){"aria"!==l||qh(y,e)?b.current=e:x(e)},resetValidation(){let e=Kh;qh(e,k.current)||(k.current=e,x(e)),"native"===l&&E(!1),f(!0)},commitValidation(){"native"===l&&E(!0),f(!0)}}}(e)}function Wh(e){return e?Array.isArray(e)?e:[e]:[]}function Yh(e){return e.length?{isInvalid:!0,validationErrors:e,validationDetails:Vh}:null}function qh(e,t){return e===t||!!e&&!!t&&e.isInvalid===t.isInvalid&&e.validationErrors.length===t.validationErrors.length&&e.validationErrors.every(((e,i)=>e===t.validationErrors[i]))&&Object.entries(e.validationDetails).every((([e,i])=>t.validationDetails[e]===i))}let Xh=Math.round(1e10*Math.random()),Qh=0;var Jh=i(27422);const ef=e=>r.createElement(Ri.a1,Object.assign({width:"24",height:"24",fill:"none",viewBox:"0.5 0 24 24"},e),r.createElement("path",{d:"M12.5 23.25C18.7132 23.25 23.75 18.2132 23.75 12C23.75 5.7868 18.7132 0.75 12.5 0.75C6.2868 0.75 1.25 5.7868 1.25 12C1.25 18.2132 6.2868 23.25 12.5 23.25Z",fill:"url(#paint0_linear_4506_11023_disheartening_emoji)",stroke:"none"}),r.createElement("path",{d:"M8.97126 19.5491C10.9569 18.1193 14.0431 18.1193 16.0295 19.5491C16.3344 19.7674 16.5155 19.5315 16.4184 19.3455C14.4879 15.6555 10.5121 15.6555 8.58164 19.3455C8.48451 19.5315 8.66564 19.7674 8.97126 19.5491Z",fill:"#302C3B",stroke:"none"}),r.createElement("path",{d:"M19.895 12.8239C17.9806 13.5491 15.4865 12.8809 14.1909 11.2954C13.9925 11.0531 13.7945 11.2046 13.8328 11.376C14.5936 14.775 17.807 15.6364 20.1654 13.0721C20.2839 12.9435 20.1886 12.7133 19.895 12.8239Z",fill:"#302C3B",stroke:"none"}),r.createElement("path",{d:"M10.8091 11.2954C9.51351 12.8813 7.01976 13.5491 5.10501 12.8239C4.81176 12.7133 4.71614 12.9431 4.83464 13.0721C7.19301 15.6364 10.4064 14.775 11.1673 11.376C11.2059 11.2046 11.0079 11.0531 10.8091 11.2954Z",fill:"#302C3B",stroke:"none"}),r.createElement("defs",null,r.createElement("linearGradient",{id:"paint0_linear_4506_11023_disheartening_emoji",x1:"12.5002",y1:"23.25",x2:"12.5002",y2:"0.750188",gradientUnits:"userSpaceOnUse"},r.createElement("stop",{stopColor:"#FFA027"}),r.createElement("stop",{offset:"0.2723",stopColor:"#FFC151"}),r.createElement("stop",{offset:"0.7633",stopColor:"#FFC93F"}),r.createElement("stop",{offset:"1",stopColor:"#FFE261"})))),tf=e=>r.createElement(Ri.a1,Object.assign({width:"24",height:"24",fill:"none",viewBox:"0.5 0 24 24"},e),r.createElement("path",{d:"M12.5 23.25C18.7132 23.25 23.75 18.2132 23.75 12C23.75 5.7868 18.7132 0.75 12.5 0.75C6.2868 0.75 1.25 5.7868 1.25 12C1.25 18.2132 6.2868 23.25 12.5 23.25Z",fill:"url(#paint0_linear_4506_11027_neutral_emoji)",stroke:"none"}),r.createElement("path",{d:"M17.3266 17.25H7.6726C6.7336 17.25 6.7336 15.75 7.6726 15.75H17.3266C18.2656 15.75 18.2656 17.25 17.3266 17.25Z",fill:"#302C3B",stroke:"none"}),r.createElement("path",{d:"M8.7496 12.1875C9.68158 12.1875 10.4371 11.1801 10.4371 9.9375C10.4371 8.69486 9.68158 7.6875 8.7496 7.6875C7.81762 7.6875 7.0621 8.69486 7.0621 9.9375C7.0621 11.1801 7.81762 12.1875 8.7496 12.1875Z",fill:"#302C3B",stroke:"none"}),r.createElement("path",{d:"M16.2496 12.1875C17.1816 12.1875 17.9371 11.1801 17.9371 9.9375C17.9371 8.69486 17.1816 7.6875 16.2496 7.6875C15.3176 7.6875 14.5621 8.69486 14.5621 9.9375C14.5621 11.1801 15.3176 12.1875 16.2496 12.1875Z",fill:"#302C3B",stroke:"none"}),r.createElement("defs",null,r.createElement("linearGradient",{id:"paint0_linear_4506_11027_neutral_emoji",x1:"12.5002",y1:"23.25",x2:"12.5002",y2:"0.750188",gradientUnits:"userSpaceOnUse"},r.createElement("stop",{stopColor:"#FFA027"}),r.createElement("stop",{offset:"0.2723",stopColor:"#FFC151"}),r.createElement("stop",{offset:"0.7633",stopColor:"#FFC93F"}),r.createElement("stop",{offset:"1",stopColor:"#FFE261"})))),nf=e=>r.createElement(Ri.a1,Object.assign({width:"24",height:"24",fill:"none",viewBox:"0.5 0 24 24"},e),r.createElement("path",{d:"M12.5 23.25C18.7132 23.25 23.75 18.2132 23.75 12C23.75 5.7868 18.7132 0.75 12.5 0.75C6.2868 0.75 1.25 5.7868 1.25 12C1.25 18.2132 6.2868 23.25 12.5 23.25Z",fill:"url(#paint0_linear_11994_841_smiling_emoji)",stroke:"none"}),r.createElement("path",{d:"M5.82085 15.8453C7.89191 15.8453 9.57085 14.1663 9.57085 12.0953C9.57085 10.0242 7.89191 8.34528 5.82085 8.34528C3.74978 8.34528 2.07085 10.0242 2.07085 12.0953C2.07085 14.1663 3.74978 15.8453 5.82085 15.8453Z",fill:"url(#paint1_radial_11994_841_smiling_emoji)",stroke:"none"}),r.createElement("path",{d:"M19.1792 15.75C21.2502 15.75 22.9292 14.0711 22.9292 12C22.9292 9.92893 21.2502 8.25 19.1792 8.25C17.1081 8.25 15.4292 9.92893 15.4292 12C15.4292 14.0711 17.1081 15.75 19.1792 15.75Z",fill:"url(#paint2_radial_11994_841_smiling_emoji)",stroke:"none"}),r.createElement("path",{d:"M14.0844 9.3015C15.5 7.72425 17.7012 7.7235 19.1176 9.3015C19.3344 9.543 19.4634 9.282 19.3944 9.07725C18.0181 5.0055 15.1831 5.0055 13.8069 9.07725C13.7379 9.282 13.8669 9.54262 14.0844 9.3015Z",fill:"#302C3B",stroke:"none"}),r.createElement("path",{d:"M5.88312 9.3015C7.29949 7.72425 9.49999 7.7235 10.9164 9.3015C11.1331 9.543 11.2629 9.282 11.1931 9.07725C9.81687 5.0055 6.98187 5.0055 5.60562 9.07725C5.53699 9.282 5.66562 9.54262 5.88312 9.3015Z",fill:"#302C3B",stroke:"none"}),r.createElement("path",{d:"M17.1961 13.647C14.3352 15.7061 10.6614 15.705 7.802 13.647C7.397 13.356 7.15512 13.6706 7.28487 13.9178C9.4805 18.1151 15.5187 18.1144 17.7147 13.9178C17.8437 13.6703 17.6026 13.3556 17.1961 13.647Z",fill:"#302C3B",stroke:"none"}),r.createElement("defs",null,r.createElement("linearGradient",{id:"paint0_linear_11994_841_smiling_emoji",x1:"12.5002",y1:"23.25",x2:"12.5002",y2:"0.750188",gradientUnits:"userSpaceOnUse"},r.createElement("stop",{stopColor:"#FFA027"}),r.createElement("stop",{offset:"0.2723",stopColor:"#FFC151"}),r.createElement("stop",{offset:"0.7633",stopColor:"#FFC93F"}),r.createElement("stop",{offset:"1",stopColor:"#FFE261"})),r.createElement("radialGradient",{id:"paint1_radial_11994_841_smiling_emoji",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(5.82103 12.0952) scale(3.75 3.75)"},r.createElement("stop",{stopColor:"#F18D84"}),r.createElement("stop",{offset:"0.2514",stopColor:"#F29180",stopOpacity:"0.7486"}),r.createElement("stop",{offset:"0.5118",stopColor:"#F49E73",stopOpacity:"0.4882"}),r.createElement("stop",{offset:"0.7755",stopColor:"#F8B25F",stopOpacity:"0.2245"}),r.createElement("stop",{offset:"1",stopColor:"#FDCA47",stopOpacity:"0"})),r.createElement("radialGradient",{id:"paint2_radial_11994_841_smiling_emoji",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(19.179 12) scale(3.75)"},r.createElement("stop",{stopColor:"#F18D84"}),r.createElement("stop",{offset:"0.2514",stopColor:"#F29180",stopOpacity:"0.7486"}),r.createElement("stop",{offset:"0.5118",stopColor:"#F49E73",stopOpacity:"0.4882"}),r.createElement("stop",{offset:"0.7755",stopColor:"#F8B25F",stopOpacity:"0.2245"}),r.createElement("stop",{offset:"1",stopColor:"#FDCA47",stopOpacity:"0"})))),rf="submitBtn",sf={padding:Ei.ux.rem(Fi.mh),gap:Ei.ux.rem(Fi.mh)},of={color:Pi.I.Text.Base.Default,fontWeight:700,fontSize:Ei.ux.rem(1.25),lineHeight:Ei.ux.rem(1.5),margin:0},af={border:`${Ei.ux.px(1)} solid ${Li.NeutralGray20}`,borderRadius:Ei.ux.rem(So.xB),padding:`${Ei.ux.rem(Fi.x+Fi.yC)} ${Ei.ux.rem(Fi.x)}`,height:Ei.ux.rem(8)},lf={display:"flex",alignItems:"flex-start",$nest:{"& input[type='checkbox']":{margin:`${Ei.ux.rem(Fi.W9)} ${Ei.ux.rem(Fi.x)} 0 0`,minWidth:Ei.ux.rem(1),minHeight:Ei.ux.rem(1)},"& label":{color:Pi.I.Text.Base.Default,fontWeight:400,fontSize:Ei.ux.rem(.75),lineHeight:Ei.ux.rem(1.125)}}},cf=Object.assign({width:Ei.ux.percent(100)},(0,Hi.dD)({fontSize:Ei.ux.rem(.875)},rf)),df={display:"flex",flexDirection:"column",gap:Ei.ux.rem(Fi.x)},uf=sf,mf=Ei.ux.style(of),pf=Ei.ux.style(af),gf=Ei.ux.style(lf),hf=(Ei.ux.style({fontWeight:700}),Ei.ux.joinClasses([rf,Ei.ux.style(cf)])),ff=Ei.ux.style(df),vf="How do you like Grammarly?",bf="I dislike it",yf="It's OK",xf="I like it!",kf=r.createContext(null),Sf=e=>{const{children:t,label:i}=e,n=function(e){let t=(0,r.useMemo)((()=>e.name||`radio-group-${Xh}-${++Qh}`),[e.name]);var i;let[n,s]=(0,zm.z)(e.value,null!==(i=e.defaultValue)&&void 0!==i?i:null,e.onChange),[o,a]=(0,r.useState)(null),l=$h({...e,value:n}),c=l.displayValidation.isInvalid;return{...l,name:t,selectedValue:n,setSelectedValue:t=>{e.isReadOnly||e.isDisabled||(s(t),l.commitValidation())},lastFocusedValue:o,setLastFocusedValue:a,isDisabled:e.isDisabled||!1,isReadOnly:e.isReadOnly||!1,isRequired:e.isRequired||!1,validationState:e.validationState||(c?"invalid":null),isInvalid:c}}(e),{radioGroupProps:s,labelProps:o}=function(e,t){let{name:i,isReadOnly:n,isRequired:r,isDisabled:s,orientation:o="vertical",validationBehavior:a="aria"}=e,{direction:l}=Hu(),{isInvalid:c,validationErrors:d,validationDetails:u}=t.displayValidation,{labelProps:m,fieldProps:p,descriptionProps:g,errorMessageProps:h}=Rh(Object.assign(Object.assign({},e),{labelElementType:"span",isInvalid:t.isInvalid,errorMessage:e.errorMessage||d})),f=hm(e,{labelable:!0}),{focusWithinProps:v}=(0,hl.L)({onBlurWithin(i){var n;null===(n=e.onBlur)||void 0===n||n.call(e,i),t.selectedValue||t.setLastFocusedValue(null)},onFocusWithin:e.onFocus,onFocusWithinChange:e.onFocusChange}),b=(0,Tl.Me)(i);return Oh.set(t,{name:b,descriptionId:g.id,errorMessageId:h.id,validationBehavior:a}),{radioGroupProps:(0,gl.d)(f,Object.assign(Object.assign({role:"radiogroup",onKeyDown:e=>{let i;switch(e.key){case"ArrowRight":i="rtl"===l&&"vertical"!==o?"prev":"next";break;case"ArrowLeft":i="rtl"===l&&"vertical"!==o?"next":"prev";break;case"ArrowDown":i="next";break;case"ArrowUp":i="prev";break;default:return}e.preventDefault();let n,r=(0,Mm.QL)(e.currentTarget,{from:e.target});"next"===i?(n=r.nextNode(),n||(r.currentNode=e.currentTarget,n=r.firstChild())):(n=r.previousNode(),n||(r.currentNode=e.currentTarget,n=r.lastChild())),n&&(n.focus(),t.setSelectedValue(n.value))},"aria-invalid":t.isInvalid||void 0,"aria-errormessage":e["aria-errormessage"],"aria-readonly":n||void 0,"aria-required":r||void 0,"aria-disabled":s||void 0,"aria-orientation":o},p),v)),labelProps:m,descriptionProps:g,errorMessageProps:h,isInvalid:c,validationErrors:d,validationDetails:u}}(Object.assign(Object.assign({},e),{orientation:"horizontal"}),n);return r.createElement("div",Object.assign({className:Ef},s),r.createElement("h3",Object.assign({className:mf},o),i),r.createElement(kf.Provider,{value:n},r.createElement("div",{className:_f},t)))},Cf=e=>{const{icon:t,label:i,value:n}=e,s=r.useContext(kf);if(!s)return console.error("Score should be a child of ScoreGroup"),null;const o=r.useRef(null),{inputProps:a}=jh(e,s,o),{focusProps:l,isFocusVisible:c}=function(e={}){let{autoFocus:t=!1,isTextInput:i,within:n}=e,s=(0,r.useRef)({isFocused:!1,isFocusVisible:t||(0,Fm.E)()}),[o,a]=(0,r.useState)(!1),[l,c]=(0,r.useState)((()=>s.current.isFocused&&s.current.isFocusVisible)),d=(0,r.useCallback)((()=>c(s.current.isFocused&&s.current.isFocusVisible)),[]),u=(0,r.useCallback)((e=>{s.current.isFocused=e,a(e),d()}),[d]);(0,Fm.mG)((e=>{s.current.isFocusVisible=e,d()}),[],{isTextInput:i});let{focusProps:m}=op({isDisabled:n,onFocusChange:u}),{focusWithinProps:p}=(0,hl.L)({isDisabled:!n,onFocusWithinChange:u});return{isFocused:o,isFocusVisible:l,focusProps:n?p:m}}(),d=s.selectedValue===n,u=(0,Tl.Me)();return r.createElement("label",Object.assign({},(0,La.Sh)(wf,d&&If,c&&Af)),r.createElement(bl,null,r.createElement("input",Object.assign({},(0,gl.d)(a,l),{ref:o,"aria-labelledby":u}))),t,r.createElement(Ua.x,{id:u,as:"span",variant:"text-small"},i))},Ef=Ei.ux.style({display:"flex",flexDirection:"column",gap:Ei.ux.rem(Fi.mh)}),_f=Ei.ux.style({display:"flex",flexDirection:"row",justifyContent:"space-between",paddingLeft:Ei.ux.rem(Fi.mh),paddingRight:Ei.ux.rem(Fi.mh)}),wf=Ei.ux.style({width:Ei.ux.rem(5),height:Ei.ux.rem(5),cursor:"pointer",display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center",gap:Ei.ux.rem(Fi.x),borderRadius:Ei.ux.rem(So.HP),fontWeight:400,fontSize:Ei.ux.rem(.75),lineHeight:Ei.ux.rem(1.125),$nest:{"&:hover":{backgroundColor:Pi.I.Background.Base.Subdued}}}),If=Ei.ux.style({backgroundColor:Li.Blue10,$nest:{"&:hover":{backgroundColor:Li.Blue10}}}),Af=Ei.ux.style({boxShadow:"0 0 0 2px rgb(2, 126, 111)"}),Ff=Ei.ux.style(Object.assign({},(0,Hi.fx)(1.5))),Pf=(0,La.xb)((({selectedScore:e,onSelectScore:t})=>r.createElement(Sf,{label:vf,value:e,onChange:t},r.createElement(Cf,{value:Jh.x.Mood.dissatisfied,label:bf,icon:r.createElement(ef,{className:Ff})}),r.createElement(Cf,{value:Jh.x.Mood.ok,label:yf,icon:r.createElement(tf,{className:Ff})}),r.createElement(Cf,{value:Jh.x.Mood.satisfied,label:xf,icon:r.createElement(nf,{className:Ff})})))),Mf=(0,La.xb)(na),Of=s.UI.Node.make((({state:e,view:t,notify:i})=>{const n=r.useContext(oa.N),s="domainCheckbox"+(0,yt.fg)(5);return r.createElement(Gl,{style:uf},r.createElement(Pf,{selectedScore:t("formData").pipe(O.U((e=>e.mood))),onSelectScore:e=>i({kind:xt.i.Kind.feedbackFormChange,feedbackData:{mood:e}})()}),r.createElement(Mf,{ariaLabel:"tell us why",className:pf,placeholder:"How can we improve?",fitContentHeight:!1,text:t("formData").pipe(O.U((({message:e})=>null!=e?e:""))),onChange:e=>i({kind:xt.i.Kind.feedbackFormChange,feedbackData:{message:e}})(),useIframeWrapper:n.view((e=>e.useIframeTextfieldWrapper))}),e.pipe(O.U((({formData:e,domain:t,source:n})=>r.createElement("div",{className:ff},(0,a.zG)(t,o.g_(a.gn,(t=>r.createElement("div",{className:gf},r.createElement("input",{type:"checkbox",id:s,checked:void 0!==e.domain,onChange:i({kind:xt.i.Kind.feedbackFormChange,feedbackData:{domain:void 0!==e.domain?void 0:t}})}),r.createElement("label",{htmlFor:s},"Include the domain ",r.createElement("b",null,t)," with my feedback to help improve Grammarly."))))),(0,a.zG)(o.ij(void 0!==e.mood?Object.assign(Object.assign({},e),{mood:e.mood,source:n}):null),o.g_((()=>r.createElement(Oi.z,{disabled:!0,className:hf,onClick:a.Q1},"Submit")),(e=>r.createElement(Oi.z,{disabled:!1,className:hf,onClick:i({kind:xt.i.Kind.feedbackFormSubmitButtonClick,feedbackData:e})},"Submit")))))))))})),Tf=e=>r.createElement(Ri.a1,{className:e.className,viewBox:"0 0 20 20",width:20,height:20},r.createElement("path",{d:"M8.58541 3.37143C9.36646 2.59038 10.6328 2.59038 11.4138 3.37143L16.6283 8.5859C17.4094 9.36695 17.4094 10.6333 16.6283 11.4143L11.4138 16.6288C10.6328 17.4098 9.36646 17.4098 8.58541 16.6288L3.37094 11.4143C2.58989 10.6333 2.58989 9.36695 3.37094 8.5859L8.58541 3.37143ZM11.4371 6.25011C11.4371 5.4562 10.7935 4.81261 9.99962 4.81261C9.20571 4.81261 8.56212 5.4562 8.56212 6.25011V10.6251C8.56212 11.3163 9.04996 11.8936 9.70011 12.0314C9.04996 12.1692 8.56212 12.7464 8.56212 13.4376C8.56212 14.2315 9.20571 14.8751 9.99962 14.8751C10.7935 14.8751 11.4371 14.2315 11.4371 13.4376C11.4371 12.7464 10.9493 12.1692 10.2991 12.0314C10.9493 11.8936 11.4371 11.3163 11.4371 10.6251V6.25011Z",fill:"#D31332",stroke:"#D31332"})),Rf=({options:e,onSubmit:t,onCancel:i})=>{const[n,s]=r.useState(o.YP),[l,c]=r.useState(!1);return r.createElement(Mi.F.form,{id:"radioOptionsForm",onSubmit:e=>{(0,a.zG)(n,o.g_((()=>c(!0)),t)),e.preventDefault()},className:Ei.ux.style(Bf)},r.createElement("fieldset",{className:Df,style:{borderColor:l?Li.Red60:"transparent"}},(0,a.zG)(e,E.UI((e=>r.createElement("span",{key:e,className:Uf},r.createElement("input",{type:"radio",id:e,value:e,name:e,checked:(0,a.zG)(n,o.hX((t=>t===e)),o.pC),onChange:()=>{c(!1),s(o.G(e))},style:{margin:`0 ${Ei.ux.rem(.5)} 0 0`}}),r.createElement("label",{htmlFor:e},e)))))),l&&r.createElement("div",{className:Lf},r.createElement(Tf,{className:Nf})," Make a selection"),r.createElement("div",{className:Gf},r.createElement(Oi.z,{type:"submit",form:"radioOptionsForm",name:"submitSelectedRadioOption",style:{default:Bf}},"Submit"),"  ",r.createElement(Oi.z,{variant:"tertiary",onClick:i,name:"cancelRadioOptionSelection",style:{default:Bf}},"Cancel")))},Bf={fontSize:Ei.ux.rem(.875)},Uf=Ei.ux.style({display:"inline-flex",alignItems:"center"}),Gf=Ei.ux.style({paddingTop:Ei.ux.rem(.5)}),Nf=Ei.ux.style({minWidth:"unset",minHeight:"unset"}),Lf=Ei.ux.style({color:Li.Red60,lineHeight:Ei.ux.rem(1.5)}),Df=Ei.ux.style({marginLeft:`calc(-1 * ${Ei.ux.rem(.25)})`,padding:Ei.ux.rem(.25),display:"flex",flexDirection:"column",gap:Ei.ux.rem(.5),width:"fit-content",border:"1px solid transparent",borderRadius:Ei.ux.rem(.25),margin:0}),jf=s.UI.Node.make((({view:e,notify:t})=>r.createElement(Gl,{style:Vf,"data-testid":"follow-up-prompt"},r.createElement(Mi.F.div,{className:Kf},r.createElement(Mi.F.img,{src:e("iconUrl"),style:{width:Ei.ux.rem(1.25),height:Ei.ux.rem(1.25)},alt:""}),r.createElement(Mi.F.span,Object.assign({},W(e("header"))))),r.createElement(Mi.F.div,null,e("hintsHeader")),e("hintsItems").pipe(O.U((0,a.ls)(E.UI((e=>r.createElement("li",{key:e},e))),_.c2,o.g_(a.gn,(e=>r.createElement("ul",{key:"action-followup-radio-list",className:Zf},e)))))),e("radioOptions").pipe(O.U(o.g_(a.gn,(e=>r.createElement(Rf,{key:"radioOptions",options:e,onSubmit:e=>t({kind:xt.i.Kind.radioOptionsSubmitButtonClick,selectedOption:e})(),onCancel:t({kind:xt.i.Kind.radioOptionsCancelButtonClick})})))))))),zf=s.UI.Union.asOption(jf),Vf={fontWeight:400,fontSize:Ei.ux.rem(.875),lineHeight:Ei.ux.rem(1.3125),padding:`${Ei.ux.rem(Fi.qp)} ${Ei.ux.rem(Fi.mh)} ${Ei.ux.rem(1.5)} ${Ei.ux.rem(Fi.mh)}`,borderBottom:`0.5px solid ${$i.Z.BorderBaseSubduedColor}`},Kf=Ei.ux.style({display:"flex",alignItems:"start",gap:Ei.ux.rem(Fi.x),color:Pi.I.Text.Base.Subdued,fontSize:Ei.ux.rem(.875),lineHeight:Ei.ux.rem(1.3125),padding:`${Ei.ux.rem(Fi.x)} 0`}),Zf=Ei.ux.style({padding:`0 0 0 ${Ei.ux.rem(Fi.sD+Fi.yC)}`,margin:0});var Hf=i(11853),$f=i(44580),Wf=i(92160),Yf=i(82486);const qf=(0,wi.I)("nocolor",(({title:e,titleId:t,desc:i,descId:n,...s})=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24","aria-hidden":"true","data-icon":"OutcomeStyleGuidePlaceholder",stroke:"transparent","aria-labelledby":t,"aria-describedby":n,...s},i?r.createElement("desc",{id:n},i):null,e?r.createElement("title",{id:t},e):null,r.createElement("path",{fill:"url(#oldera)",fillRule:"evenodd",d:"M11.537 11.537q-2.712.392-4.145-1.04-1.43-1.431-1.04-4.145 2.714-.39 4.145 1.04c.955.955 1.318 2.447 1.04 4.145",clipRule:"evenodd"}),r.createElement("path",{fill:"url(#olderb)",fillRule:"evenodd",d:"M17.648 6.352q.39 2.713-1.04 4.145-1.433 1.432-4.145 1.04-.393-2.713 1.04-4.145c.954-.954 2.446-1.317 4.145-1.04",clipRule:"evenodd"}),r.createElement("path",{fill:"url(#olderc)",fillRule:"evenodd",d:"M12.463 12.463q2.712-.392 4.145 1.04 1.43 1.431 1.04 4.145-2.714.39-4.145-1.04c-.955-.955-1.318-2.447-1.04-4.145",clipRule:"evenodd"}),r.createElement("path",{fill:"url(#olderd)",fillRule:"evenodd",d:"M6.353 17.648q-.393-2.713 1.04-4.145 1.431-1.432 4.145-1.04.39 2.713-1.04 4.145c-.955.954-2.447 1.317-4.145 1.04",clipRule:"evenodd"}),r.createElement("defs",null,r.createElement("linearGradient",{id:"oldera",x1:11.64,x2:6.24,y1:9.84,y2:9.84,gradientUnits:"userSpaceOnUse"},r.createElement("stop",{stopColor:"#D2E3FF"}),r.createElement("stop",{offset:1,stopColor:"#548AFF"})),r.createElement("linearGradient",{id:"olderb",x1:12.36,x2:17.76,y1:8.04,y2:8.04,gradientUnits:"userSpaceOnUse"},r.createElement("stop",{stopColor:"#FFD0D8"}),r.createElement("stop",{offset:1,stopColor:"#EE445F"})),r.createElement("linearGradient",{id:"olderc",x1:12.36,x2:17.76,y1:14.16,y2:14.16,gradientUnits:"userSpaceOnUse"},r.createElement("stop",{stopColor:"#ECD1FF"}),r.createElement("stop",{offset:1,stopColor:"#BC78ED"})),r.createElement("linearGradient",{id:"olderd",x1:12,x2:6.6,y1:15.96,y2:15.96,gradientUnits:"userSpaceOnUse"},r.createElement("stop",{offset:.196,stopColor:"#CAFAEF"}),r.createElement("stop",{offset:1,stopColor:"#0FDCAC"}))))));var Xf=i(40081);const Qf=({icon:e,categoryLabel:t,scoreSubtitle:i,progressValue:n,progressBarColor:s,trackColor:o,showOkIcon:l})=>{const c=(0,Tl.Me)(),d=(0,Tl.Me)(),u=(0,Tl.Me)();return r.createElement("li",{"aria-labelledby":`${c} ${d} ${u}`,className:Jf},(0,a.zG)(e,S.g_((e=>r.createElement(Ki,{className:tv,"aria-hidden":!0},r.createElement(_i.J,{icon:e,accessibilityLabel:"",size:"large"}))),(e=>r.createElement("img",{src:e,className:ov,alt:""})))),r.createElement(Ua.x,{as:"span",variant:"text-small",marginRight:4,id:c},t),r.createElement("span",{hidden:!0,id:d},null!==n?`${Math.round(100*n)}%`:""),r.createElement("div",{className:rv,style:{backgroundColor:s,borderColor:o},"aria-hidden":!0},r.createElement("div",{className:sv,style:{width:n?`${Math.round(100*n)}%`:0,backgroundColor:o}})),r.createElement("div",{className:nv},l&&r.createElement(Ki,{className:iv,"aria-hidden":!0},r.createElement(_i.J,{icon:Xf.j,accessibilityLabel:"",variant:"deletion"})),r.createElement(Ua.x,{as:"span",variant:"text-small",color:"base-subdued",className:ev,id:u},i)))},Jf=Ei.ux.style({display:"contents"}),ev=Ei.ux.style({whiteSpace:"nowrap"}),tv=Ei.ux.style({marginRight:Ei.ux.rem(Fi.x)}),iv=Ei.ux.style({marginRight:Ei.ux.rem(Fi.x)}),nv=Ei.ux.style({marginLeft:Ei.ux.rem(Fi.mh),display:"flex",alignItems:"center"}),rv=Ei.ux.style({height:Ei.ux.rem(Fi.F2),width:"100%",position:"relative",borderRadius:Ei.ux.rem(So.xB),borderStyle:"solid",borderWidth:"1px",boxSizing:"border-box"}),sv=Ei.ux.style({position:"absolute",left:0,bottom:0,height:"100%"}),ov=Ei.ux.style({width:Ei.ux.rem(1.5),height:Ei.ux.rem(1.5)});const av={correctness:"Looking good",clarity:"Very clear",engagement:"Very engaging",delivery:"Just right",styleGuide:"All good"},lv={correctness:"No suggestions",clarity:"So far so good",engagement:"Nothing yet",delivery:"Nothing yet",styleGuide:"Nothing yet"};function cv(e,t){return i=>{if(t||"loading"===e.status||"tooSmall"===e.status)return lv[i];{switch(i){case"clarity":return function({score:e,alerts:t}){return 0===t?av.clarity:0===e?`${t} ${(0,yt._6)(t,"suggestion","suggestions")}`:e<.2?"Unclear":e<.7?"A bit unclear":e<.85?"Mostly clear":e<.95?"Clear":av.clarity}(e.outcomeScores.clarity);case"engagement":return function({score:e,alerts:t}){return 0===t?av.engagement:0===e?`${t} ${(0,yt._6)(t,"suggestion","suggestions")}`:e<.2?"Bland":e<.8?"A bit bland":e<.95?"Engaging":av.engagement}(e.outcomeScores.engagement);case"delivery":return function({score:e,alerts:t}){return 0===t?av.delivery:0===e?`${t} ${(0,yt._6)(t,"suggestion","suggestions")}`:e<.2?"Serious issues":e<.8?"Very off":e<.95?"Slightly off":av.delivery}(e.outcomeScores.delivery)}const t=e.outcomeScores[i].alerts;return t>0?`${t} ${(0,yt._6)(t,"suggestion","suggestions")}`:av[i]}}}const dv=s.UI.Node.make((({state:e})=>{const t=(0,Tl.Me)();return r.createElement(Mi.F.Fragment,null,e.pipe(O.U((({score:e,isTextEmpty:i,styleGuideEnabled:n,institutionLogoUrl:s})=>{const o=cv(e,i),l=function(e,t){return i=>{if(t)return null;switch(e.status){case"loading":case"tooSmall":return null;case"ok":return 0===e.outcomeScores[i].alerts?1:e.outcomeScores[i].score;default:(0,c.L0)(e)}}}(e,i),d=function(e,t){return i=>{if(t)return!0;switch(e.status){case"loading":case"tooSmall":return!0;case"ok":return 0===e.outcomeScores[i].alerts;default:(0,c.L0)(e)}}}(e,i);return r.createElement("ul",{className:uv,key:"outcomes-grid","aria-labelledby":t},r.createElement("span",{hidden:!0,id:t},"Outcome scores"),r.createElement(Qf,{categoryLabel:"Correctness",icon:S.t$(Hf.a),scoreSubtitle:o("correctness"),progressValue:l("correctness"),showOkIcon:d("correctness"),progressBarColor:Pi.I.Background.Correctness.Subdued,trackColor:Pi.I.Background.Correctness.Default}),r.createElement(Qf,{categoryLabel:"Clarity",icon:S.t$($f.G),scoreSubtitle:o("clarity"),progressValue:l("clarity"),showOkIcon:d("clarity"),progressBarColor:Pi.I.Background.Clarity.Subdued,trackColor:Pi.I.Background.Clarity.Default}),r.createElement(Qf,{categoryLabel:"Engagement",icon:S.t$(Wf.L),scoreSubtitle:o("engagement"),progressValue:l("engagement"),showOkIcon:d("engagement"),progressBarColor:Pi.I.Background.Engagement.Subdued,trackColor:Pi.I.Background.Engagement.Default}),r.createElement(Qf,{categoryLabel:"Delivery",icon:S.t$(Yf.D),scoreSubtitle:o("delivery"),progressValue:l("delivery"),showOkIcon:d("delivery"),progressBarColor:Pi.I.Background.Delivery.Subdued,trackColor:Pi.I.Background.Delivery.Default}),n&&r.createElement(Qf,{categoryLabel:"Style guide",icon:(0,a.zG)(s,S.Yo((()=>qf))),scoreSubtitle:o("styleGuide"),progressValue:l("styleGuide"),showOkIcon:d("styleGuide"),progressBarColor:Pi.I.Background.Business.Subdued,trackColor:Pi.I.Background.Business.Default}))}))))})),uv=Ei.ux.style({display:"grid",gridTemplateColumns:`min-content min-content minmax(${Ei.ux.rem(2)}, ${Ei.ux.rem(6)}) min-content`,gridTemplateRows:"auto",rowGap:Ei.ux.rem(Fi.x),alignItems:"center",padding:`${Ei.ux.rem(Fi.F2)} 0`});var mv=i(25294),pv=i(69854);const gv=({score:e,className:t})=>r.createElement(mv.k,{direction:"column",align:"center",className:t},r.createElement(Ua.x,{as:"strong",variant:"heading-large"},e),r.createElement(Ua.x,{as:"span",align:"center",variant:"text-small",color:"base-subdued",className:hv},"of 100")),hv=Ei.ux.style({whiteSpace:"nowrap"}),fv=e=>r.createElement(Ri.a1,Object.assign({width:"64",height:"64",viewBox:"0 0 64 64"},e,{fill:"none"}),r.createElement("circle",{cx:"32",cy:"32",r:"19",stroke:"#C6CBDE",strokeWidth:"2"}),r.createElement("path",{d:"M25 33L30 38L49.5 18.5",stroke:"white",strokeWidth:"8",strokeLinecap:"round"}),r.createElement("path",{d:"M25 33L30 38L49.5 18.5",stroke:"#15C39A",strokeWidth:"3",strokeLinecap:"round"})),vv=(0,La.xb)(mv.k),bv=(0,La.xb)(Ua.x),yv=s.UI.Node.make((({state:e})=>r.createElement(vv,{direction:"row",gap:4,align:"center"},e.pipe(O.U($n({loading:()=>r.createElement(fv,{className:kv}),tooSmall:()=>r.createElement(fv,{className:kv}),ok:e=>100===e.generalScore?r.createElement(fv,{className:kv}):r.createElement(gv,{score:e.generalScore,className:xv})}))),r.createElement(mv.k,{direction:"column"},r.createElement(pv.X,{as:"h2",variant:"heading-xsmall"},"Overall score"),r.createElement(bv,{as:"p",variant:"text-small",color:"base-subdued"},e.pipe(O.U($n({loading:()=>"Grammarly needs at least 30 words to calculate a score.",tooSmall:()=>"Grammarly needs at least 30 words to calculate a score.",ok:e=>100===e.generalScore?"Great! This text scores 100 out of 100.":"The score represents the quality of this text. Increase it by addressing issues."})))))))),xv=Ei.ux.style({width:Ei.ux.rem(4),height:Ei.ux.rem(4),minWidth:Ei.ux.rem(4),minHeight:Ei.ux.rem(4),boxSizing:"border-box",padding:`${Ei.ux.rem(Fi.x)} ${Ei.ux.rem(Fi.F2)} ${Ei.ux.rem(Fi.yC)} ${Ei.ux.rem(Fi.F2)}`}),kv=Ei.ux.style({minWidth:Ei.ux.rem(4),minHeight:Ei.ux.rem(4)}),Sv=s.UI.Grid.make((({slots:e,state:t,notify:i})=>{const{onMount:n}=(0,Vo.F)((0,a.ls)(ai.M(t),N.b((([e,t])=>i({kind:"performanceScoreMountAction",score:t})()))));return r.createElement(Gl,{"data-testid":"performance-score",mount:n},e.overallScore,r.createElement("div",{className:_v,"aria-hidden":!0}),e.outcomeScores)})),Cv=s.UI.Knot.make(Sv,{overallScore:yv,outcomeScores:dv}),Ev=s.UI.Union.asOption(Cv),_v=Ei.ux.style({borderTop:`1px solid ${Pi.I.Border.Base.Subdued}`,margin:`${Ei.ux.rem(Fi.x)} 0`});var wv=i(30508),Iv=i(17477),Av=i(28338);class Fv{constructor(e,t=0,i=!0){this._capacity=e,this._start=t,this._allowOverflow=i,this._nextId=t}get id(){return this._nextId}newId(){let e=this._nextId;if(e>this._capacity){if(!this._allowOverflow)throw new Av.ej("ids limit reached: "+this._capacity);this._nextId=e=0}return this._nextId++,e}reset(){this._nextId=this._start}}var Pv=i(19691);const Mv={border:`1px solid ${Pi.I.Background.Neutral.Default}`,borderRadius:Ei.ux.rem(So.xB),width:Ei.ux.rem(15),height:Ei.ux.rem(2),boxSizing:"border-box",position:"relative"},Ov={padding:`${Ei.ux.rem(Fi.F2)} ${Ei.ux.rem(Fi.qp)}`,width:"100%",height:"100%",border:"none",background:"transparent",position:"relative",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"space-between",gap:Ei.ux.rem(Fi.F2)},Tv={fontWeight:400,fontSize:Ei.ux.rem(.875),lineHeight:Ei.ux.rem(1.375),color:Pi.I.Text.Base.Default},Rv={padding:Ei.ux.rem(Fi.F2),background:"white",boxShadow:jo.H8.boxShadow,border:jo.H8.border,borderRadius:Ei.ux.rem(So.xB),width:Ei.ux.rem(15),boxSizing:"border-box",overflowY:"auto",maxHeight:Ei.ux.rem(8.125),zIndex:9999,$nest:{"& > ul":{listStyle:"none",padding:0,margin:0,$nest:{"& > li":{padding:0,margin:0}}}}},Bv={border:"none",background:"transparent",width:"100%",cursor:"pointer",overflow:"hidden",textOverflow:"ellipsis",fontSize:Ei.ux.rem(.875),lineHeight:Ei.ux.rem(1.375),color:Pi.I.Text.Base.Default,padding:`${Ei.ux.rem(.1875)} ${Ei.ux.rem(Fi.qp)}`,borderRadius:Ei.ux.rem(So.xB),display:"flex",justifyContent:"flex-start",$nest:{"&:hover":{color:Pi.I.Text.Base.Inverse,background:Li.NeutralGray40}}},Uv=Ei.ux.style(Mv),Gv=Ei.ux.style(Ov),Nv=Ei.ux.style(Tv),Lv=Ei.ux.style(Rv),Dv=Ei.ux.style(Bv),jv=new Fv(999999);function zv({label:e,selection:t,className:i,menuClassName:n,placeholder:s,options:o,optionsGroupLabel:a,onSelectionChange:c,onOptionsExpanded:d,renderOption:u,disabled:m=!1}){const[p,g]=r.useState(!1),f=r.useRef(jv.newId().toString()),v=r.useRef(jv.newId().toString()),b=r.useRef(null),[y,x]=r.useState(null),[k,S]=r.useState(null),{styles:C,attributes:E}=(0,wv.D)(y,k,{placement:"bottom-start",modifiers:[{name:"offset",options:{offset:[0,4]}}]}),_=r.useMemo((()=>new l.x),[]),w=r.useMemo((()=>_.pipe(fi.b(100),h.h((e=>!e)),N.b((()=>{g(!1)})))),[_,g]);return gi.P.useSubscriptionTo(w),r.createElement("div",Object.assign({},(0,La.Sh)(Uv,i,m?Kv:void 0),{ref:x}),r.createElement("button",{ref:b,disabled:m,"aria-disabled":m,className:Gv,onClick:()=>{var e;p?g(!1):(g(!0),_.next(!0),null==d||d(t),null===(e=b.current)||void 0===e||e.focus())},onFocus:()=>{_.next(!0)},onBlur:()=>_.next(!1),type:"button","aria-haspopup":"listbox","aria-owns":f.current,"aria-expanded":p,"aria-labelledby":v.current},r.createElement("div",{id:v.current,className:Nv},t?u?u(t):e(t):s),r.createElement(Iv.p,null)),p&&r.createElement("div",Object.assign({ref:S,style:C.popper},E.popper,{className:Ei.ux.joinClasses([Lv,n]),onFocus:()=>_.next(!0),onBlur:()=>_.next(!1)}),r.createElement("ul",{"aria-label":"menu-options",role:"listbox",id:f.current},a?r.createElement("div",{className:Vv,role:"presentation"},a):null,o.map(((t,i)=>{const n=e(t);return r.createElement("li",{key:i,"aria-label":n,role:"option"},r.createElement("button",{className:Dv,onClick:(0,Pv.m)((()=>{c(t),g(!1)}))},u?u(t):e(t)))})))))}const Vv=Ei.ux.style({padding:Ei.ux.rem(Fi.x),paddingRight:Ei.ux.rem(Fi.mh),fontSize:Ei.ux.rem(.75),lineHeight:"1.5em",color:Pi.I.Text.Base.Subdued}),Kv=Ei.ux.style({opacity:.4}),Zv=({pageRange:e,onPageRangeHeaderMount:t})=>{const{onMount:i}=(0,Vo.F)(N.b(t));return r.createElement(Mi.F.div,{className:Hv,mount:i},"Pages ",e.startPage,"-",e.endPage)},Hv=Ei.ux.style({fontSize:Ei.ux.rem(.75),fontWeight:400}),$v=s.UI.List.make(E.bw,Dg),Wv=()=>r.createElement("svg",{fill:"none",viewBox:"0 0 64 64",role:"img","aria-hidden":!0,focusable:!1},r.createElement("g",{stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",clipPath:"url(#EmptyH_a)"},r.createElement("path",{fill:"#FCE5E5",strokeMiterlimit:"10",d:"M62.4 11.2H23.24C22.16 28.28 3.64 40.4 7.8 62.4h39.16C43.6 35.2 61.32 28.28 62.4 11.2Z"}),r.createElement("path",{fill:"#FCE5E5",strokeMiterlimit:"10",d:"M59.2 8H20.04C18.96 25.08.44 37.2 4.6 59.2h39.16C40.8 32.8 58.13 25.08 59.2 8Z"}),r.createElement("path",{fill:"#FEFAE9",strokeMiterlimit:"10",d:"M56 4.8H17.4C16.35 21.88-1.91 34 2.2 56H40C36.67 34 54.93 21.88 56 4.8Z"}),r.createElement("path",{d:"M24 13.6h20M20 22.4h20M14.4 32h20M9.6 42.8H24"}),r.createElement("path",{fill:"#F8E485",strokeMiterlimit:"10",d:"M.55 10.12a4.29 4.29 0 1 1 7.43-4.3l16.3 28.24-7.43 4.3L.55 10.11Z"}),r.createElement("path",{fill:"#79A8F2",strokeMiterlimit:"10",d:"M.55 10.12a4.29 4.29 0 1 1 7.43-4.3l3.21 5.58-7.43 4.29-3.21-5.57Z"}),r.createElement("path",{fill:"#F8C6DA",strokeMiterlimit:"10",d:"M.55 10.12a4.29 4.29 0 1 1 7.43-4.3l.64 1.12-7.43 4.29-.64-1.11Z"}),r.createElement("path",{fill:"#FEFAE9",strokeMiterlimit:"10",d:"m16.85 38.35 7.43-4.29-.07 8.47-7.36-4.18Z"}),r.createElement("path",{fill:"#0E101A",strokeMiterlimit:"10",d:"m20.2 39.88 3.72-2.14.3 4.79-4.01-2.65Z"})),r.createElement("defs",null,r.createElement("clipPath",{id:"EmptyH_a"},r.createElement("path",{fill:"#fff",d:"M0 0h64v64H0z"})))),Yv=()=>r.createElement("svg",{fill:"none",viewBox:"0 0 64 64",role:"img","aria-hidden":!0,focusable:!1},r.createElement("path",{fill:"#FEFAE9",stroke:"#1F243C",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M24.56 10.36h34.93L43.53 46.6H8.59l15.97-36.24Z"}),r.createElement("path",{stroke:"#0E101A",strokeLinecap:"round",d:"M19.37 34.76c1.06-.2 2.53-.27 3.52-.82.64-.36.79.58 1.16.82 1.14.77 2.28-.09 3.26-.74.95-.63 1.14-.56 1.8.26.89 1.09 2.87.23 3.97-.03.38-.1.8-.17 1.13.06.68.49 1.48.63 2.28.75 1.15.19 2.26.29 3.42.3.67.01.83.26 1.35.52 1.09.54 2.8-.15 3.9-.37M22.4 27.57c1.54-.08 3.24.04 4.58-.82.2-.13.46-.25.69-.35.12-.05.6.92.83 1.02.57.26 1.27.19 1.88.04.57-.15 1.36-.78 1.89-.33.6.52.71.78 1.57.6.85-.2 1.31-.3 2.07-.04a6.3 6.3 0 0 0 3.73.26c.41-.09 4.57-.66 4.77-.26M24.01 20.46c1.95-.4 3.92-.75 5.81-1.4.24-.09.45-.14.7-.14.29 0 .34.29.48.52.57.95 1.56.59 2.45.56.85-.03 1.6.16 2.47.05.4-.05 1.44-.49 1.82-.31.22.1.3.4.52.53.64.38.91.44 1.65.2.58-.2 1.11.07 1.71-.3.14-.1.64-.61.7-.27.08.43.14.75.56.88 1.43.46 2.92-.5 4.33-.54"}),r.createElement("path",{fill:"#F9C7C7",stroke:"#1F243C",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M14.77 9.5c0 1.19.96 2.14 2.14 2.14h5.14V7.37H16.9c-1.18 0-2.14.95-2.14 2.14Z"}),r.createElement("path",{fill:"#FEFAE9",stroke:"#1F243C",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M19.74 9.5c0-2.6 2.1-4.7 4.7-4.7h31.28v9.41H24.45a4.7 4.7 0 0 1-4.7-4.7Z"}),r.createElement("circle",{cx:"56.15",cy:"9.51",r:"4.71",fill:"#FEFAE9",stroke:"#1F243C",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10"}),r.createElement("path",{fill:"#F9C7C7",fillRule:"evenodd",d:"M56.54 7.37a2.14 2.14 0 1 0 0 4.27h4.52a2.14 2.14 0 0 0 0-4.27h-4.52Z",clipRule:"evenodd"}),r.createElement("path",{fill:"#1F243C",d:"M54.9 9.5c0-.9.73-1.63 1.64-1.63v-1A2.64 2.64 0 0 0 53.9 9.5h1Zm1.64 1.64c-.9 0-1.64-.73-1.64-1.63h-1a2.64 2.64 0 0 0 2.64 2.63v-1Zm4.52 0h-4.52v1h4.52v-1Zm0 0v1-1Zm1.64-1.63c0 .9-.73 1.63-1.64 1.63v1a2.64 2.64 0 0 0 2.64-2.63h-1Zm-1.64-1.64c.9 0 1.64.73 1.64 1.64h1a2.64 2.64 0 0 0-2.64-2.64v1Zm0 0v-1 1Zm-4.52 0h4.52v-1h-4.52v1Z"}),r.createElement("path",{fill:"#F9C7C7",stroke:"#1F243C",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M.8 45.5c0 1.19.96 2.14 2.14 2.14h5.13v-4.27H2.94c-1.18 0-2.14.95-2.14 2.14Z"}),r.createElement("path",{fill:"#FEFAE9",stroke:"#1F243C",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M5.77 45.5c0-2.6 2.1-4.7 4.7-4.7h30.47v9.41H10.47a4.7 4.7 0 0 1-4.7-4.7Z"}),r.createElement("path",{fill:"#79A8F2",stroke:"#1F243C",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M41.27 48.55h8.66v14.37l-4.35-1.7-4.31 1.7V48.55Z"}),r.createElement("path",{fill:"#F8E485",stroke:"#1F243C",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M35.2 44c0-1.11.8-2.1 1.1-3.13.33-1.05.27-2.32.87-3.21.62-.9 1.81-1.21 2.68-1.86.83-.65 1.49-1.73 2.53-2.08.99-.34 2.12.13 3.22.13 1.07 0 2.23-.47 3.22-.13 1.01.35 1.67 1.43 2.53 2.08.87.65 2.06.96 2.68 1.86.63.86.54 2.16.87 3.21C55.23 41.9 56 42.9 56 44c0 1.11-.8 2.1-1.1 3.13-.33 1.05-.27 2.32-.87 3.21-.62.9-1.81 1.21-2.68 1.86-.83.65-1.49 1.73-2.53 2.08-.98.34-2.12-.13-3.22-.13-1.07 0-2.23.47-3.22.13-1.01-.35-1.67-1.43-2.53-2.08-.87-.65-2.06-.96-2.68-1.86-.63-.86-.54-2.16-.87-3.21-.33-1.03-1.1-2.02-1.1-3.13Z"}),r.createElement("mask",{id:"SuccessD_a",width:"23",height:"24",x:"34",y:"32",maskUnits:"userSpaceOnUse",style:{maskType:"alpha"}},r.createElement("path",{fill:"#F8E485",stroke:"#1F243C",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M54.6 49.2c-.55.96-1.74 1.42-2.51 2.16-.81.74-1.4 1.87-2.36 2.35-.99.47-2.18.14-3.25.27-1.05.14-2.16.75-3.23.53-1.02-.2-1.77-1.17-2.73-1.72-.92-.53-2.16-.71-2.84-1.5-.71-.8-.74-2.07-1.16-3.06-.42-1-1.3-1.86-1.4-2.95-.1-1.07.62-2.15.87-3.22.22-1.05.05-2.3.6-3.26.56-.96 1.75-1.42 2.52-2.16.81-.74 1.4-1.87 2.36-2.35.99-.47 2.18-.14 3.25-.27 1.05-.14 2.16-.75 3.23-.53 1.02.2 1.77 1.17 2.73 1.72.92.54 2.16.71 2.84 1.5.71.8.74 2.07 1.16 3.06.43 1 1.3 1.86 1.4 2.95.1 1.07-.62 2.15-.87 3.22-.22 1.05-.05 2.3-.6 3.26Z"})),r.createElement("g",{mask:"url(#SuccessD_a)"},r.createElement("path",{fill:"#FEFAE9",d:"m52.26 29.95 2.49 2.5-19.9 19.9-2.5-2.5zM60.33 37.48l-4.35-4.34-19.9 19.9 4.35 4.35z"}),r.createElement("path",{stroke:"#1F243C",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M35.2 44c0-1.11.8-2.1 1.1-3.13.33-1.05.27-2.32.87-3.21.62-.9 1.81-1.21 2.68-1.86.83-.65 1.49-1.73 2.53-2.08.99-.34 2.12.13 3.22.13 1.07 0 2.23-.47 3.22-.13 1.01.35 1.67 1.43 2.53 2.08.87.65 2.06.96 2.68 1.86.63.86.54 2.16.87 3.21C55.23 41.9 56 42.9 56 44c0 1.11-.8 2.1-1.1 3.13-.33 1.05-.27 2.32-.87 3.21-.62.9-1.81 1.21-2.68 1.86-.83.65-1.49 1.73-2.53 2.08-.98.34-2.12-.13-3.22-.13-1.07 0-2.23.47-3.22.13-1.01-.35-1.67-1.43-2.53-2.08-.87-.65-2.06-.96-2.68-1.86-.63-.86-.54-2.16-.87-3.21-.33-1.03-1.1-2.02-1.1-3.13Z"}))),qv=()=>r.createElement("svg",{viewBox:"0 0 64 64",fill:"none",role:"img","aria-hidden":!0,focusable:!1},r.createElement("path",{d:"M32 17.0729V14.2794C32 10.9579 29.3256 8.26562 26.0273 8.26562C22.8634 8.26562 20.2749 10.7422 20.0684 13.8747C19.3378 13.6432 18.5607 13.5183 17.7559 13.5183C13.5089 13.5183 10.0667 16.9842 10.0667 21.2594C10.0667 23.1991 10.7741 24.9718 11.9455 26.3302C9.65381 27.0843 8 29.2536 8 31.8125C8 34.3859 9.67469 36.5651 11.9849 37.3072C10.7904 38.6712 10.0667 40.4619 10.0667 42.4227C10.0667 46.6979 13.5089 50.1637 17.7559 50.1637C18.5561 50.1637 19.3285 50.0403 20.0545 49.8115C20.1032 53.0899 22.7591 55.7323 26.0273 55.7323C29.3256 55.7323 32 53.04 32 49.7187V47.0131",fill:"url(#AiDetectedIllustration_paint0_linear_2020_7610)"}),r.createElement("path",{d:"M32 49.7187C32 53.0403 34.6744 55.7344 37.9728 55.7344C41.1365 55.7344 43.7251 53.2579 43.9315 50.1253C44.6621 50.3568 45.4392 50.4819 46.244 50.4819C50.4912 50.4819 53.9333 47.0157 53.9333 42.7405C53.9333 40.8008 53.2259 39.0283 52.0544 37.6699C54.3461 36.9157 56 34.7464 56 32.1875C56 29.6141 54.3253 27.4349 52.0152 26.6928C53.2096 25.3288 53.9333 23.5381 53.9333 21.5774C53.9333 17.3022 50.4912 13.8362 46.244 13.8362C45.444 13.8362 44.6715 13.9597 43.9456 14.1886C43.8968 10.9101 41.2411 8.2677 37.9728 8.2677C34.6744 8.2677 32 10.9579 32 14.2794",fill:"url(#AiDetectedIllustration_paint1_linear_2020_7610)"}),r.createElement("path",{d:"M31.5 17.0729C31.5 17.349 31.7239 17.5729 32 17.5729C32.2761 17.5729 32.5 17.349 32.5 17.0729H31.5ZM20.0684 13.8747L19.9174 14.3514C20.0638 14.3978 20.2235 14.3743 20.3504 14.2876C20.4772 14.201 20.5572 14.0609 20.5673 13.9076L20.0684 13.8747ZM11.9455 26.3302L12.1018 26.8051C12.2605 26.7529 12.3826 26.6248 12.4273 26.4638C12.472 26.3028 12.4333 26.1302 12.3242 26.0036L11.9455 26.3302ZM11.9849 37.3072L12.3611 37.6366C12.472 37.5099 12.5117 37.3359 12.4668 37.1737C12.4218 37.0114 12.2982 36.8827 12.1379 36.8312L11.9849 37.3072ZM20.0545 49.8115L20.5545 49.804C20.5521 49.6461 20.4753 49.4985 20.3472 49.4061C20.2191 49.3136 20.0549 49.2871 19.9042 49.3346L20.0545 49.8115ZM32.5 47.0131C32.5 46.7369 32.2761 46.5131 32 46.5131C31.7239 46.5131 31.5 46.7369 31.5 47.0131H32.5ZM43.9315 50.1253L44.0825 49.6487C43.936 49.6023 43.7764 49.6258 43.6495 49.7124C43.5227 49.799 43.4426 49.9392 43.4325 50.0925L43.9315 50.1253ZM52.0544 37.6699L51.8981 37.1949C51.7394 37.2471 51.6173 37.3752 51.5726 37.5362C51.5279 37.6972 51.5666 37.8699 51.6758 37.9964L52.0544 37.6699ZM52.0152 26.6928L51.639 26.3634C51.5281 26.4901 51.4884 26.6641 51.5334 26.8263C51.5783 26.9886 51.702 27.1173 51.8623 27.1688L52.0152 26.6928ZM43.9456 14.1886L43.4457 14.196C43.448 14.354 43.5249 14.5015 43.653 14.594C43.7811 14.6865 43.9453 14.7129 44.096 14.6654L43.9456 14.1886ZM22.0627 38.4556C21.9521 38.7086 22.0674 39.0034 22.3204 39.1141C22.5734 39.2248 22.8682 39.1094 22.9789 38.8564L22.0627 38.4556ZM28.3448 25.3438L28.8007 25.1385C28.7196 24.9583 28.5399 24.8427 28.3422 24.8438C28.1445 24.8448 27.966 24.9622 27.8867 25.1434L28.3448 25.3438ZM33.8806 38.8612C33.9939 39.113 34.2899 39.2253 34.5417 39.1119C34.7936 38.9986 34.9058 38.7026 34.7925 38.4508L33.8806 38.8612ZM40.2605 38.6557C40.2605 38.9319 40.4844 39.1557 40.7605 39.1557C41.0367 39.1557 41.2605 38.9319 41.2605 38.6557H40.2605ZM41.2605 25.8333C41.2605 25.5572 41.0367 25.3333 40.7605 25.3333C40.4844 25.3333 40.2605 25.5572 40.2605 25.8333H41.2605ZM32.5 17.0729V14.2794H31.5V17.0729H32.5ZM32.5 14.2794C32.5 10.685 29.6049 7.76562 26.0273 7.76562V8.76562C29.0463 8.76562 31.5 11.2309 31.5 14.2794H32.5ZM26.0273 7.76562C22.5954 7.76562 19.7929 10.4512 19.5695 13.8418L20.5673 13.9076C20.7568 11.0332 23.1315 8.76562 26.0273 8.76562V7.76562ZM20.2195 13.3981C19.4407 13.1513 18.6128 13.0183 17.7559 13.0183V14.0183C18.5087 14.0183 19.2349 14.1351 19.9174 14.3514L20.2195 13.3981ZM17.7559 13.0183C13.2295 13.0183 9.56669 16.7113 9.56669 21.2594H10.5667C10.5667 17.2572 13.7882 14.0183 17.7559 14.0183V13.0183ZM9.56669 21.2594C9.56669 23.3228 10.3198 25.2105 11.5668 26.6567L12.3242 26.0036C11.2285 24.733 10.5667 23.0753 10.5667 21.2594H9.56669ZM11.7892 25.8552C9.29657 26.6754 7.5 29.0333 7.5 31.8125H8.5C8.5 29.4739 10.0111 27.4931 12.1018 26.8051L11.7892 25.8552ZM7.5 31.8125C7.5 34.6076 9.31927 36.9761 11.832 37.7832L12.1379 36.8312C10.0301 36.1541 8.5 34.1641 8.5 31.8125H7.5ZM11.6088 36.9778C10.3371 38.4298 9.56669 40.3366 9.56669 42.4227H10.5667C10.5667 40.5871 11.2436 38.9125 12.3611 37.6366L11.6088 36.9778ZM9.56669 42.4227C9.56669 46.9708 13.2295 50.6637 17.7559 50.6637V49.6637C13.7882 49.6637 10.5667 46.4249 10.5667 42.4227H9.56669ZM17.7559 50.6637C18.6078 50.6637 19.4308 50.5323 20.2048 50.2883L19.9042 49.3346C19.2262 49.5483 18.5044 49.6637 17.7559 49.6637V50.6637ZM19.5546 49.8189C19.6073 53.3671 22.4824 56.2323 26.0273 56.2323V55.2323C23.0357 55.2323 20.5992 52.8126 20.5545 49.804L19.5546 49.8189ZM26.0273 56.2323C29.6049 56.2323 32.5 53.3129 32.5 49.7187H31.5C31.5 52.7671 29.0463 55.2323 26.0273 55.2323V56.2323ZM32.5 49.7187V47.0131H31.5V49.7187H32.5ZM31.5 49.7187C31.5 53.313 34.3949 56.2344 37.9728 56.2344V55.2344C34.9539 55.2344 32.5 52.7675 32.5 49.7187H31.5ZM37.9728 56.2344C41.4046 56.2344 44.207 53.5488 44.4304 50.1582L43.4325 50.0925C43.2432 52.9669 40.8685 55.2344 37.9728 55.2344V56.2344ZM43.7805 50.602C44.5592 50.8487 45.3871 50.9819 46.244 50.9819V49.9819C45.4913 49.9819 44.7651 49.8649 44.0825 49.6487L43.7805 50.602ZM46.244 50.9819C50.7705 50.9819 54.4333 47.2887 54.4333 42.7405H53.4333C53.4333 46.7428 50.2119 49.9819 46.244 49.9819V50.9819ZM54.4333 42.7405C54.4333 40.677 53.6802 38.7895 52.433 37.3433L51.6758 37.9964C52.7715 39.267 53.4333 40.9246 53.4333 42.7405H54.4333ZM52.2107 38.1448C54.7034 37.3246 56.5 34.9667 56.5 32.1875H55.5C55.5 34.5261 53.9889 36.5069 51.8981 37.1949L52.2107 38.1448ZM56.5 32.1875C56.5 29.3924 54.6808 27.0239 52.1681 26.2168L51.8623 27.1688C53.9699 27.8459 55.5 29.8359 55.5 32.1875H56.5ZM52.3914 27.0222C53.6629 25.5702 54.4333 23.6633 54.4333 21.5774H53.4333C53.4333 23.4128 52.7563 25.0875 51.639 26.3634L52.3914 27.0222ZM54.4333 21.5774C54.4333 17.0292 50.7705 13.3362 46.244 13.3362V14.3362C50.2119 14.3362 53.4333 17.5751 53.4333 21.5774H54.4333ZM46.244 13.3362C45.3923 13.3362 44.5691 13.4677 43.7952 13.7117L44.096 14.6654C44.7738 14.4517 45.4957 14.3362 46.244 14.3362V13.3362ZM44.4455 14.1811C44.3927 10.6328 41.5177 7.7677 37.9728 7.7677V8.7677C40.9644 8.7677 43.4009 11.1873 43.4457 14.196L44.4455 14.1811ZM37.9728 7.7677C34.3953 7.7677 31.5 10.6848 31.5 14.2794H32.5C32.5 11.2311 34.9535 8.7677 37.9728 8.7677V7.7677ZM22.9789 38.8564L28.8029 25.5442L27.8867 25.1434L22.0627 38.4556L22.9789 38.8564ZM27.8889 25.549L33.8806 38.8612L34.7925 38.4508L28.8007 25.1385L27.8889 25.549ZM24.0781 35.7291H32.7725V34.7291H24.0781V35.7291ZM41.2605 38.6557V25.8333H40.2605V38.6557H41.2605Z",fill:Li.Purple80}),r.createElement("defs",null,r.createElement("linearGradient",{id:"AiDetectedIllustration_paint0_linear_2020_7610",x1:"15",y1:"15",x2:"51",y2:"50",gradientUnits:"userSpaceOnUse"},r.createElement("stop",{stopColor:Li.Purple0}),r.createElement("stop",{offset:"1",stopColor:Li.Purple20})),r.createElement("linearGradient",{id:"AiDetectedIllustration_paint1_linear_2020_7610",x1:"15",y1:"15",x2:"51",y2:"50",gradientUnits:"userSpaceOnUse"},r.createElement("stop",{stopColor:Li.Purple0}),r.createElement("stop",{offset:"1",stopColor:Li.Purple20})))),Xv=s.UI.Node.make((({notify:e,view:t})=>r.createElement(Gl,{"aria-busy":"true","aria-live":"polite","data-testid":"plagiarism-empty",style:Jv,mount:e({kind:"plagiarismFeedSuccessMountAction"})},t("aiDetectorScore").pipe(O.U((t=>{const{summary:i,illustration:n,details:s}=(0,a.zG)(t,o.g_((()=>({summary:"No plagiarism detected",illustration:r.createElement(Wv,null),details:r.createElement(r.Fragment,null,"We compared your document to billions of web pages and academic papers and found no duplicate text.")})),(e=>e<1?{summary:"No plagiarism or AI text detected",illustration:r.createElement(Yv,null),details:r.createElement(r.Fragment,null,"Your document doesn’t match anything in our references or contain common AI text patterns.")}:{summary:"Possible AI text detected",illustration:r.createElement(qv,null),details:r.createElement(r.Fragment,null,r.createElement("b",null,e,"%")," of your document contains patterns often found in AI text.",r.createElement("br",null),r.createElement("b",null,"No plagiarism detected."))})));return r.createElement(r.Fragment,null,r.createElement("div",{className:eb},r.createElement(gh,{style:Qv},i),r.createElement("p",{className:tb},s),r.createElement(Oi.z,{variant:"secondary",style:nb,onClick:e({kind:"seeAllSuggestions"})},"See all suggestions")),r.createElement("div",{className:ib},n))})))))),Qv={whiteSpace:"normal"},Jv={padding:`${Ei.ux.rem(Fi.mh)}`,display:"flex",flexDirection:"column-reverse",justifyContent:"center",alignItems:"center",gap:`${Ei.ux.rem(Fi.mh)}`,height:"100%",boxSizing:"border-box"},eb=Ei.ux.style({textAlign:"center",padding:`${Ei.ux.rem(Fi.mh)} ${Ei.ux.rem(Fi.mh)} 0 ${Ei.ux.rem(Fi.mh)}`}),tb=Ei.ux.style({margin:0,color:$i.Z.TextBaseSubduedColor,fontSize:Ei.ux.rem(.875),lineHeight:"1.5em",fontWeight:400}),ib=Ei.ux.style({width:Ei.ux.rem(6),height:Ei.ux.rem(6),minWidth:Ei.ux.rem(6),minHeight:Ei.ux.rem(6)}),nb={default:{marginTop:Ei.ux.rem(Fi.x),alignSelf:"flex-start"}},rb=e=>r.createElement(Ri.a1,Object.assign({width:"36",height:"36",viewBox:"0 0 36 36"},e),r.createElement("rect",{width:"36",height:"36",rx:"18",fill:"#09646C",stroke:"none"}),r.createElement("path",{d:"M19.4062 21.6132C21.1214 21.2406 22.0558 20.2882 22.5 18.8303C20.636 18.8303 19.125 17.3433 19.125 15.5089C19.125 13.6745 20.636 12.1875 22.5 12.1875C24.364 12.1875 25.875 13.5803 25.875 15.5089C25.875 17.4375 25.5 22.3125 19.4062 23.8125V21.6132Z",fill:"white",stroke:"none"}),r.createElement("path",{d:"M10.4062 21.6132C12.1214 21.2406 13.0558 20.2882 13.5 18.8303C11.636 18.8303 10.125 17.3433 10.125 15.5089C10.125 13.6745 11.636 12.1875 13.5 12.1875C15.364 12.1875 16.875 13.5803 16.875 15.5089C16.875 17.4375 16.5 22.3125 10.4062 23.8125V21.6132Z",fill:"white",stroke:"none"})),sb=e=>r.createElement(Ri.a1,Object.assign({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"none"},e),r.createElement("path",{d:"M12 6.40232V5.35476C12 4.10922 10.9971 3.09961 9.76022 3.09961C8.57379 3.09961 7.60307 4.02832 7.52566 5.20302C7.25167 5.1162 6.96028 5.06935 6.65845 5.06935C5.06582 5.06935 3.77501 6.36908 3.77501 7.97228C3.77501 8.69965 4.0403 9.36441 4.47956 9.87381C3.62018 10.1566 3 10.9701 3 11.9297C3 12.8947 3.62801 13.7119 4.49435 13.9902C4.04639 14.5017 3.77501 15.1732 3.77501 15.9085C3.77501 17.5117 5.06582 18.8114 6.65845 18.8114C6.95854 18.8114 7.24819 18.7651 7.52044 18.6793C7.53871 19.9087 8.53465 20.8996 9.76022 20.8996C10.9971 20.8996 12 19.89 12 18.6445V17.6299",fill:Li.Purple10}),r.createElement("path",{d:"M12 18.6445C12 19.8901 13.0029 20.9004 14.2398 20.9004C15.4262 20.9004 16.3969 19.9717 16.4743 18.797C16.7483 18.8838 17.0397 18.9307 17.3415 18.9307C18.9342 18.9307 20.225 17.6309 20.225 16.0277C20.225 15.3003 19.9597 14.6356 19.5204 14.1262C20.3798 13.8434 21 13.0299 21 12.0703C21 11.1053 20.372 10.2881 19.5057 10.0098C19.9536 9.49831 20.225 8.82677 20.225 8.09152C20.225 6.48831 18.9342 5.18858 17.3415 5.18858C17.0415 5.18858 16.7518 5.23489 16.4796 5.32072C16.4613 4.09128 15.4654 3.10039 14.2398 3.10039C13.0029 3.10039 12 4.10922 12 5.35476",fill:Li.Purple10}),r.createElement("path",{d:"M11.5 6.40232C11.5 6.67846 11.7239 6.90232 12 6.90232C12.2761 6.90232 12.5 6.67846 12.5 6.40232H11.5ZM7.52566 5.20302L7.37462 5.67966C7.52107 5.72607 7.68072 5.70257 7.8076 5.61595C7.93447 5.52933 8.01448 5.38919 8.02458 5.2359L7.52566 5.20302ZM4.47956 9.87381L4.63585 10.3488C4.79455 10.2965 4.91669 10.1685 4.96136 10.0075C5.00603 9.84649 4.96733 9.67382 4.85822 9.54729L4.47956 9.87381ZM4.49435 13.9902L4.87049 14.3196C4.98143 14.1929 5.02116 14.0189 4.97619 13.8567C4.93122 13.6944 4.80759 13.5657 4.64727 13.5142L4.49435 13.9902ZM7.52044 18.6793L8.02038 18.6719C8.01804 18.5139 7.94119 18.3664 7.81312 18.2739C7.68505 18.1814 7.52081 18.1549 7.37015 18.2024L7.52044 18.6793ZM12.5 17.6299C12.5 17.3538 12.2761 17.1299 12 17.1299C11.7239 17.1299 11.5 17.3538 11.5 17.6299H12.5ZM16.4743 18.797L16.6253 18.3203C16.4789 18.274 16.3192 18.2975 16.1923 18.3841C16.0655 18.4707 15.9855 18.6108 15.9754 18.7641L16.4743 18.797ZM19.5204 14.1262L19.3641 13.6513C19.2054 13.7035 19.0833 13.8315 19.0386 13.9925C18.9939 14.1535 19.0326 14.3262 19.1418 14.4527L19.5204 14.1262ZM19.5057 10.0098L19.1295 9.6804C19.0186 9.80708 18.9789 9.98108 19.0239 10.1433C19.0688 10.3056 19.1925 10.4343 19.3528 10.4858L19.5057 10.0098ZM16.4796 5.32072L15.9797 5.32816C15.982 5.48612 16.0589 5.63367 16.187 5.72613C16.3151 5.81859 16.4793 5.84508 16.63 5.79757L16.4796 5.32072ZM7.98723 14.2956C7.87655 14.5486 7.99191 14.8434 8.2449 14.9541C8.49789 15.0648 8.79271 14.9494 8.90339 14.6964L7.98723 14.2956ZM10.6293 9.50391L11.0852 9.29869C11.0041 9.11842 10.8244 9.00288 10.6267 9.00392C10.429 9.00496 10.2505 9.12238 10.1712 9.3035L10.6293 9.50391ZM12.4203 14.7012C12.5336 14.953 12.8296 15.0653 13.0814 14.9519C13.3332 14.8386 13.4455 14.5426 13.3321 14.2908L12.4203 14.7012ZM14.7852 14.4959C14.7852 14.772 15.0091 14.9959 15.2852 14.9959C15.5613 14.9959 15.7852 14.772 15.7852 14.4959H14.7852ZM15.7852 9.6875C15.7852 9.41136 15.5613 9.1875 15.2852 9.1875C15.0091 9.1875 14.7852 9.41136 14.7852 9.6875H15.7852ZM12.5 6.40232V5.35476H11.5V6.40232H12.5ZM12.5 5.35476C12.5 3.83628 11.2764 2.59961 9.76022 2.59961V3.59961C10.7178 3.59961 11.5 4.38216 11.5 5.35476H12.5ZM9.76022 2.59961C8.30572 2.59961 7.12116 3.73734 7.02674 5.17014L8.02458 5.2359C8.08498 4.3193 8.84186 3.59961 9.76022 3.59961V2.59961ZM7.6767 4.72638C7.35459 4.62431 7.01229 4.56935 6.65845 4.56935V5.56935C6.90827 5.56935 7.14875 5.60809 7.37462 5.67966L7.6767 4.72638ZM6.65845 4.56935C4.78649 4.56935 3.27501 6.09614 3.27501 7.97228H4.27501C4.27501 6.64202 5.34515 5.56935 6.65845 5.56935V4.56935ZM3.27501 7.97228C3.27501 8.82342 3.58595 9.60315 4.1009 10.2003L4.85822 9.54729C4.49465 9.12567 4.27501 8.57588 4.27501 7.97228H3.27501ZM4.32327 9.39886C3.26294 9.74778 2.5 10.7498 2.5 11.9297H3.5C3.5 11.1904 3.97742 10.5654 4.63585 10.3488L4.32327 9.39886ZM2.5 11.9297C2.5 13.1164 3.27259 14.1229 4.34143 14.4662L4.64727 13.5142C3.98343 13.3009 3.5 12.673 3.5 11.9297H2.5ZM4.11821 13.6608C3.59312 14.2604 3.27501 15.048 3.27501 15.9085H4.27501C4.27501 15.2984 4.49966 14.743 4.87049 14.3196L4.11821 13.6608ZM3.27501 15.9085C3.27501 17.7846 4.78649 19.3114 6.65845 19.3114V18.3114C5.34515 18.3114 4.27501 17.2388 4.27501 15.9085H3.27501ZM6.65845 19.3114C7.01022 19.3114 7.35052 19.2571 7.67073 19.1562L7.37015 18.2024C7.14586 18.2731 6.90686 18.3114 6.65845 18.3114V19.3114ZM7.0205 18.6867C7.04278 20.1859 8.25802 21.3996 9.76022 21.3996V20.3996C8.81128 20.3996 8.03465 19.6315 8.02038 18.6719L7.0205 18.6867ZM9.76022 21.3996C11.2764 21.3996 12.5 20.1629 12.5 18.6445H11.5C11.5 19.6171 10.7178 20.3996 9.76022 20.3996V21.3996ZM12.5 18.6445V17.6299H11.5V18.6445H12.5ZM11.5 18.6445C11.5 20.1628 12.7234 21.4004 14.2398 21.4004V20.4004C13.2824 20.4004 12.5 19.6174 12.5 18.6445H11.5ZM14.2398 21.4004C15.6943 21.4004 16.8788 20.2627 16.9732 18.8299L15.9754 18.7641C15.915 19.6807 15.1581 20.4004 14.2398 20.4004V21.4004ZM16.3233 19.2737C16.6453 19.3757 16.9876 19.4307 17.3415 19.4307V18.4307C17.0918 18.4307 16.8513 18.3919 16.6253 18.3203L16.3233 19.2737ZM17.3415 19.4307C19.2135 19.4307 20.725 17.9038 20.725 16.0277H19.725C19.725 17.358 18.6549 18.4307 17.3415 18.4307V19.4307ZM20.725 16.0277C20.725 15.1765 20.414 14.3968 19.899 13.7997L19.1418 14.4527C19.5054 14.8744 19.725 15.4241 19.725 16.0277H20.725ZM19.6767 14.6011C20.737 14.2522 21.5 13.2502 21.5 12.0703H20.5C20.5 12.8096 20.0226 13.4346 19.3641 13.6513L19.6767 14.6011ZM21.5 12.0703C21.5 10.8836 20.7274 9.87711 19.6586 9.53376L19.3528 10.4858C20.0166 10.6991 20.5 11.327 20.5 12.0703H21.5ZM19.8819 10.3392C20.4069 9.73965 20.725 8.95201 20.725 8.09152H19.725C19.725 8.70152 19.5003 9.25697 19.1295 9.6804L19.8819 10.3392ZM20.725 8.09152C20.725 6.21537 19.2135 4.68858 17.3415 4.68858V5.68858C18.6549 5.68858 19.725 6.76125 19.725 8.09152H20.725ZM17.3415 4.68858C16.9898 4.68858 16.6494 4.7429 16.3292 4.84386L16.63 5.79757C16.8542 5.72688 17.0932 5.68858 17.3415 5.68858V4.68858ZM16.9795 5.31328C16.9572 3.81404 15.742 2.60039 14.2398 2.60039V3.60039C15.1888 3.60039 15.9654 4.36851 15.9797 5.32816L16.9795 5.31328ZM14.2398 2.60039C12.7238 2.60039 11.5 3.83605 11.5 5.35476H12.5C12.5 4.38239 13.282 3.60039 14.2398 3.60039V2.60039ZM8.90339 14.6964L11.0874 9.70432L10.1712 9.3035L7.98723 14.2956L8.90339 14.6964ZM10.1734 9.70913L12.4203 14.7012L13.3321 14.2908L11.0852 9.29869L10.1734 9.70913ZM9.0293 13.7109H12.2897V12.7109H9.0293V13.7109ZM15.7852 14.4959V9.6875H14.7852V14.4959H15.7852Z",fill:Li.Purple60}));function ob(e){if(Number.isFinite(e)){if(0===e)return 100;if(1===e)return 0;{const t=e<.01?.01:e>.99?.99:e;return Math.round(100*(1-t))}}return 0}const ab=e=>r.createElement(Ri.a1,Object.assign({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},e),r.createElement("path",{d:"M15.6807 4.59375C17.754 4.59375 19.4352 6.27498 19.4352 8.34831V17.2458C19.4352 19.3191 17.754 21.0004 15.6807 21.0004H8.32133C6.248 21.0004 4.56677 19.3191 4.56677 17.2458V8.34831C4.56677 6.27498 6.248 4.59375 8.32133 4.59375",fill:Pi.I.Background.Plagiarism.Subdued}),r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.3233 6.28561H9.67657C8.9274 6.28561 8.32029 5.67849 8.32029 4.92933V4.35627C8.32029 3.60711 8.9274 3 9.67657 3H14.3233C15.0725 3 15.6796 3.60711 15.6796 4.35627V4.92933C15.6796 5.67849 15.0725 6.28561 14.3233 6.28561Z"}),r.createElement("path",{d:"M15.0166 15.4359H8.9824H15.0166ZM15.0166 10.9531H8.9824H15.0166Z",fill:Pi.I.Background.Plagiarism.Subdued}),r.createElement("path",{d:"M15.6807 4.59375C17.754 4.59375 19.4352 6.27498 19.4352 8.34831V17.2458C19.4352 19.3191 17.754 21.0004 15.6807 21.0004H8.32133C6.248 21.0004 4.56677 19.3191 4.56677 17.2458V8.34831C4.56677 6.27498 6.248 4.59375 8.32133 4.59375M15.0166 15.4359H8.9824M15.0166 10.9531H8.9824M14.3233 6.28561H9.67657C8.9274 6.28561 8.32029 5.67849 8.32029 4.92933V4.35627C8.32029 3.60711 8.9274 3 9.67657 3H14.3233C15.0725 3 15.6796 3.60711 15.6796 4.35627V4.92933C15.6796 5.67849 15.0725 6.28561 14.3233 6.28561Z",stroke:Pi.I.Background.Plagiarism.Default,strokeLinecap:"round",strokeLinejoin:"round"})),lb=s.UI.Node.make((({state:e})=>r.createElement(Mi.F.Fragment,null,e.pipe(O.U((e=>(0,a.zG)(e.aiDetectorScore,o.g_((()=>r.createElement(cb,Object.assign({},e))),(t=>r.createElement(db,Object.assign({},e,{aiDetectorScore:t}))))))))))),cb=({originality:e,sourceCount:t})=>r.createElement("footer",{className:ub},r.createElement(rb,null),r.createElement("span",{className:pb},r.createElement("b",null,ob(e),"% of your document")," matches text",(0,a.zG)(t,o.g_((()=>" "),(e=>` in ${e} sources `))),"on the web or in academic databases.")),db=({originality:e,sourceCount:t,aiDetectorScore:i})=>r.createElement("footer",{className:Ei.ux.joinClasses([ub,mb])},r.createElement(ab,{className:gb}),r.createElement("span",{className:pb},1===e?r.createElement(r.Fragment,null,r.createElement("b",null,"We didn’t detect plagiarism"),r.createElement("br",null),"Your document doesn’t match anything in our references"):r.createElement(r.Fragment,null,r.createElement("b",null,ob(e),"% of your text matches",(0,a.zG)(t,o.g_((()=>" "),(e=>` ${e} `))),"external sources"),r.createElement("br",null),"Matches were found on the web or in academic databases")),r.createElement(sb,{className:gb}),r.createElement("span",{className:pb},0===i?r.createElement(r.Fragment,null,r.createElement("b",null,"We didn’t detect common AI text patterns"),r.createElement("br",null),"Your document doesn’t appear to contain AI-generated text"):r.createElement(r.Fragment,null,r.createElement("b",null,i,"% of your text has patterns that resemble AI text"),r.createElement("br",null),"These patterns may show AI text or occur in your writing"))),ub=Ei.ux.style({padding:`${Ei.ux.rem(1.0625)} ${Ei.ux.rem(1.1875)}`,backgroundColor:$i.Z.BackgroundBaseSubdued,borderTop:`0.5px solid ${$i.Z.BorderBaseSubduedColor}`,boxSizing:"border-box",display:"flex",alignItems:"center",flexDirection:"row",gap:Ei.ux.rem(Fi.mh)}),mb=Ei.ux.style({display:"grid",gridTemplateColumns:"max-content auto",columnGap:Ei.ux.rem(Fi.F2),rowGap:Ei.ux.rem(Fi.x),alignItems:"start",paddingLeft:Ei.ux.rem(1)}),pb=Ei.ux.style({fontSize:Ei.ux.rem(.75),lineHeight:Ei.ux.rem(1.125),color:Pi.I.Text.Base.Subdued}),gb=Ei.ux.style({alignItems:"start"}),hb=()=>r.createElement("svg",{fill:"none",viewBox:"0 0 64 64",role:"img","aria-hidden":!0,focusable:!1},r.createElement("g",{clipPath:"url(#EmptyC_a)"},r.createElement("path",{fill:"#F9C7C7",stroke:"#0E101A",strokeMiterlimit:"10",d:"m29.48 18.98-3.27 21.53-22.38-9.64L18.9 14.03a6.1 6.1 0 0 1 10.58 4.95Z"}),r.createElement("path",{fill:"#F28C8C",stroke:"#0E101A",strokeMiterlimit:"10",d:"M13.54 51.78c7.04 0 12.75-5.68 12.75-12.69 0-7-5.7-12.69-12.75-12.69A12.72 12.72 0 0 0 .8 39.09c0 7 5.7 12.7 12.74 12.7Z"}),r.createElement("path",{fill:"#8ECBDE",stroke:"#0E101A",d:"M13.54 48.59a9.52 9.52 0 0 0 9.54-9.5c0-5.25-4.27-9.5-9.54-9.5A9.52 9.52 0 0 0 4 39.09c0 5.25 4.28 9.5 9.54 9.5Z"}),r.createElement("path",{stroke:"#0E101A",d:"M13.54 48.59a9.52 9.52 0 0 0 9.54-9.5c0-5.25-4.27-9.5-9.54-9.5A9.52 9.52 0 0 0 4 39.09c0 5.25 4.28 9.5 9.54 9.5Z"}),r.createElement("path",{fill:"#DDEFF5",d:"M20.7 45.37a9.51 9.51 0 0 1-5.1 3l-9.88-14.7a9.57 9.57 0 0 1 4.72-3.56L20.7 45.37Z"}),r.createElement("path",{stroke:"#0E101A",strokeMiterlimit:"10",d:"M13.54 48.59a9.52 9.52 0 0 0 9.54-9.5c0-5.25-4.27-9.5-9.54-9.5A9.52 9.52 0 0 0 4 39.09c0 5.25 4.28 9.5 9.54 9.5Z"}),r.createElement("path",{fill:"#F9C7C7",stroke:"#0E101A",strokeMiterlimit:"10",d:"m34.52 18.98 3.27 21.53 22.38-9.64L45.1 14.03a6.1 6.1 0 0 0-10.58 4.95Z"}),r.createElement("path",{fill:"#F28C8C",stroke:"#0E101A",strokeMiterlimit:"10",d:"M50.46 51.78c7.03 0 12.74-5.68 12.74-12.69 0-7-5.7-12.69-12.74-12.69A12.72 12.72 0 0 0 37.7 39.09c0 7 5.7 12.7 12.75 12.7Z"}),r.createElement("path",{fill:"#8ECBDE",stroke:"#0E101A",d:"M50.46 48.59a9.52 9.52 0 0 0 9.54-9.5c0-5.25-4.28-9.5-9.54-9.5a9.52 9.52 0 0 0-9.54 9.5c0 5.25 4.27 9.5 9.54 9.5Z"}),r.createElement("path",{stroke:"#0E101A",d:"M50.46 48.59a9.52 9.52 0 0 0 9.54-9.5c0-5.25-4.28-9.5-9.54-9.5a9.52 9.52 0 0 0-9.54 9.5c0 5.25 4.27 9.5 9.54 9.5Z"}),r.createElement("path",{fill:"#DDEFF5",d:"M57.61 45.37a9.51 9.51 0 0 1-5.1 3l-9.88-14.7a9.57 9.57 0 0 1 4.72-3.56l10.26 15.26Z"}),r.createElement("path",{stroke:"#0E101A",strokeMiterlimit:"10",d:"M50.46 48.59a9.52 9.52 0 0 0 9.54-9.5c0-5.25-4.28-9.5-9.54-9.5a9.52 9.52 0 0 0-9.54 9.5c0 5.25 4.27 9.5 9.54 9.5Z"}),r.createElement("path",{fill:"#F9C7C7",stroke:"#0E101A",strokeMiterlimit:"10",d:"M36.4 31.35h-8.8l1.25-8.24a3.17 3.17 0 0 1 3.15-2.7 3.2 3.2 0 0 1 3.15 2.7l1.25 8.24Z"}),r.createElement("path",{fill:"#F28C8C",stroke:"#0E101A",strokeMiterlimit:"10",d:"M32 36.18a4.57 4.57 0 1 0 .02-9.13 4.57 4.57 0 0 0-.02 9.13Z"}),r.createElement("path",{fill:"#0E101A",stroke:"#0E101A",strokeMiterlimit:"10",d:"M32 33.22a1.6 1.6 0 1 0 0-3.2 1.6 1.6 0 0 0 0 3.2Z"}),r.createElement("path",{fill:"#87E8D1",stroke:"#0E101A",strokeLinejoin:"round",d:"M61.64 2.7c-2.8.62-9.61 2.33-7.74 11.68 2.8.3 11.21-2.34 7.74-11.69Z"}),r.createElement("path",{stroke:"#0E101A",strokeLinejoin:"round",d:"M56.7 10.64 63.2.4"}),r.createElement("path",{fill:"#87E8D1",stroke:"#0E101A",strokeLinejoin:"round",d:"M6.44 10.94c-1.9 5.36-.2 10.75 12.3 9.39 0-2.26-3.44-10.28-12.3-9.39Z"}),r.createElement("path",{stroke:"#0E101A",strokeLinejoin:"round",d:"M15.3 17.14 2.9 8.72"}),r.createElement("path",{fill:"#87E8D1",stroke:"#0E101A",strokeLinejoin:"round",d:"M36.58 61.7c-.65-4.37-3.42-8.63-12.94-9.48.38 4.98 2.53 12.23 12.94 9.48Z"}),r.createElement("path",{stroke:"#0E101A",strokeLinejoin:"round",d:"m27.5 55.34 12.16 8.22"})),r.createElement("defs",null,r.createElement("clipPath",{id:"EmptyC_a"},r.createElement("path",{fill:"#fff",d:"M0 0h64v64H0z"})))),fb=s.UI.Node.make((({view:e})=>r.createElement(Gl,{"aria-busy":"true","aria-live":"polite",style:vb,"data-testid":"plagiarism-loading"},r.createElement("div",{className:_b},r.createElement("div",{className:wb},r.createElement(gh,{style:bb},e("aiDetectorEnabled").pipe(O.U((e=>e?"Checking for plagiarism and AI text...":"Checking for plagiarism...")))),r.createElement(Mi.F.p,{className:Ib},"We’re comparing your document to billions of web pages and academic papers",e("aiDetectorEnabled").pipe(O.U((e=>e?", and detecting patterns often used by AI.":"."))))),r.createElement("div",{className:Ab},r.createElement(hb,null))),r.createElement("div",{className:yb},r.createElement("div",{className:xb},r.createElement(Yg,null),r.createElement("div",{className:kb}),r.createElement("div",{className:Sb}),r.createElement("div",{className:Cb})),r.createElement("div",{className:Eb}),r.createElement("div",{className:xb},r.createElement(Yg,null),r.createElement("div",{className:kb}),r.createElement("div",{className:Sb}),r.createElement("div",{className:Cb})),r.createElement("div",{className:Eb}),r.createElement("div",{className:xb},r.createElement(Yg,null),r.createElement("div",{className:kb}),r.createElement("div",{className:Sb}),r.createElement("div",{className:Cb})),r.createElement("div",{className:Eb}),r.createElement("div",{className:xb},r.createElement(Yg,null),r.createElement("div",{className:kb}),r.createElement("div",{className:Sb}),r.createElement("div",{className:Cb})))))),vb={padding:0},bb={whiteSpace:"normal"},yb=Ei.ux.style({display:"flex",flexDirection:"column",margin:Ei.ux.rem(1)}),xb=Ei.ux.style({display:"flex",alignItems:"center",position:"relative",height:Ei.ux.rem(2.25)}),kb=Ei.ux.style({height:Ei.ux.rem(.5),width:Ei.ux.rem(.5),borderRadius:"50%",background:Li.NeutralGray10,marginRight:Ei.ux.rem(1.25)}),Sb=Ei.ux.style({height:Ei.ux.rem(.5),width:Ei.ux.rem(3.875),borderRadius:Ei.ux.rem(So.fe),background:Li.NeutralGray10,marginRight:Ei.ux.rem(Fi.mh)}),Cb=Ei.ux.style({height:Ei.ux.rem(.5),width:Ei.ux.rem(7.875),borderRadius:Ei.ux.rem(So.fe),background:Li.NeutralGray10}),Eb=Ei.ux.style({margin:`${Ei.ux.rem(.5)} ${Ei.ux.rem(1)}`,borderBottom:`1px solid ${Pi.I.Border.Base.Subdued}`}),_b=Ei.ux.style({display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",padding:Ei.ux.rem(Fi.mh)}),wb=Ei.ux.style({display:"flex",flexDirection:"column",marginRight:Ei.ux.rem(2),justifyContent:"center"}),Ib=Ei.ux.style({margin:0,color:$i.Z.TextBaseSubduedColor,fontSize:Ei.ux.rem(.875),lineHeight:Ei.ux.rem(1.3125),fontWeight:400}),Ab=Ei.ux.style({width:Ei.ux.rem(4),height:Ei.ux.rem(4),minWidth:Ei.ux.rem(4),minHeight:Ei.ux.rem(4)});var Fb=i(60200),Pb=i(91571);const Mb=e=>r.createElement(Ri.a1,Object.assign({width:"70",height:"70",viewBox:"0 0 70 70"},e),r.createElement("path",{d:"M5.90418 5.73762C5.66489 4.14989 6.94985 2.8002 8.55551 2.8002H46.654C48.1418 2.8002 49.3587 3.96526 49.5671 5.43839C51.9208 22.0781 67.2176 38.7178 63.9428 55.3576C63.7025 56.5789 62.5895 57.4002 61.3447 57.4002H23.4708C21.6045 57.4002 20.2613 55.5995 20.4961 53.7481C22.5254 37.7446 8.31607 21.7411 5.90418 5.73762Z",fill:"#F5F5F5",stroke:"#2E2E2E",strokeWidth:"1.4",strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"}),r.createElement("path",{d:"M23.1004 28.0002H49.7004",stroke:"#2E2E2E",strokeWidth:"1.4",strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"}),r.createElement("path",{d:"M26.6004 36.4002H53.2004",stroke:"#2E2E2E",strokeWidth:"1.4",strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"}),r.createElement("path",{d:"M15.4004 11.2002H42.0004",stroke:"#2E2E2E",strokeWidth:"1.4",strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"}),r.createElement("path",{d:"M19.6004 19.6002H46.2004",stroke:"#2E2E2E",strokeWidth:"1.4",strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"}),r.createElement("path",{d:"M28.7 49.0004H17.5V67.2004L23.1 65.0592L28.7 67.2004V49.0004Z",fill:"#00E0AC",stroke:"#2E2E2E",strokeWidth:"1.4",strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"}),r.createElement("path",{d:"M21.6907 34.4213C22.5617 33.9139 23.6383 33.9139 24.5093 34.4213L26.9766 35.8585C27.1943 35.9853 27.4281 36.0821 27.6716 36.1464L30.4325 36.8748C31.4072 37.1319 32.1685 37.8932 32.4256 38.8679L33.154 41.6288C33.2183 41.8723 33.3151 42.1061 33.4419 42.3238L34.8791 44.7911C35.3865 45.6621 35.3865 46.7387 34.8791 47.6097L33.4419 50.077C33.3151 50.2947 33.2183 50.5285 33.154 50.7721L32.4256 53.5329C32.1685 54.5076 31.4072 55.2689 30.4325 55.526L27.6716 56.2544C27.4281 56.3187 27.1943 56.4155 26.9766 56.5423L24.5093 57.9795C23.6383 58.4869 22.5617 58.4869 21.6907 57.9795L19.2234 56.5423C19.0057 56.4155 18.7719 56.3187 18.5284 56.2544L15.7675 55.526C14.7928 55.2689 14.0315 54.5076 13.7744 53.5329L13.046 50.7721C12.9817 50.5285 12.8849 50.2947 12.7581 50.077L11.3209 47.6097C10.8135 46.7387 10.8135 45.6621 11.3209 44.7911L12.7581 42.3238C12.8849 42.1061 12.9817 41.8723 13.046 41.6288L13.7744 38.8679C14.0315 37.8932 14.7928 37.1319 15.7675 36.8748L18.5283 36.1464C18.7719 36.0821 19.0057 35.9853 19.2234 35.8585L21.6907 34.4213Z",fill:"#D5FF00",stroke:"#2E2E2E",strokeWidth:"1.4"})),Ob=e=>r.createElement(Ri.a1,Object.assign({width:"21",height:"20",viewBox:"0 0 21 20",stroke:"none"},e),r.createElement("rect",{x:"0.5",width:"20",height:"20",rx:"4",fill:"#B1F0E8"}),r.createElement("path",{d:"M6 10H15M15 10L11.5862 6.25M15 10L11.5862 13.75",stroke:"#1C1C1C",strokeWidth:"1.5",strokeLinecap:"round"})),Tb=e=>r.createElement(Ri.a1,Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",stroke:"none"},e),r.createElement("path",{d:"M5.75 7.25C5.75 6.42157 6.42157 5.75 7.25 5.75H12.5C13.3284 5.75 14 6.42157 14 7.25V12.5C14 13.3284 13.3284 14 12.5 14H7.25C6.42157 14 5.75 13.3284 5.75 12.5V7.25Z",fill:"#00C4C4"}),r.createElement("path",{d:"M2 3.5C2 2.67157 2.67157 2 3.5 2H8.75C9.57843 2 10.25 2.67157 10.25 3.5V8.75C10.25 9.57843 9.57843 10.25 8.75 10.25H3.5C2.67157 10.25 2 9.57843 2 8.75V3.5Z",fill:"#80F3F3"}),r.createElement("g",{filter:"url(#filter0_d_2066_374)"},r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.25 5.75V8.75C10.25 9.57843 9.57843 10.25 8.75 10.25H5.75V7.25C5.75 6.42157 6.42157 5.75 7.25 5.75H10.25Z",fill:"#B3F8F8"})),r.createElement("defs",null,r.createElement("filter",{id:"filter0_d_2066_374",x:"0.75",y:"0.75",width:"14.5",height:"14.5",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},r.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),r.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),r.createElement("feOffset",null),r.createElement("feGaussianBlur",{stdDeviation:"2.5"}),r.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.07 0"}),r.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_2066_374"}),r.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_2066_374",result:"shape"})))),Rb=()=>r.createElement("svg",{width:"64",height:"64",viewBox:"0 0 64 64",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.createElement("circle",{cx:"32",cy:"32.5",r:"32",fill:"#F9EA9E"}),r.createElement("path",{d:"M48.3961 29.2909L39.2608 19.4111C38.9744 19.1247 38.6308 18.9529 38.2299 18.9529H26.775H15.3487C14.9191 18.9529 14.5182 19.1533 14.2605 19.497L6.32793 29.3482C5.8411 29.9496 5.8411 30.8946 6.35657 31.4674L25.744 53.8617C25.8586 54.0049 26.0304 54.1195 26.1736 54.2054C26.2022 54.2054 26.2022 54.234 26.2308 54.234C26.2881 54.2627 26.374 54.2913 26.4313 54.3199C26.4599 54.3199 26.4599 54.3486 26.4886 54.3486C26.5459 54.3772 26.6318 54.3772 26.689 54.3772C26.7177 54.3772 26.7463 54.3772 26.775 54.3772C26.8609 54.3772 26.9181 54.3772 27.0041 54.3486C27.0327 54.3486 27.0327 54.3486 27.0613 54.3486C27.1186 54.3486 27.2045 54.3199 27.2618 54.2913C27.2904 54.2913 27.3191 54.2913 27.3477 54.2627C27.405 54.234 27.4336 54.2054 27.4909 54.1767C27.5195 54.1481 27.5768 54.1481 27.6054 54.1195L27.6341 54.0908C27.6913 54.0336 27.7773 53.9763 27.8345 53.919L48.3961 31.5819C48.9688 30.9233 48.9688 29.8923 48.3961 29.2909Z",fill:"#303A68"}),r.createElement("path",{d:"M54.4671 27.4294L45.3318 17.5495C45.0454 17.2631 44.7018 17.0913 44.3008 17.0913H32.8459H21.4483C21.0187 17.0913 20.6178 17.2918 20.3601 17.6354L12.4275 27.4866C11.9407 28.088 11.9407 29.0331 12.4562 29.6058L31.8436 52.0002C32.13 52.3152 32.5023 52.487 32.8746 52.487C33.2469 52.487 33.6478 52.3438 33.9341 52.0288L54.4957 29.6917C55.0398 29.0617 55.0398 28.0594 54.4671 27.4294Z",fill:"url(#paint0_linear_4597_20798)"}),r.createElement("path",{d:"M45.3318 17.5495C45.0454 17.2631 44.7018 17.0913 44.3008 17.0913H32.8459H21.4483C21.0187 17.0913 20.6178 17.2918 20.3601 17.6354L12.4275 27.4866C11.9407 28.088 11.9407 29.0331 12.4562 29.6058L31.8436 52.0002C32.4164 52.6588 33.3614 52.6588 33.9341 52.0288L54.4957 29.6917C55.0685 29.0617 55.0685 28.0594 54.4957 27.458L45.3318 17.5495Z",stroke:"#303A68",strokeMiterlimit:"10"}),r.createElement("path",{d:"M28.6648 17.0913L24.3405 27.9735C24.1974 28.3458 24.1687 28.7753 24.3119 29.1762L32.8745 52.487",stroke:"#303A68",strokeMiterlimit:"10"}),r.createElement("path",{d:"M37.0554 17.0913L41.3796 27.9735C41.5228 28.3458 41.5514 28.7753 41.4083 29.1762L32.8457 52.487",stroke:"#303A68",strokeMiterlimit:"10"}),r.createElement("path",{d:"M54.8966 28.5461H12.0552",stroke:"#303A68",strokeMiterlimit:"10"}),r.createElement("path",{d:"M45.217 19.4683L44.8447 18.1796C44.8161 18.0937 44.7588 18.0364 44.6729 18.0078L43.3842 17.6355C43.1551 17.5782 43.1551 17.2346 43.3842 17.1487L44.6729 16.7764C44.7588 16.7477 44.8161 16.6905 44.8447 16.6045L45.217 15.3159C45.2743 15.0868 45.6179 15.0868 45.7039 15.3159L46.0761 16.6045C46.1048 16.6905 46.1621 16.7477 46.248 16.7764L47.5366 17.1487C47.7657 17.2059 47.7657 17.5496 47.5366 17.6355L46.248 18.0078C46.1621 18.0364 46.1048 18.0937 46.0761 18.1796L45.7039 19.4683C45.6179 19.726 45.2743 19.726 45.217 19.4683Z",fill:"white"}),r.createElement("defs",null,r.createElement("linearGradient",{id:"paint0_linear_4597_20798",x1:"20.8994",y1:"41.0591",x2:"44.8759",y2:"17.0825",gradientUnits:"userSpaceOnUse"},r.createElement("stop",{stopColor:"#979DFF"}),r.createElement("stop",{offset:"0.9971",stopColor:"#FFCEDD"}))));var Bb=i(24359);const Ub={Addition:{Default:"var(--color-background-addition-default)",Subdued:"var(--color-background-addition-subdued)"},Base:{Default:"var(--color-background-base-default)",Subdued:"var(--color-background-base-subdued)"},Brand:{Default:"var(--color-background-brand-default)",Subdued:"var(--color-background-brand-subdued)"},Business:{Default:"var(--color-background-business-default)",Subdued:"var(--color-background-business-subdued)"},Clarity:{Default:"var(--color-background-clarity-default)",Subdued:"var(--color-background-clarity-subdued)"},Correctness:{Default:"var(--color-background-correctness-default)",Subdued:"var(--color-background-correctness-subdued)"},Critical:{Default:"var(--color-background-critical-default)",Subdued:"var(--color-background-critical-subdued)"},Deletion:{Default:"var(--color-background-deletion-default)",Subdued:"var(--color-background-deletion-subdued)"},Delivery:{Default:"var(--color-background-delivery-default)",Subdued:"var(--color-background-delivery-subdued)"},Engagement:{Default:"var(--color-background-engagement-default)",Subdued:"var(--color-background-engagement-subdued)"},Neutral:{Default:"var(--color-background-neutral-default)"},Plagiarism:{Default:"var(--color-background-plagiarism-default)",Subdued:"var(--color-background-plagiarism-subdued)"},Premium:{Default:"var(--color-background-premium-default)",Subdued:"var(--color-background-premium-subdued)"},Success:{Default:"var(--color-background-success-default)",Subdued:"var(--color-background-success-subdued)"},Warning:{Default:"var(--color-background-warning-default)",Subdued:"var(--color-background-warning-subdued)"}},Gb={Addition:{Default:"var(--color-text-addition-default)"},Base:{Default:"var(--color-text-base-default)",Subdued:"var(--color-text-base-subdued)",Inverse:"var(--color-text-base-inverse)"},Brand:{Default:"var(--color-text-brand-default)"},Business:{Default:"var(--color-text-business-default)"},Critical:{Default:"var(--color-text-critical-default)"},Deletion:{Default:"var(--color-text-deletion-default)"},Premium:{Default:"var(--color-text-premium-default)"},Success:{Default:"var(--color-text-success-default)"},Warning:{Default:"var(--color-text-warning-default)"}},Nb="#FFA600",Lb=e=>r.createElement(Ri.a1,{className:e.className,fill:"none",viewBox:"0 0 20 20",width:20,height:20},r.createElement("path",{d:"M3 8.06034L6.15789 3.75H9.31579M3 8.06034L10.5 16.25M3 8.06034H7.34211M18 8.06034L14.8421 3.75H11.6842M18 8.06034L10.5 16.25M18 8.06034H13.2632M10.5 16.25L7.34211 8.06034M10.5 16.25L13.2632 8.06034M7.34211 8.06034H13.2632M7.34211 8.06034L9.31579 3.75M13.2632 8.06034L11.6842 3.75M11.6842 3.75H9.31579",stroke:"#7A3500",strokeLinecap:"round",strokeLinejoin:"round"}));var Db=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const jb=e=>{var{children:t,style:i}=e,n=Db(e,["children","style"]);return r.createElement(Oi.z,Object.assign({style:Object.assign(Object.assign({},i),{default:{backgroundColor:Ub.Premium.Default,color:Gb.Premium.Default},active:{backgroundColor:Nb,color:Gb.Premium.Default},hovered:{backgroundColor:Nb,color:Gb.Premium.Default}})},n),r.createElement(Lb,null),null!=t?t:"Go Premium")},zb=(e,t)=>e?"Try for Free":t?"Get 50% off Pro":"Get Pro",Vb=s.UI.Node.make((({notify:e,state:t})=>r.createElement(Mi.F.Fragment,null,t.pipe(O.U((({isEligibleForFreeTrial:t,isEligibleForInProductDiscount:i,hasUphookHubEnabled:n,uphookConfiguration:s})=>r.createElement(jb,{onClick:e({kind:"uphookClick",uphookConfig:s}),mount:e({kind:"uphookShow",uphookConfig:s}),"data-testid":"uphook-button",className:Zb},o.g_((()=>zb(t.get(),i.get())),(e=>{var n;return null!==(n=null==e?void 0:e.content.ctaCopy)&&void 0!==n?n:zb(t.get(),i.get())}))(n.get()?s:o.YP)))))))),Kb=s.UI.Node.make((({notify:e,state:t})=>r.createElement(Mi.F.Fragment,null,t.pipe(O.U((({isEligibleForFreeTrial:t,isEligibleForInProductDiscount:i,hasUphookHubEnabled:n,uphookConfiguration:s})=>r.createElement(Mi.F.div,{className:Hb,mount:e({kind:"uphookShow",uphookConfig:s})},r.createElement(Fb.z,{variant:"pro",width:"full",size:"large","data-testid":"uphook-button",iconStart:Bb.R,onClick:e({kind:"uphookClick",uphookConfig:s})},o.g_((()=>zb(t.get(),i.get())),(e=>{var n;return null!==(n=null==e?void 0:e.content.ctaCopy)&&void 0!==n?n:zb(t.get(),i.get())}))(n.get()?s:o.YP))))))))),Zb=Ei.ux.style({flex:1}),Hb=Ei.ux.style({width:"100%"}),$b=s.UI.Grid.make((({slots:e,notify:t,view:i})=>r.createElement(Gl,{"aria-busy":"true","aria-live":"polite","data-testid":"plagiarism-uphook",style:Xb},r.createElement(Rb,null),r.createElement("div",{className:Qb},r.createElement(gh,{style:Jb},i("aiDetectorEnabled").pipe(O.U((e=>e?"Detect plagiarism and AI text":"Plagiarism")))),r.createElement(Mi.F.p,{className:ey},i("aiDetectorEnabled").pipe(O.U((e=>e?"Grammarly finds parts of your text that may need citations for external sources or AI generation.":"Grammarly compares billions of web pages to your document and alerts you to passages that may need citations.")))),r.createElement("div",{className:ty},e.uphook,r.createElement(Fb.z,{variant:"tertiary",onClick:t({kind:"plagiarismUphookDismiss"})},"Maybe later")))))),Wb=s.UI.Knot.make($b,{uphook:Vb}),Yb=s.UI.Grid.make((({slots:e,view:t})=>r.createElement(Gl,{"aria-live":"polite","data-testid":"improved-plagiarism-uphook",style:ry},r.createElement(Mi.F.div,{className:ny},r.createElement(gh,{style:iy},t("aiDetectorEnabled").pipe(O.U((e=>e?"Plagiarism and AI text check":"Plagiarism check")))),r.createElement(Fb.z,{size:"small",variant:"tertiary",isDisabled:!0},"APA",r.createElement(_i.J,{icon:Iv.p,size:"small",accessibilityLabel:""}))),r.createElement(Mi.F.div,{className:sy},r.createElement(Gl,{style:dy},r.createElement(gh,null,r.createElement(Tb,null),r.createElement("span",{className:"highlight"},"99%")," ",r.createElement("span",{className:"light"},"of this text matches")," ",r.createElement("span",{className:"highlight"},"Frontiers in Forests and...")),r.createElement(Pb.x,{bgColor:"blue-0",padding:4,borderRadius:1},r.createElement("span",{id:"ref-title"},"Detected reference"),r.createElement("br",null),'Watts, Martin, et al. "Impacts of climate change on tropical agroforestry systems: A systematic review identifying future research priorities." Frontiers in Forests and Global Change, 31 Dec. 2021. https://doi.org/10.3389/ffgc.2022.880621'),r.createElement("div",null,r.createElement(Fb.z,null,"Copy reference"),r.createElement(Fb.z,{variant:"tertiary",onClick:()=>{}},"Dismiss"))),r.createElement("div",{className:cy},r.createElement(Gl,null,r.createElement(gh,null,r.createElement(Tb,null),"99% ",r.createElement("span",null,"of this text matches · ",r.createElement("span",null,"Frontiers in Fo and Glob.")))),r.createElement(Gl,null,r.createElement(gh,null,r.createElement(Tb,null),"89% ",r.createElement("span",null,"of this text matches · ",r.createElement("span",null,"PRIMER: Agricultural St...")))),r.createElement(Gl,null,r.createElement(gh,null,r.createElement(Tb,null),"65% ",r.createElement("span",null,"of this text matches · ",r.createElement("span",null,"Study Barn: What is th...")))),r.createElement(Gl,null,r.createElement(gh,null,r.createElement(Tb,null),"99% ",r.createElement("span",null,"of this text matches · ",r.createElement("span",null,"Climate and Food: A Stu...")))))),r.createElement(Mi.F.div,{className:oy},r.createElement("div",{className:ay},r.createElement("div",null,r.createElement(Mb,null)),r.createElement("div",null,r.createElement(pv.X,{as:"h2",variant:"heading-small"},"You're a true original.",r.createElement("br",null),"Ensure your work is, too."))),r.createElement("div",{className:ly},r.createElement("div",null,r.createElement(Ob,null),"Catch accidental plagiarism"),r.createElement("div",null,r.createElement(Ob,null),"Detect similarities to AI text"),r.createElement("div",null,r.createElement(Ob,null),"Get fully formatted citations")),e.uphook)))),qb=s.UI.Knot.make(Yb,{uphook:Kb}),Xb={padding:Ei.ux.rem(Ci.mh),display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:Ei.ux.rem(Ci.sD),height:"100%",boxSizing:"border-box"},Qb=Ei.ux.style({textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",paddingLeft:Ei.ux.rem(Ci.mh),paddingRight:Ei.ux.rem(Ci.mh),gap:Ei.ux.rem(Ci.x)}),Jb={whiteSpace:"normal",padding:0},ey=Ei.ux.style({margin:0,color:$i.Z.TextBaseSubduedColor,fontSize:Ei.ux.rem(.875),lineHeight:"1.5em",fontWeight:400}),ty=Ei.ux.style({display:"flex",alignItems:"center",justifyContent:"center",gap:Ei.ux.rem(.5)}),iy={whiteSpace:"normal",padding:0},ny=Ei.ux.style({display:"flex",alignItems:"flex-start",justifyContent:"space-between",padding:`${Ei.ux.rem(Fi.x)} ${Ei.ux.rem(Fi.mh)}`,paddingTop:Ei.ux.rem(Fi.mh)}),ry={padding:0,display:"grid",gridTemplateRows:"auto 1fr auto",height:"100%"},sy=Ei.ux.style({filter:"blur(6px)",pointerEvents:"none",overflow:"hidden",userSelect:"none"}),oy=Ei.ux.style({zIndex:1,display:"flex",flexDirection:"column",gap:Ei.ux.rem(Fi.Ze),boxShadow:"0px -6px 31px rgba(0, 0, 0, 0.25)",padding:`${Ei.ux.rem(Fi.Ze)} ${Ei.ux.rem(Fi.Ze)}`,paddingTop:Ei.ux.rem(Fi.Lw),textAlign:"center",alignItems:"center"}),ay=Ei.ux.style({display:"flex",flexDirection:"column",gap:Ei.ux.rem(Fi.mh),$nest:{svg:{transform:"scale(0.9)"}}}),ly=Ei.ux.style({gap:Ei.ux.rem(Fi.sD),paddingBottom:Ei.ux.rem(Fi.x0),display:"flex",flexDirection:"column",fontSize:Ei.ux.rem(1),$nest:{div:{fontSize:Ei.ux.rem(.875),gap:Ei.ux.rem(Fi.F2),display:"flex",textAlign:"left",alignItems:"center"}}}),cy=Ei.ux.style({$nest:{svg:{paddingRight:Ei.ux.rem(.5)},span:{fontWeight:"normal"},"span > span":{color:Li.NeutralGray60}}}),dy={gap:Ei.ux.rem(Fi.w9),wordWrap:"break-word",$nest:{".highlight":{color:Li.Green40},".light":{fontWeight:"lighter"},svg:{paddingRight:Ei.ux.rem(.5)},"#ref-title":{color:"gray"}}},uy=s.UI.Grid.make((({slots:e,view:t,notify:i})=>{const{onMount:n}=(0,Vo.F)((0,a.ls)(N.b(i({kind:"plagiarismFeedMount"})),zo.x(ws.notifyFeedUnmount)));return r.createElement(Gl,{"data-testid":"plagiarism-non-empty",style:hy,mount:n,"aria-live":"polite"},r.createElement(Mi.F.div,{className:vy},r.createElement(gh,{style:fy},t("aiDetectorEnabled").pipe(O.U((e=>e?"Plagiarism and AI text check":"Plagiarism detected"))),t("pageRange").pipe(O.U(o.g_(a.gn,(e=>r.createElement(Zv,{pageRange:e,onPageRangeHeaderMount:a.Q1})))))),t("citationDropdown").pipe(O.U(o.g_(a.gn,(e=>r.createElement(zv,{className:by,menuClassName:yy,placeholder:e.placeholder,options:e.select.items,optionsGroupLabel:"Citation style",selection:e.select.items.find((t=>t.id===e.selectedItem)),onSelectionChange:e=>i({kind:"sduiCitationDropdownSelect",actions:e.onClickActions,sourceId:e.id})(),onOptionsExpanded:e=>i({kind:"sduiCitationDropdownOpen",currentSourceId:null==e?void 0:e.id})(),label:e=>e.label,renderOption:e=>e.label})))))),r.createElement(wa,{className:gy},e.cardList),e.footer)})),my=s.UI.Knot.make(uy,{cardList:$v,footer:s.UI.Union.asOption(lb)}),py=s.UI.Union.make("kind",{loadingState:fb,emptyState:Xv,nonEmptyState:my,uphookState:Wb,improvedUphookState:qb}),gy=Ei.ux.style({$nest:{'&[data-overflow-top="true"]':{borderTop:`0.5px solid ${$i.Z.BorderBaseSubduedColor}`}}}),hy={padding:0,display:"grid",gridTemplateRows:"auto 1fr auto",height:"100%"},fy={whiteSpace:"normal",padding:0},vy=Ei.ux.style({display:"flex",alignItems:"flex-start",justifyContent:"space-between",padding:`${Ei.ux.rem(Fi.x)} ${Ei.ux.rem(Fi.mh)}`,paddingTop:Ei.ux.rem(Fi.mh)}),by=Ei.ux.style({width:"min-content",height:Ei.ux.rem(1.5),$nest:{"& > button":{padding:`${Ei.ux.rem(3*Fi.W9)} ${Ei.ux.rem(Fi.F2)} ${Ei.ux.rem(3*Fi.W9)} ${Ei.ux.rem(Fi.x)}`}}}),yy=Ei.ux.style({width:Ei.ux.rem(9.75)}),xy=s.UI.Node.make((({view:e})=>r.createElement(Gl,{"data-testid":"settings"},e("content"))));var ky=i(69001);const Sy=s.UI.Grid.make((({slots:e})=>r.createElement("div",{className:wy},r.createElement("h3",{className:Iy},"Looks like you got signed out"),e.content,e.signIn))),Cy=s.UI.Union.make("kind",{free:s.UI.Node.make((()=>r.createElement("p",{className:Ay},"Sign back in to use personalized features and generative AI."))),premium:s.UI.Node.make((()=>r.createElement(r.Fragment,null,r.createElement("p",{className:Ay},"You’re missing out on your Premium features. Sign back in to:"),r.createElement("ul",{className:Fy},r.createElement("li",null,r.createElement(ky.L,{className:Py}),"Rewrite full sentences"),r.createElement("li",null,r.createElement(ky.L,{className:Py}),"Strike the right tone"),r.createElement("li",null,r.createElement(ky.L,{className:Py}),"Use generative AI"))))),business:s.UI.Node.make((()=>r.createElement(r.Fragment,null,r.createElement("p",{className:Ay},"You’re missing out on your Grammarly Business features. Sign back in to:"),r.createElement("ul",{className:Fy},r.createElement("li",null,r.createElement(ky.L,{className:Py}),"Rewrite full sentences"),r.createElement("li",null,r.createElement(ky.L,{className:Py}),"Strike the right tone"),r.createElement("li",null,r.createElement(ky.L,{className:Py}),"Access time-saving snippets"),r.createElement("li",null,r.createElement(ky.L,{className:Py}),"Maintain your brand voice"),r.createElement("li",null,r.createElement(ky.L,{className:Py}),"Use generative AI")))))}),Ey=s.UI.Union.asOption(s.UI.Node.make((({notify:e})=>r.createElement(Oi.z,{name:"signBackIn",onClick:e({kind:xt.i.Kind.signInButtonClick})},"Sign in")))),_y=s.UI.Knot.make(Sy,{content:Cy,signIn:Ey}),wy=Ei.ux.style({padding:Ei.ux.rem(Fi.mh)}),Iy=Ei.ux.style({fontSize:Ei.ux.rem(1),lineHeight:"1.5em",margin:0}),Ay=Ei.ux.style({fontSize:Ei.ux.rem(.875),lineHeight:"1.5em",margin:`0 0 ${Ei.ux.rem(Fi.mh)} 0`,color:Pi.I.Text.Base.Subdued}),Fy=Ei.ux.style({fontSize:Ei.ux.rem(.875),margin:`${Ei.ux.rem(Fi.mh)} 0`,paddingInlineStart:Ei.ux.rem(2),listStyle:"none",position:"relative",$nest:{"& > li":{margin:`${Ei.ux.rem(Fi.x)} 0`}}}),Py=Ei.ux.style({width:Ei.ux.rem(1.5),height:Ei.ux.rem(1.5),position:"absolute",left:0,marginTop:Ei.ux.rem(-.25)}),My={padding:0,height:Ei.ux.rem(14.625),overflow:"hidden",boxSizing:"border-box",maxHeight:"inherit",display:"flex",justifyContent:"center",alignItems:"center",borderBottomLeftRadius:"inherit",borderBottomRightRadius:"inherit"},Oy={height:"100%",borderBottomLeftRadius:"inherit",borderBottomRightRadius:"inherit"},Ty=Ei.ux.style(Object.assign(Object.assign({},Oy),{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"})),Ry=Ei.ux.style(Object.assign(Object.assign({},Oy),{border:"none",margin:"0",width:"100%"})),By=Ei.ux.style({color:Pi.I.Text.Base.Subdued,fontSize:Ei.ux.rem(.75),fontFamily:"Inter",fontWeight:700,lineHeight:Ei.ux.rem(1.125)}),Uy=Ei.ux.style({color:Pi.I.Text.Base.Subdued,fontSize:Ei.ux.rem(.75),fontFamily:"Inter",lineHeight:Ei.ux.rem(1.125)}),Gy=Ei.ux.style({visibility:"hidden",position:"absolute"}),Ny=s.UI.Node.make((({state:e,view:t,notify:i})=>{const{notifyUnmount:n}=r.useContext(Ko),{ref:s,onMount:o}=(0,Vo.F)((0,a.ls)(N.b((e=>i({kind:xt.i.Kind.mount,name:Xt.e.skill,element:e})())),zo.x((()=>n({kind:xt.i.Kind.unmount,name:Xt.e.skill}))))),l=r.useMemo((()=>t("status").pipe(vi.G(),h.h((([e,t])=>"loading"===e&&"ready"===t)),m.w((()=>s.pipe(U.oA,N.b((e=>e.focus()))))))),[s]);return gi.P.useSubscriptionTo(l),r.createElement(Gl,{"data-testid":"skill",style:t("size").pipe(O.U((e=>Object.assign(Object.assign({},My),{height:e.height}))))},e.pipe(O.U((({status:e,srcUrl:t})=>"loading"===e||"ready"===e?r.createElement(r.Fragment,null,"loading"===e&&r.createElement("div",{className:Ty},r.createElement(Pd,null),r.createElement("span",{className:Uy},"Loading...")),r.createElement("iframe",{"aria-busy":"loading"===e,key:t,src:t,ref:o,allow:`clipboard-write ${t}`,className:Ei.ux.joinClasses([Ry,"loading"===e?Gy:void 0])})):"error"===e?r.createElement("div",{className:Ty},r.createElement(Io,null),r.createElement("span",{className:By},"Something went wrong"),r.createElement("span",{className:Uy},"Please try again.")):(0,c.L0)(e)))))})),Ly=s.UI.Union.asOption(Ny),Dy=()=>r.createElement("svg",{width:"64",height:"64",viewBox:"0 0 64 64",fill:"none","aria-hidden":!0,focusable:!1},r.createElement("g",{filter:"url(#filter0_d_8024_21772)"},r.createElement("path",{d:"M55.8852 31.8162C55.8852 45.1944 45.0401 56.0395 31.6619 56.0395C18.2837 56.0395 7.43851 45.1944 7.43851 31.8162C7.43851 18.438 18.2837 7.59281 31.6619 7.59281C45.0401 7.59281 55.8852 18.438 55.8852 31.8162Z",fill:"#F8E485",stroke:"#0E101A",strokeWidth:"0.923895"}),r.createElement("path",{d:"M21.7978 23.7215C22.8908 23.928 23.9428 23.2174 24.1473 22.1344C24.3519 21.0514 23.6317 20.0061 22.5387 19.7996C21.4456 19.5932 20.3937 20.3037 20.1892 21.3867C19.9846 22.4697 20.7048 23.515 21.7978 23.7215Z",fill:"#0E101A"}),r.createElement("path",{d:"M41.4843 27.4402C42.5774 27.6467 43.6293 26.9362 43.8339 25.8532C44.0384 24.7702 43.3182 23.7249 42.2252 23.5184C41.1322 23.3119 40.0803 24.0225 39.8757 25.1055C39.6711 26.1885 40.3913 27.2338 41.4843 27.4402Z",fill:"#0E101A"}),r.createElement("path",{d:"M24.2816 34.395C24.2816 34.395 29.559 33.4257 32.7662 37.1937L24.2816 34.395Z",fill:"#F8E485"}),r.createElement("path",{d:"M24.2816 34.395C24.2816 34.395 29.559 33.4257 32.7662 37.1937",stroke:"black",strokeWidth:"0.923895",strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"}),r.createElement("mask",{id:"path-6-outside-1_8024_21772",maskUnits:"userSpaceOnUse",x:"8.96191",y:"33.5461",width:"27",height:"25",fill:"black"},r.createElement("rect",{fill:"white",x:"8.96191",y:"33.5461",width:"27",height:"25"}),r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.6191 56.9757L22.7965 55.6378C14.6478 59.7692 7.64857 53.1582 10.6855 43.2215C11.3435 41.0674 11.0422 39.168 10.8093 37.6995C10.5628 36.1455 10.3928 35.0741 11.5172 34.6942C14.0431 33.8393 15.4863 36.7255 15.2158 42.3628C18.0521 41.5103 19.8629 40.6726 21.2853 40.0146C22.7461 39.3389 23.7971 38.8527 25.1283 38.7347C26.0211 38.6556 27.1853 39.1115 28.5046 39.6282C29.906 40.1771 31.4825 40.7945 33.0945 40.912C35.6349 41.0955 34.3174 45.1814 31.2708 44.3961C30.8221 44.2809 30.3668 44.0484 29.8691 43.7942C29.0231 43.3622 28.0546 42.8677 26.7878 42.7801C29.4925 44.3034 30.3464 45.5253 28.8772 48.4425C28.8772 48.4425 28.1305 47.4427 26.0982 46.98C29.0752 48.9892 29.2384 50.4874 27.7364 52.796C27.2302 52.3594 26.1822 51.7586 24.7362 51.689C29.8615 53.7446 26.4662 59.3702 21.6191 56.9757Z"})),r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.6191 56.9757L22.7965 55.6378C14.6478 59.7692 7.64857 53.1582 10.6855 43.2215C11.3435 41.0674 11.0422 39.168 10.8093 37.6995C10.5628 36.1455 10.3928 35.0741 11.5172 34.6942C14.0431 33.8393 15.4863 36.7255 15.2158 42.3628C18.0521 41.5103 19.8629 40.6726 21.2853 40.0146C22.7461 39.3389 23.7971 38.8527 25.1283 38.7347C26.0211 38.6556 27.1853 39.1115 28.5046 39.6282C29.906 40.1771 31.4825 40.7945 33.0945 40.912C35.6349 41.0955 34.3174 45.1814 31.2708 44.3961C30.8221 44.2809 30.3668 44.0484 29.8691 43.7942C29.0231 43.3622 28.0546 42.8677 26.7878 42.7801C29.4925 44.3034 30.3464 45.5253 28.8772 48.4425C28.8772 48.4425 28.1305 47.4427 26.0982 46.98C29.0752 48.9892 29.2384 50.4874 27.7364 52.796C27.2302 52.3594 26.1822 51.7586 24.7362 51.689C29.8615 53.7446 26.4662 59.3702 21.6191 56.9757Z",fill:"#F9EA9E"}),r.createElement("path",{d:"M22.7965 55.6378L23.4901 56.2482L22.3788 54.8138L22.7965 55.6378ZM21.6191 56.9757L20.9255 56.3652L20.1291 57.2701L21.2098 57.804L21.6191 56.9757ZM10.6855 43.2215L11.5691 43.4916L11.5691 43.4914L10.6855 43.2215ZM10.8093 37.6995L9.89676 37.8442L10.8093 37.6995ZM11.5172 34.6942L11.8129 35.5694L11.8134 35.5693L11.5172 34.6942ZM15.2158 42.3628L14.293 42.3185L14.2303 43.6237L15.4817 43.2476L15.2158 42.3628ZM21.2853 40.0146L21.6732 40.8532L21.2853 40.0146ZM25.1283 38.7347L25.2099 39.655L25.2099 39.655L25.1283 38.7347ZM28.5046 39.6282L28.1677 40.4885L28.5046 39.6282ZM33.0945 40.912L33.0274 41.8334L33.0279 41.8335L33.0945 40.912ZM31.2708 44.3961L31.5014 43.5015L31.5006 43.5013L31.2708 44.3961ZM29.8691 43.7942L29.4489 44.6171L29.8691 43.7942ZM26.7878 42.7801L26.8516 41.8584L26.3345 43.5851L26.7878 42.7801ZM28.8772 48.4425L28.137 48.9953L29.0306 50.1918L29.7023 48.8581L28.8772 48.4425ZM26.0982 46.98L26.3032 46.0792L25.5813 47.7458L26.0982 46.98ZM27.7364 52.796L27.1329 53.4956L27.9339 54.1865L28.5108 53.2999L27.7364 52.796ZM24.7362 51.689L24.7806 50.7662L24.3923 52.5465L24.7362 51.689ZM22.103 55.0274L20.9255 56.3652L22.3126 57.5861L23.4901 56.2482L22.103 55.0274ZM9.80196 42.9515C8.21218 48.1532 9.20062 52.6777 11.8945 55.3599C14.6148 58.0683 18.8498 58.6746 23.2143 56.4619L22.3788 54.8138C18.5946 56.7323 15.2556 56.0989 13.1983 54.0505C11.1146 51.9759 10.1219 48.2266 11.5691 43.4916L9.80196 42.9515ZM9.89676 37.8442C10.1299 39.3143 10.3914 41.0217 9.80191 42.9516L11.5691 43.4914C12.2956 41.1131 11.9544 39.0216 11.7217 37.5547L9.89676 37.8442ZM11.2214 33.8189C10.8038 33.96 10.4382 34.1906 10.1678 34.5389C9.90133 34.8821 9.78146 35.2699 9.73319 35.6357C9.6443 36.3092 9.78198 37.1206 9.89676 37.8442L11.7217 37.5547C11.59 36.7243 11.5195 36.2231 11.5651 35.8774C11.5841 35.7336 11.6171 35.6852 11.6273 35.6721C11.6336 35.6641 11.6684 35.6183 11.8129 35.5694L11.2214 33.8189ZM16.1386 42.4071C16.2762 39.5396 15.9913 37.2198 15.2457 35.6893C14.8668 34.9115 14.3335 34.2665 13.6055 33.9095C12.8591 33.5435 12.0364 33.5431 11.221 33.819L11.8134 35.5693C12.2609 35.4178 12.5659 35.4576 12.792 35.5685C13.0365 35.6884 13.3207 35.957 13.5846 36.4985C14.1244 37.6068 14.4259 39.5487 14.293 42.3185L16.1386 42.4071ZM20.8974 39.1761C19.4867 39.8287 17.7228 40.6445 14.9499 41.478L15.4817 43.2476C18.3813 42.3761 20.2392 41.5165 21.6732 40.8532L20.8974 39.1761ZM25.0468 37.8144C23.5293 37.9489 22.3342 38.5115 20.8974 39.1761L21.6732 40.8532C23.1581 40.1662 24.065 39.7564 25.2099 39.655L25.0468 37.8144ZM28.8416 38.768C28.1917 38.5135 27.5321 38.2544 26.9197 38.0724C26.3145 37.8925 25.6671 37.7594 25.0467 37.8144L25.2099 39.655C25.4824 39.6308 25.8634 39.6861 26.3933 39.8436C26.9161 39.999 27.4982 40.2263 28.1677 40.4885L28.8416 38.768ZM33.1616 39.9905C31.7128 39.885 30.2669 39.3262 28.8416 38.768L28.1677 40.4885C29.5452 41.028 31.2521 41.7041 33.0274 41.8334L33.1616 39.9905ZM31.0402 45.2908C33.0568 45.8106 34.5818 44.6954 35.1311 43.3715C35.3991 42.7257 35.4703 41.9426 35.1461 41.2517C34.7967 40.5072 34.0764 40.0566 33.1611 39.9905L33.0279 41.8335C33.3828 41.8591 33.4505 41.9881 33.4734 42.0367C33.5214 42.139 33.5491 42.3628 33.4244 42.6633C33.1885 43.2319 32.5314 43.767 31.5014 43.5015L31.0402 45.2908ZM29.4489 44.6171C29.9222 44.8588 30.4736 45.1453 31.041 45.291L31.5006 43.5013C31.1706 43.4165 30.8114 43.2381 30.2892 42.9714L29.4489 44.6171ZM26.7241 43.7018C27.7815 43.7749 28.5974 44.1822 29.4489 44.6171L30.2892 42.9714C29.4488 42.5423 28.3277 41.9605 26.8516 41.8584L26.7241 43.7018ZM29.7023 48.8581C30.476 47.322 30.7784 45.9677 30.2472 44.7254C29.7453 43.5513 28.5923 42.7361 27.2412 41.9751L26.3345 43.5851C27.688 44.3475 28.3143 44.9048 28.5482 45.4518C28.7529 45.9305 28.7476 46.6458 28.052 48.0269L29.7023 48.8581ZM25.8931 47.8809C26.7894 48.0849 27.3747 48.4005 27.7208 48.6422C27.895 48.7639 28.0114 48.8688 28.078 48.9349C28.1114 48.968 28.1324 48.9914 28.1419 49.0024C28.1466 49.008 28.1485 49.0103 28.1476 49.0093C28.1472 49.0087 28.1461 49.0073 28.1443 49.005C28.1434 49.0039 28.1424 49.0025 28.1411 49.0009C28.1405 49.0001 28.1399 48.9992 28.1392 48.9983C28.1388 48.9978 28.1385 48.9973 28.1381 48.9969C28.1379 48.9966 28.1376 48.9962 28.1375 48.9961C28.1372 48.9957 28.137 48.9953 28.8772 48.4425C29.6174 47.8896 29.6171 47.8892 29.6168 47.8888C29.6167 47.8887 29.6164 47.8883 29.6162 47.888C29.6158 47.8875 29.6154 47.8869 29.6149 47.8863C29.614 47.8851 29.6131 47.8839 29.6121 47.8826C29.6102 47.88 29.608 47.8772 29.6056 47.8742C29.6009 47.868 29.5953 47.861 29.589 47.853C29.5762 47.8371 29.56 47.8175 29.5404 47.7948C29.5011 47.7493 29.4479 47.691 29.3795 47.6232C29.2426 47.4874 29.0453 47.3134 28.7788 47.1273C28.2435 46.7535 27.4393 46.3378 26.3032 46.0792L25.8931 47.8809ZM28.5108 53.2999C29.2971 52.0914 29.8145 50.856 29.494 49.5548C29.1821 48.2882 28.1416 47.2445 26.615 46.2142L25.5813 47.7458C27.0317 48.7247 27.5614 49.4347 27.6999 49.9967C27.8297 50.524 27.6778 51.192 26.962 52.2922L28.5108 53.2999ZM24.6918 52.6119C25.9073 52.6703 26.7634 53.1768 27.1329 53.4956L28.3399 52.0964C27.6971 51.5419 26.457 50.8468 24.7806 50.7662L24.6918 52.6119ZM21.2098 57.804C23.9894 59.1771 26.6084 58.3216 27.7106 56.4746C28.256 55.5607 28.3939 54.4321 27.945 53.3617C27.4985 52.297 26.5256 51.4112 25.0801 50.8315L24.3923 52.5465C25.5094 52.9946 26.0341 53.5828 26.241 54.0763C26.4455 54.564 26.3926 55.0775 26.1239 55.5277C25.5981 56.4088 24.0959 57.1688 22.0283 56.1473L21.2098 57.804Z",fill:"black",mask:"url(#path-6-outside-1_8024_21772)"})),r.createElement("defs",null,r.createElement("filter",{id:"filter0_d_8024_21772",x:"0.331055",y:"5.4856",width:"57.6621",height:"57.9946",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},r.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),r.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),r.createElement("feOffset",{dx:"-5",dy:"5"}),r.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.776471 0 0 0 0 0.796078 0 0 0 0 0.870588 0 0 0 1 0"}),r.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_8024_21772"}),r.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_8024_21772",result:"shape"})))),jy=s.UI.Node.make((({notify:e})=>{const{onMount:t}=(0,Vo.F)(N.b(e({kind:xt.i.Kind.toneReportLoadedEmptyMount})));return r.createElement(Gl,{mount:t,key:"tone-report-empty","data-testid":"tone-report-empty",style:zy},r.createElement(Dy,null),r.createElement(gh,{style:Vy},"We couldn't detect a tone"),r.createElement("p",{className:Ky},"To see an analysis of your tone, write more and check again."),r.createElement(Oi.z,{variant:"secondary",onClick:e({kind:xt.i.Kind.toneReportBackToSuggestionsButtonClick})},"See all suggestions"))})),zy={padding:`${Ei.ux.rem(Fi.mh)}`,display:"flex",justifyContent:"center",alignItems:"center",gap:`${Ei.ux.rem(Fi.mh)}`,boxSizing:"border-box"},Vy={whiteSpace:"normal",padding:0},Ky=Ei.ux.style({margin:0,color:$i.Z.TextBaseSubduedColor,fontSize:Ei.ux.rem(.875),lineHeight:"1.5em",fontWeight:400,textAlign:"center"});var Zy=i(64831);const Hy=({uphookButton:e,uphookTitle:t,uphookEmojiId:i})=>r.createElement(Mi.F.div,{className:$y,key:"tone-report-footer"},r.createElement(Mi.F.div,{className:Wy},(0,a.zG)(i,o.UI((e=>r.createElement(Zy.In,{id:e,className:Yy,key:"uphookEmoji"}))),o.fS((()=>r.createElement(r.Fragment,null)))),r.createElement("div",{className:qy},t)),e),$y=Ei.ux.style({borderTop:`1px solid ${$i.Z.FooterBorder}`,marginTop:Ei.ux.rem(.5),paddingTop:Ei.ux.rem(.75),display:"grid",gridTemplateColumns:"1fr auto",alignItems:"center"}),Wy=Ei.ux.style({display:"flex",alignItems:"center",flexBasis:Ei.ux.percent(45)}),Yy=Ei.ux.style({padding:Ei.ux.rem(Fi.yC),marginRight:Ei.ux.rem(Fi.qp),width:Ei.ux.rem(Fi.w9),height:Ei.ux.rem(Fi.w9)}),qy=Ei.ux.style({paddingTop:Ei.ux.rem(Fi.yC),marginRight:Ei.ux.rem(Fi.yC),fontSize:Ei.ux.rem(.875)});var Xy=i(69361),Qy=i(91691);const Jy=(0,wi.I)("color",(({title:e,titleId:t,desc:i,descId:n,...s})=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true","data-icon":"InterfaceThumbUp",stroke:"transparent","aria-labelledby":t,"aria-describedby":n,...s},i?r.createElement("desc",{id:n},i):null,e?r.createElement("title",{id:t},e):null,r.createElement("path",{stroke:"#646B81",d:"M13.5 8.635q-.001.137-.047.265l-1.797 3.607-.008.016-.007.017c-.116.284-.371.46-.641.46H6.4c-.362 0-.7-.316-.7-.77V7.578c0-.218.086-.417.215-.553l3.589-3.796.264.279c.08.09.128.202.132.321l-.012.143-.523 2.663-.117.597H13.2c.138 0 .3.13.3.346zM3.6 7.23c.14 0 .3.128.3.346v5.077c0 .218-.16.346-.3.346h-.8c-.14 0-.3-.128-.3-.346V7.577c0-.218.16-.346.3-.346z"})))),ex=(0,wi.I)("color",(({title:e,titleId:t,desc:i,descId:n,...s})=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true","data-icon":"InterfaceThumbDown",stroke:"transparent","aria-labelledby":t,"aria-describedby":n,...s},i?r.createElement("desc",{id:n},i):null,e?r.createElement("title",{id:t},e):null,r.createElement("path",{stroke:"#646B81",d:"M2.5 7.865c0-.09.017-.181.047-.265l1.797-3.607.008-.016.007-.017c.116-.283.371-.46.641-.46h4.6c.362 0 .7.316.7.77v4.653a.8.8 0 0 1-.215.553l-3.589 3.796-.264-.279a.5.5 0 0 1-.132-.322l.012-.142.523-2.663.117-.597H2.8c-.138 0-.3-.13-.3-.346zm9.9 1.404c-.14 0-.3-.128-.3-.346V3.846c0-.218.16-.346.3-.346h.8c.14 0 .3.128.3.346v5.077c0 .218-.16.346-.3.346z"}))));var tx=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};function ix(e){var{children:t,onOpenChange:i,title:n,placement:s="bottom end"}=e,l=tx(e,["children","onOpenChange","title","placement"]);return r.createElement(ec.l.Consumer,null,(({portalContainer:e})=>r.createElement(Mi.F.Fragment,null,e.view(o.g_(a.gn,(e=>r.createElement(mg,Object.assign({},l,{portalContainer:e,placement:s,title:n,onOpenChange:e=>null==i?void 0:i(e)}),t)))))))}const nx=({status:e,description:t})=>{const[i,n]=e===si.On?[sx,lx]:e===si.Off?[ox,cx]:(0,c.L0)(e),s=(0,a.zG)(t,o.g_((()=>r.createElement(Ri.JO.Info,{className:n})),(e=>r.createElement(Xy.u,{title:r.createElement("div",{className:ux},e)},r.createElement(Ri.JO.Info,{className:n})))));return r.createElement("div",{className:i},r.createElement("div",{className:dx},e,"-BRAND ",s))},rx={display:"inline-flex",flexDirection:"column",justifyContent:"center",alignItems:"center",borderRadius:Ei.ux.rem(Fi.F2),paddingRight:Ei.ux.rem(Fi.F2),paddingLeft:Ei.ux.rem(Fi.F2),textTransform:"uppercase",letterSpacing:"0.04em",fontSize:Ei.ux.rem(Fi.x+Fi.yC),lineHeight:Ei.ux.rem(Fi.mh)},sx=Ei.ux.style(rx,{background:$i.Z.OnBrandBadge,color:$i.Z.OnBrandBadgeLabel}),ox=Ei.ux.style(rx,{background:$i.Z.OffBrandBadge,color:$i.Z.OffBrandBadgeLabel}),ax={width:Ei.ux.rem(Fi.x+Fi.yC),minWidth:"unset",minHeight:"unset",paddingLeft:Ei.ux.rem(Fi.x)},lx=Ei.ux.style(ax,{stroke:$i.Z.OnBrandBadgeIcon,fill:$i.Z.OnBrandBadgeIcon}),cx=Ei.ux.style(ax,{stroke:$i.Z.OffBrandBadgeIcon,fill:$i.Z.OffBrandBadgeIcon}),dx=Ei.ux.style({display:"flex",justifyContent:"center",whiteSpace:"nowrap"}),ux=Ei.ux.style({maxWidth:Ei.ux.rem(65*Fi.F2),textAlign:"left",whiteSpace:"normal",overflow:"hidden",display:"-webkit-box","-webkit-line-clamp":5,"-webkit-box-orient":"vertical"}),mx=({tone:e,index:t,onReportPositiveFeedback:i,onReportNegativeFeedback:n})=>{const s=(0,a.zG)(e.brandToneInfo,o.g_((()=>r.createElement(Xy.u,{title:`${e.prevalence} intensity`},r.createElement("div",{className:yx},[0,1,2,3,4].map((t=>{const i=t/5<=e.confidence;return r.createElement("div",{key:`${e.name}-intensity-${t}`,className:i?kx:xx})}))))),(({status:e,description:t})=>r.createElement(nx,{status:e,description:t}))));return r.createElement("div",{"data-testid":"tone-report-tone","data-tone-report-tone-name":e.name,role:`tone-${t}-${e.name}`,className:gx},r.createElement("div",{className:hx},r.createElement(Zy.In,{id:e.emojiId,className:fx}),r.createElement("span",{className:vx},e.name)),r.createElement("div",{className:bx},s),r.createElement(ix,{"aria-label":`${e.name} Tone Actions Menu`,placement:"left",label:r.createElement(Qy.D,{className:Sx}),onAction:e=>{switch(e){case"likeTone":return i();case"dislikeTone":return n();default:return}}},r.createElement(gg,{title:"Help us improve"},r.createElement(vg,{key:"likeTone",textValue:"likeTone"},r.createElement(Jy,{className:Cx}),"Tone seems correct"),r.createElement(vg,{key:"dislikeTone",textValue:"dislikeTone"},r.createElement(ex,{className:Cx}),"Tone seems incorrect"))))},px={height:Ei.ux.rem(5*Fi.W9),width:Ei.ux.rem(5*Fi.W9),borderRadius:Ei.ux.percent(50),marginRight:Ei.ux.rem(3*Fi.W9)},gx=Ei.ux.style({display:"grid",alignItems:"center",gridTemplateColumns:"0.6fr 0.5fr auto",height:Ei.ux.rem(2.5)}),hx=Ei.ux.style({display:"flex",alignItems:"center",flexBasis:Ei.ux.percent(45)}),fx=Ei.ux.style({padding:Ei.ux.rem(Fi.yC),marginRight:Ei.ux.rem(Fi.qp),width:Ei.ux.rem(Fi.w9),height:Ei.ux.rem(Fi.w9)}),vx=Ei.ux.style({textTransform:"capitalize",fontSize:Ei.ux.rem(.875),lineHeight:Ei.ux.rem(1.3125)}),bx=Ei.ux.style({display:"inline-flex"}),yx=Ei.ux.style({display:"flex"}),xx=Ei.ux.style(px,{backgroundColor:$i.Z.IndicatorDotDefault,borderStyle:"solid",borderColor:$i.Z.Blue40,borderWidth:"1px"}),kx=Ei.ux.style(px,{backgroundColor:$i.Z.IndicatorDotActive,borderStyle:"solid",borderColor:$i.Z.IndicatorDotActive,borderWidth:"1px"}),Sx=Ei.ux.style({padding:Ei.ux.rem(Fi.F2)}),Cx=Ei.ux.style({marginRight:Ei.ux.rem(Fi.x)});const Ex=s.UI.Grid.make((({slots:e,state:t,view:i,notify:n})=>{const{onMount:s}=(0,Vo.F)(N.b((()=>n({kind:xt.i.Kind.toneReportLoadedNonEmptyMount})())));return r.createElement(Gl,{mount:s,key:"tone-report","data-testid":"tone-report"},r.createElement("div",{className:wx},r.createElement(Mi.F.div,{className:Ix},t.pipe(O.U((e=>function({tones:e,onBrandTitleEnabled:t}){const i=(0,a.zG)(e,_.hX((e=>o.pC(e.brandToneInfo)&&e.brandToneInfo.value.status===si.Off)),o.UI(_.UI((e=>e.confidence))),o.UI(_.u4(0,V.Fp(V.Mh)))),n=e.filter((e=>o.pC(e.brandToneInfo)&&e.brandToneInfo.value.status===si.On)).length;return o.pC(i)&&i.value>.75?"Your tone may sound off to readers":o.pC(i)?"Something sounds slightly off...":n>0&&t?"You're on-brand! Great job!":n>0?"Your writing sounds clear and aligned. Great job!":"How this may sound to readers:"}(e)))))),r.createElement(Mi.F.div,{className:Ax,"data-testid":"tone-report-items"},i("tones").pipe(O.U((e=>e.map(((e,t)=>r.createElement(mx,{key:e.name,index:t,tone:e,onReportPositiveFeedback:n({kind:xt.i.Kind.toneReportToneLikeButtonClick,toneName:e.name}),onReportNegativeFeedback:n({kind:xt.i.Kind.toneReportToneDislikeButtonClick,toneName:e.name})}))))))),i("uphookInfo").pipe(O.U(o.g_((()=>null),(({title:t,emojiId:i})=>r.createElement(Hy,{key:"tone-report-footer",uphookTitle:t,uphookEmojiId:i,uphookButton:e.uphook}))))))})),_x=s.UI.Knot.make(Ex,{uphook:Vb}),wx=Ei.ux.style({display:"flex",alignItems:"flex-start"}),Ix=Ei.ux.style({flexGrow:1,fontStyle:"normal",fontWeight:"bold",fontSize:Ei.ux.rem(1),lineHeight:Ei.ux.rem(1.5)}),Ax=Ei.ux.style({marginTop:Ei.ux.rem(.5)}),Fx=s.UI.Node.make((()=>r.createElement(Gl,{style:Px},r.createElement(Pd,null),r.createElement("span",{className:Mx},"Loading...")))),Px={display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",minHeight:Ei.ux.rem(9.5)},Mx=Ei.ux.style({color:Pi.I.Text.Base.Subdued,fontSize:Ei.ux.rem(.75),fontFamily:"Inter",lineHeight:Ei.ux.rem(1.125)}),Ox=s.UI.Union.make("kind",{loading:Fx,loadedEmpty:jy,loadedNonEmpty:_x}),Tx=1.375;var Rx=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const Bx=e=>{var{text:t,onChange:i,placeholder:n,disabled:s,className:o,onFocus:a,onBlur:l,autofocus:c,onKeyUpEscape:d}=e,u=Rx(e,["text","onChange","placeholder","disabled","className","onFocus","onBlur","autofocus","onKeyUpEscape"]);const[m,p]=r.useState(null);return r.useEffect((()=>{m&&void 0!==c&&m.focus()}),[c,m]),r.createElement(Xo,{className:o,style:{height:Ei.ux.rem(Tx)},name:"text-input-iframe"},r.createElement("style",{dangerouslySetInnerHTML:{__html:`\n      .textBox {\n        box-sizing: border-box;\n        border-radius: ${Ei.ux.rem(So.xB)};\n        overflow-y: auto;\n        width: 100%;\n        height: 100%;\n        border: none;\n        padding: 0;\n        background: transparent;\n        resize: none;\n        font-family: Inter, sans-serif;\n        font-size: ${Ei.ux.rem(.875)};\n        font-weight: 400;\n        color: ${Yo};\n      }\n      .textBox::placeholder {\n        color: ${qo};\n      }\n      .textBox:focus {\n        outline: none;\n      }\n      `.replace(/\s/g,"")}}),r.createElement("input",Object.assign({},u,{className:"textBox",style:{lineHeight:Ei.ux.rem(Tx)},value:t,ref:p,onChange:e=>i(e.target.value),placeholder:n,disabled:s,onFocus:()=>null==a?void 0:a(),onBlur:()=>null==l?void 0:l(),onKeyUp:e=>{d&&"Escape"===e.key&&(e.preventDefault(),e.stopPropagation(),d())}})))};var Ux=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const Gx=e=>{var{text:t,onChange:i,placeholder:n,disabled:s,className:o,onFocus:a,onBlur:l,autofocus:c,onKeyUpEscape:d}=e,u=Ux(e,["text","onChange","placeholder","disabled","className","onFocus","onBlur","autofocus","onKeyUpEscape"]);const[m,p]=r.useState(null);return r.useEffect((()=>{m&&void 0!==c&&m.focus()}),[c,m]),r.createElement("div",{className:o,style:{height:Ei.ux.rem(Tx)}},r.createElement("input",Object.assign({},u,{className:Nx,style:{lineHeight:Ei.ux.rem(Tx)},value:t,ref:p,onChange:e=>i(e.target.value),placeholder:n,disabled:s,onFocus:()=>null==a?void 0:a(),onBlur:()=>null==l?void 0:l(),onKeyUp:e=>{d&&"Escape"===e.key&&(e.preventDefault(),e.stopPropagation(),d())}})))},Nx=Ei.ux.style({boxSizing:"border-box",borderRadius:Ei.ux.rem(So.xB),overflowY:"auto",width:"100%",height:"100%",border:"none",padding:0,background:"transparent",resize:"none",fontFamily:"Inter, sans-serif",fontSize:Ei.ux.rem(.875),fontWeight:400,color:$i.Z.TextBaseDefault,$nest:{"&::placeholder":{color:$i.Z.TextBaseSubduedColor},"&:focus":{outline:"none"}}}),Lx={padding:`${Ei.ux.rem(Fi.F2)} ${Ei.ux.rem(Fi.F2+Fi.Ze)} ${Ei.ux.rem(Fi.F2)} ${Ei.ux.rem(Fi.qp)}`,border:`1px solid ${Pi.I.Background.Neutral.Default}`,borderRadius:Ei.ux.rem(So.xB),width:Ei.ux.rem(15),height:Ei.ux.rem(2),boxSizing:"border-box",position:"relative"},Dx={position:"absolute",right:Ei.ux.rem(Fi.x),top:Ei.ux.rem(.1875),border:"none",background:"transparent",display:"flex",alignItems:"center",cursor:"pointer",width:Ei.ux.rem(1.5),height:Ei.ux.rem(1.5),padding:0},jx=Object.assign(Object.assign({},(0,Hi.fx)(1.5)),{$nest:{"& svg":{stroke:Pi.I.Text.Base.Subdued}}}),zx={padding:Ei.ux.rem(Fi.F2),background:"white",boxShadow:jo.H8.boxShadow,border:jo.H8.border,borderRadius:Ei.ux.rem(So.xB),width:Ei.ux.rem(15),boxSizing:"border-box",overflowY:"auto",maxHeight:Ei.ux.rem(8.125),zIndex:9999,$nest:{"& > ul":{listStyle:"none",padding:0,margin:0,$nest:{"& > li":{padding:0,margin:0}}}}},Vx={border:"none",background:"transparent",width:"100%",cursor:"pointer",overflow:"hidden",textOverflow:"ellipsis",fontSize:Ei.ux.rem(.875),lineHeight:Ei.ux.rem(1.375),color:Pi.I.Text.Base.Default,padding:`${Ei.ux.rem(.1875)} ${Ei.ux.rem(Fi.qp)}`,borderRadius:Ei.ux.rem(So.xB),display:"flex",justifyContent:"flex-start",$nest:{"&:hover":{color:Pi.I.Text.Base.Inverse,background:Li.NeutralGray40},"& mark":{backgroundColor:"unset",fontWeight:"bold"},"&:hover > mark":{color:Pi.I.Text.Base.Inverse}}},Kx={width:Ei.ux.percent(100),border:"none"},Zx=Ei.ux.style(Lx),Hx=Ei.ux.style(Dx),$x=Ei.ux.style(jx),Wx=Ei.ux.style(zx),Yx=Ei.ux.style(Vx),qx=Ei.ux.style({whiteSpace:"pre"}),Xx=Ei.ux.style(Kx),Qx=(0,La.xb)((e=>{var{useIframeWrapper:t}=e,i=Ux(e,["useIframeWrapper"]);return t?r.createElement(Bx,Object.assign({},i)):r.createElement(Gx,Object.assign({},i))})),Jx=new Fv(999999);function ek({text:e,placeholder:t,clearButton:i,selectOnBlur:n,label:s,options:o,className:a,filterBy:c=((e,t)=>s(e).toLowerCase().includes(t.toLowerCase())),onInputChange:d,onSelectionChange:u}){const[m,p]=r.useState(!1),g=r.useRef(Jx.newId().toString()),[f,v]=r.useState(null),[b,y]=r.useState(null),{styles:x,attributes:k}=(0,wv.D)(f,b,{placement:"bottom-start",modifiers:[{name:"offset",options:{offset:[0,4]}}]}),S=o.filter((t=>c(t,e.trim()))),C=m&&S.length>0,E=r.useMemo((()=>new l.x),[]);gi.P.useSubscriptionTo(E.pipe(fi.b(50),h.h((e=>!e)),N.b((()=>{p(!1),n&&""!==e.trim()&&u(S.length>0?S[0]:null)}))));const _=r.useContext(oa.N);return r.createElement("div",Object.assign({},(0,La.Sh)(Zx,a),{ref:v}),r.createElement(Qx,{className:Xx,placeholder:t,onChange:d,text:e,onFocus:()=>{p(!0),E.next(!0)},onBlur:()=>E.next(!1),role:"combobox","aria-haspopup":"listbox","aria-owns":g.current,"aria-expanded":C,useIframeWrapper:_.view((e=>e.useIframeTextfieldWrapper))}),""!==e.trim()&&!!i&&r.createElement("button",{onClick:(0,Pv.m)((()=>u(null))),className:Hx,"aria-label":"Clear",type:"button"},r.createElement(Ri.JO.Close,{className:$x})),C&&r.createElement("div",Object.assign({ref:y,style:x.popper},k.popper,{className:Wx,onFocus:()=>E.next(!0),onBlur:()=>E.next(!1)}),r.createElement("ul",{"aria-label":"menu-options",role:"listbox",id:g.current},S.map((t=>{const i=s(t);return r.createElement("li",{key:i,"aria-label":i,role:"option"},r.createElement("button",{className:Yx,onClick:(0,Pv.m)((()=>{u(t),p(!1)}))},r.createElement(tk,{label:i,pattern:e})))})))))}const tk=({label:e,pattern:t})=>{if(""===t.trim())return r.createElement(r.Fragment,null,e);const i=t.trim(),n=e.split(new RegExp(i,"i")),s=(0,a.zG)(n.map(((e,t)=>({token:e,mark:!1,end:t*i.length+n.slice(0,t).join("").length+e.length}))),E.iD({token:"",mark:!0,end:0})).map(((t,n,r)=>t.mark&&n>0?{token:e.slice(r[n-1].end,r[n-1].end+i.length),mark:!0}:{token:t.token,mark:!1})).filter((e=>e.token.length>0));return r.createElement(r.Fragment,null,s.map(((e,t)=>e.mark?r.createElement("mark",{key:t,className:qx},e.token):r.createElement("span",{key:t,className:qx},e.token))))},ik=e=>r.createElement(Ri.a1,Object.assign({width:"12",height:"12",viewBox:"0 0 12 12",fill:"none"},e),r.createElement("path",{stroke:"#fff",strokeLinecap:"round",strokeWidth:".857",d:"m4 4 2 2m2 2L6 6m0 0 2-2M6 6 4 8"})),nk=({kind:e,label:t,description:i,iconUrl:n,isUnselectable:s,onToggle:o})=>r.createElement(Xy.u,{title:i},r.createElement("button",{disabled:"disabled"===e,className:rk,"data-kind":e,"data-unselectable":s,onClick:(0,Pv.m)((()=>{"disabled"!==e&&o("selected"!==e&&("unselected"===e||(0,c.L0)(e)))}))},n?r.createElement("img",{src:n,className:ok,alt:""}):null,r.createElement("span",null,t),s&&"selected"===e?r.createElement(ik,{className:sk}):null)),rk=Ei.ux.style({display:"flex",alignItems:"center",justifyContent:"center",gap:Ei.ux.rem(Fi.x),padding:`${Ei.ux.rem(Fi.F2)} ${Ei.ux.rem(.625)} ${Ei.ux.rem(Fi.F2)} ${Ei.ux.rem(Fi.x)}`,background:Pi.I.Background.Base.Default,color:Pi.I.Text.Base.Default,border:`${Ei.ux.px(1)} solid transparent`,borderRadius:Ei.ux.rem(1.875),fontSize:Ei.ux.rem(.875),lineHeight:Ei.ux.rem(1.375),boxSizing:"border-box",$nest:{"&[data-kind='unselected']":{border:`${Ei.ux.px(1)} solid ${Li.NeutralGray10}`,color:Pi.I.Text.Base.Default,cursor:"pointer"},"&[data-kind='disabled']":{border:`${Ei.ux.px(1)} solid ${Li.NeutralGray10}`,color:Li.NeutralGray40,cursor:"default"},"&[data-kind='selected']":{border:`${Ei.ux.px(2)} solid ${$i.Z.BrandGreen60}`,padding:`${Ei.ux.rem(.1875)} ${Ei.ux.rem(.5625)} ${Ei.ux.rem(.1875)} ${Ei.ux.rem(.4375)}`,position:"relative",$nest:{"&[data-unselectable='true']":{cursor:"pointer"}}}}}),sk=Ei.ux.style(Object.assign(Object.assign({position:"absolute",top:Ei.ux.rem(-(Fi.F2+Fi.W9)),right:Ei.ux.rem(-(Fi.F2+Fi.W9)),boxSizing:"content-box"},(0,Hi.fx)(.75)),{border:`${Ei.ux.rem(.125)} solid white`,borderRadius:"50%",background:$i.Z.BrandGreen60,display:"flex",alignItems:"center",justifyContent:"center"})),ok=Ei.ux.style({width:Ei.ux.rem(1.25),height:Ei.ux.rem(1.25)}),ak=({chips:e,className:t,onToggle:i})=>r.createElement(Mi.F.div,Object.assign({},(0,La.Sh)(lk,t)),e.pipe(O.U(E.UI((e=>r.createElement(nk,Object.assign({},e,{onToggle:t=>i(e,t),key:e.label}))))))),lk=Ei.ux.style({display:"flex",flexWrap:"wrap",gap:Ei.ux.rem(Fi.F2),$nest:{div:{marginTop:Ei.ux.rem(Fi.F2)}}}),ck={margin:0,padding:Ei.ux.rem(Fi.mh),gap:Ei.ux.rem(Fi.mh),boxSizing:"border-box",minHeight:"100%"},dk={color:Pi.I.Text.Base.Default,fontWeight:700,fontSize:Ei.ux.rem(.875),lineHeight:Ei.ux.rem(1.375),margin:0},uk={color:Pi.I.Text.Base.Subdued,fontWeight:400,fontSize:Ei.ux.rem(.75),lineHeight:Ei.ux.rem(1.125)},mk={marginTop:Ei.ux.rem(Fi.x)},pk={color:Li.NeutralGray60,fontWeight:400,fontSize:Ei.ux.rem(.75),lineHeight:Ei.ux.rem(1.125)},gk={display:"flex",justifyContent:"flex-end",gap:Ei.ux.rem(Fi.x),flexGrow:1,alignItems:"flex-end"},hk={fontSize:Ei.ux.important(Ei.ux.rem(.875))},fk={marginTop:Ei.ux.rem(Fi.x)},vk={marginTop:Ei.ux.rem(Fi.x)},bk={display:"flex",alignItems:"center",gap:Ei.ux.rem(Fi.x)},yk={width:Ei.ux.rem(1.5),height:Ei.ux.rem(1.5),display:"flex",alignItems:"center",justifyContent:"center"},xk=Ei.ux.style({display:"grid",minHeight:"100%",gridTemplateRows:"minmax(min-content, auto)"}),kk=ck,Sk=Ei.ux.style(dk),Ck=Ei.ux.style(mk),Ek=Ei.ux.style(uk),_k=Ei.ux.style(pk),wk=Ei.ux.style(gk),Ik=Ei.ux.style(hk),Ak=Ei.ux.style(hk),Fk=Ei.ux.style(fk),Pk=Ei.ux.style(vk),Mk=Ei.ux.style(bk),Ok=Ei.ux.style(yk),Tk=s.UI.Node.make((({view:e,state:t,notify:i})=>r.createElement("div",{className:xk},r.createElement(Gl,{style:kk,"data-testid":"voice-profile"},r.createElement("section",null,r.createElement("h4",{className:Sk},"Formality"),r.createElement(ak,{className:Ck,chips:e("styles").pipe(O.U(E.UI((e=>Object.assign(Object.assign({},e),{isUnselectable:!1}))))),onToggle:e=>i({kind:xt.i.Kind.styleToggleClick,id:e.id})()})),r.createElement("section",null,r.createElement("h4",{className:Sk},"Tone"),r.createElement(Mi.F.div,{className:Ek},"Select up to"," ",e("maxSelectableTones").pipe(O.U((e=>{return t=e,Number.isInteger(t)&&t>=0&&t<10?function(e){return["zero","one","two","three","four","five","six","seven","eight","nine"][e]}(e):`${e}`;var t})))),r.createElement(ak,{className:Ck,chips:e("tones").pipe(O.U(E.UI((e=>Object.assign(Object.assign({},e),{isUnselectable:!0}))))),onToggle:(e,t)=>i({kind:xt.i.Kind.toneToggleClick,selected:t,id:e.id})()})),t.pipe(O.U((e=>(0,a.zG)(e.roles,_.c2,o.g_(a.gn,(t=>r.createElement("section",null,r.createElement("h4",{className:Sk},"Your profession"),r.createElement(ek,{className:Fk,placeholder:"Product designer",text:e.roleTypeaheadText,onInputChange:e=>i({kind:"updateRoleTypeaheadText",text:e})(),onSelectionChange:e=>i({kind:xt.i.Kind.roleTypeaheadSelectionChange,role:o.ij(e)})(),options:t,label:e=>e.label,clearButton:!0,selectOnBlur:!0})))))))),r.createElement("section",null,r.createElement("h4",{className:Sk},"I write in"),r.createElement(Mi.F.Fragment,null,t.pipe(O.U((({dialects:e,selectedDialect:t})=>r.createElement(zv,{className:Pk,options:e.filter((e=>!Fe.Dialect.Id.eq.equals(e.id,t.id))),selection:t,onSelectionChange:e=>i({kind:xt.i.Kind.dialectDropdownSelectionChange,dialect:e})(),label:e=>e.label,renderOption:e=>r.createElement("div",{className:Mk},r.createElement("div",{className:Ok},r.createElement("img",{src:e.iconUrl,style:{width:Ei.ux.rem(1),height:Ei.ux.rem(1)}})),e.label)})))))),e("description").pipe(O.U((e=>""!==e.trim()?r.createElement("div",{className:_k},e):null))),r.createElement(Mi.F.div,{className:wk},r.createElement(Oi.z,{variant:"tertiary",className:Ak,onClick:i({kind:xt.i.Kind.voiceProfileCloseButtonClick}),name:"closeVoiceProfile"},"Close"),e("applyButtonEnabled").pipe(O.U((e=>r.createElement(Oi.z,{className:Ik,onClick:i({kind:xt.i.Kind.voiceProfileUseVoiceButtonClick}),disabled:!e,name:"applyVoiceProfile"},"Use this voice"))))))))),Rk=({className:e})=>r.createElement("div",Object.assign({role:"separator"},(0,La.Sh)(Bk,e))),Bk=Ei.ux.style({position:"relative",width:"100%",borderBottom:`0.5px solid ${Li.NeutralGray10}`});var Uk,Gk=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};!function(e){let t;!function(e){e.create=function(e){return e}}(t=e.Id||(e.Id={}))}(Uk||(Uk={}));const Nk=({tabs:e,activeTabId:t,onActiveTabChange:i,children:n})=>r.createElement(r.Fragment,null,r.createElement("div",{className:Dk,role:"tablist"},e.map((e=>r.createElement("button",{key:e.id,onClick:()=>i(e.id),tabIndex:0,className:jk,id:`tab-${e.id}`,"aria-label":`${e.label} ${e.id===t?"Selected.":""}`,"aria-controls":`tabpanel-${e.id}`,"aria-selected":t===e.id,role:"tab",type:"button"},e.label)))),n),Lk=e=>{var{id:t,isActive:i,children:n,className:s,style:o}=e,a=Gk(e,["id","isActive","children","className","style"]);return r.createElement("div",Object.assign({role:"tabpanel",id:`tabpanel-${t}`,"aria-labelledby":`tab-${t}`,hidden:!i,style:i?o:void 0,className:i?s:void 0},a),n)},Dk=Ei.ux.style({display:"flex",alignContent:"flex-start",gap:Ei.ux.rem(Fi.x)}),jk=Ei.ux.style({cursor:"pointer",border:"none",display:"flex",alignItems:"center",background:"transparent",borderBottom:`${Ei.ux.rem(Fi.yC)} solid transparent`,fontWeight:400,fontSize:Ei.ux.rem(.75),lineHeight:Ei.ux.rem(1.125),height:Ei.ux.rem(1.5),color:$i.Z.TextBaseSubduedColor,$nest:{'&[aria-selected="true"]':{borderBottomColor:$i.Z.TextBaseSubduedColor,fontWeight:700},'&[aria-selected="false"]:hover':{borderBottomColor:Li.NeutralGray10}}}),zk={editBtn:"editBtn",cancelBtn:"cancelBtn",saveBtn:"saveBtn"},Vk={default:{backgroundColor:$i.Z.NeutralGray0}},Kk={gap:0,backgroundImage:"url(https://assets.grammarly.com/cheetah/v1/voice-profile/cheetah-my-voice-bg.svg)",backgroundPosition:"right",backgroundRepeat:"no-repeat",backgroundSize:"auto 100%",padding:`${Ei.ux.rem(Fi.qp)} ${Ei.ux.rem(Fi.mh)}`,$nest:{[`.${zk.editBtn}`]:{opacity:0,pointerEvents:"none",$nest:{"&:focus":{opacity:1,pointerEvents:"auto"}}},[`&:hover .${zk.editBtn}, &:focus .${zk.editBtn}`]:{opacity:1,pointerEvents:"auto"}}},Zk=e=>Ei.ux.style({display:"flex",justifyContent:"space-between",marginBottom:e?Ei.ux.rem(Fi.x):Ei.ux.rem(Fi.yC+Fi.F2)}),Hk=Ei.ux.style({margin:0,fontSize:Ei.ux.rem(1.25),lineHeight:Ei.ux.rem(1.5),fontWeight:700}),$k=Ei.ux.style({display:"flex",flexDirection:"row",alignItems:"flex-end",justifyContent:"space-between",gap:Ei.ux.rem(Fi.x)}),Wk=Ei.ux.style({display:"flex",flexDirection:"column",gap:Ei.ux.rem(Fi.x),flexGrow:1}),Yk=Ei.ux.style({display:"flex",flexDirection:"column",gap:Ei.ux.rem(Fi.F2)}),qk=Ei.ux.style({color:$i.Z.TextBaseSubduedColor,fontWeight:400,fontSize:Ei.ux.rem(.75),lineHeight:Ei.ux.rem(1.125),margin:0}),Xk=Ei.ux.style({display:"flex",alignItems:"center",gap:Ei.ux.rem(Fi.x)}),Qk=Ei.ux.style({width:Ei.ux.rem(1.5),height:Ei.ux.rem(1.5),display:"flex",alignItems:"center",justifyContent:"center",$nest:{"& img":{width:Ei.ux.rem(1),height:Ei.ux.rem(1)}}}),Jk=Ei.ux.style({display:"flex",flexDirection:"column",gap:Ei.ux.rem(Fi.F2)}),eS=Ei.ux.style({display:"flex",alignItems:"center",gap:Ei.ux.rem(Fi.F2),height:Ei.ux.rem(1.5),color:$i.Z.TextBaseSubduedColor,fontSize:Ei.ux.rem(.875),lineHeight:Ei.ux.rem(1.3125),fontWeight:500}),tS=Ei.ux.style({display:"flex",alignItems:"center",gap:Ei.ux.rem(Fi.x)}),iS=Ei.ux.style({maxWidth:Ei.ux.rem(15),width:"100%"});var nS=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const rS=e=>{var{children:t,active:i}=e,n=nS(e,["children","active"]);const s=r.useRef(null);return r.createElement(r.Fragment,null,s.current&&i?r.createElement(No.J2,Object.assign({},n,{reference:s.current})):null,r.cloneElement(t,{ref:s}))},sS=r.forwardRef((function({name:e,active:t,onClick:i},n){return r.createElement("button",{tabIndex:0,"aria-label":e,"aria-pressed":t,"data-active":t,onClick:i,ref:n,className:oS},e)})),oS=Ei.ux.style({display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",height:Ei.ux.rem(2),borderRadius:Ei.ux.rem(So.xB),border:`${Ei.ux.rem(Fi.yC)} solid transparent`,padding:`${Ei.ux.rem(Fi.yC+Fi.F2)} ${Ei.ux.rem(Fi.x)}`,backgroundColor:$i.Z.Green0,color:$i.Z.Green90,lineHeight:Ei.ux.rem(1.3125),fontSize:Ei.ux.rem(.875),$nest:{"&:hover":{backgroundColor:Ei.ux.color($i.Z.Green10).mix(Ei.ux.color($i.Z.NeutralGray10)).toRGBA().toString(),color:$i.Z.Green80},'&[data-active="true"]':{outline:`${Ei.ux.rem(Fi.yC)} solid ${$i.Z.Green80}`}}}),aS=({profileName:e,sectionName:t,tagName:i,activeTagId:n,onVoiceTagPopoverClose:s,onKeepClick:l,onRemoveClick:c,onVoiceTagClick:d})=>r.createElement(rS,{active:(0,a.zG)(n,o.Gg((n=>n===Pe.createId({tagName:i,sectionName:t,profileName:e})))),onClose:n=>{"keep"===n?l():"remove"===n?c(i,e,t):s()},title:r.createElement("h1",{className:lS},"Does this sound like you?"),footer:r.createElement(No.yS.Consumer,null,(({closePopover:e})=>r.createElement(r.Fragment,null,r.createElement(Oi.z,{onClick:()=>e("keep"),style:cS,textPosition:"everywhere"},r.createElement(Jy,null),"Yes, keep it"),r.createElement(Oi.z,{onClick:()=>e("remove"),style:cS,textPosition:"everywhere"},r.createElement(ex,null),"No, remove it"))))},r.createElement(sS,{name:i,active:(0,a.zG)(n,o.Gg((n=>n===Pe.createId({tagName:i,sectionName:t,profileName:e})))),onClick:()=>d(i,e,t)})),lS=Ei.ux.style({fontSize:Ei.ux.rem(.875),lineHeight:Ei.ux.rem(1.375),fontWeight:700,margin:0}),cS={default:{gap:Ei.ux.rem(Fi.F2),padding:`0 ${Ei.ux.rem(Fi.x)} 0 ${Ei.ux.rem(Fi.F2)}`,color:$i.Z.TextBaseDefault,backgroundColor:Pi.I.Background.Base.Default},hovered:{color:$i.Z.TextBaseDefault,backgroundColor:$i.Z.NeutralGray10},active:{color:$i.Z.TextBaseDefault,backgroundColor:$i.Z.NeutralGray10}},dS=({profile:e,activeProfileName:t,activeTagId:i,onVoiceTagPopoverClose:n,onKeepClick:s,onRemoveClick:a,onVoiceTagClick:l})=>r.createElement(Lk,{id:Uk.Id.create(e.name),isActive:e.name===o.WG(t),className:uS},e.summary,r.createElement("div",{className:pS},e.sections.map((t=>r.createElement("div",{key:t.name},t.name,r.createElement("div",{className:gS},0===t.tags.length?r.createElement("div",{className:mS},"Detected qualities will appear here"):t.tags.map((o=>r.createElement(aS,{key:o.name,tagName:o.name,sectionName:t.name,profileName:e.name,activeTagId:i,onVoiceTagPopoverClose:n,onKeepClick:s,onRemoveClick:a,onVoiceTagClick:l}))))))))),uS=Ei.ux.style({fontSize:Ei.ux.rem(.875),lineHeight:Ei.ux.rem(1.3125),display:"flex",flexDirection:"column",gap:Ei.ux.rem(Fi.qp),paddingTop:Ei.ux.rem(Fi.x)}),mS=Ei.ux.style({padding:`0 ${Ei.ux.rem(Fi.x)}`,background:$i.Z.NeutralGray0,color:$i.Z.TextBaseSubduedColor,borderRadius:Ei.ux.rem(So.xB),height:Ei.ux.rem(2),fontSize:Ei.ux.rem(.875),lineHeight:Ei.ux.rem(1.3125),display:"flex",justifyContent:"center",alignItems:"center"}),pS=Ei.ux.style({display:"flex",flexDirection:"column",gap:Ei.ux.rem(Fi.qp)}),gS=Ei.ux.style({marginTop:Ei.ux.rem(Fi.x),display:"flex",flexWrap:"wrap",gap:Ei.ux.rem(Fi.F2)}),hS=(0,La.xb)((({onEditButtonClick:e,onSaveButtonClick:t,onCancelButtonClick:i,onDialectDropdownChange:n,onRoleDropdownChange:s,userName:l,isEditing:c,selectedRole:d,roles:u,dialects:m,selectedDialect:p})=>r.createElement(Gl,{style:Kk},r.createElement("div",{className:Zk(c)},r.createElement("h4",{className:Hk},l),c?null:r.createElement(Oi.z,{variant:"secondary",onClick:e,className:zk.editBtn,style:Vk,size:"small"},"Edit")),c?r.createElement("div",{className:$k},r.createElement("div",{className:Wk},0!==u.length&&r.createElement("div",{className:Yk},r.createElement("h5",{className:qk},"My role"),r.createElement(zv,{placeholder:"Select a role...",options:u,selection:o.FS(d),onSelectionChange:s,label:e=>e.id,renderOption:e=>e.id,menuClassName:iS,className:iS})),r.createElement("div",{className:Yk},r.createElement("h5",{className:qk},"I write in"),r.createElement(zv,{options:m,selection:p,onSelectionChange:n,label:e=>e.label,menuClassName:iS,className:iS,renderOption:e=>r.createElement("div",{className:Xk},r.createElement("div",{className:Qk},r.createElement("img",{src:e.iconUrl,alt:""})),e.label)}))),r.createElement("div",{className:tS},r.createElement(Oi.z,{variant:"tertiary",onClick:i},"Cancel"),r.createElement(Oi.z,{onClick:t},"Save"))):r.createElement("div",{className:Jk},(0,a.zG)(d,o.g_(a.gn,(e=>r.createElement("div",{className:eS},r.createElement(Rl.u,null,"Role:"),r.createElement("span",null,e.label))))),r.createElement("div",{className:eS},r.createElement("div",{className:Qk},r.createElement("img",{src:p.iconUrl,alt:"Dialect:"})),r.createElement("span",null,p.label)))))),fS=s.UI.Node.make((({view:e,state:t,notify:i})=>r.createElement(Mi.F.div,{className:vS},r.createElement(hS,{onEditButtonClick:i({kind:xt.i.Kind.voiceSelectionsEditButtonClick}),onDialectDropdownChange:e=>i({kind:xt.i.Kind.voiceDialectDropdownSelectionChange,dialect:e})(),onRoleDropdownChange:e=>i({kind:xt.i.Kind.voiceRoleDropdownSelectionChange,role:e})(),onSaveButtonClick:i({kind:xt.i.Kind.voiceSelectionsSaveButtonClick}),onCancelButtonClick:i({kind:xt.i.Kind.voiceSelectionsCancelButtonClick}),userName:e("userName"),isEditing:e("isEditing"),selectedRole:e("selectedRole"),selectedDialect:e("selectedDialect"),roles:e("roles"),dialects:e("dialects")}),r.createElement(Gl,{style:bS},r.createElement(Mi.F.div,null,t.pipe(O.U((e=>r.createElement(r.Fragment,null,r.createElement("div",{className:yS},r.createElement("div",null,r.createElement("h5",{className:xS},e.title),r.createElement("p",{className:kS},e.subTitle)),r.createElement(Nk,{key:"Tabs",tabs:e.profiles.map((e=>({id:Uk.Id.create(e.name),label:e.name}))),activeTabId:Uk.Id.create(o.WG(e.activeProfileName)||""),onActiveTabChange:e=>i({kind:xt.i.Kind.voiceProfileTabChange,profileName:e})()})),e.profiles.map((t=>r.createElement(dS,{key:t.name,profile:t,activeProfileName:e.activeProfileName,activeTagId:e.activeTagId,onVoiceTagPopoverClose:i({kind:xt.i.Kind.voiceTagPopoverClose}),onKeepClick:i({kind:xt.i.Kind.voiceTagPopoverKeepButtonClick}),onRemoveClick:(e,t,n)=>i({kind:xt.i.Kind.voiceTagPopoverRemoveButtonClick,tagName:e,profileName:t,sectionName:n})(),onVoiceTagClick:(e,t,n)=>i({kind:xt.i.Kind.voiceTagClick,tagName:e,profileName:t,sectionName:n})()})))))))),r.createElement(Rk,null),r.createElement("p",{className:SS},"You can prompt Grammarly to rewrite text in your voice."))))),vS=Ei.ux.style({display:"flex",flexDirection:"column"}),bS={gap:Ei.ux.rem(Fi.mh),padding:`${Ei.ux.rem(Fi.qp)} ${Ei.ux.rem(Fi.mh)} ${Ei.ux.rem(Fi.mh)} ${Ei.ux.rem(Fi.mh)}`},yS=Ei.ux.style({display:"flex",justifyContent:"space-between",alignItems:"flex-start"}),xS=Ei.ux.style({fontSize:Ei.ux.rem(.875),lineHeight:Ei.ux.rem(1.3125),fontWeight:700,margin:0}),kS=Ei.ux.style({color:$i.Z.TextBaseSubduedColor,fontWeight:400,fontSize:Ei.ux.rem(.75),lineHeight:Ei.ux.rem(1.125),margin:0}),SS=Ei.ux.style({margin:0,padding:0,fontSize:Ei.ux.rem(.875),lineHeight:Ei.ux.rem(1.25),fontStyle:"italic",color:Pi.I.Text.Base.Subdued}),CS=Ei.ux.style({display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"space-between"}),ES=Ei.ux.style({position:"relative",height:Ei.ux.rem(1),borderRadius:Ei.ux.rem(.25),overflow:"hidden"}),_S=e=>`linear-gradient(90deg, ${e[0]} 0%, ${e[1]} 100%)`,wS=({lineColorGradient:e=["#F5F5F5","#D9D9D9"],gapInRem:t=.6,lineWidthPercents:i=[95,85,75],overlayGradient:n=[]})=>{const s={background:_S(e)},o={gap:Ei.ux.rem(t)},a=r.createElement(Yg,{overlayBlendMode:"soft-light",overlayGradientCenterColor:n[0],overlayGradientEndColor:n[1]});return r.createElement("div",{className:CS,style:o},r.createElement("div",{className:ES,style:Object.assign(Object.assign({},s),{width:Ei.ux.percent(i[0])})},a),r.createElement("div",{className:ES,style:Object.assign(Object.assign({},s),{width:Ei.ux.percent(i[1])})},a),r.createElement("div",{className:ES,style:Object.assign(Object.assign({},s),{width:Ei.ux.percent(i[2])})},a))},IS=Ei.ux.style({display:"flex",flexDirection:"column",flex:1,gap:Ei.ux.rem(.125),borderRadius:`${Ei.ux.rem(2)} ${Ei.ux.rem(2)} ${Ei.ux.rem(2)} 0`,padding:`${Ei.ux.rem(Fi.w9)}`,background:`linear-gradient(265.79deg, ${Li.Green90} 0%, ${Li.Green100} 101.29%)`}),AS=(0,P.Kg)(ur.isLoadingEvaluationAndSuggestions,ur.isNonEmptyLoadingEvaluation),FS=({state:e})=>r.createElement(Mi.F.Fragment,null,e.pipe(O.U((e=>AS(e)?r.createElement("div",{className:IS,key:"evaluationResult","aria-busy":"true"},r.createElement(pv.X,{variant:"heading-xsmall",as:"h4",color:"base-inverse"},"Reviewing your text…"),r.createElement(wS,{lineColorGradient:["rgba(55, 85,\t81)","rgba(47, 102,\t96)"],overlayGradient:["rgba(0, 0, 0, 0.15)","rgba(255, 255, 255, 0)"],gapInRem:.375,lineWidthPercents:[100,98,96]})):r.createElement("div",{className:IS,key:"evaluationResult","aria-busy":"false","aria-live":"polite"},r.createElement(pv.X,{variant:"heading-xsmall",as:"h4",color:"base-inverse"},e.evaluationResult.title),r.createElement(Ua.x,{variant:"text-small",as:"span",color:"base-inverse"},e.evaluationResult.subTitle)))))),PS=()=>r.createElement("svg",{width:"36",height:"37",viewBox:"0 0 36 37",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.createElement("g",{filter:"url(#filter0_i_3099_29594)"},r.createElement("path",{d:"M0 18.8572C0 8.91605 8.05888 0.857178 18 0.857178C27.9411 0.857178 36 8.91605 36 18.8572C36 28.7983 27.9411 36.8572 18 36.8572H0V18.8572Z",fill:"#FFFFFF",className:OS}),r.createElement("path",{opacity:"0.5",d:"M11.9998 21.1906L20.3331 12.8572L18.6665 19.5239H21.9998L13.6665 27.8572L15.3331 21.1906H11.9998Z",fill:"black",fillOpacity:"0.5"})),r.createElement("defs",null,r.createElement("filter",{id:"filter0_i_3099_29594",x:"0",y:"0.857178",width:"37.5",height:"39",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},r.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),r.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),r.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),r.createElement("feOffset",{dx:"1.5",dy:"3"}),r.createElement("feGaussianBlur",{stdDeviation:"1.5"}),r.createElement("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),r.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.571383 0 0 0 0 0.684049 0 0 0 0 0 0 0 0 0.15 0"}),r.createElement("feBlend",{mode:"normal",in2:"shape",result:"effect1_innerShadow_3099_29594"})))),MS=Ei.ux.keyframes({"0%":{fill:$i.Z.LightGreen},"33%":{fill:$i.Z.YellowGreen},"66%":{fill:$i.Z.Teal40},"100%":{fill:$i.Z.LightGreen}}),OS=Ei.ux.style({animation:`${MS} 15s infinite`}),TS=s.UI.Node.make((({state:e})=>r.createElement(Gl,{"aria-live":"polite","data-testid":"writing-expert-loading",style:BS},r.createElement(KS,null,r.createElement(FS,{state:e}),e.pipe(h.h(ur.isEvaluationFinishedLoadingSuggestions),pt.h(r.createElement("div",{className:US,key:"headerLoading","aria-busy":"true"},r.createElement(pv.X,{variant:"heading-xsmall",as:"h4",color:"base-default"},"Coming up with suggestions…"),r.createElement(PS,null))),ht.O(null))),r.createElement(Mi.F.div,{"aria-busy":"true",className:GS,style:{visibility:e.pipe(O.U((e=>ur.isEvaluationFinishedLoadingSuggestions(e)?"visible":"hidden")))}},[1,2,3,4].map((e=>r.createElement("div",{key:e,className:NS},r.createElement("div",{className:RS}),r.createElement("div",{style:{flex:1}},r.createElement(wS,null))))))))),RS=Ei.ux.style({height:Ei.ux.rem(Fi.mh),width:Ei.ux.rem(Fi.mh),content:'" "',borderRadius:"50%",background:Li.NeutralGray0}),BS={padding:0,paddingBottom:Ei.ux.rem(Fi.mh)},US=Ei.ux.style({display:"flex",justifyContent:"space-between",alignItems:"center"}),GS=Ei.ux.style({padding:`0 ${Ei.ux.rem(1)}`,display:"flex",flexDirection:"column",gap:Ei.ux.rem(1.75)}),NS=Ei.ux.style({display:"flex",gap:Ei.ux.rem(Fi.x),flexDirection:"row"}),LS=s.UI.Node.make((({state:e,notify:t})=>r.createElement(Gl,{"aria-busy":"false","aria-live":"assertive","data-testid":"writing-expert-empty",style:jS},r.createElement(Mi.F.div,{className:DS},e.pipe(O.U((({sduiItem:e})=>r.createElement("div",{className:DS,key:`writing-expert-feed-state-${e.id}`},r.createElement(ld.P,{sduiRootId:e.id,content:e.content.content,designSystem:Eg(),notify:vd({item:e,kind:"longFormCardSduiNotify",notify:t}),transitions:[],prevContent:o.YP,onAnimationEnd:a.Q1,onMount:a.Q1}))))))))),DS=Ei.ux.style({textAlign:"center",padding:`${Ei.ux.rem(Ci.mh)} ${Ei.ux.rem(Ci.mh)} 0 ${Ei.ux.rem(Ci.mh)}`}),jS={padding:`${Ei.ux.rem(Ci.mh)}`,display:"flex",flexDirection:"column-reverse",justifyContent:"center",alignItems:"center",gap:`${Ei.ux.rem(Ci.mh)}`,height:"100%",boxSizing:"border-box"},zS=s.UI.Grid.make((({slots:e,state:t,notify:i})=>{const{onMount:n}=(0,Vo.F)((0,a.ls)(N.b(i({kind:"writingExpertFeedMount"})),zo.x(ws.notifyFeedUnmount)));return r.createElement(Gl,{"data-testid":"writing-expert-non-empty",style:HS,mount:n,"aria-live":"polite"},r.createElement(KS,null,r.createElement(FS,{state:t})),r.createElement(wa,{className:$S},e.cardList))})),VS=s.UI.Knot.make(zS,{cardList:$v}),KS=({children:e})=>r.createElement(Mi.F.div,{style:{display:"flex",flexDirection:"column",padding:Ei.ux.rem(Fi.mh),gap:Ei.ux.rem(Fi.qp)}},e),ZS=s.UI.Union.make("kind",{[ur.Kind.loadingEvaluationAndSuggestions]:TS,[ur.Kind.evaluationFinishedLoadingSuggestions]:TS,[ur.Kind.empty]:LS,[ur.Kind.error]:LS,[ur.Kind.nonEmpty]:VS,[ur.Kind.nonEmptyLoadingEvaluation]:VS}),HS={padding:0,display:"grid",gridTemplateRows:"auto 1fr auto",height:"100%"},$S=Ei.ux.style({$nest:{'&[data-overflow-top="true"]':{borderTop:`0.5px solid ${$i.Z.BorderBaseSubduedColor}`}}});var WS=i(57481);const YS=s.UI.Node.make((({view:e,notify:t})=>{const i=e=>{e&&e.focus()};return r.createElement(Gl,{style:qS,"data-testid":e("error").pipe(O.U((e=>`error-${e.reason}`))),role:"alert"},r.createElement(Mi.F.div,{className:QS},e("error").pipe(O.U((e=>r.createElement(r.Fragment,null,r.createElement(Io,{className:tC,width:24,height:24}),r.createElement("span",{className:JS},e.header)))))),r.createElement(Mi.F.div,{className:eC},e("error").pipe(O.U((e=>e.text)))),r.createElement(Mi.F.Fragment,null,e("showDismissButton").pipe(O.U((e=>e?r.createElement(Oi.z,{"aria-label":"Dismiss error",className:iC,mount:i,name:"dismissButton",onClick:t({kind:xt.i.Kind.errorCardDismissButtonClick}),size:"small",variant:"tertiary"},r.createElement(WS.o,{width:16})):null)))))})),qS={gap:Ei.ux.rem(Fi.x),padding:`${Ei.ux.rem(Fi.qp)} ${Ei.ux.rem(Fi.mh)}`},XS=s.UI.Union.asOption(YS),QS=Ei.ux.style({display:"flex",alignItems:"center",gap:Ei.ux.rem(Fi.x),marginTop:Ei.ux.rem(Fi.F2),marginBottom:Ei.ux.rem(Fi.F2)}),JS=Ei.ux.style({fontSize:Ei.ux.rem(.875),lineHeight:Ei.ux.rem(1.375),fontWeight:700,color:Pi.I.Text.Base.Default}),eC=Ei.ux.style({fontSize:Ei.ux.rem(.75),lineHeight:Ei.ux.rem(1.125),color:Pi.I.Text.Base.Subdued,whiteSpace:"break-spaces",overflowWrap:"anywhere"}),tC=Ei.ux.style((0,Hi.fx)(1.5)),iC=Ei.ux.style({alignSelf:"flex-end",marginTop:Ei.ux.rem(Fi.x),marginBottom:Ei.ux.rem(Fi.x)}),nC=s.UI.Node.make((({view:e})=>r.createElement(Gl,{style:oC,"data-testid":"document-overview"},r.createElement(gh,{style:sC},"This document"),r.createElement(Mi.F.div,{className:aC},e("title")),r.createElement(Mi.F.div,{className:lC},e("summary"))))),rC=s.UI.Union.asOption(nC),sC={userSelect:"none",padding:0},oC={position:"relative",padding:`${Ei.ux.rem(Fi.x)} ${Ei.ux.rem(Fi.mh)}`,gap:Ei.ux.rem(Fi.x),fontSize:Ei.ux.rem(Fi.qp),lineHeight:Ei.ux.rem(Fi.mh+Fi.yC)},aC=Ei.ux.style({fontSize:Ei.ux.rem(Fi.qp+Fi.yC),color:Pi.I.Text.Base.Subdued,fontWeight:600}),lC=Ei.ux.style({color:Pi.I.Text.Base.Default}),cC=e=>r.createElement(Ri.a1,Object.assign({width:"20",height:"20",viewBox:"0 0 20 20"},e),r.createElement("path",{d:"M5.31255 7.11538H14.6876M5.31255 10H14.6876M5.00006 13.6951V16.25L8.33339 13.6951C10.5282 13.6951 14.2996 13.6951 16.2502 13.6951C16.9406 13.6951 17.5001 13.1354 17.5001 12.4451V5C17.5001 4.30964 16.9404 3.75 16.2501 3.75H3.75001C3.05965 3.75 2.5 4.30965 2.50001 5.00001L2.50005 12.4451C2.50005 13.1354 3.05969 13.6951 3.75005 13.6951H5.00006Z",fill:"none"})),dC=e=>r.createElement(Ri.a1,Object.assign({width:"12",height:"15",viewBox:"0 0 12 15"},e),r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0.5 0.5C0.776142 0.5 1 0.723858 1 1V2H11.5C11.7022 2 11.8845 2.12182 11.9619 2.30866C12.0393 2.4955 11.9966 2.71055 11.8536 2.85355L8.70711 6L11.8536 9.14645C11.9966 9.28945 12.0393 9.5045 11.9619 9.69134C11.8845 9.87818 11.7022 10 11.5 10H1V14.5C1 14.7761 0.776142 15 0.5 15C0.223858 15 0 14.7761 0 14.5V1C0 0.723858 0.223858 0.5 0.5 0.5ZM1 9H10.2929L7.64645 6.35355C7.45118 6.15829 7.45118 5.84171 7.64645 5.64645L10.2929 3H1V9Z",stroke:"none"})),uC="reportMenuBtnIcon",mC=(0,Hi.dD)((0,Hi.fx)(1.5),uC),pC=({title:e,name:t,label:i,buttonClass:n,onAction:s,onOpenChange:o,children:a})=>{const l={minWidth:Ei.ux.rem(2),minHeight:Ei.ux.rem(2),lineHeight:Ei.ux.rem(2)};return r.createElement(ix,{"aria-label":e,title:e,name:t,label:i,theme:{button:n,buttonStyle:{default:Object.assign({padding:0},l),icon:l}},onAction:s,onOpenChange:o},a)},gC=({reportMenuButtonClassName:e,onClickReportOffensive:t,onClickProvideFeedback:i,onOpenChange:n})=>r.createElement(pC,{title:"Provide feedback",name:"reportMenu",label:r.createElement(dC,{className:Ei.ux.joinClasses([uC,Ei.ux.style(mC)])}),buttonClass:e,onAction:e=>{switch(e){case"provideFeedback":return i();case"reportOffensive":return t()}},onOpenChange:n},r.createElement(vg,{key:"provideFeedback",textValue:"provideFeedback"},r.createElement(cC,null),"Share your thoughts"),r.createElement(vg,{key:"reportOffensive",textValue:"reportOffensive"},r.createElement(Ri.JO.Report,null),"Report as offensive")),hC=s.UI.Node.make((({view:e})=>r.createElement(Gl,{"aria-busy":"true","data-testid":"intent-loading"},r.createElement(gh,null,e("header")),r.createElement("div",{className:fC},r.createElement(Yg,null))))),fC=Ei.ux.style({height:Ei.ux.rem(.5),borderRadius:Ei.ux.rem(Fi.W9),background:Li.NeutralGray10,flexGrow:1,maxWidth:Ei.ux.rem(22.5),position:"relative",marginBottom:Ei.ux.rem(Fi.F2)}),vC=s.UI.Node.make((({view:e,notify:t})=>r.createElement(Gl,{style:xC,"data-testid":"intent"},r.createElement(gh,null,e("header")),r.createElement(gC,{reportMenuButtonClassName:SC,onClickProvideFeedback:t({kind:xt.i.Kind.openFeedbackFormButtonClick,source:Jh.x.Source.intentCard}),onClickReportOffensive:t({kind:xt.i.Kind.reportOffensiveActionsButtonClick}),onOpenChange:e=>t({kind:xt.i.Kind.reportMenuVisibilityChange,trigger:to.uiItem(Xt.e.intentCard),visible:e})()}),r.createElement(Mi.F.div,Object.assign({className:kC},W(e("text"),[...$,"person"])))))),bC=s.UI.Union.make("kind",{loading:hC,loaded:vC}),yC=s.UI.Union.asOption(bC),xC={position:"relative",gap:Ei.ux.rem(Fi.yC)},kC=Ei.ux.style({color:Pi.I.Text.Base.Default,fontStyle:"normal",fontWeight:400,fontSize:Ei.ux.rem(.875),lineHeight:Ei.ux.rem(1.3125),fontFeatureSettings:"'ss01' on",$nest:{"& person":{fontWeight:700,$nest:{"&::before":{content:"''",display:"inline-block",width:Ei.ux.rem(1.25),height:Ei.ux.rem(1.25),marginRight:Ei.ux.rem(Fi.yC),backgroundSize:"cover",verticalAlign:"text-bottom",backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundImage:`url('data:image/svg+xml;utf8,${encodeURIComponent(`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M7.95768 3.00512C8.95983 3.00512 9.7855 3.83575 9.7855 4.8769V6.01259C9.7855 7.05374 8.95983 7.88437 7.95768 7.88437C6.95553 7.88437 6.12986 7.05374 6.12986 6.01259V4.8769C6.12986 3.83575 6.95553 3.00512 7.95768 3.00512ZM10.5847 4.8769C10.5847 3.40916 9.41586 2.20593 7.95768 2.20593C6.4995 2.20593 5.33067 3.40916 5.33067 4.8769V6.01259C5.33067 7.48032 6.4995 8.68355 7.95768 8.68355C8.20909 8.68355 8.45189 8.64779 8.68159 8.58107C8.68635 8.65317 8.69342 8.72016 8.70392 8.78578C8.81061 9.45248 9.17662 10.0499 9.72211 10.4478C9.88673 10.5679 10.0776 10.6652 10.3757 10.8171L11.2702 11.2732C11.6108 11.4469 11.7408 11.5145 11.8477 11.5924C12.2227 11.866 12.4743 12.2767 12.5477 12.7351C12.5589 12.8055 12.5645 12.8807 12.5672 12.995H9.90666C9.68597 12.995 9.50707 13.1739 9.50707 13.3946C9.50707 13.6152 9.68597 13.7941 9.90666 13.7941H12.9694C13.19 13.7941 13.3689 13.6152 13.3689 13.3946L13.369 13.3588C13.369 13.0242 13.369 12.81 13.3368 12.6088C13.2301 11.9421 12.8641 11.3446 12.3186 10.9468C12.154 10.8267 11.9632 10.7294 11.665 10.5775C11.6546 10.5721 11.644 10.5667 11.6332 10.5612L10.7705 10.1214C10.43 9.94773 10.2999 9.88006 10.1931 9.80215C9.81805 9.52861 9.56642 9.11785 9.49307 8.65949C9.4762 8.55408 9.47217 8.43819 9.47124 8.19619C10.1462 7.71137 10.5847 6.9116 10.5847 6.01259V4.8769Z" fill="${Li.NeutralGray60}"/><path fill-rule="evenodd" clip-rule="evenodd" d="M7.91127 3.00512C6.90913 3.00512 6.08346 3.83575 6.08346 4.8769V6.01259C6.08346 7.05374 6.90913 7.88437 7.91127 7.88437C8.91342 7.88437 9.73909 7.05374 9.73909 6.01259V4.8769C9.73909 3.83575 8.91342 3.00512 7.91127 3.00512ZM5.28427 4.8769C5.28427 3.40916 6.45309 2.20593 7.91127 2.20593C9.36946 2.20593 10.5383 3.40916 10.5383 4.8769V6.01259C10.5383 7.48032 9.36946 8.68355 7.91127 8.68355C7.65987 8.68355 7.41706 8.64779 7.18737 8.58107C7.1826 8.65317 7.17553 8.72016 7.16503 8.78578C7.05834 9.45248 6.69233 10.0499 6.14684 10.4478C5.98222 10.5679 5.7914 10.6652 5.49326 10.8171L4.59875 11.2732C4.25818 11.4469 4.12811 11.5145 4.02129 11.5924C3.64626 11.866 3.39463 12.2767 3.32128 12.7351C3.31001 12.8055 3.30447 12.8807 3.30176 12.995H10.2779C10.4986 12.995 10.6775 13.1739 10.6775 13.3946C10.6775 13.6152 10.4986 13.7941 10.2779 13.7941H2.8996C2.67891 13.7941 2.50001 13.6152 2.50001 13.3946L2.5 13.3588C2.49996 13.0242 2.49994 12.81 2.53214 12.6088C2.63883 11.9421 3.00484 11.3446 3.55033 10.9468C3.71494 10.8267 3.90577 10.7294 4.2039 10.5775C4.21438 10.5721 4.22499 10.5667 4.23574 10.5612L5.09841 10.1214C5.43899 9.94773 5.56906 9.88006 5.67588 9.80215C6.0509 9.52861 6.30254 9.11785 6.37589 8.65949C6.39276 8.55408 6.39678 8.43819 6.39771 8.19619C5.72278 7.71137 5.28427 6.9116 5.28427 6.01259V4.8769Z" fill="${Li.NeutralGray60}"/></svg>`)}')`}}}}}),SC=Ei.ux.style({position:"absolute",top:Ei.ux.rem(Fi.qp),right:Ei.ux.rem(Fi.qp)}),CC=e=>r.createElement(Ri.a1,Object.assign({width:"17",height:"16",viewBox:"0 0 17 16"},e),r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.5 8C2.5 4.41015 5.41015 1.5 9 1.5C12.5899 1.5 15.5 4.41015 15.5 8C15.5 11.5899 12.5899 14.5 9 14.5C7.85901 14.5 6.73812 14.1997 5.75 13.6292C5.51085 13.4911 5.42892 13.1853 5.56699 12.9462C5.70506 12.707 6.01085 12.6251 6.25 12.7631C7.08611 13.2459 8.03455 13.5 9 13.5C9.96545 13.5 10.9139 13.2459 11.75 12.7631C12.5861 12.2804 13.2804 11.5861 13.7631 10.75C14.2459 9.91389 14.5 8.96545 14.5 8C14.5 4.96243 12.0376 2.5 9 2.5C5.96243 2.5 3.5 4.96243 3.5 8V8.29289L4.64645 7.14645C4.84171 6.95118 5.15829 6.95118 5.35355 7.14645C5.54882 7.34171 5.54882 7.65829 5.35355 7.85355L3.35355 9.85355L3 10.2071L2.64645 9.85355L0.646447 7.85355C0.451184 7.65829 0.451184 7.34171 0.646447 7.14645C0.841709 6.95118 1.15829 6.95118 1.35355 7.14645L2.5 8.29289V8ZM9 4C9.27614 4 9.5 4.22386 9.5 4.5V7.5H11.5C11.7761 7.5 12 7.72386 12 8C12 8.27614 11.7761 8.5 11.5 8.5H9H8.5V8V4.5C8.5 4.22386 8.72386 4 9 4Z",stroke:"none"})),EC=s.UI.Node.make((({state:e,view:t,notify:i})=>{const{notifyUnmount:n}=r.useContext(Ko),{onMount:s}=(0,Vo.F)((0,a.ls)(N.b((e=>i({kind:xt.i.Kind.mount,name:Xt.e.historyButton,element:e})())),m.w((e=>t("state").pipe(O.U((e=>"enabled"===e)),ht.O(!1),A.x(),vi.G(),N.b((([t,n])=>{!t&&n?i({kind:xt.i.Kind.mount,name:Xt.e.historyButtonActive,element:e})():t&&!n&&i({kind:xt.i.Kind.unmount,name:Xt.e.historyButtonActive})()}))))),zo.x((()=>{n({kind:xt.i.Kind.unmount,name:Xt.e.historyButton}),n({kind:xt.i.Kind.unmount,name:Xt.e.historyButtonActive})}))));return r.createElement("div",{className:wC},r.createElement(Oi.z,{"aria-label":"Open recent prompt history",variant:"tertiary",mount:s,onClick:i({kind:xt.i.Kind.restoreHistoryButtonClick}),disabled:t("state").pipe(O.U((e=>"disabled"===e||"loading"===e))),compact:!0,size:"small",name:"restoreHistory",title:e.pipe(O.U((({state:e})=>"disabled"===e?"No prior prompt to go back to.":"enabled"===e?"Pick up with your last prompt.":void 0)))},r.createElement(CC,null)),r.createElement(Mi.F.Fragment,null,e.pipe(O.U((({state:e})=>"disabled"!==e?r.createElement("div",{key:"badge",role:"presentation",className:IC}):null)))))})),_C=s.UI.Union.asOption(EC),wC=Ei.ux.style({position:"relative"}),IC=Ei.ux.style({width:Ei.ux.rem(.375),height:Ei.ux.rem(.375),borderRadius:Ei.ux.rem(.375),background:$i.Z.BrandGreen60,position:"absolute",top:Ei.ux.rem(Fi.yC),right:Ei.ux.rem(-Fi.yC)}),AC=2*Ci.F2,FC=2*Ci.W9,PC="New!",MC=()=>r.createElement(Ai.V,{variant:"success",label:PC}),OC=r.forwardRef((function({icon:e,label:t,ariaLabel:i,ariaExpanded:n,badge:s,className:o,mount:l,onClick:d},u){return r.createElement(Oi.z,{variant:"tertiary",onClick:d,name:"actionBrick",size:"small",style:RC,className:o,mount:l,"aria-label":i||t,"aria-expanded":n},(0,a.zG)(e,S.g_((e=>"more"===e?r.createElement(Bi,{"aria-hidden":!0}):"plagiarism"===e?r.createElement(ji,{"aria-hidden":!0}):"plagiarismAndAiDetector"===e?r.createElement(Di,{"aria-hidden":!0}):"writingExpert"===e?r.createElement(zi,{"aria-hidden":!0}):"performanceScoreEmpty"===e?r.createElement(Gi,{"aria-hidden":!0}):"performanceScoreSome"===e?r.createElement(Ui,{"aria-hidden":!0}):"performanceScoreSuccess"===e?r.createElement(Ni,{"aria-hidden":!0}):"humanWritingReport"===e?r.createElement(Ki,null,r.createElement(_i.J,{icon:Ii,accessibilityLabel:""})):(0,c.L0)(e)),(e=>r.createElement("img",{src:e,style:{width:Ei.ux.rem(TC.iconWidthRems),height:Ei.ux.rem(1)},alt:""})))),r.createElement("div",{className:UC},r.createElement(Mi.F.div,Object.assign({mount:u},W(t),{className:BC})),"new"===s&&r.createElement(MC,null)))})),TC={gapRems:Fi.F2,badgeLeftMarginRems:Fi.x,paddingLeftRems:Fi.F2,paddingRightRems:Fi.x,fontSizeRems:.75,fontFamily:"Inter",fontWeight:"normal",iconWidthRems:1},RC={default:{fontSize:Ei.ux.rem(TC.fontSizeRems),fontFamily:TC.fontFamily,fontWeight:TC.fontWeight,gap:Ei.ux.rem(TC.gapRems),padding:`0 ${Ei.ux.rem(TC.paddingRightRems)} 0 ${Ei.ux.rem(TC.paddingLeftRems)}`},icon:(0,Hi.fx)(TC.iconWidthRems)},BC=Ei.ux.style({whiteSpace:"initial",textAlign:"left",lineHeight:Ei.ux.rem(1.125)}),UC=Ei.ux.style({display:"flex",alignItems:"center",gap:Ei.ux.rem(TC.badgeLeftMarginRems)}),GC=({style:e,iconStyle:t,mode:i="standard"})=>{const n="standard"===i?1:.875;return r.createElement("div",{className:Ei.ux.style({height:Ei.ux.rem(2*n),display:"flex",alignItems:"center",gap:Ei.ux.rem(Fi.x),padding:`0 ${Ei.ux.rem(Fi.x)} 0 ${Ei.ux.rem(Fi.F2)}`,borderRadius:Ei.ux.rem(Fi.F2),border:`1px solid ${Li.NeutralGray10}`,boxSizing:"border-box"},e)},r.createElement("div",{className:Ei.ux.style({width:Ei.ux.rem(1.5*n),height:Ei.ux.rem(1.5*n),borderRadius:"50%",background:Li.NeutralGray10},t)}),r.createElement("div",{className:Ei.ux.style({height:Ei.ux.rem(.5*n),borderRadius:Ei.ux.rem(Fi.W9),background:Li.NeutralGray10,flexGrow:1})}))},NC=({widthRems:e})=>r.createElement(GC,{style:{width:Ei.ux.rem(e),height:Ei.ux.rem(1.5),border:0},iconStyle:{width:Ei.ux.rem(1),height:Ei.ux.rem(1)}}),LC=Fi.mh,DC=()=>r.createElement("div",{role:"separator",className:Ei.ux.style({width:Ei.ux.rem(LC),height:Ei.ux.rem(1.5),position:"relative"})},r.createElement("div",{className:Ei.ux.style({position:"absolute",top:0,bottom:0,left:"50%",borderLeft:`0.5px solid ${Li.NeutralGray20}`})}));let jC=null;function zC(e,t){jC||(jC=document.createElement("canvas"));const i=jC.getContext("2d");if(i){i.font=t;return i.measureText(e).width}return null}const VC=({loading:e,actions:t,className:i,onShownActionsListLengthChange:n,onHasHiddenActionsChange:s,onActionClick:d,onActionMount:u,onActionsMount:m})=>{const{onMount:p,ref:g}=gi.P.useElWatcher(),f=Dl(g,!0),v=r.useContext(Do.u.Context),b=r.useMemo((()=>qt.a([f,v,t]).pipe(O.U((([e,t,i])=>({width:(0,a.zG)(e,o.UI((e=>Math.round(e.width)))),remSize:t,actions:i}))),R.skipBy(C.MW({width:o.Eh(C.lr),remSize:C.lr,actions:E.Eh(C.f7(((e,t)=>e.action.label===t.action.label)))})),O.U((({width:e,remSize:t,actions:i})=>(0,a.zG)(e,o.UI((e=>function(e,t,i){const n=[];let r=0;for(let s=0;s<e.length;++s){const l=(0,a.zG)(o.WG(e[s].action.badge),(e=>null!==e?(0,a.zG)(zC("new"===e?PC:(0,c.L0)(e),i.badgeFontStyle),(e=>e?e+i.badgeHorizontalPadding+i.badgeHorizontalBorderWidth+i.badgeLeftMargin:null)):0)),d=zC(e[s].action.label,i.labelFontStyle),u=null===d||null===l?null:d+l+i.horizontalPadding+(n.length>0?i.actionGap:0);null!==u&&r+u<=t&&(r+=u,n.push(e[s]))}return n}(i,e,{horizontalPadding:HC(t),actionGap:LC*t,labelFontStyle:$C(t),badgeHorizontalPadding:AC*t,badgeHorizontalBorderWidth:FC*t,badgeLeftMargin:TC.badgeLeftMarginRems*t,badgeFontStyle:$C(t)})))))),R.shareReplay({refCount:!0,bufferSize:1}))),[t,f,v]),y=r.useMemo((()=>qt.a([b,t,e]).pipe(h.h((([e,t,i])=>!1===i)),O.U((([e,t])=>(0,a.zG)(e,o.g_((()=>0),(e=>e.length)),(e=>(n(e),e<t.length))))),A.x(),N.b((e=>s(e))))),[b,t]);gi.P.useSubscriptionTo(y);const x=r.useRef(new l.x),k=r.useRef([]);return gi.P.useSubscriptionTo(x.current.pipe(dn.Q(Pa.Z),G.e(0),N.b((()=>{m(),k.current.forEach((({a:e,idx:t})=>u(e,t)))})))),r.createElement(Mi.F.div,{className:Ei.ux.joinClasses([KC,i]),mount:p},qt.a([b,e]).pipe(N.b((()=>k.current=[])),O.U((([e,t])=>(0,a.zG)(e,o.hX((()=>!t)),o.g_((()=>r.createElement(Mi.F.Fragment,null,qt.a([f,v]).pipe(O.U((([e,t])=>(0,a.zG)(e,o.UI((e=>({width:Math.floor(e.width),remSize:t})))))),R.skipBy(o.Eh(C.MW({width:C.lr,remSize:C.lr}))),O.U(o.g_(a.gn,(({width:e,remSize:t})=>{const i=15+LC,n=9/i,s=6/i,o=e/t-LC,a=Math.min(n*o,9),l=Math.min(s*o,6);return r.createElement(r.Fragment,null,r.createElement(NC,{widthRems:a}),r.createElement(DC,null),r.createElement(NC,{widthRems:l}))})))))),(e=>r.createElement("div",{className:ZC},e.map(((e,t)=>r.createElement(r.Fragment,{key:e.action.id},t>0?r.createElement(DC,null):null,r.createElement(OC,{icon:e.action.icon,label:e.action.label,badge:o.FS(e.action.badge),onClick:()=>d(e,t),ref:i=>{i&&(k.current.push({a:e,idx:t}),x.current.next(void 0))}}))))))))))))},KC=Ei.ux.style({display:"flex",height:Ei.ux.rem(1.5)}),ZC=Ei.ux.style({display:"flex",height:Ei.ux.rem(1.5)});function HC(e){return(TC.paddingLeftRems+TC.iconWidthRems+TC.gapRems+TC.paddingRightRems)*e}function $C(e){return`${TC.fontWeight} ${TC.fontSizeRems*e}px ${TC.fontFamily}`}const WC=s.UI.Grid.make((({slots:e,view:t,notify:i})=>{const n=r.useMemo((()=>d.h.create(!1)),[]),s=r.useMemo((()=>d.h.create(0)),[]),{refCallback:o}=Ma(),{notifyUnmount:l}=r.useContext(Ko),{onMount:c}=(0,Vo.F)((0,a.ls)(N.b((e=>i({kind:xt.i.Kind.mount,name:Xt.e.actionsMoreButton,element:e})())),zo.x((()=>{l({kind:xt.i.Kind.unmount,name:Xt.e.actionsMoreButton})}))));return r.createElement("section",{className:XC,"data-testid":"actions-bar"},r.createElement("div",{className:qC},e.header),r.createElement(VC,{className:QC,loading:t("loading"),actions:t("actions"),onActionClick:(e,t)=>i({kind:xt.i.Kind.actionBrickClick,action:e,placement:"homeView",position:t})(),onActionMount:(e,t)=>{i({kind:xt.i.Kind.actionBrickMount,action:e,placement:"homeView",position:t})(),i({kind:xt.i.Kind.actionBrickShow,action:e,placement:"homeView",position:t})()},onShownActionsListLengthChange:g.wW(s),onHasHiddenActionsChange:g.wW(n),onActionsMount:i({kind:xt.i.Kind.actionsMount})}),r.createElement(Mi.F.div,{className:YC},qt.a([t("hasMore"),t("expanded"),n,s]).pipe(O.U((([e,n,s,l])=>e||s?r.createElement(r.Fragment,null,r.createElement(OC,{icon:S.t$("more"),label:"More",ariaLabel:"Explore or write your own idea",ariaExpanded:n,onClick:i({kind:xt.i.Kind.actionBrickClick,action:{kind:"allResults",filterPredicate:a.W8},placement:"homeView",position:l}),mount:c,ref:o(i({kind:xt.i.Kind.actionBrickMount,action:{kind:"allResults",filterPredicate:a.W8},placement:"homeView",position:l}),i({kind:xt.i.Kind.actionBrickShow,action:{kind:"allResults",filterPredicate:a.W8},placement:"homeView",position:l}))}),r.createElement(Mi.F.Fragment,null,t("hasHistoryButton").pipe(O.U((0,P.RN)(r.createElement(DC,null),null))))):null))),e.historyButton))})),YC=Ei.ux.style({gridArea:"controls",display:"flex",flexDirection:"row"}),qC=Ei.ux.style({gridArea:"header"}),XC=Ei.ux.style({display:"grid",gridTemplateColumns:"1fr auto",gridTemplateRows:"auto auto",gridTemplateAreas:'"header header" "actions controls"',gridColumnGap:Ei.ux.rem(Fi.x),alignItems:"center",padding:`${Ei.ux.rem(Fi.F2)} ${Ei.ux.rem(Fi.mh)}`,margin:`${Ei.ux.rem(Fi.x)} 0`}),QC=Ei.ux.style({gridArea:"actions",display:"flex",height:Ei.ux.rem(1.5)}),JC=()=>r.createElement(GC,{style:{width:Ei.ux.rem(7.75),height:Ei.ux.rem(2.5),border:0,gap:Ei.ux.rem(.875),marginLeft:Ei.ux.rem(1)},iconStyle:{width:Ei.ux.rem(1.25),height:Ei.ux.rem(1.25)}}),eE=s.UI.Grid.make((({slots:e,state:t,notify:i})=>{const{refCallback:n}=Ma(),{onMount:s}=(0,Vo.F)(N.b(i({kind:xt.i.Kind.actionsMount}))),{notifyUnmount:l}=r.useContext(Ko),{onMount:c}=(0,Vo.F)((0,a.ls)(N.b((e=>i({kind:xt.i.Kind.mount,name:Xt.e.actionsMoreButton,element:e})())),zo.x((()=>{l({kind:xt.i.Kind.unmount,name:Xt.e.actionsMoreButton})}))));return r.createElement(Mi.F.div,{className:tE,"data-testid":"actions-panel"},e.header,t.pipe(O.U((({loading:t,actions:l,hasMore:d,maxActionsCount:u})=>t?Array.from({length:u+1}).map(((e,t)=>r.createElement(r.Fragment,{key:t},0!==t?r.createElement(Oa,null):null,r.createElement(JC,null)))):r.createElement(r.Fragment,null,r.createElement("div",{ref:s,className:sE},l.map(((e,t)=>{const s=o.FS(e.action.badge),a=e.action.label;return r.createElement(r.Fragment,{key:e.action.id},0!==t&&r.createElement(Oa,null),r.createElement(Yi,{icon:e.action.icon,label:a,badge:s,onClick:i({kind:xt.i.Kind.actionBrickClick,action:e,position:t,placement:"threadView"}),ref:n(i({kind:xt.i.Kind.actionBrickMount,action:e,position:t,placement:"threadView"}),i({kind:xt.i.Kind.actionBrickShow,action:e,position:t,placement:"threadView"}))}))}))),d?r.createElement(r.Fragment,null,r.createElement(Oa,null),r.createElement("div",{className:iE},r.createElement(Yi,{icon:S.t$("more"),label:"More ideas",accessibleLabel:"Explore or write your own idea",mount:c,onClick:i({kind:xt.i.Kind.actionBrickClick,action:{kind:"allResults",filterPredicate:a.W8},position:l.length,placement:"threadView"}),ref:n(i({kind:xt.i.Kind.actionBrickMount,action:{kind:"allResults",filterPredicate:a.W8},position:l.length,placement:"threadView"}),i({kind:xt.i.Kind.actionBrickShow,action:{kind:"allResults",filterPredicate:a.W8},position:l.length,placement:"threadView"})),style:nE}),r.createElement("div",{className:rE},e.historyButton))):null)))))})),tE=Ei.ux.style({display:"flex",flexDirection:"column",marginTop:Ei.ux.rem(Fi.x),marginBottom:Ei.ux.rem(Fi.x)}),iE=Ei.ux.style({position:"relative"}),nE={default:{width:"100%"}},rE=Ei.ux.style({position:"absolute",right:Ei.ux.rem(Fi.mh),bottom:"50%",transform:"translateY(50%)"}),sE=Ei.ux.style({display:"flex",flexDirection:"column"}),oE=e=>r.createElement(Ri.a1,Object.assign({width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"},e),r.createElement("circle",{cx:"10",cy:"10",r:"6",stroke:"#646B81"}),r.createElement("path",{d:"M7.5 10H12.5",stroke:"#646B81",strokeLinecap:"round"}));var aE=i(84908);function lE(e,t=0){const i=function(e){return e.trim().replace(/\s+/g," ")}(e).split(" ").reduce(((e,i,n,r)=>Object.assign(Object.assign({},e),{head:n<r.length-t?e.head.concat(i):e.head,tail:n>=r.length-t?e.tail.concat(i):e.tail})),{head:[],tail:[]});return{head:i.head.join(" "),tail:i.tail.join(" ")}}const cE=({children:e,maxTailWordsCount:t=0})=>{const i=lE(e,t);return r.createElement("div",{className:uE},r.createElement("span",{className:mE},i.head,i.head.length&&i.tail.length?" ":null),i.tail.length?i.tail:null)},dE=({children:e,maxTailWordsCount:t=0})=>{const[i,n]=r.useState(t),{onMount:s,rect:o}=gi.P.useRectWatcher(),a=r.useRef(null),c=r.useMemo((()=>lE(e,i)),[i,e]),d=r.useMemo((()=>new l.x),[]);gi.P.useSubscriptionTo(r.useMemo((()=>d.pipe(aE.p(100),A.x(),N.b((e=>{n(e)})))),[]));const u=r.useMemo((()=>{return e=a.current,parseInt((null===(n=null===(i=null===(t=null==e?void 0:e.ownerDocument)||void 0===t?void 0:t.defaultView)||void 0===i?void 0:i.getComputedStyle(e))||void 0===n?void 0:n.fontSize)||(null===(s=null===(r=null==e?void 0:e.ownerDocument)||void 0===r?void 0:r.defaultView)||void 0===s?void 0:s.getComputedStyle(e.ownerDocument.body).fontSize)||pE,10);var e,t,i,n,r,s}),[a.current]);return gi.P.useSubscriptionTo(r.useMemo((()=>o.pipe(U.oA,A.x(),h.h((e=>Boolean(e.width&&e.height))),N.b((e=>{if(e.width<9*u)d.next(0);else if(a.current&&a.current.clientWidth<a.current.scrollWidth){const n=a.current.clientWidth/(e.width||1/0);i&&n<.4?d.next(i-1):n>.6&&i<t&&d.next(i+1)}})))),[o])),r.createElement("div",{className:uE,ref:s},r.createElement("span",{className:mE,ref:a},c.head,c.head.length&&c.tail.length?" ":null),c.tail.length?c.tail:null)},uE=Ei.ux.style({display:"flex",flexDirection:"row",whiteSpace:"nowrap",maxWidth:"100%",minWidth:0}),mE=Ei.ux.style({display:"inline-block",overflow:"hidden",textOverflow:"ellipsis",flexShrink:10}),pE="16px";const gE=(0,La.xb)((({dynamic:e=!1,maxTailWordsCount:t=0,children:i})=>e?r.createElement(dE,{maxTailWordsCount:t},i):r.createElement(cE,{maxTailWordsCount:t},i))),hE=({active:e,className:t,prefix:i,style:n,children:s})=>r.createElement("h1",{id:"actions-panel-context",className:Ei.ux.joinClasses([bE(void 0!==i,n),t])},e?r.createElement("svg",{viewBox:"0 0 16 16",fill:"none",className:vE,"aria-hidden":"true"},r.createElement("rect",{width:"16",height:"16",rx:"5",fill:"#018374"}),r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.5 13.5C9.5 13.7761 9.72386 14 10 14H11C12.6569 14 14 12.6569 14 11V10C14 9.72386 13.7761 9.5 13.5 9.5C13.2239 9.5 13 9.72386 13 10V11C13 12.1046 12.1046 13 11 13H10C9.72386 13 9.5 13.2239 9.5 13.5ZM9.5 2.5C9.5 2.77614 9.72386 3 10 3H11C12.1046 3 13 3.89543 13 5V6C13 6.27614 13.2239 6.5 13.5 6.5C13.7761 6.5 14 6.27614 14 6V5C14 3.34315 12.6569 2 11 2H10C9.72386 2 9.5 2.22386 9.5 2.5ZM6 2C6.27614 2 6.5 2.22386 6.5 2.5C6.5 2.77614 6.27614 3 6 3H5C3.89543 3 3 3.89543 3 5V6C3 6.27614 2.77614 6.5 2.5 6.5C2.22386 6.5 2 6.27614 2 6V5C2 3.34315 3.34315 2 5 2H6ZM6 13C6.27614 13 6.5 13.2239 6.5 13.5C6.5 13.7761 6.27614 14 6 14H5C3.34315 14 2 12.6569 2 11V10C2 9.72386 2.22386 9.5 2.5 9.5C2.77614 9.5 3 9.72386 3 10V11C3 12.1046 3.89543 13 5 13H6ZM5.5 6.5C5.5 6.22386 5.72386 6 6 6H10C10.2761 6 10.5 6.22386 10.5 6.5C10.5 6.77614 10.2761 7 10 7H6C5.72386 7 5.5 6.77614 5.5 6.5ZM6 9C5.72386 9 5.5 9.22386 5.5 9.5C5.5 9.77614 5.72386 10 6 10H8.5C8.77614 10 9 9.77614 9 9.5C9 9.22386 8.77614 9 8.5 9H6Z",fill:"white"})):r.createElement("svg",{viewBox:"0 0 16 16",fill:"none",className:vE,"aria-hidden":"true"},r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.5 13.5C9.5 13.7761 9.72386 14 10 14H11C12.6569 14 14 12.6569 14 11V10C14 9.72386 13.7761 9.5 13.5 9.5C13.2239 9.5 13 9.72386 13 10V11C13 12.1046 12.1046 13 11 13H10C9.72386 13 9.5 13.2239 9.5 13.5ZM9.5 2.5C9.5 2.77614 9.72386 3 10 3H11C12.1046 3 13 3.89543 13 5V6C13 6.27614 13.2239 6.5 13.5 6.5C13.7761 6.5 14 6.27614 14 6V5C14 3.34315 12.6569 2 11 2H10C9.72386 2 9.5 2.22386 9.5 2.5ZM6 2C6.27614 2 6.5 2.22386 6.5 2.5C6.5 2.77614 6.27614 3 6 3H5C3.89543 3 3 3.89543 3 5V6C3 6.27614 2.77614 6.5 2.5 6.5C2.22386 6.5 2 6.27614 2 6V5C2 3.34315 3.34315 2 5 2H6ZM6 13C6.27614 13 6.5 13.2239 6.5 13.5C6.5 13.7761 6.27614 14 6 14H5C3.34315 14 2 12.6569 2 11V10C2 9.72386 2.22386 9.5 2.5 9.5C2.77614 9.5 3 9.72386 3 10V11C3 12.1046 3.89543 13 5 13H6ZM5.5 6.5C5.5 6.22386 5.72386 6 6 6H10C10.2761 6 10.5 6.22386 10.5 6.5C10.5 6.77614 10.2761 7 10 7H6C5.72386 7 5.5 6.77614 5.5 6.5ZM6 9C5.72386 9 5.5 9.22386 5.5 9.5C5.5 9.77614 5.72386 10 6 10H8.5C8.77614 10 9 9.77614 9 9.5C9 9.22386 8.77614 9 8.5 9H6Z",fill:"#646B81"})),i&&r.createElement("span",{className:fE},i),r.createElement(gE,{dynamic:!0,maxTailWordsCount:3},s)),fE=Ei.ux.style({fontSize:Ei.ux.rem(.75),lineHeight:Ei.ux.rem(1.125),color:$i.Z.BrandGreen60}),vE=Ei.ux.style({width:Ei.ux.rem(1),height:Ei.ux.rem(1)}),bE=(e,t)=>Ei.ux.style(Object.assign({display:"grid",gridTemplateColumns:`${Ei.ux.rem(1)} ${e?"min-content ":""}auto`,justifyItems:"start",alignItems:"center",gap:Ei.ux.rem(Fi.x),color:Pi.I.Text.Base.Subdued,fontSize:Ei.ux.rem(.75),lineHeight:Ei.ux.rem(1.125),overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",fontWeight:"normal",margin:0,height:Ei.ux.rem(1.5)},t)),yE=s.UI.Node.make((({view:e,notify:t})=>r.createElement("div",{className:kE},r.createElement(hE,{active:!0,style:SE,prefix:"Work with:"},e("selectedText")),r.createElement(Oi.z,{variant:"tertiary",onClick:t({kind:xt.i.Kind.removeSelectionContextClick}),compact:!0,size:"small",name:"removeContext",title:"Remove","aria-label":"Remove the selected context for the prompt","aria-describedby":"actions-panel-context"},r.createElement(oE,null))))),xE=s.UI.Union.asOption(yE),kE=Ei.ux.style({display:"flex",alignItems:"center",justifyContent:"space-between",gap:Ei.ux.rem(Fi.x)}),SE={height:Ei.ux.rem(2.5)},CE=s.UI.Node.make((({view:e})=>r.createElement(r.Fragment,null,r.createElement(Mi.F.h3,{className:AE},e("title")),r.createElement(Mi.F.Fragment,null,e("subtitle").pipe(O.U((e=>e?r.createElement("p",{className:FE},e):null))))))),EE=s.UI.Union.make("kind",{none:s.UI.Node.empty,title:CE,selectionContext:s.UI.Composite.make(s.UI.Grid.make((({slots:e})=>r.createElement("div",{className:PE},e.header))),yE)}),_E=s.UI.Knot.make(WC,{header:xE,historyButton:_C}),wE=s.UI.Knot.make(eE,{header:EE,historyButton:_C}),IE=s.UI.Union.make("kind",{none:s.UI.Node.empty,actionBar:_E,actionPanel:wE}),AE=Ei.ux.style({padding:Ei.ux.rem(Fi.x),paddingLeft:Ei.ux.rem(Fi.mh),margin:0,fontWeight:700,fontSize:Ei.ux.rem(1),lineHeight:"1.5em",color:Pi.I.Text.Base.Default}),FE=Ei.ux.style({padding:`0 ${Ei.ux.rem(Fi.x)} ${Ei.ux.rem(Fi.x)} ${Ei.ux.rem(Fi.mh)}`,margin:0,fontSize:Ei.ux.rem(.875),lineHeight:"1.5em",color:Pi.I.Text.Base.Subdued}),PE=Ei.ux.style({padding:`0 ${Ei.ux.rem(Fi.qp)} 0 ${Ei.ux.rem(Fi.mh)}`}),ME=s.UI.Grid.make((({slots:e})=>r.createElement(Mi.F.section,{className:RE},e.header,e.fieldContainer))),OE=s.UI.Knot.make(ME,{header:IE,fieldContainer:Al}),TE=s.UI.Union.asOption(OE),RE=Ei.ux.style({backgroundColor:$i.Z.BackgroundBaseSubdued,borderTop:`0.5px solid ${$i.Z.BorderBaseSubduedColor}`,height:"100%",borderBottomLeftRadius:"inherit",borderBottomRightRadius:"inherit",boxSizing:"border-box",display:"flex",flexDirection:"column",justifyContent:"space-between"});var BE=i(16705);function UE(e,t){var i,n;const[s,o]=(0,r.useState)(void 0);return(0,r.useEffect)((()=>{e.current&&e.current.scrollWidth>e.current.clientWidth&&o(t)}),[null===(i=e.current)||void 0===i?void 0:i.scrollWidth,null===(n=e.current)||void 0===n?void 0:n.clientWidth,t]),s}const GE=({title:e,url:t})=>{const i=r.useRef(null),n=UE(i,e);return(0,a.zG)(t,o.g_((()=>r.createElement("span",{className:NE,title:n,ref:i},e)),(t=>r.createElement(BE.d,{className:NE,title:n,ref:i,href:t},e))))},NE=Ei.ux.style({overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",textAlign:"left",$nest:{"&:visited":{color:"inherit"}}}),LE=s.UI.Node.make((({view:e})=>r.createElement(Gl,{style:jE,"data-testid":"detected-references"},r.createElement("span",{className:zE},"Detected references"),r.createElement(Mi.F.ul,{className:VE},e("detectedReferences").pipe(O.U((e=>e.map((({title:e,iconUrl:t,url:i},n)=>r.createElement("li",{key:n,className:KE},r.createElement("img",{src:t,className:ZE,alt:""}),r.createElement(GE,{title:e,url:i}))))))))))),DE=s.UI.Union.asOption(LE),jE={position:"relative",padding:`${Ei.ux.rem(Fi.x)} ${Ei.ux.rem(Fi.mh)}`,gap:0},zE=Ei.ux.style({fontSize:Ei.ux.rem(Fi.qp),lineHeight:Ei.ux.rem(Fi.mh+Fi.yC),color:Pi.I.Text.Base.Subdued,userSelect:"none"}),VE=Ei.ux.style({fontSize:Ei.ux.rem(Fi.qp),lineHeight:Ei.ux.rem(Fi.mh+Fi.yC),color:Pi.I.Text.Base.Default,margin:0,padding:0}),KE=Ei.ux.style({height:Ei.ux.rem(Fi.sD),display:"flex",alignItems:"center",borderRadius:Ei.ux.rem(So.xB)}),ZE=Ei.ux.style({minWidth:Ei.ux.rem(Fi.mh),height:Ei.ux.rem(Fi.mh),marginRight:Ei.ux.rem(Fi.x)}),HE=(0,wi.I)("color",(({title:e,titleId:t,desc:i,descId:n,...s})=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true","data-icon":"InterfaceExpand",stroke:"transparent","aria-labelledby":t,"aria-describedby":n,...s},i?r.createElement("desc",{id:n},i):null,e?r.createElement("title",{id:t},e):null,r.createElement("path",{stroke:"#646B81",strokeLinecap:"round",d:"M4 5.375 8 2l4 3.375m-8 5.25L8 14l4-3.375"})))),$E=(0,wi.I)("color",(({title:e,titleId:t,desc:i,descId:n,...s})=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true","data-icon":"InterfaceCollapse",stroke:"transparent","aria-labelledby":t,"aria-describedby":n,...s},i?r.createElement("desc",{id:n},i):null,e?r.createElement("title",{id:t},e):null,r.createElement("path",{stroke:"#646B81",strokeLinecap:"round",d:"m5 2 3 3.176L11 2M5 14l3-3.177L11 14"})))),WE=({children:e,style:t})=>r.createElement("i",{className:Ei.ux.style(YE,t),"aria-hidden":"true"},e),YE={display:"inline-flex",alignItems:"center",justifyContent:"center",width:Ei.ux.rem(1),height:Ei.ux.rem(1),$nest:{"& > svg":{transform:"scale(calc(var(--rem)/16))"}}},qE=({feedForm:e,onClick:t})=>r.createElement(Oi.z,{variant:"tertiary",size:"small",style:XE,onClick:t},"shortForm"===e?r.createElement(r.Fragment,null,r.createElement("span",{className:QE},"Show more"),r.createElement(WE,null,r.createElement(HE,null))):"longForm"===e?r.createElement(r.Fragment,null,r.createElement("span",{className:QE},"Show less"),r.createElement(WE,null,r.createElement($E,null))):(0,c.L0)(e)),XE={default:{gap:Ei.ux.rem(Fi.F2),padding:Ei.ux.rem(Fi.F2),paddingLeft:Ei.ux.rem(Fi.x)},icon:{minHeight:Ei.ux.rem(1),minWidth:Ei.ux.rem(1)}},QE=Ei.ux.style({fontSize:Ei.ux.rem(.75),lineHeight:Ei.ux.rem(1.125)}),JE=e=>{const t=(0,yt._6)(e.count,"suggestion","suggestions");return r.createElement("div",null,r.createElement("div",{className:t_},r.createElement("h3",{className:i_,"aria-label":`${e.count} ${t}`},"Review ",t),r.createElement("div",{"aria-hidden":"true",className:e_},e.count)),(0,a.zG)(e.pageRange,o.g_(a.gn,(t=>r.createElement(Zv,{pageRange:t,onPageRangeHeaderMount:e.onPageRangeHeaderMount})))))},e_=Ei.ux.style({display:"flex",alignItems:"center",justifyContent:"center",fontSize:Ei.ux.rem(.75),fontStyle:"normal",fontWeight:700,lineHeight:Ei.ux.rem(1.125),color:Pi.I.Text.Base.Inverse,padding:`0 ${Ei.ux.rem(Fi.F2)}`,background:$i.Z.BackgroundNeutralDefault,borderRadius:Ei.ux.rem(So.HP),border:`1px solid ${Pi.I.Text.Base.Inverse}`}),t_=Ei.ux.style({display:"flex",alignItems:"center",gap:Ei.ux.rem(Fi.x)}),i_=Ei.ux.style({fontWeight:700,fontSize:Ei.ux.rem(1),lineHeight:Ei.ux.rem(1.5),margin:0});var n_=i(38747),r_=i(44586);const s_=Ei.ux.style({position:"relative"}),o_=Ei.ux.style({overscrollBehavior:"contain",overflowX:"auto",scrollSnapType:"x mandatory",position:"relative",width:0,minWidth:"100%"}),a_=(Ei.ux.style({scrollSnapAlign:"start"}),Ei.ux.style({display:"flex",flexDirection:"row",flexWrap:"nowrap"}),{position:"absolute",top:"50%",zIndex:1,$nest:{"&.override":{transform:"translate(0,-50%)"}}}),l_=Ei.ux.style({left:Ei.ux.rem(Fi.x)}),c_=Ei.ux.style({right:Ei.ux.rem(Fi.x)}),d_=Ei.ux.style({scrollbarWidth:"none","-ms-overflow-style":"none",$nest:{"&::-webkit-scrollbar":{width:0,height:0}}}),u_=({count:e=1,hideScrollbar:t=!1,children:i})=>{const{onMount:n,rect:s}=gi.P.useRectWatcher(),{ref:l,onMount:c}=gi.P.useElWatcher(),u=r.useMemo((()=>d.h.create({scroll:0,width:0,scrollWidth:0,itemAverageWidth:0})),[]);gi.P.useSubscriptionTo(r.useMemo((()=>qt.a([l.pipe(U.oA,A.x()),s.pipe(U.oA,A.x())]).pipe(G.e(100),N.b((([t])=>{const i=t.clientWidth,n=t.scrollWidth;u.set({scroll:t.scrollLeft,width:i,scrollWidth:n,itemAverageWidth:Math.min(i,n/e)})})))),[e,l,s]));const m=r.useCallback(((e=!1)=>{(0,a.zG)(l.get(),o.UI((t=>{const{scroll:i,itemAverageWidth:n}=u.get();t.scroll({top:0,left:i+(e?1:-1)*n,behavior:"smooth"})})))}),[l]);return r.createElement("div",{className:s_,ref:n},r.createElement("div",{ref:c,className:Ei.ux.joinClasses([o_,t?d_:void 0]),onScroll:e=>{e.target instanceof HTMLDivElement&&u.lens("scroll").set(e.target.scrollLeft)},"data-role":"scroll"},i),r.createElement(Mi.F.Fragment,null,u.pipe(fi.b(100),O.U((({scroll:e,width:t,scrollWidth:i})=>r.createElement(r.Fragment,null,e>0?r.createElement(Oi.z,{name:"scroll_left",title:"Scroll left","aria-label":"Scroll left",variant:"round",className:Ei.ux.joinClasses([Ei.ux.style(a_),l_,"override"]),onClick:()=>m(),"aria-hidden":!0,tabIndex:-1},r.createElement(n_.n,null)):null,i-t-e>.5?r.createElement(Oi.z,{name:"scroll_right",title:"Scroll right","aria-label":"Scroll right",variant:"round",className:Ei.ux.joinClasses([Ei.ux.style(a_),c_,"override"]),onClick:()=>m(!0),"aria-hidden":!0,tabIndex:-1},r.createElement(r_.M,null)):null))))))},m_=({percent:e,lensId:t})=>r.createElement("div",{className:p_(t),"aria-hidden":"true"},r.createElement("div",{className:g_(t),style:{transform:`scaleX(${e})`}})),p_=e=>Ei.ux.style({border:`1px solid ${h_[e]}`,width:Ei.ux.rem(2.5),height:Ei.ux.rem(.25),boxSizing:"border-box",borderRadius:Ei.ux.rem(Fi.yC)}),g_=e=>Ei.ux.style({backgroundColor:h_[e],border:0,width:"100%",height:"100%",transformOrigin:"left",transition:"transform 0.2s linear"}),h_={[cn.lensAllSuggestionFeedShortForm]:Pi.I.Background.Neutral.Default,[cn.lensAllSuggestionFeed]:Pi.I.Background.Neutral.Default,[cn.lensCorrectnessFeed]:Pi.I.Background.Correctness.Default,[cn.lensClarityFeed]:Pi.I.Background.Clarity.Default,[cn.lensDeliveryFeed]:Pi.I.Background.Delivery.Default,[cn.lensEngagementFeed]:Pi.I.Background.Engagement.Default,[cn.lensStyleGuideFeed]:Pi.I.Background.Neutral.Default,[cn.plagiarismFeed]:Pi.I.Background.Plagiarism.Default,[cn.writingExpertFeed]:Pi.I.Background.Brand.Default,[cn.aiStudioFeed]:Pi.I.Background.Brand.Default},f_=s.UI.Node.make((({view:e,notify:t})=>r.createElement(Mi.F.Fragment,null,e("lenses").pipe(O.U((i=>i.length>0?r.createElement("section",{className:b_,"aria-label":"Filter suggestions"},r.createElement(u_,{count:i.length,hideScrollbar:!0},r.createElement("div",{className:v_(i.length)},i.map(((i,n)=>r.createElement(r.Fragment,{key:i.lensId},n>0?r.createElement("div",{className:y_}):null,r.createElement(Oi.z,{variant:"tertiary",contained:!0,size:"small",name:`${i.label}-button`,style:x_,active:e("activeLensId").pipe(O.U((e=>i.lensId===e))),onClick:t({kind:"lensesHeaderToggle",lensId:i.lensId}),onFocus:t({kind:"lensesHeaderFocus",lensId:i.lensId}),onBlur:t({kind:"lensesHeaderBlur"}),"aria-label":qt.a([e("focusedLensId"),e("focusedLensSuggestionCount")]).pipe(O.U((([e,t])=>(0,a.zG)(e,o.hX((e=>e===i.lensId)),o.g_((()=>{}),(()=>`${i.label}, ${t} ${(0,yt._6)(t,"suggestion","suggestions")}`))))))},r.createElement(m_,{percent:i.percent,lensId:i.lensId}),r.createElement("span",null,i.label)))))))):null)))))),v_=e=>Ei.ux.style({display:"grid",gridTemplateColumns:Array.from({length:e}).map(((e,t)=>t>0?"1px minmax(min-content, 1fr)":"minmax(min-content, 1fr)")).join(" "),alignItems:"center"}),b_=Ei.ux.style({borderTop:`1px solid ${Pi.I.Border.Base.Subdued}`,borderBottom:`1px solid ${Pi.I.Border.Base.Subdued}`,margin:`${Ei.ux.rem(Fi.x)} 0`}),y_=Ei.ux.style({height:"100%",borderLeft:`1px solid ${Pi.I.Border.Base.Subdued}`}),x_={default:{display:"flex",flexDirection:"column",gap:Ei.ux.rem(Fi.F2),padding:`${Ei.ux.rem(.75)} ${Ei.ux.rem(Fi.x)} ${Ei.ux.rem(.5)} ${Ei.ux.rem(Fi.x)}`,borderRadius:0,color:Pi.I.Text.Base.Subdued,fontSize:Ei.ux.rem(.75),lineHeight:Ei.ux.rem(1.125),scrollSnapAlign:"start"},hovered:{boxShadow:"none"},active:{boxShadow:"none"},selected:{boxShadow:"none",fontWeight:"bold",backgroundColor:Pi.I.Background.Base.Subdued}},k_=s.UI.Node.make((({state:e,notify:t})=>{const{onMount:i}=(0,Vo.F)(N.b(t({kind:"longFormFeedEmptyMount"})));return r.createElement(Gl,{style:E_,"data-testid":"long-form-feed-empty",mount:i},e.pipe(O.U((({content:e})=>r.createElement(r.Fragment,null,r.createElement("div",{className:__,"data-focus-id":"empty-state",tabIndex:-1},r.createElement("p",{className:w_},e.title),r.createElement("p",{className:I_},e.description)),r.createElement("div",{className:A_},e.illustration))))))})),S_=s.UI.Node.make((({state:e,notify:t})=>{const{onMount:i}=(0,Vo.F)(N.b(t({kind:"longFormFeedSuccessMount"})));return r.createElement(Gl,{style:E_,"data-testid":"long-form-feed-success",mount:i},e.pipe(O.U((({content:e,goBackFrom:i})=>r.createElement(r.Fragment,null,r.createElement("div",{className:__,"data-focus-id":"empty-state",tabIndex:-1},r.createElement("p",{className:w_},e.title),r.createElement("p",{className:I_},e.description),(0,a.zG)(i,o.g_(a.gn,(e=>r.createElement(Oi.z,{variant:"secondary",style:C_,onClick:t({kind:"goBack",goBackFrom:e})},"See all suggestions"))))),r.createElement("div",{className:A_},e.illustration))))))})),C_={default:{marginTop:Ei.ux.rem(Fi.x),alignSelf:"flex-start"}},E_={padding:`${Ei.ux.rem(Fi.mh)}`,display:"flex",flexDirection:"column-reverse",justifyContent:"center",alignItems:"center",gap:`${Ei.ux.rem(Fi.mh)}`,height:"100%",boxSizing:"border-box"},__=Ei.ux.style({textAlign:"center",padding:`${Ei.ux.rem(Fi.mh)} ${Ei.ux.rem(Fi.mh)} 0 ${Ei.ux.rem(Fi.mh)}`}),w_=Ei.ux.style({margin:0,color:$i.Z.TextBaseDefault,fontSize:Ei.ux.rem(1),lineHeight:"1.5em",fontWeight:700}),I_=Ei.ux.style({margin:0,color:$i.Z.TextBaseSubduedColor,fontSize:Ei.ux.rem(.875),lineHeight:"1.5em",fontWeight:400}),A_=Ei.ux.style({width:Ei.ux.rem(6),height:Ei.ux.rem(6),minWidth:Ei.ux.rem(6),minHeight:Ei.ux.rem(6)}),F_=s.UI.Node.make((({view:e})=>r.createElement(Gl,{"aria-busy":"true",style:P_,"data-testid":"long-form-feed-loading"},r.createElement("div",{className:M_},r.createElement(Yg,null),r.createElement(Mi.F.div,{className:N_},r.createElement("div",{className:L_}),e("supportsShortForm").pipe(O.U((0,P.RN)(r.createElement("div",{className:D_}),null)))),r.createElement("div",{className:j_},r.createElement("div",{className:z_}),r.createElement("div",{className:z_}),r.createElement("div",{className:z_}),r.createElement("div",{className:z_})),r.createElement("div",{className:V_},r.createElement("div",{className:K_}),r.createElement("div",{className:Z_})),r.createElement("div",{className:H_(!0)}),r.createElement("div",{className:H_(!1)}),r.createElement("div",{className:$_},r.createElement("div",{className:W_}),r.createElement("div",{className:Y_}))),r.createElement("div",{className:O_},r.createElement("div",{className:T_},r.createElement(Yg,null),r.createElement("div",{className:R_}),r.createElement("div",{className:B_}),r.createElement("div",{className:U_})),r.createElement("div",{className:G_}),r.createElement("div",{className:T_},r.createElement(Yg,null),r.createElement("div",{className:R_}),r.createElement("div",{className:B_}),r.createElement("div",{className:U_})),r.createElement("div",{className:G_}),r.createElement("div",{className:T_},r.createElement(Yg,null),r.createElement("div",{className:R_}),r.createElement("div",{className:B_}),r.createElement("div",{className:U_})),r.createElement("div",{className:G_}),r.createElement("div",{className:T_},r.createElement(Yg,null),r.createElement("div",{className:R_}),r.createElement("div",{className:B_}),r.createElement("div",{className:U_})))))),P_={padding:0},M_=Ei.ux.style({display:"flex",flexDirection:"column",position:"relative",padding:`${Ei.ux.rem(Fi.mh)}`,borderBottom:`1px solid ${Pi.I.Border.Base.Subdued}`}),O_=Ei.ux.style({display:"flex",flexDirection:"column",margin:Ei.ux.rem(1)}),T_=Ei.ux.style({display:"flex",alignItems:"center",position:"relative",height:Ei.ux.rem(2.25)}),R_=Ei.ux.style({height:Ei.ux.rem(.5),width:Ei.ux.rem(.5),borderRadius:"50%",background:Li.NeutralGray10,marginRight:Ei.ux.rem(1.25)}),B_=Ei.ux.style({height:Ei.ux.rem(.5),width:Ei.ux.rem(3.875),borderRadius:Ei.ux.rem(So.fe),background:Li.NeutralGray10,marginRight:Ei.ux.rem(Fi.mh)}),U_=Ei.ux.style({height:Ei.ux.rem(.5),width:Ei.ux.rem(7.875),borderRadius:Ei.ux.rem(So.fe),background:Li.NeutralGray10}),G_=Ei.ux.style({margin:`${Ei.ux.rem(.5)} ${Ei.ux.rem(1)}`,borderBottom:`1px solid ${Pi.I.Border.Base.Subdued}`}),N_=Ei.ux.style({display:"flex",flexDirection:"row",justifyContent:"space-between",gap:Ei.ux.rem(Fi.x),alignItems:"center"}),L_=Ei.ux.style({width:Ei.ux.rem(11.875),height:Ei.ux.rem(1),borderRadius:Ei.ux.rem(So.fe),background:Li.NeutralGray10}),D_=Ei.ux.style({flex:1,maxWidth:Ei.ux.rem(3.5),height:Ei.ux.rem(.5),borderRadius:Ei.ux.rem(So.fe),background:Li.NeutralGray10}),j_=Ei.ux.style({display:"flex",flexDirection:"row",justifyContent:"space-between",marginTop:Ei.ux.rem(11.5*Fi.F2)}),z_=Ei.ux.style({width:Ei.ux.rem(3.5625),height:Ei.ux.rem(.5),borderRadius:Ei.ux.rem(So.fe),background:Li.NeutralGray10,margin:`0 ${Ei.ux.rem(9.5*Fi.W9)}`}),V_=Ei.ux.style({display:"flex",flexDirection:"row",gap:Ei.ux.rem(Fi.F2),alignItems:"center",marginTop:Ei.ux.rem(8.5*Fi.F2)}),K_=Ei.ux.style({width:Ei.ux.rem(1.25),height:Ei.ux.rem(1.25),borderRadius:"50%",background:Li.NeutralGray10}),Z_=Ei.ux.style({flex:1,height:Ei.ux.rem(.5),borderRadius:Ei.ux.rem(So.fe),background:Li.NeutralGray10}),H_=e=>Ei.ux.style({height:Ei.ux.rem(.5),borderRadius:Ei.ux.rem(So.fe),background:Li.NeutralGray10,marginTop:Ei.ux.rem(e?2.5*Fi.F2:Fi.mh)}),$_=Ei.ux.style({display:"flex",flexDirection:"row",gap:Ei.ux.rem(Fi.mh),alignItems:"center",marginTop:Ei.ux.rem(Fi.mh+Fi.yC)}),W_=Ei.ux.style({width:Ei.ux.rem(4.125),height:Ei.ux.rem(2),borderRadius:Ei.ux.rem(So.xB),background:Li.NeutralGray10}),Y_=Ei.ux.style({width:Ei.ux.rem(3.125),height:Ei.ux.rem(.5),borderRadius:Ei.ux.rem(So.fe),background:Li.NeutralGray10}),q_=(0,La.xb)(JE),X_=s.UI.Grid.make((({slots:e,view:t,notify:i})=>{const{onMount:n}=(0,Vo.F)((0,a.ls)(N.b(i({kind:"longFormFeedMount"})),zo.x(ws.notifyFeedUnmount)));return r.createElement(Gl,{"data-testid":"long-form-feed",style:{padding:0,display:"grid",gridTemplateRows:"auto auto 1fr",height:"100%"},mount:n},r.createElement(gh,{style:Object.assign(Object.assign({},Q_),{padding:`${Ei.ux.rem(Fi.x)} ${Ei.ux.rem(Fi.mh)}`,paddingTop:Ei.ux.rem(Fi.mh)})},r.createElement(q_,{count:t("suggestionCount"),pageRange:t("pageRange"),onPageRangeHeaderMount:i({kind:"partialPageRangeHeaderMount"})}),t("canCollapseToShortForm").pipe(O.U((0,P.RN)(r.createElement(qE,{feedForm:"longForm",onClick:i({kind:"toggleShortFormFeed"})}),null)))),e.lensesHeader,r.createElement(wa,{role:"list","aria-label":"Suggestions","data-name":"suggestions-feed"},e.lensView))})),Q_={display:"flex",alignItems:"center",gap:Ei.ux.rem(Fi.x),justifyContent:"space-between"},J_=s.UI.Group.make({cardList:$v}),ew=s.UI.Union.make("kind",{successState:S_,cardList:J_}),tw=s.UI.Knot.make(X_,{lensesHeader:f_,lensView:ew}),iw=s.UI.Union.make("kind",{loadingState:F_,emptyState:k_,successState:S_,nonEmptyState:tw});var nw=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const rw=e=>{var{style:t}=e,i=nw(e,["style"]);return r.createElement(Gl,Object.assign({},i,{style:t?(0,Ee.Dx)(t).pipe(O.U((e=>Object.assign(Object.assign({},e),sw)))):sw}),i.children)},sw={height:Ei.ux.rem(10.25),minHeight:Ei.ux.rem(10.25),boxSizing:"border-box",display:"flex",flexDirection:"column",justifyContent:"space-around"};function ow(e){return s.UI.Node.make((({state:t,notify:i})=>{const{onMount:n}=(0,Vo.F)(N.b(i({kind:"shortFormFeedEmptyMount"})));return r.createElement(Mi.F.Fragment,null,t.pipe(O.U((({emptyStateContent:t,useVerticalLayout:i})=>{const s=t[e?"successState":"emptyState"],o=e?"short-form-feed-success":"short-form-feed-empty";return i?r.createElement(rw,{style:aw,"data-testid":o,mount:n},r.createElement("div",{className:pw},s.illustration),r.createElement("div",{className:cw,"data-focus-id":"empty-state",tabIndex:-1},r.createElement("p",{className:uw},s.title),r.createElement("p",{className:mw},s.description))):r.createElement(Gl,{style:lw,"data-testid":o,mount:n},r.createElement("div",{className:dw,"data-focus-id":"empty-state",tabIndex:-1},r.createElement("p",{className:uw},s.title),r.createElement("p",{className:mw},s.description)),r.createElement("div",{className:pw},s.illustration))}))))}))}const aw={padding:`${Ei.ux.rem(Fi.mh)}`,alignItems:"center"},lw={padding:`${Ei.ux.rem(Fi.mh)}`,display:"flex",flexDirection:"row",justifyContent:"space-between"},cw=Ei.ux.style({display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}),dw=Ei.ux.style({display:"flex",flexDirection:"column",marginRight:Ei.ux.rem(2),justifyContent:"center"}),uw=Ei.ux.style({margin:0,color:$i.Z.TextBaseDefault,fontSize:Ei.ux.rem(1),lineHeight:Ei.ux.rem(1.5),fontWeight:700}),mw=Ei.ux.style({margin:0,color:$i.Z.TextBaseSubduedColor,fontSize:Ei.ux.rem(.875),lineHeight:Ei.ux.rem(1.3125),fontWeight:400}),pw=Ei.ux.style({width:Ei.ux.rem(4),height:Ei.ux.rem(4),minWidth:Ei.ux.rem(4),minHeight:Ei.ux.rem(4)}),gw=s.UI.Node.make((()=>r.createElement(rw,{"aria-busy":"true",style:hw,"data-testid":"short-form-feed-loading"},r.createElement(Yg,null),r.createElement("div",{className:fw},r.createElement("div",{className:vw}),r.createElement("div",{className:bw})),r.createElement("div",{className:yw},r.createElement("div",{className:xw}),r.createElement("div",{className:kw})),r.createElement("div",{className:Sw(!0)}),r.createElement("div",{className:Cw},r.createElement("div",{className:Ew}),r.createElement("div",{className:_w}))))),hw={padding:`${Ei.ux.rem(Fi.mh)}`,position:"relative"},fw=Ei.ux.style({display:"flex",flexDirection:"row",justifyContent:"space-between",gap:Ei.ux.rem(Fi.x),alignItems:"center"}),vw=Ei.ux.style({width:Ei.ux.rem(11.875),height:Ei.ux.rem(1),borderRadius:Ei.ux.rem(So.fe),background:Li.NeutralGray10}),bw=Ei.ux.style({flex:1,maxWidth:Ei.ux.rem(3.5),height:Ei.ux.rem(.5),borderRadius:Ei.ux.rem(So.fe),background:Li.NeutralGray10}),yw=Ei.ux.style({display:"flex",flexDirection:"row",gap:Ei.ux.rem(Fi.F2),alignItems:"center",marginTop:Ei.ux.rem(6.5*Fi.F2)}),xw=Ei.ux.style({width:Ei.ux.rem(1.25),height:Ei.ux.rem(1.25),borderRadius:"50%",background:Li.NeutralGray10}),kw=Ei.ux.style({flex:1,height:Ei.ux.rem(.5),borderRadius:Ei.ux.rem(So.fe),background:Li.NeutralGray10}),Sw=e=>Ei.ux.style({height:Ei.ux.rem(.5),borderRadius:Ei.ux.rem(So.fe),background:Li.NeutralGray10,marginTop:Ei.ux.rem(e?2.5*Fi.F2:Fi.mh)}),Cw=Ei.ux.style({display:"flex",flexDirection:"row",gap:Ei.ux.rem(Fi.mh),alignItems:"center",marginTop:Ei.ux.rem(Fi.mh+Fi.yC)}),Ew=Ei.ux.style({width:Ei.ux.rem(4.125),height:Ei.ux.rem(2),borderRadius:Ei.ux.rem(So.xB),background:Li.NeutralGray10}),_w=Ei.ux.style({width:Ei.ux.rem(3.125),height:Ei.ux.rem(.5),borderRadius:Ei.ux.rem(So.fe),background:Li.NeutralGray10}),ww=(0,La.xb)(JE),Iw=s.UI.Node.make((({state:e,view:t,notify:i})=>{const{onMount:n}=(0,Vo.F)((0,a.ls)(N.b(i({kind:"shortFormFeedMount"})),zo.x(ws.notifyFeedUnmount))),{onMount:s}=function(e,t){const{onMount:i,ref:n}=gi.P.useElWatcher();return gi.P.useSubscriptionTo(qt.a([n,t]).pipe(O.U((([t,i])=>(0,a.zG)(t,D.bw((t=>t.style.setProperty(e,i)))))))),{onMount:i}}("--cardWidth",p.of("400"));return r.createElement(Gl,{"data-testid":"short-form-feed",style:{padding:`${Ei.ux.rem(Fi.x)} 0 0 0`},mount:e=>{n(e),s(e)}},r.createElement(Mi.F.div,{style:Object.assign(Object.assign({},Aw),{padding:`${Ei.ux.rem(Fi.x)} ${Ei.ux.rem(Fi.mh)}`})},r.createElement(ww,{count:t("suggestionCount"),pageRange:t("pageRange"),onPageRangeHeaderMount:a.Q1}),t("canExpandToLongForm").pipe(O.U((0,P.RN)(r.createElement(qE,{feedForm:"shortForm",onClick:i({kind:"toggleLongFormFeed"})}),null)))),mn.T(e.pipe(f.q(1)),e.pipe(G.e(50))).pipe(O.U((({item:e,isFirst:t,isLast:n,prevItem:s,transitions:l,isWaitingForAlertsToBeApplied:c})=>r.createElement(ld.P,{key:e.id,sduiRootId:e.id,content:e.content,designSystem:Eg({buttonDesignSystemParams:{acceptButtonsLoading:c,cardPosition:{isFirst:t,isLast:n}}}),notify:vd({item:e,kind:"shortFormCardSduiNotify",notify:i}),transitions:Array.from(l),prevContent:(0,a.zG)(s,o.UI((e=>e.content))),onAnimationEnd:i({kind:"shortFormFeedAnimationEnd"}),onMount:i({kind:"shortFormCardMount",item:e}),longFormCardState:{viewKind:"focused"}})))))})),Aw={display:"flex",alignItems:"center",gap:Ei.ux.rem(Fi.x),justifyContent:"space-between"},Fw=s.UI.Union.make("kind",{loadingState:gw,emptyState:ow(!1),successState:ow(!0),nonEmptyState:Iw}),Pw=s.UI.Group.make({feed:Fw}),Mw=s.UI.Group.make({feed:iw}),Ow=s.UI.Union.make("kind",{none:s.UI.Node.empty,shortFormFeed:Pw,longFormFeed:Mw}),Tw=e=>r.createElement(Ri.a1,Object.assign({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},e),r.createElement("path",{d:"M12 7L12 17",strokeLinecap:"round"}),r.createElement("path",{d:"M9 9L9 15",strokeLinecap:"round"}),r.createElement("path",{d:"M15 9L15 15",strokeLinecap:"round"}),r.createElement("path",{d:"M18 11L18 13",strokeLinecap:"round"}),r.createElement("path",{d:"M6 11L6 13",strokeLinecap:"round"})),Rw=s.UI.Node.make((({notify:e})=>r.createElement(Gl,{style:Uw,"data-testid":"voice-banner"},r.createElement(gh,null,"Set your voice"),r.createElement("div",{className:Gw},"Choose how you want your generated text to sound."),r.createElement(Oi.z,{style:Lw,onClick:e({kind:xt.i.Kind.setVoiceButtonClick}),name:"bannerVoiceProfile",size:"small"},r.createElement(Tw,{className:Nw}),"Set voice")))),Bw=s.UI.Union.asOption(Rw),Uw={gap:0,backgroundColor:"#D8F2EC",backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"right",backgroundImage:"url('https://d201kpdrh73vuz.cloudfront.net/text-generation/voice-banner.png')"},Gw=Ei.ux.style({fontWeight:400,fontSize:Ei.ux.rem(.75),lineHeight:Ei.ux.rem(1.125),color:Pi.I.Text.Base.Subdued}),Nw=Ei.ux.style({stroke:"white"}),Lw={default:{alignSelf:"flex-start",marginTop:Ei.ux.rem(Fi.x),padding:`0 ${Ei.ux.rem(Fi.x)} 0 ${Ei.ux.rem(Fi.F2)}`,lineHeight:Ei.ux.rem(1.125),gap:Ei.ux.rem(Fi.F2)},icon:Object.assign({marginLeft:0},(0,Hi.fx)(1.5))},Dw=s.UI.Grid.make((({slots:e})=>r.createElement(r.Fragment,null,e.suggestions,e.voiceBanner,e.documentOverview,e.intent,e.detectedReferences,e.promptStudio))),jw=s.UI.Knot.make(Dw,{suggestions:Ow,voiceBanner:Bw,documentOverview:rC,intent:yC,detectedReferences:DE,promptStudio:TE}),zw=s.UI.Node.make((({state:e,notify:t})=>r.createElement(Mi.F.Fragment,null,e.pipe(O.U((({selectedRange:e,selectedText:i})=>e?r.createElement(Oi.z,{"aria-label":"Show the text used for this response.","aria-describedby":"actions-panel-context",variant:"tertiary",title:"Show the text used for this response.",style:Kw,onClick:t({kind:xt.i.Kind.selectionContextInteraction,range:e,visibility:"attention"}),onMouseEnter:t({kind:xt.i.Kind.selectionContextInteraction,range:e,visibility:"visible"}),onMouseLeave:t({kind:xt.i.Kind.selectionContextInteraction,range:e,visibility:"hidden"}),name:"resultContextHeaderButton"},r.createElement(hE,null,i)):r.createElement("div",{className:Zw,"data-testid":"result-context-header"},r.createElement(hE,null,i)))))))),Vw=s.UI.Union.asOption(zw),Kw={default:{justifyContent:"flex-start",padding:`0 ${Ei.ux.rem(Fi.x)}`,margin:`0 ${Ei.ux.rem(-Fi.x)}`,height:Ei.ux.rem(2.5)}},Zw=Ei.ux.style({display:"flex",alignItems:"center",height:Ei.ux.rem(2.5)}),Hw=e=>r.createElement(Ri.a1,Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e),r.createElement("rect",{width:"16",height:"16",rx:"2"}),r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.7072 5.41421L6.50008 12.6213L2.29297 8.41421L3.70718 7L6.50008 9.79289L12.293 4L13.7072 5.41421Z",fill:"white"})),$w=({isMyVoice:e,isAnimated:t=!1,isBadge:i=!1,label:n="Use my style",inactiveLabel:s=n,onClick:o})=>r.createElement(Oi.z,{variant:"tertiary",name:"toggleVoice",onClick:o,size:"small",role:"checkbox","aria-checked":e,compact:!0,style:Ww(e,t,i)},r.createElement(Hw,Object.assign({width:16,height:16},(0,La.Sh)(Yw,e?qw:Xw))),e?n:s);function Ww(e,t,i){return{default:{display:"flex",alignItems:"center",height:Ei.ux.rem(1.25),lineHeight:Ei.ux.rem(1.125),fontSize:Ei.ux.rem(.75),color:e?Li.Green80:Li.NeutralGray60,backgroundColor:e?Li.Green0:Li.NeutralGray0,transition:t?Ei.ux.seconds(.25):void 0,transitionProperty:t?"color, background-color":void 0},textPosRight:{padding:`0 ${Ei.ux.rem(Fi.F2)}`},icon:{marginRight:Ei.ux.rem(Fi.x),minWidth:Ei.ux.rem(1),minHeight:Ei.ux.rem(1)},hovered:{backgroundColor:e?Ei.ux.color($i.Z.Green10).mix(Ei.ux.color($i.Z.NeutralGray10)).toRGBA().toString():Li.NeutralGray10,color:e?Li.Green80:Li.NeutralGray60},active:{backgroundColor:e?Ei.ux.color($i.Z.Green10).mix(Ei.ux.color($i.Z.NeutralGray10)).toRGBA().toString():Li.NeutralGray10,color:e?Li.Green80:Li.NeutralGray60},disabled:i?{opacity:1,cursor:"default"}:void 0}}const Yw=Ei.ux.style({marginRight:Ei.ux.rem(Fi.x),minWidth:Ei.ux.rem(1),minHeight:Ei.ux.rem(1),borderWidth:Ei.ux.px(1),borderStyle:"solid",borderColor:Pi.I.Text.Base.Subdued,borderRadius:Ei.ux.rem(So.xB),overflow:"hidden",transitionProperty:"background border-color",transitionDuration:Ei.ux.seconds(.25),$nest:{svg:{stroke:"none"}}}),qw=Ei.ux.style({background:Li.Green60,borderColor:Li.Green60,$nest:{path:{fill:Li.White}}}),Xw=Ei.ux.style({background:Li.White,borderColor:Pi.I.Text.Base.Subdued,$nest:{path:{fill:"transparent"}}}),Qw=Ei.ux.style({whiteSpace:"break-spaces",overflowWrap:"anywhere",fontStyle:"normal",fontWeight:"normal",fontSize:Ei.ux.rem(.875),fontFeatureSettings:"'ss03' on",lineHeight:Ei.ux.rem(1.3125),color:Pi.I.Text.Base.Default}),Jw=({children:e})=>r.createElement("div",{className:Qw},e),eI=({text:e})=>""!==e.trim()?r.createElement(Jw,null,e):null,tI=(0,La.xb)(Oi.z),iI=({header:e,onClick:t,disabled:i})=>r.createElement(tI,{variant:"tertiary",compact:!0,disabled:i,onClick:t,className:lI,name:"editResultPrompt",size:"small",style:{hovered:{boxShadow:"none",backgroundColor:$i.Z.ButtonBackgroundTertiaryHover},active:{boxShadow:"none",backgroundColor:$i.Z.ButtonBackgroundTertiaryHover}}},r.createElement(Xy.u,{title:"Edit"},r.createElement("div",{className:cI},r.createElement("div",Object.assign({className:uI},W(e))))));var nI;!function(e){e.FadeIn="FadeIn",e.FadeOut="FadeOut"}(nI||(nI={}));const rI=({iconUrl:e,loading:t,header:i})=>{const[n,s]=r.useState({text:i,animationState:nI.FadeIn});return r.useEffect((()=>{s((e=>Object.assign(Object.assign({},e),{animationState:e.text!==i?nI.FadeOut:e.animationState})));const e=setTimeout((()=>s({text:i,animationState:nI.FadeIn})),250);return()=>clearTimeout(e)}),[i]),r.createElement("div",{className:aI},t?r.createElement(Pd,{className:dI}):(0,a.zG)(e,o.g_(a.gn,(e=>r.createElement("img",{src:e,style:{width:Ei.ux.rem(1.3125),height:Ei.ux.rem(1.3125)}})))),r.createElement("span",Object.assign({"aria-live":"assertive",className:Ei.ux.joinClasses([uI,n.animationState===nI.FadeIn&&mI,n.animationState===nI.FadeOut&&pI])},W(n.text))))},sI="headerBtn",oI=(0,Hi.dD)({height:Ei.ux.rem(1.5),lineHeight:Ei.ux.rem(1.125),padding:`0 ${Ei.ux.rem(Fi.F2)}`,margin:`0 ${Ei.ux.rem(-Fi.F2)}`,overflow:"hidden"},sI),aI=Ei.ux.style({display:"flex",alignItems:"center",gap:Ei.ux.rem(Fi.x+Fi.yC),height:Ei.ux.rem(1.5),fontWeight:400,fontSize:Ei.ux.rem(.875),lineHeight:Ei.ux.rem(1.3125),color:Li.NeutralGray60,overflow:"hidden"}),lI=Ei.ux.joinClasses([sI,Ei.ux.style(oI)]),cI=Ei.ux.style({display:"flex",justifyContent:"space-between",width:"100%",gap:Ei.ux.rem(Fi.F2)}),dI=Ei.ux.style({marginBottom:`-${Ei.ux.rem(Fi.yC)}`,display:"inline-flex",alignItems:"center",justifyContent:"center"}),uI=Ei.ux.style({overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",textAlign:"left",transitionProperty:"opacity",transitionDuration:Ei.ux.seconds(.25)}),mI=Ei.ux.style({opacity:1}),pI=Ei.ux.style({opacity:0}),gI=s.UI.Grid.make((({slots:e,state:t})=>r.createElement(Mi.F.Fragment,null,t.pipe(O.U((({resultText:t,statusText:i,isMyVoiceStatus:n,sourceLabel:s,sourceIconUrl:a})=>r.createElement(Jl,{"data-testid":"my-voice-in-progress-result",header:r.createElement(r.Fragment,null,e.header,r.createElement(hI,null,r.createElement(rI,{header:t.length>0?s:i,iconUrl:t.length>0?a:o.YP,loading:0===t.length}),r.createElement($w,{isBadge:!0,isAnimated:!0,isMyVoice:n,label:"Use my style"}))),body:t.length>0?r.createElement(r.Fragment,null,r.createElement(eI,{text:t}),r.createElement(vI,null)):null,isActive:!0}))))))),hI=({children:e})=>r.createElement("div",{className:fI},e),fI=Ei.ux.style({display:"grid",gridTemplateColumns:"1fr auto"}),vI=()=>r.createElement("div",{className:Ei.ux.style({position:"relative",overflow:"hidden",height:Ei.ux.rem(.5),borderRadius:Ei.ux.rem(So.xB),background:Li.NeutralGray10,flexGrow:1})},r.createElement(Yg,null)),bI=(0,La.xb)(eI),yI=s.UI.Grid.make((({slots:e,view:t})=>r.createElement(Jl,{"aria-busy":"true","data-testid":"in-progress-result",body:r.createElement(bI,{text:t("text")}),header:r.createElement(r.Fragment,null,e.header,r.createElement(rI,{header:"Working on it...",iconUrl:o.YP,loading:!0})),isActive:!0}))),xI=(s.UI.Knot.make(gI,{header:Vw}),s.UI.Knot.make(yI,{header:Vw})),kI=s.UI.Union.asOption(xI);var SI=i(55960),CI=i(91511);const EI=(0,wi.I)("color",(({title:e,titleId:t,desc:i,descId:n,...s})=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true","data-icon":"InterfaceFeedback",stroke:"transparent","aria-labelledby":t,"aria-describedby":n,...s},i?r.createElement("desc",{id:n},i):null,e?r.createElement("title",{id:t},e):null,r.createElement("path",{stroke:"#646B81",d:"M4.25 5.692h7.5M4.25 8h7.5M4 10.956V13l2.667-2.044h6.084c.69 0 1.249-.56 1.249-1.25V4.25C14 3.56 13.44 3 12.75 3h-9.5C2.56 3 2 3.56 2 4.25v5.456c0 .69.56 1.25 1.25 1.25z"})))),_I=(0,wi.I)("color",(({title:e,titleId:t,desc:i,descId:n,...s})=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true","data-icon":"InterfaceReport",stroke:"transparent","aria-labelledby":t,"aria-describedby":n,...s},i?r.createElement("desc",{id:n},i):null,e?r.createElement("title",{id:t},e):null,r.createElement("path",{stroke:"#646B81",strokeLinecap:"round",strokeLinejoin:"round",d:"M3 2v1.161M3 14V9.355m0 0h10l-2.963-3.097L13 3.161H3m0 6.194V3.16"})))),wI=({reportMenuButtonClassName:e,onClickReportOffensive:t,onClickProvideFeedback:i,onOpenChange:n,onDismiss:s,promptResultLabel:o})=>r.createElement(pC,{title:"Open more response options",name:"dismissReportMenu",label:r.createElement(Ki,null,r.createElement(_i.J,{icon:CI.o,accessibilityLabel:""})),buttonClass:e,onAction:e=>{switch(e){case"provideFeedback":return i();case"reportOffensive":return t();case"dismissResult":return s()}},onOpenChange:n},r.createElement(vg,{key:"dismissResult","aria-label":`Delete ${o} output`,textValue:"dismissResult"},r.createElement(Ki,{className:II},r.createElement(_i.J,{icon:WS.o,accessibilityLabel:""})),r.createElement(Ua.x,{as:"span",variant:"text-small"},"Delete")),r.createElement(vg,{key:"provideFeedback","aria-label":`Give feedback on ${o} output`,textValue:"provideFeedback"},r.createElement(Ki,{className:II},r.createElement(_i.J,{icon:EI,accessibilityLabel:""})),r.createElement(Ua.x,{as:"span",variant:"text-small"},"Give feedback")),r.createElement(vg,{key:"reportOffensive","aria-label":`Report offensive content for ${o} output`,textValue:"reportOffensive"},r.createElement(Ki,{className:II},r.createElement(_i.J,{icon:_I,accessibilityLabel:""})),r.createElement(Ua.x,{as:"span",variant:"text-small"},"Report offensive content"))),II=Ei.ux.style({height:Ei.ux.rem(1.5),width:Ei.ux.rem(1.5),margin:`0 ${Ei.ux.rem(Fi.x)} 0 ${Ei.ux.rem(-Fi.F2)}`}),AI=({onInsert:e,onRephrase:t,onDismiss:i,onCopy:n,onProvideFeedback:s,onReportOffensive:l,onReportMenuVisibilityChange:c,disabled:d,isActive:u,resultLabel:m})=>{const p=o.pC(t)||o.pC(e),g=r.createElement(wI,{reportMenuButtonClassName:TI,onClickProvideFeedback:s,onClickReportOffensive:l,onOpenChange:c,onDismiss:i,promptResultLabel:m});return r.createElement("div",{className:FI},r.createElement("div",{className:MI},(0,a.zG)(e,o.UI((e=>r.createElement(Oi.z,{"aria-label":`Insert ${m} output into your document`,name:"insertResult",onClick:e,size:"large",key:"insert",variant:u?"primary":"secondary",textPosition:"everywhere"},r.createElement("div",{className:Ei.ux.style({position:"relative"})},r.createElement("div",{className:Ei.ux.style({fontWeight:"bold",visibility:"hidden"})},"Insert"),r.createElement("div",{className:Ei.ux.style({position:"absolute",top:0,left:0,right:0})},"Insert"))))),o.WG),(0,a.zG)(t,o.UI((e=>r.createElement(Oi.z,{"aria-label":`Retry ${m}`,variant:"tertiary",name:"rephraseResult",onClick:e,disabled:d,size:"large",key:"rephrase"},"Retry"))),o.WG),r.createElement(Mi.F.Fragment,null,p?g:null)),r.createElement(Mi.F.div,{className:OI},p?null:g,(0,a.zG)(n,o.UI((e=>r.createElement(Oi.z,{"aria-label":`Copy ${m} output`,name:"copyResult",onClick:e,size:"large",variant:"tertiary",title:"Copy result"},r.createElement("div",{className:Ei.ux.style({height:Ei.ux.rem(1),width:Ei.ux.rem(1),display:"flex",justifyContent:"center",alignItems:"center"})},r.createElement(SI.c,{width:"1rem",height:"1rem"}))))),o.WG)))},FI=Ei.ux.style({gap:Ei.ux.rem(Fi.x),display:"flex",alignItems:"center",justifyContent:"space-between"}),PI={display:"flex",alignItems:"center",gap:Ei.ux.rem(Fi.x)},MI=Ei.ux.style(PI),OI=Ei.ux.style(PI),TI=Zl,RI=s.UI.Grid.make((({state:e,notify:t,slots:i})=>r.createElement(Mi.F.Fragment,null,e.pipe(O.U((({disabled:e,result:n,originalAction:s})=>r.createElement(Jl,{"data-testid":`ai-notification-${n.id}`,body:r.createElement(r.Fragment,null,r.createElement("div",{className:Ei.ux.style({borderBottom:`0.5px solid ${Li.NeutralGray10}`})},r.createElement(eI,{text:n.text}),r.createElement("div",{className:Ei.ux.style({display:"flex",flexDirection:"row",flexWrap:"wrap",gap:Ei.ux.rem(.5),marginTop:Ei.ux.rem(.5),marginBottom:Ei.ux.rem(.75)})},i.actions)),(0,a.zG)(s,o.UI((i=>r.createElement("div",null,r.createElement(eI,{text:"Continue with your original prompt:"}),r.createElement("div",{className:Ei.ux.style({paddingTop:Ei.ux.rem(.125)})},r.createElement(BI,{disabled:e,action:i,onClick:t({kind:xt.i.Kind.userPromptSubmit,prompt:i})}))))),o.WG)),header:r.createElement("h3",{className:Ei.ux.style({fontSize:Ei.ux.rem(1),marginBottom:Ei.ux.rem(.2),marginTop:0,lineHeight:Ei.ux.rem(1.5)})},"Review your AI use"),isActive:!0,footer:r.createElement(AI,{isActive:!1,onRephrase:o.YP,onInsert:o.YP,onCopy:o.YP,onDismiss:t({kind:xt.i.Kind.resultCardDismissButtonClick,result:n}),onProvideFeedback:t({kind:xt.i.Kind.openFeedbackFormButtonClick,source:Jh.x.Source.resultCard}),onReportOffensive:t({kind:xt.i.Kind.reportOffensiveResultButtonClick,result:n}),onReportMenuVisibilityChange:e=>t({kind:xt.i.Kind.reportMenuVisibilityChange,trigger:to.card(n.id),visible:e})(),disabled:e,resultLabel:n.header.label}),style:{borderColor:Li.Gold40,borderTopWidth:Ei.ux.rem(.375)}}))))))),BI=({action:e,onClick:t,disabled:i})=>r.createElement("button",{onClick:t,disabled:i,className:Ei.ux.style({textDecoration:"underline",color:Li.NeutralGray60,background:Ei.ux.important("none"),border:"none",cursor:"pointer",lineHeight:Ei.ux.rem(1.375),fontSize:Ei.ux.rem(.875),overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",width:"100%",textAlign:"left"})},'"',e.arg.value,'"'),UI=s.UI.List.make(E.bw,sl),GI=s.UI.Knot.make(RI,{actions:UI}),NI=({title:e,url:t,contextText:i})=>{const n=r.useRef(null),s=UE(n,e),l=(0,a.zG)(i,o.fS((()=>s)));return(0,a.zG)(t,o.g_((()=>r.createElement(jI,{tooltip:l},r.createElement("span",{className:LI,ref:n},e))),(t=>r.createElement(jI,{tooltip:l},r.createElement("div",{className:DI},r.createElement(BE.d,{href:t,className:LI,ref:n},e))))))},LI=Ei.ux.style({display:"inline-block",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",textAlign:"left",maxWidth:"100%",$nest:{"&:visited":{color:"inherit"}}}),DI=Ei.ux.style({display:"flex",alignItems:"center",width:"100%",overflow:"hidden"}),jI=({children:e,tooltip:t})=>t?r.createElement(Xy.u,{align:"topCenter",title:r.createElement("div",{className:zI},t)},e):r.createElement(r.Fragment,null,e),zI=Ei.ux.style({maxWidth:Ei.ux.rem(80*Fi.F2),textAlign:"left",whiteSpace:"normal",overflow:"hidden",display:"-webkit-box","-webkit-line-clamp":5,"-webkit-box-orient":"vertical"});var VI=i(67380);const KI={minWidth:Ei.ux.rem(1.5),minHeight:Ei.ux.rem(1.5),lineHeight:Ei.ux.rem(1.5)},ZI=({onRegenerateWithoutReference:e})=>r.createElement(ix,{name:"referenceMenu",title:"Reference menu","aria-label":"Reference menu",label:r.createElement(CI.o,null),theme:{buttonStyle:{default:Object.assign({padding:0},KI),icon:KI}},onAction:t=>{if("regenerateWithoutReference"===t)return e()}},r.createElement(vg,{key:"regenerateWithoutReference",textValue:"regenerateWithoutReference"},r.createElement(VI.a,{className:HI}),"Regenerate without this reference")),HI=Ei.ux.style({marginRight:Ei.ux.rem(Fi.x)}),$I=({label:e,variant:t})=>r.createElement(Ai.V,{variant:t,label:e}),WI=({privacyLevel:e})=>{switch(e.kind){case"public":return r.createElement(YI,null);case"restricted":return r.createElement(qI,null);default:return(0,a.Rz)(e)}},YI=()=>r.createElement(r.Fragment,null),qI=()=>r.createElement(Xy.u,{align:"topLeft",title:r.createElement("div",{className:XI},"This item has restricted access and is only visible to those added to the file")},r.createElement($I,{variant:"neutral",label:"Private"})),XI=Ei.ux.style({width:Ei.ux.rem(9),overflowWrap:"normal",whiteSpace:"normal",textAlign:"left"}),QI=(0,La.xb)(Oi.z),JI=({className:e,isOpen:t,references:i,onOpenChange:n,onRegenerateWithoutReference:s,onReferencesMount:o,onReferencesUnmount:l})=>{const{onMount:c}=(0,Vo.F)((0,a.ls)(N.b(o),zo.x(l)));return r.createElement(Mi.F.div,{className:e,mount:c},r.createElement(QI,{variant:"tertiary",style:eA,onClick:()=>n(!t),name:"collapseReferencesList",size:"small"},r.createElement("span",{className:iA},i.length," ",(0,yt._6)(i.length,"reference","references")),r.createElement(WE,null,t?r.createElement($E,null):r.createElement(HE,null))),r.createElement("ul",{className:nA,hidden:!t,"aria-hidden":!t},i.map((({id:e,privacyLevel:t,title:i,iconUrl:n,url:o,contextText:a},l)=>r.createElement("li",{key:l,className:rA},r.createElement("img",{src:n,className:sA,alt:""}),r.createElement(NI,{title:i,url:o,contextText:a}),r.createElement("div",{className:oA},r.createElement(WI,{privacyLevel:t}),void 0!==s?r.createElement(ZI,{onRegenerateWithoutReference:()=>s(e)}):null))))))},eA={default:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",paddingLeft:Ei.ux.rem(Fi.x),paddingRight:Ei.ux.rem(Fi.x)}},tA={fontSize:Ei.ux.rem(Fi.qp),lineHeight:Ei.ux.rem(Fi.mh+Fi.yC),color:Pi.I.Text.Base.Subdued,userSelect:"none"},iA=Ei.ux.style(tA),nA=Ei.ux.style({fontSize:Ei.ux.rem(Fi.qp),lineHeight:Ei.ux.rem(Fi.mh+Fi.yC),color:Pi.I.Text.Base.Default,margin:0,padding:0}),rA=Ei.ux.style({height:Ei.ux.rem(Fi.sD),display:"flex",alignItems:"center",borderRadius:Ei.ux.rem(So.xB)}),sA=Ei.ux.style({minWidth:Ei.ux.rem(Fi.mh),height:Ei.ux.rem(Fi.mh),marginRight:Ei.ux.rem(Fi.x)}),oA=Ei.ux.style({display:"flex",alignItems:"center",justifyContent:"space-between",marginLeft:"auto"});var aA,lA=i(95869);!function(e){e.generatedText="generatedText",e.knowledgeHubTerm="knowledgeHubTerm",e.none="none"}(aA||(aA={}));const cA=({insertOp:e})=>{const t=dA(e.attributes),i=uA(e.attributes);switch(t){case aA.generatedText:return r.createElement(fA,{style:i},e.insert);case aA.knowledgeHubTerm:return r.createElement(vA,{style:i},e.insert);case aA.none:return hA(e.attributes)?r.createElement(yA,{style:i,href:e.attributes.link},e.insert):r.createElement(bA,{style:i},e.insert);default:return(0,a.Rz)(t)}},dA=e=>{switch(!0){case null==e?void 0:e[SA.knowledgeHubTerm]:return aA.knowledgeHubTerm;case null==e?void 0:e[SA.generatedText]:return aA.generatedText;default:return aA.none}},uA=e=>{const t={};return mA(e)&&(t.fontWeight="bold"),pA(e)&&(t.fontStyle="italic"),gA(e)&&(t.textDecoration="underline"),hA(e)&&(t.color=Li.Blue60),t},mA=e=>!0===(null==e?void 0:e.bold),pA=e=>!0===(null==e?void 0:e.italic),gA=e=>!0===(null==e?void 0:e.underline),hA=e=>"string"==typeof(null==e?void 0:e.link),fA=({children:e,style:t})=>r.createElement("span",{className:xA,style:t},e),vA=({children:e,style:t})=>r.createElement(Xy.u,{title:"from Knowledge Share"},r.createElement("span",{className:kA,style:t},e)),bA=({children:e,style:t})=>r.createElement("span",{style:t},e),yA=({children:e,style:t,href:i})=>r.createElement("a",{style:t,href:i,target:"_blank",rel:"noreferrer"},e),xA=Ei.ux.style({backgroundColor:Li.Green0,borderRadius:Ei.ux.rem(So.fe)}),kA=Ei.ux.style({backgroundColor:Li.Blue0,borderRadius:Ei.ux.rem(So.fe)});var SA;!function(e){e.generatedText="generatedText",e.knowledgeHubTerm="knowledgeHubTerm"}(SA||(SA={}));const CA=({replacementDelta:e})=>r.createElement(Jw,null,e.map(((e,t)=>lA.s.isInsert(e)?r.createElement(cA,{key:t,insertOp:e}):null))),EA=({className:e,title:t,description:i})=>r.createElement("div",{className:Ei.ux.joinClasses([_A,e])},r.createElement("div",{className:wA},r.createElement("span",{className:PA},t)),r.createElement("ul",{className:IA},i.map(((e,t)=>r.createElement("li",{className:AA,key:t},r.createElement(ky.L,{className:FA}),r.createElement("span",{className:MA},e)))))),_A=Ei.ux.style({display:"flex",flexDirection:"column"}),wA=Ei.ux.style({display:"flex"}),IA=Ei.ux.style({display:"flex",flexDirection:"column",listStyle:"none",margin:0,padding:0,$nest:{"& li":{marginTop:Ei.ux.rem(Fi.F2)}}}),AA=Ei.ux.style({display:"flex",alignItems:"center"}),FA=Ei.ux.style({marginRight:Ei.ux.rem(Fi.x),width:Ei.ux.rem(Fi.mh),maxHeight:Ei.ux.rem(Fi.mh+Fi.yC),$nest:{"& path:first-of-type":{stroke:Li.Green60}}}),PA=Ei.ux.style({fontSize:Ei.ux.rem(Fi.qp),lineHeight:Ei.ux.rem(Fi.mh+Fi.yC),fontWeight:700,color:Pi.I.Text.Base.Subdued}),MA=Ei.ux.style({fontSize:Ei.ux.rem(Fi.qp),lineHeight:Ei.ux.rem(Fi.mh+Fi.yC),color:Pi.I.Text.Base.Subdued,flex:1});var OA;!function(e){e.searchLabel="searchLabel",e.clickableSearchLabel="clickableSearchLabel",e.knowledgeHub="knowledgeHub"}(OA||(OA={}));s.UI.Union.asOption(s.UI.Node.make((({notify:e,state:t})=>r.createElement(Mi.F.Fragment,null,t.pipe(O.U((t=>r.createElement($w,{key:"voiceButton",isMyVoice:t.selectedVoice===ce.x.GeneratedTextVoice.user,onClick:e({kind:xt.i.Kind.resultCardToggleGenericVoiceButtonClick,resultId:t.resultId,voice:t.selectedVoice})}))))))));const TA=s.UI.Node.make((({notify:e,state:t})=>r.createElement(Mi.F.div,{className:RA},t.pipe(O.U((t=>{switch(t.kind){case OA.clickableSearchLabel:return r.createElement(iI,{header:t.label,disabled:t.disabled,onClick:e({kind:xt.i.Kind.resultCardHeaderClick,prompt:t.copiablePrompt})});case OA.searchLabel:return r.createElement(rI,{header:t.label,iconUrl:t.iconUrl,loading:!1});case OA.knowledgeHub:return r.createElement(rI,{header:"Knowledge Share content was used.",iconUrl:o.YP,loading:!1});default:return(0,c.L0)(t)}})))))),RA=Ei.ux.style({display:"grid",gridTemplateColumns:"1fr auto",gap:Ei.ux.rem(Fi.x)}),BA=s.UI.Grid.make((({slots:e,state:t,notify:i})=>{const{notifyUnmount:n}=r.useContext(Ko);return r.createElement(Mi.F.Fragment,null,t.pipe(O.U((({result:t,disabled:s,isActive:l,isReferencesOpen:c,isMyVoice:d})=>r.createElement(Jl,{"data-testid":`result-${t.id}`,body:r.createElement(CA,{replacementDelta:(0,a.zG)(t.replacementDelta,S.g_(a.yR,(e=>d?e.user:e.generic)))}),header:r.createElement(r.Fragment,null,e.contextHeader,e.header),footer:r.createElement(r.Fragment,null,r.createElement(AI,{isActive:l,onRephrase:(0,a.zG)(t,o.DT(ce.x.isComplete),o.hX((e=>e.supportedActions.has(ce.x.SupportedAction.rephrase))),o.UI((e=>i({kind:xt.i.Kind.resultCardRephraseButtonClick,result:e,selectedVoice:d?ce.x.GeneratedTextVoice.user:ce.x.GeneratedTextVoice.generic})))),onInsert:(0,a.zG)(o.G(i({kind:xt.i.Kind.resultCardInsertButtonClick,result:t,selectedVoice:d?ce.x.GeneratedTextVoice.user:ce.x.GeneratedTextVoice.generic})),o.hX((()=>t.supportedActions.has(ce.x.SupportedAction.insert)))),onCopy:(0,a.zG)(o.G(i({kind:xt.i.Kind.resultCardCopyButtonClick,result:t,selectedVoice:d?ce.x.GeneratedTextVoice.user:ce.x.GeneratedTextVoice.generic})),o.hX((()=>t.supportedActions.has(ce.x.SupportedAction.copy)))),onDismiss:i({kind:xt.i.Kind.resultCardDismissButtonClick,result:t}),onProvideFeedback:i({kind:xt.i.Kind.openFeedbackFormButtonClick,source:Jh.x.Source.resultCard}),onReportOffensive:i({kind:xt.i.Kind.reportOffensiveResultButtonClick,result:t}),onReportMenuVisibilityChange:e=>i({kind:xt.i.Kind.reportMenuVisibilityChange,trigger:to.card(t.id),visible:e})(),disabled:s,resultLabel:t.header.label}),(0,a.zG)(t.references,o.hX((e=>e.length>0)),o.UI((e=>r.createElement(JI,{className:NA,isOpen:c,references:e,onOpenChange:e=>i({kind:xt.i.Kind.referencesVisibilityChange,visible:e,resultId:t.id})(),onRegenerateWithoutReference:ce.x.isComplete(t)?e=>i({kind:xt.i.Kind.regenerateWithoutReferenceButtonClick,result:t,referenceId:e,selectedVoice:d?ce.x.GeneratedTextVoice.user:ce.x.GeneratedTextVoice.generic})():void 0,onReferencesMount:e=>i({kind:xt.i.Kind.mount,name:Xt.e.referencesList,element:e})(),onReferencesUnmount:()=>n({kind:xt.i.Kind.unmount,name:Xt.e.referencesList})}))),o.WG),(0,a.zG)(ce.x.isComplete(t)?t.changesSummary:o.YP,o.UI((e=>r.createElement(EA,{title:e.title,description:e.description,className:GA}))),o.WG)),isActive:l,onHovered:e=>i({kind:xt.i.Kind.resultCardHoverChange,hovered:e,resultId:t.id})(),onFocused:e=>i({kind:xt.i.Kind.resultCardFocusChange,focused:e,resultId:t.id})(),onCopy:i({kind:xt.i.Kind.resultCardCopyToClipboard,result:t,selectedVoice:d?ce.x.GeneratedTextVoice.user:ce.x.GeneratedTextVoice.generic})})))))})),UA=s.UI.Knot.make(BA,{header:TA,contextHeader:Vw}),GA=Ei.ux.style({marginBottom:Ei.ux.rem(Fi.F2)}),NA=Ei.ux.style({marginTop:Ei.ux.rem(Fi.x)}),LA=s.UI.Union.make("kind",{promptResultComplete:UA,aiUsageNotification:GI}),DA=s.UI.List.make(E.bw,LA),jA=s.UI.Group.make({results:DA}),zA=s.UI.Union.make("kind",{none:s.UI.Node.empty,loading:s.UI.Knot.make(yI,{header:s.UI.Node.empty}),loaded:jA}),VA=Ei.ux.style({display:"grid",height:"100%",alignItems:"end"}),KA=s.UI.Grid.make((({slots:e})=>r.createElement("div",{className:VA},e.documentOverview,e.intent,e.resultList,e.lastResultSurvey,e.inProgressResult,e.generationError,e.detectedReferences))),ZA=s.UI.Knot.make(KA,{documentOverview:rC,intent:yC,resultList:zA,lastResultSurvey:Wc,inProgressResult:kI,generationError:XS,detectedReferences:DE}),HA=s.UI.Group.make({toneReport:Ox}),$A=s.UI.Group.make({playbooks:Mh}),WA=s.UI.Union.asOption(py),YA=s.UI.Union.asOption(ZS),qA=s.UI.Union.asOption(uh),XA=s.UI.Union.make("kind",{home:jw,thread:ZA,error:XS,followUpPrompt:zf,legacyVoiceProfile:Tk,voiceProfile:fS,feedbackForm:Of,skill:Ly,settings:xy,toneReport:HA,plagiarism:WA,writingExpert:YA,aiStudio:qA,performanceScore:Ev,signedOut:_y,playbooks:$A}),QA=s.UI.Union.make("kind",{none:s.UI.Node.empty,skill:Ly,promptStudio:TE}),JA=(0,wi.I)("color",(({title:e,titleId:t,desc:i,descId:n,...s})=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true","data-icon":"InterfaceTransform",stroke:"transparent","aria-labelledby":t,"aria-describedby":n,...s},i?r.createElement("desc",{id:n},i):null,e?r.createElement("title",{id:t},e):null,r.createElement("path",{stroke:"#646B81",strokeLinecap:"round",d:"M2 8h12m0 0L9.448 3M14 8l-4.552 5"})))),eF=e=>e>0?`Return home to review ${e} ${(0,yt._6)(e,"suggestion","suggestions")}`:"Return home",tF=s.UI.Node.make((({state:e,notify:t})=>r.createElement(Mi.F.Fragment,null,e.pipe(O.U((({disabled:e,label:i,count:n})=>r.createElement(Oi.z,{"aria-label":eF(n),disabled:e,name:"suggestions-counter-button",onClick:t({kind:"suggestionCountButtonClick"}),size:"small",title:i,variant:"tertiary"},r.createElement(WE,null,r.createElement(JA,{className:iF})),n>0?`${n} ${(0,yt._6)(n,"suggestion","suggestions")}`:null))))))),iF=Ei.ux.style({$nest:{"& path":{transform:"rotate(180deg)",transformOrigin:"center"}}}),nF=e=>r.createElement(Ri.a1,Object.assign({width:"20",height:"20",viewBox:"0 0 20 20"},e),r.createElement("g",{id:"icon"},r.createElement("g",{id:"Vector"},r.createElement("path",{d:"M14.6429 3.92857L14.607 3.96447C13.3023 5.26917 11.0714 4.34512 11.0714 2.5H8.92857C8.92857 4.34512 6.69774 5.26917 5.39304 3.96447L5.35714 3.92857L3.92857 5.35714L3.96447 5.39304C5.26917 6.69774 4.34512 8.92857 2.5 8.92857V11.0714C4.34512 11.0714 5.26917 13.3023 3.96447 14.607L3.92857 14.6429L5.35714 16.0714L5.39304 16.0355C6.69774 14.7308 8.92857 15.6549 8.92857 17.5H11.0714C11.0714 15.6549 13.3023 14.7308 14.607 16.0355L14.6429 16.0714L16.0714 14.6429L16.0355 14.607C14.7308 13.3023 15.6549 11.0714 17.5 11.0714V8.92857C15.6549 8.92857 14.7308 6.69774 16.0355 5.39304L16.0714 5.35714L14.6429 3.92857Z",fill:"none",strokeLinejoin:"round"}),r.createElement("path",{d:"M12.5 10C12.5 11.3807 11.3807 12.5 10 12.5C8.61929 12.5 7.5 11.3807 7.5 10C7.5 8.61929 8.61929 7.5 10 7.5C11.3807 7.5 12.5 8.61929 12.5 10Z",fill:"none",strokeLinejoin:"round"})))),rF=s.UI.Node.make((({notify:e})=>r.createElement(Oi.z,{variant:"tertiary",onClick:t=>{t&&H(t.currentTarget)&&e({kind:xt.i.Kind.settingsButtonClick,buttonRect:t.currentTarget.getBoundingClientRect()})()},compact:!0,size:"small",name:"settings","aria-label":"Open Settings",title:"Settings"},r.createElement(nF,null)))),sF=s.UI.Union.asOption(rF),oF=s.UI.Node.make((({notify:e})=>r.createElement(Oi.z,{variant:"tertiary",style:lF,onClick:e({kind:xt.i.Kind.headerVoiceButtonClick}),name:"headerVoiceProfileButton",size:"small",title:"My voice","aria-label":"Open my voice profile"},r.createElement(Tw,null)))),aF=s.UI.Union.asOption(oF),lF={default:{padding:0},icon:(0,Hi.fx)(1.5)},cF=(0,La.xb)(Oi.z),dF=s.UI.Node.make((({notify:e,view:t})=>r.createElement("div",{className:mF},r.createElement(cF,{variant:"tertiary",compact:!0,onClick:t("activeView").pipe(O.U((t=>e({kind:xt.i.Kind.headerGoBackButtonClick,goBackFrom:t})))),size:"small",title:"Back to Home","aria-label":"Back to Home",name:"goBack"},r.createElement(WE,null,r.createElement(JA,{className:uF}))),r.createElement(Mi.F.div,{className:pF},t("activeViewIconUrl").pipe(O.U(o.g_(a.gn,(e=>r.createElement("img",{src:e,style:{width:Ei.ux.rem(1.25),height:Ei.ux.rem(1.25)},alt:"","aria-hidden":"true"}))))))))),uF=Ei.ux.style({$nest:{"& path":{transform:"rotate(180deg)",transformOrigin:"center"}}}),mF=Ei.ux.style({display:"flex",alignItems:"center",gap:Ei.ux.rem(Fi.x),color:Li.NeutralGray60,fontWeight:400,fontSize:Ei.ux.rem(.75),lineHeight:Ei.ux.rem(1.125)}),pF=Ei.ux.style({display:"flex",alignItems:"center",gap:Ei.ux.rem(Fi.x)}),gF=e=>r.createElement(Ri.a1,Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e),r.createElement("path",{d:"M4 4L8 8M12 12L8 8M8 8L12 4M8 8L4 12",stroke:"#646B81",strokeLinecap:"round"})),hF=s.UI.Node.make((({notify:e})=>r.createElement(Oi.z,{variant:"tertiary",onClick:e({kind:xt.i.Kind.headerCloseButtonClick}),compact:!0,size:"small",name:"headerClose",title:"Close Grammarly Assistant","aria-label":"Close Grammarly Assistant"},r.createElement(gF,null))));var fF=i(27259),vF=i(75212),bF=i(53976);const yF=e=>r.createElement(Ri.a1,Object.assign({width:"24",height:"24",viewBox:"0 0 24 24"},e),r.createElement("path",{d:"M14.256,7.346C15.403,7.699 16.301,8.597 16.654,9.744C16.759,10.085 17.241,10.085 17.346,9.744C17.699,8.597 18.597,7.699 19.744,7.346C20.085,7.241 20.085,6.759 19.744,6.654C18.597,6.301 17.699,5.403 17.346,4.256C17.241,3.915 16.759,3.915 16.654,4.256C16.301,5.403 15.403,6.301 14.256,6.654C13.915,6.759 13.915,7.241 14.256,7.346ZM17,5.339C17.392,6.034 17.967,6.608 18.661,7C17.967,7.392 17.392,7.966 17,8.661C16.608,7.967 16.034,7.392 15.339,7C16.034,6.608 16.608,6.034 17,5.339Z",fill:"inherit",stroke:"none"}),r.createElement("path",{d:"M6.426,13.577C8.338,14.165 9.835,15.662 10.423,17.574C10.598,18.142 11.402,18.142 11.577,17.574C12.165,15.662 13.662,14.165 15.574,13.577C16.142,13.402 16.142,12.598 15.574,12.423C13.662,11.835 12.165,10.338 11.577,8.426C11.402,7.858 10.598,7.858 10.423,8.426C9.835,10.338 8.338,11.835 6.426,12.423C5.858,12.598 5.858,13.402 6.426,13.577ZM11,9.69C11.693,11.138 12.862,12.307 14.31,13C12.862,13.693 11.693,14.862 11,16.31C10.307,14.862 9.138,13.693 7.69,13C9.138,12.307 10.307,11.138 11,9.69Z",fill:"inherit",stroke:"none"})),xF=e=>r.createElement(Ri.a1,Object.assign({width:"24",height:"24",viewBox:"0 0 24 24"},e),r.createElement("path",{d:"M6.426,13.577C8.338,14.165 9.835,15.662 10.423,17.574C10.598,18.142 11.402,18.142 11.577,17.574C12.165,15.662 13.662,14.165 15.574,13.577C16.142,13.402 16.142,12.598 15.574,12.423C13.662,11.835 12.165,10.338 11.577,8.426C11.402,7.858 10.598,7.858 10.423,8.426C9.835,10.338 8.338,11.835 6.426,12.423C5.858,12.598 5.858,13.402 6.426,13.577ZM11,9.69C11.693,11.138 12.862,12.307 14.31,13C12.862,13.693 11.693,14.862 11,16.31C10.307,14.862 9.138,13.693 7.69,13C9.138,12.307 10.307,11.138 11,9.69Z",fill:"inherit",stroke:"none"}));const kF=s.UI.Node.make((({state:e,view:t,notify:i})=>{const{ref:n,onMount:s}=gi.P.useElWatcher(),o=r.useMemo((()=>n.pipe(U.oA,m.w((e=>bi.R(e,"mouseenter").pipe(bF.c(p.of(null).pipe(ad.g(500),Lt.R(bi.R(e,"mouseleave"))))))),N.b(i({kind:xt.i.Kind.creditsInfoHover})))),[n]);gi.P.useSubscriptionTo(o);const{onMount:l}=(0,Vo.F)((0,a.ls)(ai.M(t("genAIAvailability"),t("user")),O.U((([e,t,i])=>({genAIAvailability:t,user:i}))),N.b((({genAIAvailability:e,user:t})=>{i({kind:xt.i.Kind.creditsInfoMount,isUphook:!v._.isActive(e)&&!be(t)})()}))));return r.createElement(Mi.F.Fragment,null,e.pipe(O.U((({user:e,genAIAvailability:t})=>{let n;if(v._.isActive(t)){const[e,i]=function(e){const t=`${Number(e.promptsRemaining).toLocaleString()}/${Number(e.promptsAllocated).toLocaleString()} prompts left. `,i=v._.Active.daysUntilRefillDate(e.refillDate),n=v._.Active.hoursUntilRefillDate(e.refillDate);return i>0?[t,`Next refill in ${i} ${(0,yt._6)(i,"day","days")}.`]:n>0?[t,`Next refill in ${n} ${(0,yt._6)(n,"hour","hours")}.`]:[t,"Next refill in less than an hour."]}(t);n=r.createElement(r.Fragment,null,e,r.createElement("br",null),i)}else n=be(e)?"To get more prompts, contact support.":"To get more prompts, upgrade to Pro.";const o=r.createElement(SF,{promptsRemaining:t.promptsRemaining});return be(e)&&v._.isActive(t)?r.createElement(r.Fragment,null,v._.isActiveUnlimited(t)?null:r.createElement(Xy.u,{title:n},r.createElement("div",{ref:s,className:EF},o))):r.createElement("div",{ref:s},r.createElement(Oi.z,{variant:"tertiary",compact:!0,onClick:i({kind:xt.i.Kind.creditsInfoClick,isUphook:!v._.isActive(t)&&!be(e)}),size:"small",title:n,name:"creditsInfo",mount:l,textPosition:"everywhere"},o))}))))})),SF=({promptsRemaining:e})=>e<50?r.createElement("div",{className:_F},r.createElement(xF,{className:AF}),0===e?r.createElement(fF.E,{className:FF}):r.createElement(vF.F,{className:FF})):r.createElement(yF,{className:AF}),CF=s.UI.Union.asOption(kF),EF=Ei.ux.style({cursor:"help"}),_F=Ei.ux.style({position:"relative"}),wF=(0,Hi.fx)(1.5),IF=(0,Hi.fx)(.75),AF=Ei.ux.style(wF),FF=Ei.ux.style(Object.assign(Object.assign({},IF),{top:Ei.ux.rem(1/16),right:0,position:"absolute"})),PF=e=>r.createElement(Ri.a1,{className:e.className,viewBox:"0 0 20 20",width:22,height:22},r.createElement("path",{d:"M0 10C0 4.478 4.459 0 9.96 0c5.502 0 9.96 4.477 9.96 10 0 4.833-3.412 8.864-7.95 9.797A9.937 9.937 0 0 1 9.962 20H0V10Z",fill:"#027E6F",stroke:"none"}),r.createElement("path",{d:"M16.853 9.053h-4.489l-1.057 1.838h3.701c-.58 3.197-4.12 5.374-7.66 3.533a4.175 4.175 0 0 1-1.78-1.771c-2.036-3.892.745-7.807 4.415-7.807 1.513 0 2.875.665 3.811 1.72l.949-1.65a6.881 6.881 0 0 0-5.25-1.888c-3.462.24-6.269 3.121-6.438 6.6-.192 3.996 2.989 7.305 6.925 7.305 3.937 0 6.935-3.124 6.935-6.963 0-.312-.024-.618-.063-.917Z",fill:"#fff",stroke:"none"})),MF=({className:e})=>r.createElement(PF,{className:Ei.ux.joinClasses([OF,e])}),OF=Ei.ux.style(Object.assign({display:"flex",alignItems:"center",justifyContent:"center"},(0,Hi.fx)(1.375))),TF=s.UI.Node.make((({view:e})=>r.createElement(Mi.F.Fragment,null,e("version").pipe(O.U(o.g_((()=>r.createElement(MF,null)),(e=>r.createElement("div",{className:RF},r.createElement(MF,null),r.createElement("small",null,`v${e}`))))))))),RF=Ei.ux.style({display:"flex",alignItems:"center",gap:Ei.ux.rem(.5)}),BF=s.UI.Node.make((({state:e})=>r.createElement(Mi.F.h3,{className:GF},e))),UF=s.UI.Union.asOption(BF),GF=Ei.ux.style({textAlign:"center",fontSize:Ei.ux.rem(.75),fontWeight:700,lineHeight:Ei.ux.rem(1.125)}),NF=s.UI.Knot.make(s.UI.Grid.make((({slots:e})=>r.createElement("div",{className:HF},e.button))),{button:tF}),LF=s.UI.Union.make("kind",{logoOnly:TF,suggestionCount:NF,backButton:dF}),DF=s.UI.Grid.make((({slots:e})=>r.createElement("div",{className:KF},e.credits,e.voiceButton,e.settingsButton,e.closeButton))),jF=s.UI.Knot.make(DF,{voiceButton:aF,credits:CF,settingsButton:sF,closeButton:hF}),zF=s.UI.Grid.make((({slots:e})=>r.createElement(r.Fragment,null,e.left,r.createElement("div",{className:ZF},e.pageTitle),e.right))),VF=s.UI.Knot.make(zF,{left:LF,pageTitle:UF,right:jF}),KF=Ei.ux.style(Object.assign(Object.assign({},{display:"flex",alignItems:"center"}),{gap:Ei.ux.rem(Fi.F2)})),ZF=Ei.ux.style({flexGrow:1}),HF=Ei.ux.style({marginLeft:Ei.ux.rem(-Fi.F2)}),$F=s.UI.Knot.make(yc,{a11yNotification:xo,header:VF,content:XA,footer:QA,notifications:Bo,onboarding:Lo});function WF(e){return()=>e.a11y.state.view()}function YF(e){return s.Z.composeKnot({content:(t=e.notifications,s.Z.composeList(E.Ot,(()=>t.state.view(E.GY)),(e=>function(e,t){return s.Z.fromSideEffect((e=>{switch(e.kind){case"dismissNotification":return t.dismiss(e.id);case"mouseOver":return t.hover(!0);case"mouseOut":return t.hover(!1);default:(0,c.L0)(e)}}),e)}(e,t))))});var t}var qF=i(32734);function XF(e){return(0,a.ls)(qF.B(),(t=>{return mn.T(t.pipe((i=e.logger,n=e.lifecycle,(0,a.ls)(h.h(fc),N.b((e=>{n.onVisuallyReady({content:e.element})})),O.U((e=>o.G(e.element))),gi.P.FocusTrap.dynamicFocusTrap(gi.P.FocusTrap.InitialFocus.none,xi,ki(i)),Sr.l()))),t.pipe(function(e){return(0,a.ls)(h.h(vc),f.q(1),N.b((t=>{e.onReadyToDrag({dragHandle:t.element})})),Sr.l())}(e.lifecycle)),t.pipe(function(e){return(0,a.ls)(h.h(hc),N.b((t=>e.onFocusStateChange({isFocused:t.focused}))),Sr.l())}(e.lifecycle)),t.pipe(function(e){return(0,a.ls)(h.h(bc),N.b((t=>e.onSizeChange({width:t.rect.width,height:t.rect.height}))),Sr.l())}(e.lifecycle)),d.h.combine(e.assistant.state.view("canScroll"),function(e){return d.h.combine(e.assistant.state.view("genAISession"),e.promptActions.state.view("contextualActions"),e.userSurvey.state,e.routing.activeView,((e,t,i,n)=>(0,a.zG)(e,o.tS(le.toStarted),o.hX((()=>"thread"===n.kind)),o.UI((e=>{const n=(0,a.zG)(e.inProgressResult,o.g_((()=>""),(e=>e.text))),r=`${e.results.length}`,s=o.pC(i.activeSurvey),l=(0,a.zG)(t,o.g_((()=>""),(0,a.ls)((e=>e.actions),E.ke(5),E.UI((e=>e.id)),(e=>e.join("-")))));return`${n}_${r}_${s}_${l}`})))))}(e),e.promptMenu.state,d.h.combine(e.lifecycle.heightBehavior,e.textEditor.state.view("hasBeenNonEmpty"),e.routing.activeView.view("kind"),(0,a.zG)(e.revision,o.g_((()=>d.h.create(null).view()),(e=>e.feedForm.state.view("feedForm")))),((t,i,n,r)=>"fitContent"===t.kind?Object.assign(Object.assign({},t),{height:QF(t,n,r,i,e.experience)}):t)),e.lifecycle.widthBehavior,e.lifecycle.dragBehavior,((e,t,i,n,r,s)=>({canScrollContent:e,menuRef:(0,a.zG)(i,o.tS((e=>e.promptMenuContainer))),scrollContentToBottomToken:t,heightBehavior:n,widthBehavior:r,dragBehavior:s}))));var i,n}))}function QF(e,t,i,n,r){return void 0!==e.height?e.height:"plagiarism"===t||"writingExpert"===t||"aiStudio"===t||"home"===t&&"longForm"===i&&("genAIAndRevision"===r&&(0,a.zG)(n,o.Gg(a.yR))||"revision"===r)?e.maxHeight:e.height}function JF(e,t){return s.Z.composeOption(s.Z.fromSideEffect((t=>e.notify(t)),e.userSurvey.state.pipe(O.U((e=>(0,a.zG)(e.activeSurvey,o.UI((t=>({survey:t,state:e})))))),U.oA,O.U((({survey:e,state:t})=>({survey:e,stage:t.stage,transitionStage:t.transitionStage,rating:t.rating,openAnswer:(0,a.zG)(t.openAnswer,o.fS((0,a.a9)(""))),ratingLabels:(0,a.zG)(t.activeSurvey,o.g_((0,a.a9)([]),(e=>e.ratingLabels))),errors:t.errors}))))),(()=>qt.a(e.userSurvey.state,t.pipe(ht.O(o.YP)),e.routing.activeView).pipe(O.U((([{activeSurvey:e,stage:t},i,n])=>(0,a.zG)(e,o.hX((e=>"aiStudio"===n.kind&&(0,a.zG)(i,D.FX(pn.j.Item.Id.from(e.resultOrItemId)))&&t!==Hs.Stage.Type.Closed))))))))}function eP(e){return void 0!==e.find((e=>"applyAlerts"===e.type||"removeAlerts"===e.type))}function tP(e,t){return i=>(0,a.zG)(e||t?tr.ab.map(i,(i=>"button"!==i.type?i:e&&i.name.value===String(ar.MU.ButtonPrev)||t&&i.name.value===String(ar.MU.ButtonNext)?Object.assign(Object.assign({},i),{state:ar.BN.Disabled}):i)):o.G(i),o.fS((()=>i)))}const iP=e=>(0,a.zG)(tr.ab.map(e,(e=>"button"!==e.type?e:e.name.value===String(ar.MU.ButtonPrev)||e.name.value===String(ar.MU.ButtonNext)?Object.assign(Object.assign({},e),{state:ar.BN.Hidden}):e)),o.fS((()=>e)));function nP(e,t,i,n,r){return s.Z.fromSideEffect((i=>{switch(i.kind){case"longFormCardSduiNotify":return eP(i.actions)&&t.onSuggestionAddressed(),e.processActions(i.actions,i.item,i.scope,i.sourceId);case"longFormCardMount":return e.onItemMount(i.isFocused,i.item);case xt.i.Kind.actionsMenuMuteClick:case xt.i.Kind.actionsMenuReportIncorrectClick:case xt.i.Kind.actionsMenuReportOffensiveClick:case xt.i.Kind.addToDictionaryClick:case xt.i.Kind.suggestionAcceptClick:case xt.i.Kind.suggestionDismissClick:return r&&r(i);default:(0,c.L0)(i)}}),qt.a([i.pipe(O.U(o.tS((e=>(0,a.zG)(o.ij(e.items[n]),o.UI((t=>({feedState:e,item:t}))))))),U.oA),e.isWaitingForAlertsToBeApplied]).pipe(O.U((([{feedState:e,item:t},i])=>{const r=(0,a.zG)(e.focusedItemId,o.Gg((e=>t.id===e)));return{item:r?Object.assign(Object.assign({},t),{content:(0,a.zG)(t.content,tP(0===n,n===e.items.length-1),iP)}):t,prevFocusedItemPosition:(0,a.zG)(e.prevFocusedItemPosition,o.hX((()=>r))),isFirst:0===n,isLast:n===e.items.length-1,isFocused:r,isWaitingForAlertsToBeApplied:i}})),R.skipBy(_g)))}function rP(e,t,i,n,r,a){const l=i.pipe(O.U(o.UI((e=>{return t=e.items[n].id,pn.j.Item.Id.from(t.split("_")[0]);var t}))));return s.Z.composeKnot({LongFormCard:nP(e,t,i,n,a),Survey:JF(r,l)})}function sP(e,t){return i=>t.pipe(O.U(o.g_((()=>[]),(e=>e.items))),co.g("length"),m.w((n=>qt.a(n.map(((n,r)=>(i=>n=>rP(e.feed,e.suggestionCount,t,n,e.vms,e.notify)(i.pipe(h.h((e=>e.key===n)),O.U((e=>e.action)))))(i)(r)))))))}function oP(e,t){const i=i=>n=>function(e,t,i,n,r){return s.Z.composeKnot({root:()=>i.pipe(O.U(o.tS((e=>(0,a.zG)(o.ij(e.items[n]),o.UI((t=>({itemId:t.id,isFocused:(0,a.zG)(e.focusedItemId,o.Gg((e=>t.id===e)))}))))))),U.oA,R.skipBy(Lg)),content:s.Z.animatingFlow(nP(e,t,i,n,r),((e,t)=>(0,a.zG)(e,o.hX((e=>!e.isFocused&&t.isFocused)),o.tS((()=>(0,a.zG)(t.prevFocusedItemPosition,o.UI((e=>e<0?jr.Hk("collapseForward","expandForward"):jr.Hk("collapseBackward","expandBackward")))))))))})}(e.feed,e.suggestionCount,t,n,e.notify)(i.pipe(h.h((e=>e.key===n)),O.U((e=>e.action))));return e=>t.pipe(O.U(o.g_((()=>[]),(e=>e.items))),co.g("length"),m.w((t=>qt.a(t.map(((t,n)=>i(e)(n)))))))}function aP(e){return e.pipe(_r.R(((e,t)=>(0,a.zG)(t,o.UI((t=>({items:Sn(t.collection),focusedItemId:(0,a.zG)(Cn(t.collection),o.UI((e=>e.id))),focusedItemIndex:En(t.collection),prevFocusedItemPosition:(0,a.zG)(e,o.tS((e=>(0,a.zG)(k.Yt(o.Kw)({prevIdx:e.focusedItemIndex,currIdx:En(t.collection)}),o.tS((e=>e.prevIdx===e.currIdx?o.YP:e.prevIdx<e.currIdx?o.G(-1):o.G(1))),o.wp((()=>e.prevFocusedItemPosition))))))}))))),o.YP))}const lP=e=>t=>{switch(t.kind){case"seeAllSuggestions":return void e.aiStudio.seeAllSuggestions();case"tryAgain":return void e.aiStudio.tryAgain();case"longFormCardSduiNotify":return e.feed.processActions(t.actions,t.item,t.scope,t.sourceId);case xt.i.Kind.actionsMenuMuteClick:case xt.i.Kind.actionsMenuReportIncorrectClick:case xt.i.Kind.actionsMenuReportOffensiveClick:case xt.i.Kind.suggestionAcceptClick:case xt.i.Kind.suggestionDismissClick:return e.notify&&e.notify(t);default:(0,c.L0)(t)}};const cP=e=>s.Z.composeUnion({loading:()=>p.of(null),loadedEmpty:()=>p.of(null),loadedNonEmpty:s.Z.fromSideEffect((t=>e.notify(t)),e.playbooks.state.pipe(h.h(Gt.isLoadedNonEmpty),O.U((({playbooks:e})=>({playbooks:e})))))},(()=>e.playbooks.state.view((({kind:e})=>({kind:e})))));function dP(e){return s.Z.fromSideEffect((t=>e.notify(t)),d.h.combine(e.feedbackForm.stagingFeedbackFormData,e.feedbackForm.domain,((e,t)=>{var i;return{formData:e,domain:t,source:null!==(i=null==e?void 0:e.source)&&void 0!==i?i:Jh.x.Source.resultCard}})))}function uP(e){return s.Z.composeOption(function(e){return s.Z.fromSideEffect((t=>e.notify(t)),e.assistant.state.view("selectedAction").view(o.tS((e=>(0,a.zG)(e.args[0].hints,o.UI((t=>({header:e.label,iconUrl:e.icon.right,hintsHeader:t.header,hintsItems:t.items,radioOptions:Q.match({string:()=>o.YP,radio:e=>o.G(e.radioOptions)})(e.args[0])}))))))).pipe(U.oA))}(e),(()=>e.assistant.state.view("selectedAction").view(o.tS((e=>e.args[0].hints)))))}const mP=()=>p.of(null);function pP({revision:e,textEditor:t,user:i}){return s.Z.composeOption((0,a.zG)(e,o.g_((()=>mP),(e=>{return n={performanceScore:e.performanceScore.performanceScore.pipe(U.oA),isTextEmpty:t.state.view("textLength").view(o.Gg((e=>e<=0))),userInstitutionInfo:i.institutionInfo,onPerformanceScoreReportMount:t=>e.performanceScore.onPerformanceScoreReportMount(t)},s.Z.composeKnot({root:s.Z.fromSideEffect((e=>n.onPerformanceScoreReportMount(e.score)),n.performanceScore),overallScore:()=>qt.a([n.performanceScore,n.isTextEmpty]).pipe(O.U((([e,t])=>t?{status:"tooSmall"}:e))),outcomeScores:()=>qt.a([n.performanceScore,n.isTextEmpty,n.userInstitutionInfo]).pipe(O.U((([e,t,i])=>({score:e,isTextEmpty:t,styleGuideEnabled:(0,a.zG)(i,o.Gg((e=>!!e.styleGuideEnabled))),institutionLogoUrl:(0,a.zG)(i,o.tS((e=>o.ij(e.logoUrl))))}))))});var n}))),(()=>(0,a.zG)(e,o.g_((()=>p.of(o.YP)),(e=>e.performanceScore.performanceScore)))))}function gP(e,t,i){return s.Z.fromSideEffect((n=>{switch(n.kind){case"uphookShow":e.uphook.onUphookShow(t,i,n.uphookConfig);break;case"uphookClick":e.uphook.onUphookClick(t,i,n.uphookConfig);break;default:(0,c.L0)(n)}}),m.w((()=>p.of({isEligibleForFreeTrial:e.uphook.isEligibleForFreeTrial,isEligibleForInProductDiscount:e.uphook.isEligibleForInProductDiscount,hasUphookHubEnabled:e.uphook.hasUphookHubEnabled,uphookConfiguration:o.g_((()=>o.YP),(e=>o.G(e[i])))(e.uphook.uphookConfigurationPerSlot.get())})))(e.uphook.uphookConfigurationPerSlot))}function hP(e){return s.Z.composeUnion({loadingState:fP(e),emptyState:vP(e),nonEmptyState:bP(e),uphookState:yP(e),improvedUphookState:xP(e)},(()=>function(e){return d.h.combine(e.user.isPremium,e.feed.feed,e.feed.feedReset,e.plagiarism.state,e.uphook.hasImprovedUphookTestTreatment,((e,t,i,n,r)=>(0,a.zG)(k.gz(o.Kw)(t,n.state),o.g_((()=>e?"loadingState":r?"improvedUphookState":"uphookState"),(([t,{checking:n}])=>e?kn(t.collection)>0?"nonEmptyState":n||i?"loadingState":"emptyState":r?"improvedUphookState":"uphookState")))))}(e).view((e=>({kind:e})))))}function fP(e){return s.Z.fromSideEffect((e=>(0,c.L0)(e)),e.plagiarism.state.view((e=>({aiDetectorEnabled:"plagiarismAndAiDetector"===e.kind}))))}function vP(e){return s.Z.fromSideEffect((t=>{switch(t.kind){case"seeAllSuggestions":return e.plagiarism.seeAllSuggestions();case"plagiarismFeedSuccessMountAction":return e.feed.onSuccessStateMount();default:(0,c.L0)(t)}}),e.plagiarism.state.view((e=>({aiDetectorScore:"plagiarismAndAiDetector"===e.kind?(0,a.zG)(e.state,o.tS((e=>e.aiDetectorScore))):o.YP}))))}function bP(e){const t=aP(e.feed.feed).pipe(R.shareReplay({bufferSize:1,refCount:!0}));return s.Z.composeKnot({root:s.Z.fromSideEffect((t=>{switch(t.kind){case"plagiarismFeedMount":return e.feed.onFeedMount();case"sduiCitationDropdownSelect":return e.plagiarism.onCitationDropdownSelect(t.actions,t.sourceId);case"sduiCitationDropdownOpen":return e.plagiarism.onCitationDropdownOpen(t.currentSourceId);default:(0,c.L0)(t)}}),d.h.combine(e.plagiarism.state.view((e=>({citationDropdown:(0,a.zG)(e.state,o.tS((e=>e.citationDropdown))),aiDetectorEnabled:"plagiarismAndAiDetector"===e.kind}))),e.pageRange.pageRange,(({citationDropdown:e,aiDetectorEnabled:t},i)=>({citationDropdown:e,aiDetectorEnabled:t,pageRange:i})))),cardList:oP(e,t),footer:()=>e.plagiarism.state.view((e=>"plagiarismAndAiDetector"===e.kind?(0,a.zG)(e.state,o.tS((e=>(0,a.zG)(e.originality,o.UI((t=>({originality:t,sourceCount:e.sourceCount,aiDetectorScore:e.aiDetectorScore}))))))):(0,a.zG)(e.state,o.tS((e=>(0,a.zG)(e.originality,o.UI((t=>({originality:t,sourceCount:e.sourceCount,aiDetectorScore:o.YP})))))))))})}function yP(e){return s.Z.composeKnot({root:s.Z.fromSideEffect((t=>{if("plagiarismUphookDismiss"===t.kind)e.uphook.onUphookDismiss("plagiarism","plagiarismView",o.YP),e.plagiarism.seeAllSuggestions();else(0,c.L0)(t.kind)}),qt.a([e.plagiarism.state.view((e=>"plagiarismAndAiDetector"===e.kind))]).pipe(O.U((([e])=>({aiDetectorEnabled:e}))))),uphook:gP(e,"plagiarism","plagiarismView")})}function xP(e){return s.Z.composeKnot({root:s.Z.fromSideEffect((()=>{}),qt.a([e.plagiarism.state.view((e=>({aiDetectorEnabled:"plagiarismAndAiDetector"===e.kind})))]).pipe(O.U((([{aiDetectorEnabled:e}])=>({aiDetectorEnabled:e}))))),uphook:gP(e,"plagiarism","plagiarismView")})}function kP(e){return()=>p.of((0,a.zG)(e.settings,o.tS((e=>e.getView())),o.g_((()=>({content:null})),(e=>({content:e})))))}function SP(e){return s.Z.composeKnot({content:s.Z.composeUnion({free:()=>p.of(null),premium:()=>p.of(null),business:()=>p.of(null)},(()=>e.assistant.state.view("user").view((e=>ve(e)?{kind:"institution"===e.type?"business"===e.institutionType?"business":"premium":"premium"===e.type?"premium":"free"}:{kind:"free"})))),signIn:s.Z.composeOption(s.Z.fromSideEffect((t=>{e.notify(t)}),p.of(void 0)),(()=>e.assistant.state.view("userCanSignIn").view((e=>e?o.G(null):o.YP))))})}function CP(e,t){const i=d.h.combine(e.skill.state,e.lifecycle.heightBehavior,((e,i)=>(0,a.zG)(e,o.hX((()=>"fitContainer"===i.kind?!t:t)),o.UI((e=>({displayName:e.skill.displayName,status:e.status,srcUrl:Rs.createUrlWithHashParams(e.skill),size:{width:e.size.width,height:"fitContainer"===i.kind?"100%":e.size.height}}))))));return s.Z.composeOption(function(e,t){return s.Z.fromSideEffect((t=>e.notify(t)),t)}(e,i.pipe(U.oA)),(()=>i))}function EP(e){return s.Z.composeUnion({loading:()=>p.of(null),loadedEmpty:s.Z.fromSideEffect((t=>e.notify(t)),p.of(null)),loadedNonEmpty:s.Z.composeKnot({root:s.Z.fromSideEffect((t=>e.notify(t)),(0,a.zG)(e.toneDetector,o.g_((()=>p.of(null)),(e=>e.state.pipe(h.h(ui.isLoadedNonEmpty),O.U((({tones:e,brandToneInfo:t,uphookInfo:i})=>({tones:e,onBrandTitleEnabled:o.pC(t),uphookInfo:i})))))))),uphook:gP(e,"toneDetector","emogenieReport")})},(()=>(0,a.zG)(e.toneDetector,o.g_((()=>p.of({kind:"loading"})),(e=>e.state.view((({kind:e})=>({kind:e}))))))))}function _P(e){const t=d.h.create("");return s.Z.fromSideEffect((i=>{"updateRoleTypeaheadText"===i.kind?(t.set(i.text),""===i.text&&e.notify({kind:xt.i.Kind.roleTypeaheadSelectionChange,role:o.YP})):(i.kind===xt.i.Kind.roleTypeaheadSelectionChange&&t.set((0,a.zG)(i.role,o.g_((()=>""),(e=>e.label)))),e.notify(i))}),d.h.combine(e.assistant.state.view("genAISession"),e.voiceProfile.state.view("stagingVoiceProfile"),t,((e,t,i)=>(0,a.zG)(k.Yt(o.g1)({voiceProfile:(0,a.zG)(e,o.tS(le.toStarted),o.UI((e=>e.voiceProfile)),o.tS(Fe.toLegacyVoiceProfile)),stagingVoiceProfile:t}),o.g_((()=>({tones:[],styles:[],roles:[],maxSelectableTones:0,applyButtonEnabled:!1,description:"",roleTypeaheadText:"",dialects:Fe.Dialect.all(),selectedDialect:Fe.Dialect.american})),(({stagingVoiceProfile:e,voiceProfile:t})=>(0,a.zG)(t.styles,E.Ew((t=>t.id===e.selectedStyle)),(n=>({styles:(0,a.zG)(t.styles,E.UI((t=>Object.assign(Object.assign({},t),{kind:t.id===e.selectedStyle?"selected":"unselected"})))),tones:(0,a.zG)(n,o.g_((()=>[]),(t=>(0,a.zG)(t.tones,E.UI((i=>Object.assign(Object.assign({},i),{kind:(0,a.zG)(o.ij(e.selectedTonesPerStyle.get(e.selectedStyle)),o.fS((()=>new Set)),(e=>e.has(i.id)?"selected":e.size>=t.maxTones?"disabled":"unselected"))}))))))),roles:t.roles,maxSelectableTones:(0,a.zG)(n,o.g_((()=>3),(e=>e.maxTones))),applyButtonEnabled:!Fe.Selections.eq.equals(e,t),description:"These voice settings will apply to any text you generate.",roleTypeaheadText:(0,a.zG)(e.selectedRole,o.hX((()=>""===i)),o.tS((e=>o.ij(t.roles.find((t=>t.id===e))))),o.g_((()=>i),(e=>e.label))),dialects:t.dialects,selectedDialect:t.dialects.find((t=>Fe.Dialect.Id.eq.equals(t.id,e.selectedDialect)))||Fe.Dialect.american})))))))))}function wP(e){return s.Z.fromSideEffect((t=>e.notify(t)),d.h.combine(e.assistant.state.view("genAISession"),e.voiceProfile.state.view("stagingNewVoiceProfile"),((e,t)=>(0,a.zG)(k.Yt(o.g1)({sessionVoiceProfile:(0,a.zG)(e,o.tS(le.toStarted),o.UI((e=>e.voiceProfile)),o.tS(Fe.toNewVoiceProfile)),stagingVoiceProfile:t}),o.g_((()=>({userName:"",title:"",subTitle:"",roles:[],dialects:Fe.Dialect.all(),selectedDialect:Fe.Dialect.american,isEnabledByDefault:!0,isEnabledByDefaultLabel:"",profiles:[],activeProfileName:o.YP,activeTagId:o.YP,isEditing:!1,selectedRole:o.YP})),(({sessionVoiceProfile:e,stagingVoiceProfile:t})=>({userName:e.userName,title:e.title,subTitle:e.subTitle,isEnabledByDefault:t.isEnabledByDefault,isEnabledByDefaultLabel:e.isEnabledByDefaultLabel,profiles:t.profiles,roles:(0,a.zG)(IP(t,e),o.g_((()=>e.roles),(t=>e.roles.filter((e=>e.id!==t.id))))),dialects:(0,a.zG)(AP(t,e),(t=>e.dialects.filter((e=>e.id!==t.id)))),selectedRole:IP(t,e),selectedDialect:AP(t,e),activeProfileName:t.activeProfileName,activeTagId:t.activeTagId,isEditing:o.pC(t.stagingSelections)})))))))}function IP(e,t){return(0,a.zG)(e.stagingSelections,o.tS((e=>e.selectedRole)),o.wp((()=>e.selectedRole)),o.tS((e=>o.ij(t.roles.find((t=>Fe.Role.Id.eq.equals(t.id,e)))))))}function AP(e,t){return(0,a.zG)(e.stagingSelections,o.g_((()=>e.selectedDialect),(e=>e.selectedDialect)),(e=>t.dialects.find((t=>Fe.Dialect.Id.eq.equals(t.id,e)))||Fe.Dialect.american))}const FP=e=>t=>{switch(t.kind){case"seeAllSuggestions":return void e.writingExpert.seeAllSuggestions();case"tryAgain":return void e.writingExpert.tryAgain();case"longFormCardSduiNotify":return e.feed.processActions(t.actions,t.item,t.scope,t.sourceId);case xt.i.Kind.actionsMenuMuteClick:case xt.i.Kind.actionsMenuReportIncorrectClick:case xt.i.Kind.actionsMenuReportOffensiveClick:case xt.i.Kind.suggestionAcceptClick:case xt.i.Kind.suggestionDismissClick:return e.notify&&e.notify(t);default:(0,c.L0)(t)}};var PP=i(94173);function MP(e,t=p.of(!0)){const i=t.pipe(h.h(PP.y),f.q(1)).pipe(m.w((()=>e.assistant.state.view("genAISession").view(o.tS((e=>e.error))))),ht.O(o.YP));return s.Z.composeOption(function(e,t){const i=e.routing.activeView.view((e=>"error"!==e.kind));return s.Z.fromSideEffect((t=>e.notify(t)),t.pipe(ai.M(i),O.U((([e,t])=>({error:e,showDismissButton:t})))))}(e,i.pipe(U.oA)),(()=>i))}function OP(e){const t=e.assistant.state.view("genAISession").view((0,a.ls)(o.tS(le.toStarted),o.tS((e=>e.activeContext.documentOverview))));return s.Z.composeOption((()=>(0,a.zG)(t,U.oA)),(()=>t))}function TP(e){const t=e.assistant.state.view("genAISession").view((e=>(0,a.zG)(e,o.hX((e=>de.s.isQuickReply(e.mode))),o.tS((e=>(0,a.zG)("started"===e.kind?(0,a.zG)(e.activeContext.intent,o.UI((e=>({kind:"loaded",text:e})))):o.G({kind:"loading"}),o.UI((e=>Object.assign(Object.assign({},e),{header:"Sender’s intent"})))))))));return s.Z.composeOption(s.Z.composeUnion({loading:()=>t.pipe(U.oA),loaded:s.Z.fromSideEffect((t=>e.notify(t)),t.pipe(O.U(o.tS((e=>"loaded"===e.kind?o.G({text:e.text,header:e.header}):o.YP))),U.oA))},(()=>t.pipe(U.oA))),(()=>t))}const RP=new Fv(999999);var BP;function UP(e){const t=e.promptMenu.state.pipe(O.U((e=>(0,a.zG)(e,o.g_((()=>"closed"),(e=>e.kind)))),0)),i=e.promptMenu.state.pipe(O.U((e=>(0,a.zG)(e,o.UI((e=>{switch(e.kind){case"actionStore":return"prompt-studio-action-store";case"searchResults":case"emptySearchResults":return"prompt-studio-search-results";default:(0,c.L0)(e)}})),o.FS)),0));return s.Z.fromSideEffect((t=>e.notify(t)),qt.a([e.assistant.state,t,e.routing.activeView,i]).pipe(O.U((([e,t,i,n])=>{return{kind:(0,a.zG)(e.genAISession,o.tS(le.toStarted),o.g_((()=>"loading"),(e=>(0,a.zG)(e.inProgressResult,o.g_((()=>"ready"),(()=>"waitingForResult")))))),genAIAvailability:e.genAIAvailability,placeholder:(r=e,(0,a.zG)(r.selectedAction,o.tS((e=>""!==e.args[0].label.trim()?o.G(e.args[0].label):o.YP)),o.wp((()=>(0,a.zG)(r.userPromptAction,o.UI((e=>e.arg.label))))))),text:e.textBox,autofocusToken:(0,a.zG)(e.genAISession,o.tS((e=>e.error)),o.g_((()=>BP.create(`${i.kind}_${(0,a.zG)(e.genAISession,o.tS(le.toStarted),o.tS((e=>e.inProgressResult)),o.g_((()=>"done"),(()=>"inProgress")))}_${(0,a.zG)(e.selectedAction,o.g_((()=>"no-selected-action"),(()=>"selected-action")))}_${e.promptAutofocusToken}_promptMenuState:${t}`)),(()=>{}))),ariaControls:n,ariaExpanded:Boolean(n)};var r})),A.x()))}function GP(e){return s.Z.fromSideEffect((t=>e.notify(t)),e.promptMenu.state.view((0,a.ls)(o.hX(an.isActionStore),o.UI((e=>e.actions)),DP)))}function NP(e){const t=(0,a.zG)(e,_.hX((e=>e.group.id!==J.knownGroup.apps)));if(o.Wi(t))return Number.MAX_SAFE_INTEGER;const i=(0,a.zG)(t.value,_.UI((e=>e.group.rank)),_.Fp(V.Mh)),n=(0,a.zG)(t.value,E.hX((e=>e.group.id===J.knownGroup.moreIdeas)),E.UI((e=>e.group.rank)),_.c2,o.UI(_.Fp(V.Mh)));return(0,a.zG)(n,o.hX((e=>e===i)),o.UI((e=>e-1)),o.fS((()=>i+1)))}function LP(e){return(0,a.zG)(e,_.UI((t=>{var i,n;return Object.assign(Object.assign({},t),{group:Object.assign(Object.assign({},t.group),{rank:t.group.id===J.knownGroup.apps?NP(e):null!==(i=J.knownGroupRank[t.group.id])&&void 0!==i?i:t.group.rank,label:null!==(n=J.knowGroupLabels[t.group.id])&&void 0!==n?n:t.group.label})})})))}function DP(e){return(0,a.zG)(e,o.UI(LP),o.tS(_.hX((e=>e.group.label.trim().length>0))),o.UI(_.IR(J.ListableActionInput.ordByGroup)),o.g_((()=>({actionGroups:[]})),(e=>({actionGroups:e.map((e=>({label:e[0].group.label,actions:(0,a.zG)(e,_.UI((e=>({action:ro.RegularAction.make(e),label:e.label,icon:e.icon}))))})))}))))}function jP(e,t,i,n){return s.Z.fromSideEffect((t=>e.notify(t)),qt.a([t,e.assistant.state.view("textBox")]).pipe(O.U((([e,t])=>({icon:"regularAction"===e.kind?e.action.icon:S.t$(e.kind),label:"regularAction"===e.kind?e.action.label:"go"===e.kind?`”${t.trim()}”`:(0,c.L0)(e),action:e,placement:i,position:n})))))}function zP(e){return s.Z.composeKnot({root:s.Z.fromSideEffect((t=>{e.notify(t)}),e.promptMenu.state.view((0,a.ls)(o.hX(an.isSearchResults),VP))),goAction:s.Z.composeOption(jP(e,p.of({kind:"go"}),"search",0),(()=>e.assistant.state.pipe(O.U((e=>v._.isUnavailable(e.genAIAvailability)?o.YP:o.G(null))))))})}function VP(e){return(0,a.zG)(e,o.g_((()=>({actions:[],query:""})),(({actions:e,query:t})=>({actions:e.map((e=>({action:ro.RegularAction.make(e),label:e.label,icon:e.icon}))),query:t}))))}function KP(e){return s.Z.fromSideEffect((t=>e.notify(t)),e.promptMenu.state.view((0,a.ls)(o.hX(an.isEmptySearchResults),o.g_((()=>({query:""})),(({query:e})=>({query:e}))))))}function ZP(e){return s.Z.composeKnot({root:s.Z.fromSideEffect((t=>e.notify(t)),p.of(null)),content:s.Z.composeUnion({none:()=>p.of(null),emptySearchResults:()=>p.of(null),searchResults:zP(e),actionStore:GP(e)},(()=>e.promptMenu.state.view((t=>(0,a.zG)(t,o.g_((()=>"none"),(t=>an.isEmptySearchResults(t)&&"revision"===e.experience?"emptySearchResults":an.isNonEmptyState(t)?t.kind:"none")),(e=>({kind:e})))))))})}function HP(e){return s.Z.composeOption(s.Z.composeUnion({none:()=>p.of(null),emptySearchResults:KP(e),popup:ZP(e)},(()=>e.promptMenu.state.view((t=>(0,a.zG)(t,o.g_((()=>"none"),(t=>an.isNonEmptyState(t)||"revision"===e.experience?"popup":"emptySearchResults")),(e=>({kind:e}))))))),(()=>e.promptMenu.state))}function $P(e){const t=d.h.combine(e.assistant.state.view("genAIAvailability"),e.promptMenu.state,((e,t)=>v._.isUnavailable(e)&&o.Wi(t)));return s.Z.composeOption(function(e){return s.Z.composeKnot({root:s.Z.fromSideEffect((t=>e.notify(t)),e.promptMenu.state.pipe(O.U((t=>({menuExpanded:(0,a.zG)(t,o.Gg((0,P.Kg)(an.isNonEmptyState,(()=>"revision"===e.experience))))}))))),promptField:UP(e),promptStudioMenu:HP(e)})}(e),(()=>t.view((0,P.RN)(o.YP,o.G(null)))))}function WP(e,t=d.h.create(!1)){return s.Z.fromSideEffect((t=>e.notify(t.action.action)),d.h.combine(e.assistant.state.view("genAISession"),e.assistant.state.view("genAIAvailability"),e.routing.activeView,t,((e,t,i,n)=>{if(o.Wi(e))return o.YP;const r=e.value,s="started"!==r.kind||r.historyStatus!==le.HistoryStatus.hasHistory&&0===r.results.length?"disabled":r.historyStatus===le.HistoryStatus.historyRequested?"loading":"enabled";return"home"===i.kind&&!v._.isUnavailable(t)&&!n?o.G({state:s}):o.YP})))}!function(e){e.create=function(e){return null!=e?e:RP.newId()}}(BP||(BP={}));const YP=[{emptyState:{title:"Rooting for you.",description:"Suggestions will appear here.",illustration:r.createElement((()=>r.createElement("svg",{fill:"none",viewBox:"0 0 66 64",role:"img","aria-hidden":!0,focusable:!1},r.createElement("path",{fill:"#C6CBDE",d:"M33.4 64c9.4 0 17.02-1.45 17.02-3.24 0-1.79-7.62-3.24-17.01-3.24-9.4 0-17.02 1.45-17.02 3.24 0 1.79 7.62 3.24 17.02 3.24Z"}),r.createElement("path",{fill:"#F6DF6C",stroke:"#27282E",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M36.65 61.36H28.8c-6.03 0-10.92-4.43-10.92-9.89V40.5c0-.4 30.22-.4 30.22 0v10.5c0 5.72-5.13 10.37-11.46 10.37Z"}),r.createElement("path",{fill:"#C7EEFB",stroke:"#27282E",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M33 44.13c8.35 0 15.11-1.56 15.11-3.47 0-1.92-6.76-3.48-15.1-3.48-8.36 0-15.12 1.56-15.12 3.48 0 1.91 6.76 3.47 15.11 3.47Z"}),r.createElement("path",{fill:"#27282E",d:"M45.56 42.15c-2.5.96-7.19 1.6-12.56 1.6s-10.06-.64-12.56-1.6c.7-1.38 6.05-2.45 12.56-2.45 6.5 0 11.87 1.07 12.56 2.45Z"}),r.createElement("path",{stroke:"#27282E",strokeLinecap:"round",strokeLinejoin:"round",d:"m22.87 33.14 2.26-.62-1.98-1.25M25.35 27.2l2.18.85-.83-2.18M22.93 37.44l2.33.2-1.71 1.59M43.7 33.14l-2.26-.62 1.98-1.25M41.22 27.2l-2.17.85.82-2.18M43.64 37.44l-2.33.2 1.71 1.59"}),r.createElement("path",{fill:"#16AC9A",stroke:"#27282E",strokeLinecap:"round",strokeLinejoin:"round",d:"M41.34 31.15c-.97-3.31-4.13-5.63-8.06-5.63v0h0v0c-3.93 0-7.09 2.32-8.06 5.63-1.39 4.76.83 9.86 1.86 10.8 1.76.38 3.05.69 6.2.69 3.13 0 4.98-.4 6.2-.7 1.04-.93 3.25-6.03 1.86-10.8h0Z"}),r.createElement("path",{stroke:"#27282E",strokeLinecap:"round",strokeLinejoin:"round",d:"M34.7 42.44c.7-1.36 2.15-4.86 2.19-8.36.03-3.36-1.46-6.84-3.38-8.46M39.03 35.02l-2.14-.94 2.14-.95"}),r.createElement("path",{stroke:"#27282E",strokeLinecap:"round",strokeLinejoin:"round",d:"m38.56 30.08-2.33-.14 1.68-1.63M38.56 38.46l-2.33.2 1.71 1.58M31.87 42.44a20.66 20.66 0 0 1-2.2-8.36c-.03-3.4 1.5-6.91 3.45-8.52"}),r.createElement("path",{stroke:"#27282E",strokeLinecap:"round",strokeLinejoin:"round",d:"m27.54 35.02 2.14-.94-2.14-.95M28 30.08l2.33-.14-1.67-1.63M28 38.46l2.33.2-1.71 1.58"}),r.createElement("path",{fill:"#fff",stroke:"#27282E",strokeMiterlimit:"10",d:"M6.9 54.28c-.07 0-.12-.06-.12-.14.11-4.3-1.36-5.85-5.66-5.97-.07 0-.12-.07-.12-.14s.06-.12.13-.12c4.3.11 5.86-1.36 5.98-5.66 0-.07.06-.12.14-.12.07 0 .12.06.12.13-.11 4.3 1.36 5.86 5.66 5.97.07 0 .12.06.12.13s-.06.12-.13.12c-4.3-.1-5.86 1.37-5.98 5.66-.01.09-.06.14-.13.14ZM59.17 37.27c-.07 0-.11-.06-.11-.13.1-4.01-1.28-5.47-5.29-5.58-.07 0-.11-.06-.11-.12 0-.07.06-.12.12-.12 4.01.1 5.47-1.27 5.58-5.28 0-.07.06-.12.13-.12s.11.06.11.13c-.1 4.01 1.27 5.47 5.29 5.57.06 0 .11.05.11.12 0 .07-.06.12-.13.12-4-.1-5.46 1.27-5.58 5.28 0 .08-.05.13-.12.13ZM46.14 22.68c-.1 0-.16-.08-.16-.18.14-5.73-1.82-7.8-7.55-7.97-.1 0-.16-.08-.16-.18 0-.1.08-.16.17-.16 5.74.15 7.81-1.82 7.98-7.55 0-.1.08-.16.17-.16.1 0 .17.08.17.18-.15 5.73 1.82 7.8 7.55 7.95.1 0 .16.09.16.18 0 .1-.08.17-.18.17-5.73-.15-7.8 1.81-7.97 7.54-.02.12-.08.18-.18.18Z"}))),null)},successState:{title:"You're on point!",description:"There are no more suggestions.",illustration:r.createElement((()=>r.createElement("svg",{fill:"none",viewBox:"0 0 64 64",role:"img","aria-hidden":!0,focusable:!1},r.createElement("g",{clipPath:"url(#SuccessA_a)"},r.createElement("path",{fill:"#C6CBDE",d:"M32 64c9.28 0 16.8-1.43 16.8-3.2 0-1.77-7.52-3.2-16.8-3.2-9.28 0-16.8 1.43-16.8 3.2 0 1.77 7.52 3.2 16.8 3.2Z"}),r.createElement("path",{stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",d:"M44.08 7.6h-3.24L43 5.2M42.93 36.13l-2.59-1.95 3.2-.6M46.3 17.13l-3.13-.84 2.73-1.75M45.14 26.65l-2.73-1.74 3.13-.85M19.12 7.6h3.24L20.2 5.2M20.27 36.13l2.59-1.95-3.19-.6M16.9 17.13l3.13-.84-2.73-1.75M18.06 26.65l2.73-1.74-3.13-.85"}),r.createElement("path",{fill:"#F6DF6C",stroke:"#0E101A",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M35.2 61.4h-7.73c-5.96 0-10.8-4.38-10.8-9.77V40.78c0-.4 29.86-.4 29.86 0v10.36c0 5.66-5.07 10.25-11.33 10.25Z"}),r.createElement("path",{fill:"#C7EEFB",stroke:"#0E101A",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M31.6 44.38c8.24 0 14.93-1.54 14.93-3.43 0-1.9-6.69-3.43-14.93-3.43-8.24 0-14.92 1.53-14.92 3.43 0 1.9 6.68 3.43 14.92 3.43Z"}),r.createElement("path",{fill:"#0E101A",d:"M44 42.43c-2.47.94-7.1 1.57-12.4 1.57-5.3 0-9.93-.63-12.4-1.57.68-1.37 5.98-2.43 12.4-2.43s11.72 1.06 12.4 2.43Z"}),r.createElement("path",{fill:"#15C39A",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",d:"M31.6 2.41v.01h0c-22.5 0-6.52 39.78-6.52 39.78s2.2.86 6.52.86c4.32 0 6.52-.86 6.52-.86S54.1 2.41 31.6 2.41h0Z"}),r.createElement("path",{fill:"#F18AB2",stroke:"#0E101A",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M12 7.25s2.8-1.38 5.22-.87c-1.36-2.06-1.11-5.1-1.11-5.1 5.32 2.17 4.15 7.14 4.15 7.14s-5.76 2.26-3.56.81A6.82 6.82 0 0 1 12 7.25Z"}),r.createElement("path",{fill:"#F18AB2",stroke:"#0E101A",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M13.79 4.5s2.6-.32 4.67 1.02A7.77 7.77 0 0 1 19.17.8c4.17 3.95 1.56 7.99 1.56 7.99s-2.34 4.21-7.8 2.4c0 0 1.6-2.38 4.18-2.93A6.92 6.92 0 0 1 13.8 4.5Z"}),r.createElement("path",{stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",d:"M33.26 42.98s8.41-38.16-1.68-40.57"}),r.createElement("path",{stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",d:"m39.15 28.43-2.81-1.6 3.08-1M37.54 37.9l-2.56-2 3.2-.54M39.48 9.37l-3.2-.56 2.57-1.98M40.03 18.9l-3.11-.91 2.77-1.7M29.94 42.98S21.53 4.82 31.63 2.41"}),r.createElement("path",{stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",d:"m24.05 28.43 2.82-1.6-3.09-1M25.66 37.9l2.56-2-3.2-.54M23.72 9.37l3.2-.56-2.57-1.98M23.17 18.9l3.11-.91-2.77-1.7"}),r.createElement("path",{fill:"#fff",stroke:"#0E101A",strokeMiterlimit:"10",d:"M56.62 39.2c-.08 0-.13-.06-.13-.14.12-4.53-1.43-6.17-5.96-6.3-.08 0-.13-.06-.13-.14 0-.08.06-.13.14-.13 4.53.12 6.17-1.43 6.3-5.96 0-.08.06-.13.14-.13.08 0 .13.06.13.14-.12 4.53 1.43 6.17 5.96 6.29.08 0 .13.06.13.14 0 .07-.06.12-.14.12-4.53-.11-6.17 1.44-6.3 5.97-.01.09-.06.14-.14.14ZM6.24 24c-.06 0-.1-.06-.1-.12.1-3.96-1.27-5.4-5.23-5.51-.07 0-.11-.06-.11-.13 0-.06.06-.1.12-.1 3.97.1 5.4-1.27 5.51-5.23 0-.07.06-.11.13-.11.06 0 .1.06.1.12-.1 3.97 1.27 5.4 5.23 5.5.07 0 .11.06.11.13 0 .06-.06.1-.12.1-3.96-.1-5.4 1.27-5.51 5.23-.01.08-.06.12-.13.12Z"})),r.createElement("defs",null,r.createElement("clipPath",{id:"SuccessA_a"},r.createElement("path",{fill:"#fff",d:"M0 0h64v64H0z"}))))),null)}},{emptyState:{title:"You got this.",description:"Suggestions will appear here.",illustration:r.createElement((()=>r.createElement("svg",{fill:"none",viewBox:"0 0 64 64",role:"img","aria-hidden":!0,focusable:!1},r.createElement("path",{fill:"#AAF2E1",stroke:"#0E101A",strokeLinejoin:"round",d:"M12.8 46.4 32.8.8l20 45.6V62h-40V46.4Z"}),r.createElement("path",{stroke:"#0E101A",strokeLinejoin:"round",d:"m12.8 46.4 20-13.2 20 13.2"}),r.createElement("path",{fill:"#0E101A",fillRule:"evenodd",d:"M32.4 4.76V1.6h.8v3.16h-.8Zm0 6.31V7.92h.8v3.15h-.8Zm0 6.32v-3.16h.8v3.16h-.8Zm0 6.32v-3.16h.8v3.16h-.8Zm0 6.31v-3.16h.8v3.16h-.8Zm0 6.32v-3.16h.8v3.16h-.8Zm0 6.31V39.5h.8v3.16h-.8Zm0 6.32V45.8h.8v3.16h-.8Zm0 6.31v-3.15h.8v3.15h-.8Zm0 6.32v-3.16h.8v3.16h-.8Z",clipRule:"evenodd"}),r.createElement("path",{stroke:"#000",strokeLinecap:"round",d:"M10 33.6C5.2 34.8-2.4 42 2.8 48.8c5.2 6.8 16.8 4.5 21.2.89"}),r.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M10.4 33.05c.21.08.31.3.23.51l-1.3 3.36a.4.4 0 0 1-.75-.3l1.16-2.97-2.98-1.17a.4.4 0 0 1 .29-.74l3.35 1.3Z",clipRule:"evenodd"}))),null)},successState:{title:"Well, this is shaping up!",description:"There are no more suggestions.",illustration:r.createElement((()=>r.createElement("svg",{fill:"none",viewBox:"0 0 64 64",role:"img","aria-hidden":!0,focusable:!1},r.createElement("g",{clipPath:"url(#SuccessB_a)"},r.createElement("path",{fill:"#87E8D1",stroke:"#0E101A",strokeLinejoin:"round",d:"m18 34-3.4-10.67L59.41 1.49 18 34Z"}),r.createElement("path",{fill:"#D7F7F0",stroke:"#0E101A",strokeLinejoin:"round",d:"M24.25 24.7 60.8.8l-20.23 40-16.32-16.1ZM2.4 19.42 60.8.8 14.6 23.33l-12.2-3.9Z"}),r.createElement("path",{fill:"#15C39A",stroke:"#0E101A",strokeLinejoin:"round",d:"m28.62 29.08-4.37-4.37L18 34l10.62-4.92Z"}),r.createElement("path",{fill:"#FBEFB7",stroke:"#0E101A",strokeMiterlimit:"10",d:"M25.4 52c-.09 0-.15-.07-.15-.16.13-5.1-1.61-6.94-6.7-7.08-.1 0-.15-.08-.15-.16 0-.09.07-.15.16-.15 5.1.13 6.94-1.61 7.08-6.7 0-.1.08-.15.16-.15.09 0 .15.07.15.16-.13 5.1 1.61 6.94 6.7 7.07.1 0 .15.07.15.16 0 .08-.07.14-.16.14-5.1-.13-6.94 1.62-7.08 6.71-.02.1-.08.16-.16.16ZM57.44 39.2c-.06 0-.1-.06-.1-.12.1-3.96-1.27-5.4-5.23-5.51-.07 0-.11-.06-.11-.13 0-.06.06-.1.12-.1 3.97.1 5.4-1.27 5.51-5.23 0-.07.06-.11.13-.11.06 0 .1.06.1.12-.1 3.96 1.27 5.4 5.23 5.5.07 0 .11.06.11.13 0 .06-.06.1-.12.1-3.96-.1-5.4 1.27-5.51 5.23-.01.08-.06.12-.13.12ZM11.45 11.2c-.06 0-.1-.05-.1-.11.1-3.68-1.17-5.02-4.85-5.12-.06 0-.1-.05-.1-.12 0-.06.05-.1.11-.1 3.68.1 5.02-1.17 5.12-4.85 0-.06.05-.1.12-.1.06 0 .1.05.1.11-.1 3.68 1.17 5.02 4.85 5.11.06 0 .1.05.1.12 0 .06-.05.1-.11.1-3.68-.1-5.02 1.17-5.12 4.85-.01.07-.05.11-.12.11Z"}),r.createElement("path",{stroke:"#000",strokeDasharray:"4 5",strokeLinecap:"square",d:"M10.4 31.2c-4.8 2-14.64 14.4-6 23.2 8.64 8.8 44.8-2 58 8.8"})),r.createElement("defs",null,r.createElement("clipPath",{id:"SuccessB_a"},r.createElement("path",{fill:"#fff",d:"M0 0h64v64H0z"}))))),null)}},{emptyState:{title:"Nothing to see yet.",description:"Suggestions will appear here.",illustration:r.createElement(hb,null)},successState:{title:"Look at that!",description:"There are no more suggestions.",illustration:r.createElement((()=>r.createElement("svg",{fill:"none",viewBox:"0 0 64 64",role:"img","aria-hidden":!0,focusable:!1},r.createElement("path",{fill:"#F28C8C",fillRule:"evenodd",d:"M1.78 43.26a1.94 1.94 0 0 0 1.5 2.9l35.87 3.6-15.29 7.45a1.43 1.43 0 0 0 1 2.65l30.56-8.46 7.78.79V41.83l-59.74.45c-.7 0-1.33.38-1.68.98Z",clipRule:"evenodd"}),r.createElement("path",{fill:"#0E101A",d:"m3.28 46.15.05-.5-.05.5Zm-1.5-2.89-.43-.24.43.24Zm37.37 6.5.22.45 1.59-.77-1.76-.17-.05.5Zm-15.29 7.45.22.45-.22-.45Zm1 2.65-.13-.48.14.48Zm30.56-8.46.05-.5h-.09l-.1.02.14.48Zm7.78.79-.05.5.55.05v-.55h-.5Zm0-10.36h.5v-.5h-.5v.5Zm-59.74.45v-.5.5Zm-.13 3.37a1.44 1.44 0 0 1-1.11-2.14l-.87-.5a2.44 2.44 0 0 0 1.88 3.64l.1-1Zm35.87 3.62L3.33 45.65l-.1 1 35.87 3.61.1-1Zm-15.12 8.39 15.3-7.45-.45-.9-15.29 7.45.44.9Zm-.52.83c0-.36.2-.68.52-.83l-.44-.9c-.66.32-1.08 1-1.08 1.73h1Zm1.17.9a.93.93 0 0 1-1.17-.9h-1c0 1.27 1.21 2.2 2.44 1.85l-.27-.96Zm30.56-8.47-30.56 8.46.27.96 30.56-8.46-.27-.96Zm7.96.77-7.78-.78-.1.99 7.78.78.1-1Zm-.55-9.86v10.36h1V41.83h-1Zm-59.24.95 59.74-.45v-1l-59.74.45v1Zm-1.24.73c.25-.45.73-.73 1.24-.73v-1c-.88 0-1.68.48-2.11 1.24l.87.49Z"}),r.createElement("path",{fill:"#87E8D1",fillRule:"evenodd",d:"M19.9 46.88a3.14 3.14 0 1 1 .97 5.86 3.67 3.67 0 0 1-7.05-.92 3.3 3.3 0 0 1-4.75-2.94 3.3 3.3 0 0 1 5.2-2.75 2.93 2.93 0 0 1 5.63.75Z",clipRule:"evenodd"}),r.createElement("path",{fill:"#0E101A",d:"m19.9 46.88-.5.06a.5.5 0 0 0 .74.38l-.24-.44Zm1.44-.36v-.5.5Zm3.17 3.1.5-.01h-.5Zm-3.1 3.17.01.5v-.5Zm-.54-.04.08-.5a.5.5 0 0 0-.54.3l.46.2Zm-3.36 2.28v.5-.5Zm-3.69-3.21.5-.06a.5.5 0 0 0-.72-.4l.22.46Zm-1.4.33-.01-.5v.5Zm-3.35-3.27h.5-.5Zm3.26-3.35v-.5.5Zm1.94.6-.28.41a.5.5 0 0 0 .75-.22l-.47-.19Zm2.69-1.85v.5-.5Zm3.18 3.04c.36-.19.77-.3 1.2-.3v-1c-.6 0-1.18.16-1.67.42l.47.88Zm1.2-.3a2.64 2.64 0 0 1 2.67 2.6l1-.01a3.64 3.64 0 0 0-3.68-3.6l.01 1Zm2.67 2.6a2.64 2.64 0 0 1-2.6 2.67l.01 1c2.01-.03 3.62-1.68 3.6-3.68h-1Zm-2.6 2.67c-.16 0-.31-.01-.46-.04l-.16.99c.2.03.42.05.63.05l-.01-1Zm-1 .27a3.17 3.17 0 0 1-2.9 1.97v1a4.17 4.17 0 0 0 3.82-2.6l-.92-.37Zm-2.9 1.97c-1.64.02-3-1.2-3.2-2.77l-.98.12a4.17 4.17 0 0 0 4.19 3.65l-.01-1Zm-3.9-3.16a2.8 2.8 0 0 1-1.2.28l.01 1a3.8 3.8 0 0 0 1.62-.38l-.44-.9Zm-1.2.28a2.8 2.8 0 0 1-2.84-2.77h-1a3.8 3.8 0 0 0 3.85 3.77l-.01-1Zm-2.84-2.77a2.8 2.8 0 0 1 2.77-2.85l-.01-1a3.8 3.8 0 0 0-3.76 3.86l1-.01Zm2.77-2.85c.61 0 1.18.18 1.65.51l.57-.82a3.8 3.8 0 0 0-2.23-.69l.01 1Zm2.4.29a2.43 2.43 0 0 1 2.23-1.54l-.02-1a3.43 3.43 0 0 0-3.14 2.17l.93.37Zm2.23-1.54c1.25-.02 2.3.93 2.44 2.16l.99-.11a3.42 3.42 0 0 0-3.45-3.05l.02 1Z"}),r.createElement("path",{fill:"#87E8D1",fillRule:"evenodd",d:"M56 53.2a3.6 3.6 0 0 1-2.36 3.38 3.6 3.6 0 1 1-5.84 4.2 3.6 3.6 0 0 1-6.96-.62 3.6 3.6 0 1 1 .05-5.9 4.8 4.8 0 0 1 8.16-2.4A3.6 3.6 0 0 1 56 53.2Z",clipRule:"evenodd"}),r.createElement("path",{fill:"#0E101A",d:"m53.64 56.58-.18-.47a.5.5 0 0 0-.22.78l.4-.3Zm-5.84 4.2.42-.27a.5.5 0 0 0-.9.11l.48.17Zm-6.96-.62.5-.07a.5.5 0 0 0-.78-.34l.28.41Zm.05-5.9-.29.42a.5.5 0 0 0 .78-.31l-.49-.1Zm8.16-2.4-.36.35a.5.5 0 0 0 .83-.16l-.47-.18Zm4.76 5.2a4.1 4.1 0 0 0 2.69-3.86h-1a3.1 3.1 0 0 1-2.04 2.91l.35.94Zm1.09 1.74c0-.95-.33-1.83-.87-2.53l-.79.62c.41.53.66 1.19.66 1.91h1Zm-4.1 4.1a4.1 4.1 0 0 0 4.1-4.1h-1a3.1 3.1 0 0 1-3.1 3.1v1Zm-3.42-1.83a4.1 4.1 0 0 0 3.42 1.83v-1a3.1 3.1 0 0 1-2.58-1.39l-.84.56Zm-.05-.45a3.1 3.1 0 0 1-2.93 2.08v1a4.1 4.1 0 0 0 3.87-2.75l-.94-.33ZM44.4 62.7a3.1 3.1 0 0 1-3.06-2.61l-.99.15a4.1 4.1 0 0 0 4.05 3.46v-1Zm-5.6-1.4c.86 0 1.67-.27 2.33-.72l-.57-.83c-.5.35-1.1.55-1.76.55v1Zm-4.1-4.1a4.1 4.1 0 0 0 4.1 4.1v-1a3.1 3.1 0 0 1-3.1-3.1h-1Zm4.1-4.1a4.1 4.1 0 0 0-4.1 4.1h1a3.1 3.1 0 0 1 3.1-3.1v-1Zm2.38.76a4.08 4.08 0 0 0-2.38-.76v1c.67 0 1.3.21 1.8.58l.58-.82Zm4.42-3.96a5.3 5.3 0 0 0-5.2 4.27l.98.2a4.3 4.3 0 0 1 4.22-3.47v-1Zm3.81 1.62a5.29 5.29 0 0 0-3.81-1.62v1c1.22 0 2.31.5 3.1 1.31l.71-.69Zm2.99-2.42a4.1 4.1 0 0 0-3.81 2.58l.93.37a3.1 3.1 0 0 1 2.88-1.95v-1Zm4.1 4.1a4.1 4.1 0 0 0-4.1-4.1v1a3.1 3.1 0 0 1 3.1 3.1h1Z"}),r.createElement("path",{fill:"url(#SuccessC_a)",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",d:"M25.88 3.04a7.45 7.45 0 0 0-12.77 5.2v13.8c0 7.54 6.84 13.23 14.25 11.86l15.29-2.83 4.37 4.37H57.6L25.88 3.04Z"}),r.createElement("path",{fill:"url(#SuccessC_b)",fillRule:"evenodd",d:"M13.1 16.86v5.16c0 7.54 6.87 13.23 14.28 11.83l.45-.08c.44-.73.68-1.6.66-2.64a9.05 9.05 0 0 0-2.66-6.23l-5.92-5.92a7.65 7.65 0 0 0-6.8-2.12Z",clipRule:"evenodd"}),r.createElement("path",{fill:"#0E101A",d:"M13.1 16.86h-.5c0-.2.13-.37.3-.45l.2.45Zm14.28 17 .1.48-.1-.49Zm.45-.1.43.27a.5.5 0 0 1-.34.23l-.1-.5Zm.66-2.63h.5-.5Zm-2.66-6.23-.36.35.36-.35Zm-5.92-5.92.36-.35-.36.35Zm-6.8-2.12-.2-.45a.5.5 0 0 1 .11-.04l.09.5Zm.5 0v5.16h-1v-5.16h1Zm0 5.16c0 7.23 6.57 12.68 13.68 11.34l.18.98a12.54 12.54 0 0 1-14.86-12.32h1Zm13.68 11.34.45-.08.18.98-.45.08-.18-.98Zm.11.15c.39-.64.6-1.42.59-2.37l1-.02a5.3 5.3 0 0 1-.73 2.9l-.86-.51Zm.59-2.37a8.55 8.55 0 0 0-2.52-5.89l.71-.7a9.55 9.55 0 0 1 2.8 6.57l-1 .02Zm-2.52-5.89-5.91-5.92.7-.7 5.92 5.91-.7.71Zm-5.91-5.92a7.15 7.15 0 0 0-6.36-1.98l-.18-.98a8.15 8.15 0 0 1 7.25 2.26l-.71.7Zm-6.25-2.01-.4-.91.4.91Z"}),r.createElement("path",{stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",d:"M23.86 41.85 28 33.62M29.96 41.85l4.88-9.35M24.41 13.1c0 7.65 7.19 13.26 14.6 11.4l5.83-1.82"}),r.createElement("path",{fill:"#F28C8C",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",d:"m13.11 6.93-5.84 3.72 5.84 3.71V6.93Z"}),r.createElement("circle",{cx:"1.09",cy:"1.09",r:"1.09",fill:"#0E101A",transform:"matrix(-1 0 0 1 19.67 6.27)"}),r.createElement("defs",null,r.createElement("radialGradient",{id:"SuccessC_b",cx:"0",cy:"0",r:"1",gradientTransform:"matrix(8 -9 8 7 13.6 32.4)",gradientUnits:"userSpaceOnUse"},r.createElement("stop",{stopColor:"#F3F8E5"}),r.createElement("stop",{offset:"1",stopColor:"#D7E8A9"})),r.createElement("linearGradient",{id:"SuccessC_a",x1:"16.14",x2:"55.97",y1:".8",y2:"36.57",gradientUnits:"userSpaceOnUse"},r.createElement("stop",{stopColor:"#D7E8A9"}),r.createElement("stop",{offset:".38",stopColor:"#87E8D1"}),r.createElement("stop",{offset:".89",stopColor:"#79A8F2"}))))),null)}},{emptyState:{title:"The first word is the hardest.",description:"Suggestions will appear here.",illustration:r.createElement((()=>r.createElement("svg",{fill:"none",viewBox:"0 0 79 64",role:"img","aria-hidden":!0,focusable:!1},r.createElement("path",{fill:"#C6CBDE",d:"M28.4 63.2c8.62 0 15.6-1.8 15.6-4s-6.98-4-15.6-4-15.6 1.8-15.6 4 6.98 4 15.6 4Z"}),r.createElement("path",{fill:"#638EEB",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M41.19 56.6a.58.58 0 0 0 0-.25v-3.53h-2.67c-2.3-.84-5.78 0-9.72 0-3.94 0-7.45-.86-9.72 0H16.4v4.7c.43 1.9 5.83 3.4 12.4 3.4s11.95-1.5 12.39-3.4v-.93Z"}),r.createElement("path",{fill:"#8ECBDE",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M28.8 56.25c6.85 0 12.4-1.63 12.4-3.64 0-2-5.55-3.64-12.4-3.64-6.85 0-12.4 1.63-12.4 3.64 0 2.01 5.55 3.64 12.4 3.64Z"}),r.createElement("path",{fill:"#8ECBDE",d:"M41.17 52.74v-1.5a2.25 2.25 0 0 0-2.23-2.3h-.09a.98.98 0 0 1-.95-.98v-.35H19.7v.35a.98.98 0 0 1-.96.98h-.07a2.25 2.25 0 0 0-2.24 2.3v1.5"}),r.createElement("path",{stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M41.17 52.74v-1.5a2.25 2.25 0 0 0-2.23-2.3h-.09a.98.98 0 0 1-.95-.98v-.35H19.7v.35a.98.98 0 0 1-.96.98h-.07a2.25 2.25 0 0 0-2.24 2.3v1.5"}),r.createElement("path",{fill:"#99C2FF",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M38.1 47.22V44.4h-2.01c-1.7-.63-4.34 0-7.29 0s-5.59-.65-7.3 0H19.5v2.94h.02c.32 1.43 4.35 2.55 9.28 2.55 4.92 0 8.95-1.12 9.27-2.55l.03-.1Z"}),r.createElement("path",{fill:"#DBEBFF",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",d:"M28.8 46.97c5.14 0 9.3-1.22 9.3-2.73s-4.16-2.74-9.3-2.74c-5.14 0-9.3 1.23-9.3 2.74 0 1.5 4.16 2.73 9.3 2.73Z"}),r.createElement("path",{fill:"#0E101A",d:"M28.8 45.64c3.85 0 6.97-.66 6.97-1.48s-3.12-1.48-6.97-1.48c-3.85 0-6.97.66-6.97 1.48s3.12 1.48 6.97 1.48Z"}),r.createElement("path",{fill:"#FBEFB7",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",d:"M65.02 4.06c-1.83.69-3.5 1.34-5.03 2l-3.54 5.07.7-3.8c-7.41 3.5-11.69 7.17-17.58 13.7-5.5 6.11-6.19 14.68-6.19 14.68l10.55-2.27-2.86-1.36 4.46.1a159.72 159.72 0 0 1 17.7-13.15l-4.18-1.93 7.18.04 4.55-2.75L77.83 5l-12.81-.94Z"}),r.createElement("path",{fill:"#41D9B5",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",d:"M67.85 8.92s-29.05 9.2-40.25 36h2c3.52-7.49 12.8-24.4 38.25-36Z"}),r.createElement("path",{stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"m46.5 14.03-.83 4.67M59.58 21.57l-5.11-1.43M50.56 28.2l-5.11-1.45M39.6 20.91l-.71 4.2"}))),null)},successState:{title:"You did it!",description:"There are no more suggestions.",illustration:r.createElement(Yv,null)}},{emptyState:{title:"Start writing to make the magic happen.",description:"Suggestions will appear here.",illustration:r.createElement((()=>r.createElement("svg",{fill:"none",viewBox:"0 0 64 65",role:"img","aria-hidden":!0,focusable:!1},r.createElement("g",{clipPath:"url(#EmptyE_a)"},r.createElement("path",{fill:"#fff",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M47.87 26.1c-.06 0-.1-.05-.1-.1.09-3.4-1.08-4.63-4.47-4.73-.06 0-.1-.05-.1-.1 0-.06.05-.1.1-.1 3.4.09 4.63-1.08 4.73-4.47 0-.06.05-.1.1-.1.06 0 .1.05.1.1-.09 3.4 1.08 4.63 4.47 4.72.06 0 .1.05.1.1 0 .06-.05.1-.1.1-3.4-.09-4.63 1.08-4.73 4.47 0 .07-.05.11-.1.11ZM10.68 28.5c-.06 0-.1-.04-.1-.1.09-3.11-.98-4.24-4.1-4.33-.04 0-.08-.04-.08-.1 0-.05.04-.08.1-.08 3.11.08 4.24-.99 4.33-4.1 0-.05.04-.09.1-.09.05 0 .08.04.08.1-.08 3.11.99 4.24 4.1 4.32.05 0 .09.04.09.1 0 .05-.04.08-.1.08-3.11-.08-4.24.99-4.33 4.1 0 .06-.04.1-.1.1ZM35.84 12.5c-.06 0-.1-.06-.1-.12.1-3.96-1.27-5.4-5.23-5.51-.07 0-.11-.06-.11-.13 0-.06.06-.1.12-.1 3.96.1 5.4-1.27 5.51-5.23 0-.07.06-.11.13-.11.06 0 .1.06.1.12-.1 3.97 1.27 5.4 5.23 5.5.07 0 .11.06.11.13 0 .06-.06.1-.12.1-3.96-.1-5.4 1.27-5.51 5.23-.01.08-.06.12-.13.12Z"}),r.createElement("path",{fill:"#0E101A",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M2.19 6.8a2.53 2.53 0 1 1 2.74-4.24l30.2 19.54-2.74 4.24L2.19 6.81Z"}),r.createElement("path",{fill:"#fff",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M24.3 21.1a2.52 2.52 0 1 1 2.74-4.23l8.75 5.65-2.74 4.24-8.75-5.66Z"}),r.createElement("circle",{cx:"34.41",cy:"24.67",r:"2.55",fill:"#fff",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",transform:"rotate(-57 34.4 24.67)"}),r.createElement("path",{fill:"#C6CBDE",d:"M32 64.5c10.6 0 19.2-1.61 19.2-3.6s-8.6-3.6-19.2-3.6-19.2 1.61-19.2 3.6 8.6 3.6 19.2 3.6Z"}),r.createElement("path",{fill:"#6E66DE",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M42.84 34.42H21.16l-3.23 23.34c-.2 1.49.5 2.9 1.94 3.3 2.13.6 6 1.27 12.62 1.27 6.77 0 10.35-.7 12.17-1.3 1.17-.4 1.64-1.56 1.47-2.78l-3.29-23.83Z"}),r.createElement("path",{fill:"#F8C6DA",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"m43.74 41.35-.9-6.93H21.16l-.9 6.93h23.48Z"}),r.createElement("path",{fill:"#6E66DE",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M50.08 33.3H13.92a1.12 1.12 0 0 0 0 2.24h36.16a1.12 1.12 0 1 0 0-2.24Z"})),r.createElement("defs",null,r.createElement("clipPath",{id:"EmptyE_a"},r.createElement("path",{fill:"#fff",d:"M0 .5h64v64H0z"}))))),null)},successState:{title:"It's like magic!",description:"There are no more suggestions.",illustration:r.createElement((()=>r.createElement("svg",{fill:"none",viewBox:"0 0 64 64",role:"img","aria-hidden":!0,focusable:!1},r.createElement("g",{clipPath:"url(#SuccessE_a)"},r.createElement("path",{fill:"#C6CBDE",d:"M32 64c11.49 0 20.8-1.8 20.8-4s-9.31-4-20.8-4-20.8 1.8-20.8 4 9.31 4 20.8 4Z"}),r.createElement("path",{fill:"#F28C8C",d:"M38.73 32.98s9.04-12.87 11.57-18.56c3.5-7.97 1.49-11.86-.22-12.62-1.7-.76-5.96.4-9.46 8.36-2.59 5.85-6.54 21.03-6.54 21.03"}),r.createElement("path",{stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M38.73 32.98s9.04-12.87 11.57-18.56c3.5-7.97 1.49-11.86-.22-12.62-1.7-.76-5.96.4-9.46 8.36-2.59 5.85-6.54 21.03-6.54 21.03"}),r.createElement("path",{fill:"#F8C6DA",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M37.12 30.94a.95.95 0 0 1-.6-1.21c1.12-3.6 5.26-16.7 6.53-19.63 2.04-4.62 4.69-5.75 5.7-5.32 1 .46 1.97 3.16-.07 7.79-1.28 2.89-8.55 14.94-10.37 17.95-.25.4-.73.58-1.19.42Z"}),r.createElement("path",{fill:"#F28C8C",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"m32.68 31.55-4.56 2.04s-.58-.97-1.46-2.55a348.24 348.24 0 0 1-5.63-10.29 1.31 1.31 0 0 1 .33-1.61 6.2 6.2 0 0 1 9.13 1.25 285.72 285.72 0 0 1 2.19 11.16Z"}),r.createElement("path",{fill:"#6E66DE",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M44.05 31.22H19.95l-3.6 25.59c-.22 1.5.49 2.93 1.95 3.35 2.31.66 6.65 1.44 14.25 1.44 7.73 0 11.71-.8 13.68-1.48 1.18-.4 1.67-1.58 1.5-2.82l-3.68-26.08Z"}),r.createElement("path",{fill:"#F8C6DA",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"m45.04 38.76-1-7.54H19.96l-1 7.54h26.1Z"}),r.createElement("path",{fill:"#6E66DE",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M51.58 30H12.42a1.22 1.22 0 0 0 0 2.44h39.16a1.22 1.22 0 0 0 0-2.44Z"}),r.createElement("path",{fill:"#F28C8C",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M30.49 20.42c-1 3.4-2.07 6.72-2.98 8.82-.28.64-.55 1.25-.85 1.8-3.26 6.38-6.94 7.33-8.55 6.63-1.74-.73-3.78-4.63-.34-12.63.52-1.18 1.31-2.68 2.22-4.32a6.2 6.2 0 0 1 10.5-.3Z"}),r.createElement("path",{fill:"#fff",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M6.63 21.6c-.07 0-.12-.06-.12-.13.11-4.25-1.35-5.79-5.59-5.9-.07 0-.12-.07-.12-.14s.06-.12.13-.12c4.25.11 5.79-1.35 5.9-5.59 0-.07.07-.12.14-.12s.12.06.12.13c-.11 4.25 1.35 5.79 5.59 5.9.07 0 .12.05.12.13 0 .07-.06.12-.13.12-4.25-.11-5.79 1.34-5.9 5.59-.02.08-.07.13-.14.13ZM19.87 10.4c-.06 0-.1-.05-.1-.1.09-3.4-1.08-4.63-4.47-4.73-.06 0-.1-.05-.1-.1 0-.06.05-.1.1-.1 3.4.09 4.63-1.08 4.73-4.47 0-.06.05-.1.1-.1.06 0 .1.05.1.1-.09 3.4 1.08 4.63 4.47 4.72.06 0 .1.05.1.1 0 .06-.05.1-.1.1-3.4-.09-4.63 1.08-4.73 4.47 0 .07-.05.11-.1.11ZM57.03 52c-.07 0-.12-.06-.12-.13.11-4.25-1.35-5.79-5.59-5.9-.07 0-.12-.07-.12-.14s.06-.12.13-.12c4.25.11 5.79-1.35 5.9-5.59 0-.07.07-.12.14-.12s.12.06.12.13c-.11 4.25 1.35 5.79 5.59 5.9.07 0 .12.05.12.13 0 .07-.06.12-.13.12-4.25-.11-5.79 1.34-5.9 5.59-.02.08-.07.13-.14.13Z"})),r.createElement("defs",null,r.createElement("clipPath",{id:"SuccessE_a"},r.createElement("path",{fill:"#fff",d:"M0 0h64v64H0z"}))))),null)}},{emptyState:{title:"No pressure.",description:"Suggestions will appear here.",illustration:r.createElement((()=>r.createElement("svg",{fill:"none",viewBox:"0 0 64 64",role:"img","aria-hidden":!0,focusable:!1},r.createElement("g",{clipPath:"url(#EmptyF_a)"},r.createElement("path",{fill:"#F28C8C",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M28.8.8h6.4v72.8h-6.4zM4.8 71.09l5.54 3.2 12.8-22.18-5.54-3.2zM59.2 71.08l-5.54 3.2-12.8-22.17 5.54-3.2z"}),r.createElement("path",{fill:"#fff",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M6.4 6.4h51.2v51.2H6.4V6.4Z"}),r.createElement("path",{fill:"#DBEBFF",fillRule:"evenodd",d:"M57.6 40.12V57.6H6.4V19.47a13.4 13.4 0 0 1 2.28-1.84 6.48 6.48 0 0 1 5.52-.75 6.37 6.37 0 0 1 3.83 3.57c.75 1.75.67 3.54.56 4.45-.26 2.04-.98 3.65-1.79 5.47l-.1.24.38-.3c-.04.03.99-.79 1.91-1.33.5-.3 1.32-.72 2.33-.98a6.66 6.66 0 0 1 4.86.56c3.66 2 4.18 5.65 4.03 7.75-.1 1.36-.46 2.6-.82 3.56.84-.82 1.72-1.62 2.65-2.39 1.07-.87 2.81-1.96 4.78-2.53 1.67-.48 6.19-1.2 8.97 2.87a7.8 7.8 0 0 1 1.4 4.16c.79-.57 1.64-1.1 2.58-1.55l.05-.03c.36-.17 1.66-.8 3.1-1.05a7.1 7.1 0 0 1 4.68.77Z",clipRule:"evenodd"}),r.createElement("path",{stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M6.4 6.4h51.2v51.2H6.4V6.4Z"}),r.createElement("path",{fill:"#F28C8C",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M3.2 51.2h57.6v6.4H3.2z"}),r.createElement("path",{fill:"#FEFAE9",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",d:"M27.97 32.23a5.23 5.23 0 0 1 7.71-2.94c2.9 1.72 3.77 5.06.55 8.71-3.22 3.65-9.8 3.1-11.7 2.32 2.37-3.14 2.3-4.74 3.44-8.1Z"}),r.createElement("path",{fill:"#638EEB",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M43.6 14.18a3.48 3.48 0 1 1 5.53 4.18L37.7 31.46l-3.58-2.7 9.48-14.58Z"}),r.createElement("path",{fill:"#15C39A",fillRule:"evenodd",d:"M36.94 37.12c-.21.3-.45.59-.7.88-3.23 3.65-9.8 3.1-11.7 2.32 1.75-2.32 2.17-3.8 2.72-5.77.1-.36.2-.73.33-1.13 1.3.08 2.16.22 3.76 2.6 1.34 1.98 3.54 1.66 5.59 1.1Z",clipRule:"evenodd"}),r.createElement("path",{fill:"#0E101A",d:"m36.94 37.12.4.3a.5.5 0 0 0-.54-.78l.14.48Zm-.7.88.37.33-.38-.33Zm-11.7 2.32-.4-.3a.5.5 0 0 0 .2.76l.2-.46Zm2.72-5.77-.48-.14.48.14Zm.33-1.13.03-.5a.5.5 0 0 0-.51.36l.48.14Zm3.76 2.6.42-.29-.42.28Zm5.18.8c-.2.29-.42.57-.67.85l.75.66c.27-.3.51-.61.73-.92l-.81-.58Zm-.67.85c-1.5 1.69-3.8 2.43-6.02 2.65-2.23.21-4.26-.12-5.11-.47l-.38.93c1.04.43 3.25.76 5.58.53 2.35-.22 4.95-1.02 6.68-2.98l-.75-.66Zm-10.92 2.95a15.1 15.1 0 0 0 2.8-5.94l-.96-.27c-.55 1.95-.95 3.36-2.64 5.6l.8.6Zm2.8-5.94c.1-.35.2-.72.33-1.11l-.96-.3-.33 1.14.96.27Zm4.03 1.05a7.25 7.25 0 0 0-2.16-2.3 4.13 4.13 0 0 0-2-.5l-.05 1c.64.03 1.08.08 1.55.36.48.28 1.04.84 1.83 2l.83-.56Zm5.03.9c-1.01.28-2 .48-2.87.4a2.79 2.79 0 0 1-2.16-1.3l-.83.56a3.79 3.79 0 0 0 2.89 1.73 9.2 9.2 0 0 0 3.24-.42l-.27-.96Z"})),r.createElement("defs",null,r.createElement("clipPath",{id:"EmptyF_a"},r.createElement("path",{fill:"#fff",d:"M0 0h64v64H0z"}))))),null)},successState:{title:"Bravo!",description:"There are no more suggestions.",illustration:r.createElement((()=>r.createElement("svg",{fill:"none",viewBox:"0 0 64 64",role:"img","aria-hidden":!0,focusable:!1},r.createElement("g",{clipPath:"url(#SuccessF_a)"},r.createElement("path",{fill:"#41D9B5",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M.8 5.8a5 5 0 0 1 5-5h52.4a5 5 0 0 1 5 5v52.4a5 5 0 0 1-5 5H5.8a5 5 0 0 1-5-5V5.8Z"}),r.createElement("path",{fill:"#DBEBFF",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M4.8 6.8c0-1.1.9-2 2-2h50.4a2 2 0 0 1 2 2v50.4a2 2 0 0 1-2 2H6.8a2 2 0 0 1-2-2V6.8Z"}),r.createElement("g",{clipPath:"url(#SuccessF_b)"},r.createElement("path",{fill:"#99C2FF",d:"M55.66 73.05c-.76.9-1.51 1.8-1.66 2.02H-2.94c.61-2.7.03-5.61-2.37-7.42-2.44-1.83-4.9-3.64-7.27-5.56V37.05l.12.1c1.98 1.79 5.03-.78 7.15.9 11.3 17 27.6 18.48 41.09 9.82 3.86-2.48 6.83-14.07 4.07-18.06-2.48-3.58-8.15-5.66-12.29-3a58.1 58.1 0 0 1-7.42 4.1c-.27.13-.77.28-1.11.38l.92-.25c-.47.13-.94.35-1.4.51-1.22.41-2.47.76-3.73 1.02-.61.13-1.25.2-1.86.33l.89-.2a7.2 7.2 0 0 1-.8.1c-.63.03-1.25 0-1.87-.04h-.07c.44 0 .53-.03-.61-.05a19.27 19.27 0 0 1-2.23-.55h-.01c-.5-.27-1-.5-1.49-.77-.4-.23-.82-.61-1.25-.83l-.42-.34c-1.12-.97-2.1-2.05-3.09-3.13C.7 25.66-3.16 16.37-4.78 15.2 1.27 17.47 10.8 16.8 15.6 14c4.8-2.8 9.6-7.31 11.42-13.73 0 0 8.38.75 14.05 4.15 5.66 3.4 6.8 8.31 9.44 14.74 2.65 6.42 9.07 8.68 15.12 6.38l.37.05-1.13 16.61c-8.38-6-17 .89-19.27 6.04-2.22 5.05 11.37 22.27 10.06 24.81 1.5-1.77 3.06-3.53-.04.07a.52.52 0 0 1-.07.08l.07-.08a.58.58 0 0 0 .04-.07Z",opacity:".7"}),r.createElement("path",{fill:"#FCE5E5",d:"m30.37 12.1 1.17-2.18c.6-1.12 1.3-1.53 2.49-1.97a3.36 3.36 0 0 1 2.64.27c.81.42 1.47.27 2.06.97a15.46 15.46 0 0 1 2.87 13.86c-.11.4-.25.82-.22 1.25.02.34.14.66.19 1 .07.6-.1 1.19-.24 1.77-.56 2.19-.85 4.58.06 6.65.25.56.58 1.1.69 1.7.09.46.04.93 0 1.4-.26 3.04-.13 6.12.4 9.13-7.1.5-14.29-.28-21.12-2.27a1.27 1.27 0 0 1-.52-.24c-.26-.25-.27-.67-.19-1.02.21-.93.86-1.7 1.5-2.42 2.2-2.55 4.42-5.09 6.64-7.63"}),r.createElement("path",{fill:"#F28C8C",fillRule:"evenodd",d:"M24.77 36.29s-15.01-.79-6.79-7.93l-5.65-5.65S9.72 26.48 7.5 32.4c-1.04 2.75 1.39 5.17 4.43 8.21 3.5 3.5 7.82 7.81 8.64 14.39.14 1.11.3 1.87.45 2.33.17 1.1.34 2.26.5 3.5.43 3.31.49 14.3.49 14.3l34.4-.27.05-29.5c0-4.2-2.56-7.97-6.47-9.5l-9.8 7.7c-16.84 3.76-14.9-7.14-14.9-7.14s-.22.21-.57.59l.06-.72Z",clipRule:"evenodd"}),r.createElement("path",{fill:"#FFC940",fillRule:"evenodd",d:"m22.98 37.83 1.2.1 1.2.11a2.27 2.27 0 0 0 0 .32 5.82 5.82 0 0 0 1.34 3.7c1.44 1.72 4.83 3.52 13.04 1.68l.53 2.36c-8.61 1.93-13.15.24-15.43-2.48a8.24 8.24 0 0 1-1.88-5.77v-.02Z",clipRule:"evenodd"}),r.createElement("path",{fill:"#0E101A",d:"m17.98 28.36.33.38a.5.5 0 0 0 .02-.73l-.35.35Zm6.36 7.93.5.05a.5.5 0 0 0-.47-.55l-.03.5Zm-12-13.58.34-.35a.5.5 0 0 0-.75.05l.4.3Zm-4.92 9.45.47.17-.47-.17Zm4.78 8.56.36-.35-.36.35Zm8.48 13.62.5-.06-.5.06Zm.07.61.5-.04-.5.04Zm.06 1.26h.5-.5Zm.1 2.46.5.01a.5.5 0 0 0 0-.1l-.5.1Zm-.1 1.98.5.04-.5-.04ZM22 75.12l-.5.07a.5.5 0 0 0 .5.43v-.5Zm34.39-.26v.5a.5.5 0 0 0 .5-.5h-.5Zm.06-29.1h-.5.5Zm-6.9-9.9.18-.47a.5.5 0 0 0-.5.09l.32.38Zm-9.37 7.7.1.48a.5.5 0 0 0 .21-.1l-.31-.39Zm-14.9-7.14.49.1a.5.5 0 0 0-.84-.46l.35.36Zm-1.08 1.15-.5-.05a.5.5 0 0 0 .88.38l-.38-.33Zm-6.55-9.59c-2.07 1.8-2.9 3.36-2.63 4.73.26 1.35 1.54 2.2 2.87 2.75 1.36.57 2.98.9 4.23 1.09a28.35 28.35 0 0 0 2.15.24h.04l.03-.5.03-.5h-.04l-.11-.01a20.5 20.5 0 0 1-1.95-.22c-1.23-.18-2.75-.5-4-1.02-1.29-.54-2.11-1.22-2.27-2.02-.16-.8.27-2.01 2.3-3.78l-.65-.76Zm-5.67-4.92 5.65 5.65.7-.7-5.65-5.65-.7.7Zm-4.1 9.27a45.35 45.35 0 0 1 4.41-8.7 19.79 19.79 0 0 1 .44-.62l-.4-.3-.4-.3v.01a8.3 8.3 0 0 0-.47.65 46.35 46.35 0 0 0-4.51 8.9l.94.36Zm4.68 8.04a33.1 33.1 0 0 1-3.9-4.42c-.89-1.35-1.2-2.5-.77-3.62l-.94-.35c-.58 1.55-.09 3.06.88 4.52.95 1.45 2.44 2.96 4.02 4.57l.71-.7Zm8.62 13.9c-.8-5.95-5.13-10.35-8.62-13.9l-.71.7c3.53 3.6 7.6 7.77 8.34 13.34l.99-.14Zm.07.63-.07-.62-1 .12.07.6 1-.1Zm.06 1.3c0-.43-.02-.87-.06-1.29l-1 .09c.04.4.06.8.06 1.2h1Zm.1 2.39c-.06-.35-.1-1.1-.1-2.38h-1c0 1.27.03 2.1.11 2.55l.99-.17Zm-.1 2.1c.06-.71.09-1.38.1-2l-1-.03c0 .6-.04 1.25-.1 1.94l1 .09ZM22 75.12l.5-.07-.01-.03-.01-.09a178.11 178.11 0 0 1-.69-5.85c-.33-3.22-.62-6.79-.49-8.4l-1-.08c-.14 1.72.17 5.4.5 8.58a242.97 242.97 0 0 0 .69 5.88v.1l.01.02.5-.06Zm34.39-.76-34.4.26.01 1 34.4-.26-.01-1Zm-.44-28.6-.06 29.1h1l.06-29.1h-1Zm-6.57-9.43a10.02 10.02 0 0 1 6.57 9.43h1c0-4.63-2.88-8.77-7.22-10.37l-.35.94Zm-8.89 7.61 9.38-7.7-.63-.76-9.38 7.69.63.77Zm-15.21-7.52a28.07 28.07 0 0 0-.5-.08 1.23 1.23 0 0 0-.02.14l-.03.37A7.16 7.16 0 0 0 26 41.69c1.8 2.5 5.79 4.25 14.28 2.35l-.22-.97c-8.35 1.86-11.8.05-13.25-1.96a6.16 6.16 0 0 1-1.08-3.09 7.29 7.29 0 0 1 .03-1.51l-.5-.09Zm-.7 1.48a20.66 20.66 0 0 1 1.02-1.1l.02-.01-.34-.37-.35-.36-.02.02-.06.06a14.31 14.31 0 0 0-1.03 1.1l.76.66Zm-.24-1.61-.5-.06v.09l-.03.25-.1.95.99.1a525.27 525.27 0 0 0 .14-1.27l-.5-.06Z"}),r.createElement("path",{stroke:"#0E101A",strokeLinejoin:"round",d:"M48 55.39v11.85L35.83 74.8"}),r.createElement("path",{fill:"#0E101A",d:"m35.6 7.62-3.88 4.16s1.11 19.1-.24 23.23c-1.35 4.13-3.94 11.76-6.08 12.72-2.14.96-5.04.48-5.04-2.4 0-2.87 4.03-7.9 1.64-9.33.4 0 4.66-.98 3.63-6.47-1.03-5.48-2.85-13.96-.23-17.75 2.62-3.8 5.6-4.64 10.2-4.16Z"}),r.createElement("path",{fill:"#FCE5E5",d:"M32.7 11.5c-2.44-.09-6.13 1.14-6.3 3.94-.16 2.8.4 3.8.33 4.5-.08.7-1.21 3.58.24 5.9 1.45 2.34 3.78 3.89 4.59 4.12.8.24 4.51-1.16 6.6-3.18"}),r.createElement("path",{fill:"#0E101A",d:"M32.67 12a.5.5 0 0 0 .04-1l-.04 1Zm-6.27 3.44.5.03-.5-.03Zm5.16 14.52-.14.48.14-.48Zm1.15-18.95a8.94 8.94 0 0 0-4.24.93c-1.33.7-2.47 1.82-2.56 3.47l1 .06c.06-1.16.85-2.04 2.02-2.64 1.16-.6 2.6-.87 3.74-.82l.04-1Zm-6.8 4.4a14.04 14.04 0 0 0 .22 3.63l.06.38c.04.23.05.36.04.47l1 .11c.02-.25 0-.5-.05-.74l-.07-.4-.08-.46c-.1-.66-.2-1.58-.13-2.93l-1-.06Zm.32 4.48-.06.3-.13.53c-.1.41-.2.93-.26 1.51a6.08 6.08 0 0 0 .76 3.88l.85-.53a5.09 5.09 0 0 1-.62-3.25c.05-.52.15-.99.24-1.38l.13-.53c.04-.15.07-.3.08-.42l-.99-.11Zm.31 6.22a12.39 12.39 0 0 0 2.65 2.97 7.58 7.58 0 0 0 2.23 1.36l.28-.96a6.82 6.82 0 0 1-1.88-1.18 11.4 11.4 0 0 1-2.43-2.72l-.85.53Zm4.88 4.33c.2.06.42.06.62.03.22-.02.46-.07.72-.14a14.15 14.15 0 0 0 5.75-3.2l-.7-.71a13.16 13.16 0 0 1-5.88 3.06h-.23l-.28.96Z"}),r.createElement("path",{stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",d:"M31.57 19.2s-.7 3.52-.48 3.95c.21.43 1.4.43 1.99.06"}),r.createElement("path",{fill:"#0E101A",d:"M28.8 20.11c.44 0 .8-.48.8-1.07 0-.6-.36-1.08-.8-1.08-.44 0-.8.48-.8 1.08 0 .59.36 1.07.8 1.07Z"}),r.createElement("path",{stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",d:"m36.34 19.7-2.51-.93 2.43-.88M30.25 26.1s3.6 1.1 4-.9"}),r.createElement("path",{fill:"#F9EA9E",stroke:"#0E101A",strokeLinejoin:"round",d:"M48.27 35s-4.7 12.38-13.47 17.8c-5.76 3.56-13.2 3.6-14 3.2-3 12.82 1.59 16.32 4.38 15.39 2.8-.93 9.17-3.93 15.4-11.59C46.8 52.15 50.97 39.12 54 39.2c-1.2-2.4-5.73-4.2-5.73-4.2Z"}),r.createElement("path",{fill:"#0E101A",d:"M31.23 12c1.46 0 4.71-.06 6.32 2.42 1.61 2.49 4.49 9.96 1.74 19.87-2.74 9.9-3.36 15.25 1.72 15.25 5.07 0 5.98-2.57 5.98-7.7 0-5.12 3.42-5.55 4.27-5.55-2.42-2.02-4.84-.86-5.6-12.98C44.88 11.2 39.38 7.62 35.6 7.62c-.26 0-5.83 4.37-4.38 4.37Z"}),r.createElement("path",{fill:"#FCE5E5",d:"M22.5 23.5c5.14-2.01 5.47-2.87 4.3-3.5-1.17-.63-3.7.79-3.7.79s.28-.46 2.43-1.75c2.14-1.3-.15-2.43-1.8-1.79-.8.31-2.17.88-1.94 1.73 0 0-2-2.98-5.13.25-1.83 1.88-1.74 3.36-1.4 4.22h-.17l-4.92 6.15 4.49 1 3.5-4.79c.99.76 4.99.52 4.32-1.62-.21-.66-.5-1.37-.84-2.01l.01-.02-.16-.26"}),r.createElement("path",{stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",d:"M15.74 24.2s-2.06-2 .9-5.05c3.12-3.22 5.3 0 5.3 0s.24 4.88-2.38 3.95c-1.25-.44.05-3.85.05-3.85"}),r.createElement("path",{stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",d:"M21.77 18.56s.71-.68 2.36-1.33c1.65-.64 3.05.69.9 1.98-2.14 1.3-1.96 1.5-1.96 1.5s3.17-1.56 4.02-.79c.84.77-.31 2.04-4.63 3.5M17.52 19.5s-1.34 2.18-.26 2.85c1.07.67 1.36-.65 1.36-.65"}),r.createElement("path",{fill:"#FCE5E5",d:"M21.98 22.99c-.14-.22-.63-1.35-.77-1.57a.51.51 0 0 0-.17-.2c-.09-.04-.67-1-.77-.98-.24.04-1.02-.23-1.18-.04-.65.77.03 2.18.05 2.52 0 .08.74 1.58.88 1.57.2 0 1.12-.26 1.2-.46"}),r.createElement("path",{stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",d:"M19.56 23.1s-1.48-2.16-.41-2.98c1.06-.82 2.63 1.84 3.3 4 .67 2.14-3.33 2.38-4.32 1.62l-3.87 4.88-2.96-2.69 3.8-5.02"}),r.createElement("path",{fill:"#F28C8C",d:"M12.73 23.92s.4 3.63 4.44 4.44c0 0-2.82 2.02-3.22 4.84-.4 2.83-5.65-.37-5.65-.37l1.61-4.87"}),r.createElement("path",{stroke:"#0E101A",strokeLinejoin:"round",d:"M12.33 23.11s1.62 4.85 5.25 5.25"})),r.createElement("path",{stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M4.8 6.8c0-1.1.9-2 2-2h50.4a2 2 0 0 1 2 2v50.4a2 2 0 0 1-2 2H6.8a2 2 0 0 1-2-2V6.8Z"})),r.createElement("defs",null,r.createElement("clipPath",{id:"SuccessF_a"},r.createElement("path",{fill:"#fff",d:"M0 0h64v64H0z"})),r.createElement("clipPath",{id:"SuccessF_b"},r.createElement("path",{fill:"#fff",d:"M4.8 4.8h54.4v54.4H4.8z"}))))),null)}},{emptyState:{title:"Time to dig in.",description:"Suggestions will appear here.",illustration:r.createElement((()=>r.createElement("svg",{fill:"none",viewBox:"0 0 64 64",role:"img","aria-hidden":!0,focusable:!1},r.createElement("g",{clipPath:"url(#EmptyG_a)"},r.createElement("path",{fill:"#DBEBFF",stroke:"#0E101A",d:"m51.15 10.56-3.71-1.48-5.32 13.38 3.71 1.48z"}),r.createElement("path",{fill:"#4A6EE0",stroke:"#0E101A",d:"m49.29 31.5-14.87-5.9 1.48-3.75a6 6 0 0 1 7.8-3.36l3.71 1.48a6 6 0 0 1 3.36 7.8L49.3 31.5Z"}),r.createElement("path",{fill:"#4A6EE0",fillRule:"evenodd",stroke:"#0E101A",d:"M56.36 7.08a2.47 2.47 0 0 0-1.17-3.63l-5.8-2.31a2.47 2.47 0 0 0-3.35 1.83l-.94 4.95a2.47 2.47 0 0 0 1.51 2.77l4.04 1.6c1.1.44 2.36.03 3-.97l2.71-4.24Zm-2.8-1.16-2.1 3.57-3.52-1.4.93-4.03 4.69 1.86Z",clipRule:"evenodd"}),r.createElement("path",{fill:"#FFF0D4",stroke:"#0E101A",strokeLinecap:"round",d:"M2.96 54.7C-4.82 51.48 7.2 28.34 27.6 22 48 15.65 67.98 49.1 61.9 54c-6.09 4.92-20.72 5.5-32.72 5.1-12-.4-18.44-1.2-26.22-4.4Z"}),r.createElement("path",{fill:"#AAF2E1",stroke:"#0E101A",d:"m11.5 24.49 3.38-2.12 7.63 12.21-3.39 2.12z"}),r.createElement("path",{fill:"#15C39A",stroke:"#0E101A",d:"m17.08 44.75 13.57-8.48-2.13-3.4a6 6 0 0 0-8.27-1.91l-3.4 2.12a6 6 0 0 0-1.9 8.26l2.13 3.41Z"}),r.createElement("path",{fill:"#15C39A",fillRule:"evenodd",stroke:"#0E101A",d:"M5.74 22a2.47 2.47 0 0 1 .5-3.79l5.3-3.31a2.47 2.47 0 0 1 3.62 1.2l1.82 4.7c.43 1.12 0 2.37-1 3l-3.68 2.3c-1.01.63-2.32.46-3.13-.41l-3.43-3.7Zm2.55-1.65L11 23.5l3.22-2-1.64-3.81-4.28 2.67Z",clipRule:"evenodd"}),r.createElement("path",{fill:"#FFF0D4",d:"M19.35 39.37a12.57 12.57 0 0 0-4.97 7.32l9.6 2 14.8-10-6.8-6.8c-4.26 5.53-8.47 4.55-12.63 7.48Z"}),r.createElement("path",{stroke:"#0E101A",strokeLinecap:"round",d:"M14.8 44.4s.76-2.61 4.38-4.9c3.62-2.3 7.62-1.9 12.02-6.3"}),r.createElement("ellipse",{cx:"42.75",cy:"42.11",fill:"#EF6E6E",stroke:"#0E101A",strokeLinejoin:"round",rx:"10.49",ry:"3.82"}),r.createElement("path",{fill:"#FFF0D4",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",d:"M38.63 40.85c-3.34.38-5.22 2.5-5.01 3.79.2 1.28 2.92 4.16 2.92 4.16h9.61S52 48.05 52 45.77c0-2.27-1.67-3.31-3.76-3.78-2.09-.48-4.24.41-4.24.41s-2.03-1.93-5.37-1.55Z"}),r.createElement("path",{fill:"#F28C8C",fillRule:"evenodd",d:"m32.3 42.45 2.18 18.16c0 1.37 3.7 2.48 8.27 2.48C47.3 63.1 51 62 51 60.61l2.19-18.16c-.47 1.95-4.97 3.47-10.45 3.47-5.48 0-9.98-1.52-10.45-3.47Z",clipRule:"evenodd"}),r.createElement("path",{fill:"#0E101A",d:"m32.3 42.45.48-.12a.5.5 0 0 0-.98.18l.5-.06Zm2.18 18.16h.5a.5.5 0 0 0 0-.06l-.5.06Zm16.53 0-.5-.06a.5.5 0 0 0 0 .06h.5Zm2.19-18.16.5.06a.5.5 0 0 0-.99-.18l.49.12Zm-21.4.06 2.18 18.16 1-.12-2.19-18.16-.99.12Zm2.18 18.1c0 .59.4 1.04.86 1.38.48.34 1.14.62 1.92.86 1.55.46 3.67.74 5.99.74v-1c-2.25 0-4.27-.27-5.7-.7a5.76 5.76 0 0 1-1.63-.72c-.37-.26-.44-.46-.44-.56h-1Zm8.77 2.98c2.32 0 4.43-.28 5.99-.74a6.71 6.71 0 0 0 1.91-.86c.47-.34.86-.8.86-1.38h-1c0 .1-.07.3-.43.56-.36.25-.9.5-1.63.72-1.44.43-3.45.7-5.7.7v1Zm8.76-2.92 2.19-18.16-1-.12-2.18 18.16 1 .12Zm1.2-18.34c-.08.33-.34.7-.87 1.08-.51.38-1.24.73-2.15 1.03-1.8.6-4.24.98-6.94.98v1c2.78 0 5.33-.38 7.26-1.03.97-.32 1.8-.72 2.42-1.17.62-.46 1.1-1 1.26-1.66l-.98-.23Zm-9.96 3.1c-2.7 0-5.14-.38-6.95-.99-.9-.3-1.63-.65-2.15-1.03s-.79-.75-.87-1.08l-.97.23c.16.65.63 1.2 1.25 1.66.63.45 1.46.85 2.42 1.17 1.94.65 4.49 1.03 7.27 1.03v-1Z"}),r.createElement("path",{stroke:"#0E101A",strokeLinejoin:"round",d:"M41.81 47.08c.4.63.84 1.27 1.33 1.9 3.81 5 8.67 7.7 10.86 6.03 1.83-1.4 1.22-5.38-1.25-9.56"}),r.createElement("circle",{cx:"41.79",cy:"47.04",r:"1.91",fill:"#F9C7C7",stroke:"#0E101A",strokeLinejoin:"round"})),r.createElement("defs",null,r.createElement("clipPath",{id:"EmptyG_a"},r.createElement("path",{fill:"#fff",d:"M0 0h64v64H0z"}))))),null)},successState:{title:"Looking good!",description:"There are no more suggestions.",illustration:r.createElement((()=>r.createElement("svg",{fill:"none",viewBox:"0 0 64 64",role:"img","aria-hidden":!0,focusable:!1},r.createElement("g",{clipPath:"url(#SuccessG_a)"},r.createElement("path",{stroke:"#0E101A",strokeLinejoin:"round",d:"M32 12V.8"}),r.createElement("path",{fill:"#41D9B5",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",d:"m32 .8 10.4 2-10.4 2v-4Z"}),r.createElement("path",{fill:"#FFF0D4",fillRule:"evenodd",d:"M4.19 57.54c-11.68-1.65 9.45-9.48 23.8-11.66 14.34-2.19 41.86 7.56 33.74 11.33-1.66.77-14.7 2.23-24.14 2.87a6.31 6.31 0 0 0-2.96 1.21c-1.76 1.17-4.44 1.91-7.43 1.91-2.26 0-4.34-.42-5.98-1.13a7.64 7.64 0 0 0-4-.58c-.53.07-1.07.11-1.62.11-2.4 0-4.53-.7-5.93-1.8-1.06-.83-2.18-1.77-3.52-1.97l-.64-.1-1.32-.19Z",clipRule:"evenodd"}),r.createElement("path",{fill:"#0E101A",d:"m27.98 45.88.08.5-.08-.5ZM4.2 57.54l-.07.5.07-.5Zm57.54-.33.21.45-.2-.45Zm-56.22.53.07-.5-.07.5Zm22.4-12.36C20.7 46.48 11.79 49 6.13 51.45a27.57 27.57 0 0 0-3.6 1.83 5.88 5.88 0 0 0-2 1.8 1.5 1.5 0 0 0-.2 1.07c.08.37.32.68.64.91.62.46 1.68.77 3.15.98l.14-1c-1.45-.2-2.29-.49-2.7-.78-.19-.14-.24-.26-.25-.32-.02-.07-.01-.18.09-.36.21-.39.76-.88 1.67-1.45.89-.56 2.06-1.16 3.45-1.76 5.58-2.42 14.4-4.91 21.54-6l-.15-.99Zm34.03 12.28c1.08-.5 1.77-1.2 1.76-2.11 0-.86-.63-1.67-1.48-2.4-1.73-1.46-4.94-3-8.78-4.31-7.69-2.65-18.25-4.57-25.53-3.46l.15 1c7.06-1.08 17.43.78 25.06 3.4 3.81 1.32 6.87 2.8 8.46 4.14.8.7 1.12 1.24 1.12 1.63 0 .33-.22.76-1.18 1.2l.42.91Zm-24.31 2.92c4.72-.32 10.35-.85 15-1.39 2.33-.27 4.42-.55 6.03-.8.8-.13 1.5-.26 2.05-.38a6.6 6.6 0 0 0 1.23-.35l-.42-.9a5.9 5.9 0 0 1-1.02.28c-.52.11-1.2.23-2 .36-1.59.25-3.66.53-5.98.8-4.64.54-10.25 1.07-14.96 1.39l.07 1ZM27.2 63.7c3.07 0 5.84-.76 7.7-1.99l-.55-.83c-1.66 1.1-4.23 1.82-7.15 1.82v1Zm-6.17-1.17c1.7.74 3.85 1.17 6.17 1.17v-1c-2.2 0-4.2-.41-5.78-1.09l-.4.92ZM17.14 61c-.5.06-1 .1-1.54.1v1c.58 0 1.14-.04 1.68-.11l-.14-1Zm-1.54.1c-2.3 0-4.33-.68-5.62-1.69l-.61.79c1.5 1.18 3.75 1.9 6.23 1.9v-1ZM5.44 58.23l.64.1.14-1-.64-.09-.14 1Zm-1.32-.2 1.32.2.14-.99-1.32-.2-.14 1Zm5.86 1.38c-1.02-.8-2.26-1.85-3.76-2.07l-.14.98c1.18.18 2.18 1.01 3.29 1.88l.61-.79Zm11.44 2.2a8.13 8.13 0 0 0-4.28-.61l.14.99a7.14 7.14 0 0 1 3.75.54l.4-.92Zm16.14-2.02c-1.22.08-2.3.68-3.2 1.29l.54.83a5.83 5.83 0 0 1 2.73-1.13l-.07-1Z"}),r.createElement("path",{fill:"#FFF0D4",stroke:"#0E101A",strokeLinecap:"round",d:"M36.4 21.6h-8.8a2 2 0 0 1-2-2v-4.37a2 2 0 0 1 .59-1.42l4.4-4.4a2 2 0 0 1 2.82 0l4.4 4.4a2 2 0 0 1 .59 1.42v4.37a2 2 0 0 1-2 2Z"}),r.createElement("path",{fill:"#F28C8C",stroke:"#0E101A",d:"M30.4 13.6a1.6 1.6 0 0 1 3.2 0v3.2h-3.2v-3.2Z"}),r.createElement("path",{fill:"#FFF0D4",stroke:"#0E101A",strokeLinecap:"round",d:"M39.6 20H24.4a2 2 0 0 0-2 2v21.6c0 1.1.9 2 2 2h15.2a2 2 0 0 0 2-2V22a2 2 0 0 0-2-2Z"}),r.createElement("path",{fill:"#F28C8C",stroke:"#0E101A",d:"M30.4 24.8a1.6 1.6 0 0 1 3.2 0V28h-3.2v-3.2Z"}),r.createElement("path",{fill:"#FFF0D4",stroke:"#0E101A",strokeLinecap:"round",d:"M26 28h-7.2a2 2 0 0 0-2 2v17.6c0 1.1.9 2 2 2H26a2 2 0 0 0 2-2V30a2 2 0 0 0-2-2Z"}),r.createElement("path",{fill:"#F28C8C",stroke:"#0E101A",d:"M20.8 32.8a1.6 1.6 0 0 1 3.2 0V36h-3.2v-3.2Z"}),r.createElement("path",{fill:"#FFF0D4",stroke:"#0E101A",strokeLinecap:"round",d:"M45.2 28H38a2 2 0 0 0-2 2v17.6c0 1.1.9 2 2 2h7.2a2 2 0 0 0 2-2V30a2 2 0 0 0-2-2Z"}),r.createElement("path",{fill:"#F28C8C",stroke:"#0E101A",d:"M40 32.8a1.6 1.6 0 1 1 3.2 0V36H40v-3.2Z"}),r.createElement("path",{fill:"#FFF0D4",fillRule:"evenodd",d:"M12.8 41.2c0-1.1.9-2 2-2h2.54a2 2 0 0 1 2 2v2h4.08v-2c0-1.1.9-2 2-2h2.54a2 2 0 0 1 2 2v2h4.08v-2c0-1.1.9-2 2-2h2.54a2 2 0 0 1 2 2v2h4.08v-2c0-1.1.9-2 2-2h2.54a2 2 0 0 1 2 2v4a2 2 0 0 1-.05.45c.03.18.05.36.05.55v7.4H12.8v-7.4c0-.19.02-.37.05-.55a2 2 0 0 1-.05-.45v-4Z",clipRule:"evenodd"}),r.createElement("path",{fill:"#0E101A",d:"M19.34 43.2h-.5v.5h.5v-.5Zm4.08 0v.5h.5v-.5h-.5Zm6.54 0h-.5v.5h.5v-.5Zm4.08 0v.5h.5v-.5h-.5Zm6.54 0h-.5v.5h.5v-.5Zm4.08 0v.5h.5v-.5h-.5Zm6.49 2.45-.49-.11-.02.1.02.1.49-.1Zm.05 7.95v.5h.5v-.5h-.5Zm-38.4 0h-.5v.5h.5v-.5Zm.05-7.95.5.09.01-.1-.02-.1-.49.1Zm1.95-6.95a2.5 2.5 0 0 0-2.5 2.5h1c0-.83.67-1.5 1.5-1.5v-1Zm2.54 0H14.8v1h2.54v-1Zm2.5 2.5a2.5 2.5 0 0 0-2.5-2.5v1c.82 0 1.5.67 1.5 1.5h1Zm0 2v-2h-1v2h1Zm3.58-.5h-4.08v1h4.08v-1Zm-.5-1.5v2h1v-2h-1Zm2.5-2.5a2.5 2.5 0 0 0-2.5 2.5h1c0-.83.67-1.5 1.5-1.5v-1Zm2.54 0h-2.54v1h2.54v-1Zm2.5 2.5a2.5 2.5 0 0 0-2.5-2.5v1c.83 0 1.5.67 1.5 1.5h1Zm0 2v-2h-1v2h1Zm3.58-.5h-4.08v1h4.08v-1Zm-.5-1.5v2h1v-2h-1Zm2.5-2.5a2.5 2.5 0 0 0-2.5 2.5h1c0-.83.67-1.5 1.5-1.5v-1Zm2.54 0h-2.54v1h2.54v-1Zm2.5 2.5a2.5 2.5 0 0 0-2.5-2.5v1c.83 0 1.5.67 1.5 1.5h1Zm0 2v-2h-1v2h1Zm3.58-.5h-4.08v1h4.08v-1Zm.5.5v-2h-1v2h1Zm0-2c0-.83.68-1.5 1.5-1.5v-1a2.5 2.5 0 0 0-2.5 2.5h1Zm1.5-1.5h2.54v-1h-2.54v1Zm2.54 0c.83 0 1.5.67 1.5 1.5h1a2.5 2.5 0 0 0-2.5-2.5v1Zm1.5 1.5v4h1v-4h-1Zm0 4c0 .12-.01.23-.04.34l.98.22c.04-.18.06-.37.06-.56h-1Zm1 1c0-.22-.02-.43-.06-.64l-.98.18c.03.15.04.3.04.46h1Zm0 7.4v-7.4h-1v7.4h1Zm-19.7.5h19.2v-1H32v1Zm-19.2 0H32v-1H12.8v1Zm-.5-7.9v7.4h1v-7.4h-1Zm.06-.64c-.04.2-.06.42-.06.64h1c0-.16.01-.31.04-.46l-.98-.18Zm-.06-.36c0 .2.02.38.06.56l.98-.22a1.5 1.5 0 0 1-.04-.34h-1Zm0-4v4h1v-4h-1Z"}),r.createElement("path",{fill:"#FFF0D4",d:"M13.2 50.4h37.6v6.4H13.2v-6.4Z"}),r.createElement("circle",{cx:"7.2",cy:"7.2",r:"6.4",fill:"#F8E485",stroke:"#0E101A"}),r.createElement("path",{stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",d:"M3.2 21.6c2.18 0 4 4 4 4s1.82-4 4-4M12.8 16c1.75 0 3.2 3.2 3.2 3.2s1.45-3.2 3.2-3.2"})),r.createElement("defs",null,r.createElement("clipPath",{id:"SuccessG_a"},r.createElement("path",{fill:"#fff",d:"M0 0h64v64H0z"}))))),null)}},{emptyState:{title:"All the world's a page.",description:"Suggestions will appear here.",illustration:r.createElement(Wv,null)},successState:{title:"You deserve a break.",description:"There are no more suggestions.",illustration:r.createElement((()=>r.createElement("svg",{fill:"none",viewBox:"0 0 64 64",role:"img","aria-hidden":!0,focusable:!1},r.createElement("path",{stroke:"#0E101A",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M28.64 24s2.56-1.62 2.56-4.86c0-4.92-6.4-5.8-6.4-10.67 0-3.36 3.84-6.07 3.84-6.07M36.64 21.6s2.56-1.56 2.56-4.68c0-4.8-6.4-5.52-6.4-10.28C32.8 3.41 36.64.8 36.64.8"}),r.createElement("path",{fill:"#C6CBDE",d:"M32.8 64c11.05 0 20-1.43 20-3.2 0-1.77-8.95-3.2-20-3.2s-20 1.43-20 3.2c0 1.77 8.95 3.2 20 3.2Z"}),r.createElement("path",{fill:"#1995BB",fillRule:"evenodd",stroke:"#0E101A",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M49.6 35.2h5.39c2.82 0 5.01 2.47 5.01 5.36v6.08c0 2.89-2.2 5.36-5.01 5.36H49.6v-3.5h5.39c.85 0 1.66-.78 1.66-1.86v-6.08c0-1.08-.81-1.86-1.66-1.86H49.6v-3.5Z",clipRule:"evenodd"}),r.createElement("path",{fill:"#15C39A",stroke:"#0E101A",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M31 60.8a19 19 0 0 1-19-19V31.2h40v10.6a19 19 0 0 1-19 19h-2Z"}),r.createElement("path",{fill:"#F7E68B",d:"M49.66 32.63c1.5-.44 2.34-.94 2.34-1.48C52 29.41 43.04 28 32 28s-20 1.4-20 3.15c0 .6 1.08 1.17 2.95 1.65 3.37-1 10-1.67 17.65-1.67 7.22 0 13.54.6 17.06 1.5Z"}),r.createElement("path",{fill:"#1F243C",stroke:"#0E101A",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M49.6 32.71c-3.49-.9-9.75-1.51-16.9-1.51-7.58 0-14.16.68-17.5 1.69 3.49.9 9.75 1.51 16.9 1.51 7.58 0 14.16-.68 17.5-1.69Z"}),r.createElement("path",{stroke:"#0E101A",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M32 34.4c11.05 0 20-1.43 20-3.2 0-1.77-8.95-3.2-20-3.2s-20 1.43-20 3.2c0 1.77 8.95 3.2 20 3.2ZM23.2 34v7.6"}),r.createElement("path",{fill:"#FAC0D6",stroke:"#0E101A",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M25.98 48.64H20.6a.77.77 0 0 1-.77-.76V42.5c0-.42.35-.77.77-.77h5.37c.42 0 .77.35.77.77v5.37c0 .42-.35.76-.77.76Z"}))),null)}},{emptyState:{title:"Let's get to work.",description:"Suggestions will appear here.",illustration:r.createElement((()=>r.createElement("svg",{fill:"none",viewBox:"0 0 64 64",role:"img","aria-hidden":!0,focusable:!1},r.createElement("g",{clipPath:"url(#EmptyJ_a)"},r.createElement("ellipse",{cx:"32",cy:"57.6",fill:"#C6CBDE",rx:"32",ry:"5.6"}),r.createElement("path",{fill:"#F28C8C",fillRule:"evenodd",stroke:"#0E101A",strokeLinejoin:"round",d:"M26.4 5.6A2.4 2.4 0 0 0 24 8v8.8a2.4 2.4 0 0 0 2.4 2.4h12.8a2.4 2.4 0 0 0 2.4-2.4V8a2.4 2.4 0 0 0-2.4-2.4H26.4ZM19.2 8A7.2 7.2 0 0 1 26.4.8h12.8A7.2 7.2 0 0 1 46.4 8v8.8a7.2 7.2 0 0 1-7.2 7.2H26.4a7.2 7.2 0 0 1-7.2-7.2V8Z",clipRule:"evenodd"}),r.createElement("rect",{width:"62.4",height:"46.4",x:".8",y:"11.2",fill:"#41D9B5",stroke:"#000",strokeLinejoin:"round",rx:"10"}),r.createElement("path",{stroke:"#000",strokeLinejoin:"round",d:"M15.2 21.2v7.2a10 10 0 0 0 10 10h28a10 10 0 0 0 10-10v-7.2"}),r.createElement("rect",{width:"14.4",height:"46.4",x:".8",y:"11.2",fill:"#11A683",stroke:"#000",strokeLinejoin:"round",rx:"7.2"}),r.createElement("path",{fill:"#F9EA9E",stroke:"#0E101A",d:"M23.2 32.4c0-1.1.9-2 2-2h5.6a2 2 0 0 1 2 2v10a4.8 4.8 0 0 1-9.6 0v-10Z"}),r.createElement("circle",{cx:"28",cy:"42.4",r:"2.4",fill:"#4D536E",stroke:"#0E101A"}),r.createElement("path",{fill:"#F9EA9E",stroke:"#0E101A",d:"M46.4 32.4c0-1.1.9-2 2-2H54a2 2 0 0 1 2 2v10a4.8 4.8 0 1 1-9.6 0v-10Z"}),r.createElement("circle",{cx:"51.2",cy:"42.4",r:"2.4",fill:"#4D536E",stroke:"#0E101A"})),r.createElement("defs",null,r.createElement("clipPath",{id:"EmptyJ_a"},r.createElement("path",{fill:"#fff",d:"M0 0h64v64H0z"}))))),null)},successState:{title:"Great job!",description:"There are no more suggestions.",illustration:r.createElement((()=>r.createElement("svg",{fill:"none",viewBox:"0 0 64 64",role:"img","aria-hidden":!0,focusable:!1},r.createElement("path",{fill:"#FBEFB7",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M15.32 25.44c-1.2-2.02-3.23-.8-2.74.98-1.07-1.63-.47-2.98-1.04-4.04-.66-1.26-2.4-.82-2.33.65-.47-1.33.12-2.9-.09-3.74-.33-1.45-2.05-1.14-1.93.21a14.38 14.38 0 0 1-2.07-7.45c0-3.7 1.62-6.76 3.88-6.76 1.86 0 2.82 1.82 2.18 3.39-.3-.83-.83-1.27-1.69-1.27-1 0-1.63.98-1.63 2.2 0 1.75 1.45 2.75 3.23 2.77 2.05 0 3.4-2 3.4-4.32 0-3.09-2.28-6.14-5.91-5.65 1-.8-.16-2.26-1.39-1.28C4.26 3.43 2.4 7.36 2.4 11.82c0 11.26 10.86 23.53 21.75 20.76l-1.87-3.25c-3.15 0-5.33-1.14-6.96-3.9ZM56.94 1.13c-1.23-.98-2.39.47-1.39 1.28-3.63-.5-5.91 2.54-5.91 5.63 0 2.32 1.33 4.32 3.4 4.32 1.76 0 3.23-1 3.23-2.75 0-1.22-.63-2.2-1.63-2.2-.86 0-1.39.44-1.69 1.27-.65-1.57.32-3.37 2.18-3.37 2.26 0 3.88 3.05 3.88 6.75 0 2.65-.74 5.23-2.06 7.48.1-1.35-1.6-1.67-1.93-.21-.19.84.39 2.4-.08 3.74.07-1.48-1.69-1.92-2.34-.65-.56 1.05.02 2.4-1.03 4.03.49-1.75-1.53-2.98-2.74-.98-1.65 2.74-3.81 3.9-6.97 3.88L40 32.6c10.88 2.77 21.76-9.48 21.76-20.75-.05-4.46-1.9-8.39-4.82-10.72Z"}),r.createElement("path",{fill:"#C6CBDE",d:"M32 63.2c12.81 0 23.2-1.61 23.2-3.6S44.81 56 32 56c-12.81 0-23.2 1.61-23.2 3.6s10.39 3.6 23.2 3.6Z"}),r.createElement("path",{fill:"#F6DF6C",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M47.2 55.2H16.8a2.4 2.4 0 1 0 0 4.8h30.4a2.4 2.4 0 0 0 0-4.8Z"}),r.createElement("path",{fill:"#F6DF6C",fillRule:"evenodd",d:"M32 4.64H14.77c-1.64 14.28 2.98 25.28 9.5 30.84.37.33.77.64 1.16.96 1.9 1.5 3.8 3.03 3.77 5.4-.05 3.19-.51 4.8-.51 4.8-.82 3.1-3.62 4.07-6.1 4.93-2.28.78-4.3 1.48-4.3 3.63H45.7c0-2.15-2.01-2.85-4.28-3.63-2.5-.86-5.3-1.83-6.1-4.93 0 0-.47-1.61-.52-4.8-.04-2.37 1.87-3.9 3.77-5.4.4-.32.8-.63 1.17-.96 6.51-5.56 11.13-16.56 9.49-30.84H32Z",clipRule:"evenodd"}),r.createElement("path",{fill:"#0E101A",d:"M14.77 4.64v-.5a.5.5 0 0 0-.5.44l.5.06Zm9.5 30.84.32-.38-.33.38Zm1.16.96.32-.4-.32.4Zm3.77 5.4h.5-.5Zm-.51 4.8-.48-.13.48.13Zm-6.1 4.93-.17-.48.16.48Zm-4.3 3.63h-.5c0 .28.23.5.5.5v-.5Zm27.41 0v.5a.5.5 0 0 0 .5-.5h-.5Zm-4.28-3.63.16-.48-.16.48Zm-6.1-4.93.48-.12v-.01l-.49.13Zm-.52-4.8h-.5.5Zm3.77-5.4.3.4-.3-.4Zm1.17-.96.32.38-.32-.38Zm9.49-30.84.5-.06a.5.5 0 0 0-.5-.44v.5Zm-34.46.5H32v-1H14.77v1ZM24.6 35.1c-6.36-5.43-10.95-16.25-9.32-30.4l-1-.12c-1.65 14.41 3 25.59 9.67 31.28l.65-.76Zm1.16.95c-.4-.32-.8-.63-1.16-.95l-.65.76c.38.33.79.66 1.18.97l.63-.78Zm3.95 5.8a5.03 5.03 0 0 0-1.27-3.35c-.75-.91-1.75-1.7-2.68-2.45l-.63.78c.96.76 1.87 1.49 2.54 2.3.65.8 1.06 1.67 1.04 2.7l1 .01Zm-1.01 4.8.48.13v-.03a5.33 5.33 0 0 0 .08-.3l.17-.94c.12-.82.25-2.05.28-3.67l-1-.01a26.8 26.8 0 0 1-.43 4.4 7.18 7.18 0 0 1-.06.27l.48.14Zm-5.94 5.39c2.44-.84 5.53-1.87 6.42-5.27l-.97-.25c-.73 2.8-3.24 3.7-5.78 4.57l.33.95ZM18.8 55.2c0-.88.39-1.45 1.07-1.92.72-.5 1.72-.84 2.88-1.24l-.33-.95c-1.12.39-2.26.78-3.12 1.37-.89.61-1.5 1.46-1.5 2.74h1Zm13.2-.5H18.3v1H32v-1Zm0 1h13.7v-1H32v1Zm14.2-.5c0-1.28-.61-2.13-1.5-2.74-.86-.59-2-.98-3.12-1.37l-.33.95c1.16.4 2.16.75 2.88 1.24.68.47 1.07 1.04 1.07 1.92h1Zm-4.62-4.1c-2.54-.88-5.05-1.78-5.78-4.58l-.97.25c.9 3.4 3.98 4.43 6.42 5.27l.33-.95Zm-6.27-4.46.48-.13v-.01a5.92 5.92 0 0 1-.06-.26c-.04-.2-.1-.49-.16-.88a26.8 26.8 0 0 1-.27-3.53l-1 .01a27.78 27.78 0 0 0 .45 4.6 8.12 8.12 0 0 0 .07.31l.01.02v.01l.48-.14Zm-.01-4.81a4.04 4.04 0 0 1 1.04-2.7c.67-.81 1.58-1.54 2.54-2.3l-.63-.78c-.93.74-1.93 1.54-2.68 2.45-.76.92-1.3 2-1.27 3.34l1-.01Zm3.58-5c.4-.31.8-.64 1.18-.97l-.65-.76c-.37.32-.76.63-1.16.95l.63.78Zm1.18-.97c6.67-5.7 11.32-16.87 9.66-31.28l-.99.12c1.63 14.15-2.96 24.97-9.32 30.4l.65.76Zm9.17-31.72H32v1h17.23v-1Z"}),r.createElement("path",{stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M30.8 40h2.4"}),r.createElement("path",{fill:"#FBEFB7",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M49.18 4.8H14.8c-.2 1.52-.33 3.25-.39 4.62.63.45 1.46.79 2.43.94 1.71.27 3.36-.15 4.3-.99.49 1.06 1.72 1.86 3.25 1.96 1.42.08 2.7-.44 3.43-1.29.6 1.14 2.23 1.96 4.2 1.96 1.95 0 3.6-.82 4.2-1.96.74.85 2.01 1.4 3.43 1.29 1.53-.1 2.79-.9 3.25-1.96.94.84 2.57 1.26 4.28.99a5.78 5.78 0 0 0 2.43-.94 79.1 79.1 0 0 0-.42-4.62Z"}),r.createElement("path",{fill:"#0E101A",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M32 4.8H15.2C18.85 6.74 25.01 8 32 8s13.15-1.26 16.8-3.2H32Z"}),r.createElement("path",{fill:"#fff",stroke:"#0E101A",strokeMiterlimit:"10",d:"M8.96 52c-.1 0-.16-.08-.16-.19.15-5.94-1.89-8.1-7.83-8.26-.1 0-.17-.08-.17-.19 0-.1.08-.16.19-.16 5.94.15 8.1-1.89 8.26-7.83 0-.1.08-.17.19-.17.1 0 .16.08.16.19-.15 5.94 1.89 8.1 7.83 8.24.1 0 .17.09.17.19s-.08.17-.19.17c-5.94-.15-8.1 1.88-8.26 7.82-.02.12-.08.19-.19.19ZM56.25 54.4c-.06 0-.1-.05-.1-.11.1-3.68-1.17-5.02-4.85-5.12-.06 0-.1-.05-.1-.12 0-.06.05-.1.11-.1 3.68.1 5.02-1.17 5.12-4.85 0-.06.05-.1.12-.1.06 0 .1.05.1.11-.1 3.68 1.17 5.02 4.85 5.11.06 0 .1.05.1.12 0 .06-.05.1-.11.1-3.68-.1-5.02 1.17-5.12 4.85-.01.07-.05.11-.12.11ZM39.84 26.4c-.06 0-.1-.06-.1-.12.1-3.96-1.27-5.4-5.23-5.51-.07 0-.11-.06-.11-.13 0-.06.06-.1.12-.1 3.96.1 5.4-1.27 5.51-5.23 0-.07.06-.11.13-.11.06 0 .1.06.1.12-.1 3.96 1.27 5.4 5.23 5.5.07 0 .11.06.11.13 0 .06-.06.1-.12.1-3.96-.1-5.4 1.27-5.51 5.23-.01.08-.06.12-.13.12Z"}))),null)}}];function qP(e=Math.random){return Math.floor(e()*YP.length)}function XP(e,t){const i={title:"Nothing to see yet",description:`No unresolved suggestions for pages ${t.startPage}-${t.endPage}.`};return{emptyState:Object.assign(Object.assign({},e.emptyState),i),successState:Object.assign(Object.assign({},e.emptyState),i)}}function QP(e,t){const i=d.h.create(o.YP),n=i.pipe(m.w(o.g_((()=>p.of(0)),(t=>e.suggestionCount.getFeedSuggestionCount(t)))));return s.Z.fromSideEffect((t=>{switch(t.kind){case"lensesHeaderToggle":return e.feedLens.onToggleLens(t.lensId);case"lensesHeaderFocus":i.set(o.G(t.lensId));break;case"lensesHeaderBlur":i.set(o.YP);break;default:(0,c.L0)(t)}}),qt.a([t,e.feedLens.lenses,i,n]).pipe(O.U((([e,t,i,n])=>(0,a.zG)(e,o.UI((e=>({activeLensId:e,lenses:(0,a.zG)([cn.lensCorrectnessFeed,cn.lensClarityFeed,cn.lensEngagementFeed,cn.lensDeliveryFeed,cn.lensStyleGuideFeed],E.UI((e=>o.ij(t.get(e)))),E.oA),focusedLensId:i,focusedLensSuggestionCount:n})))))),U.oA))}function JP(e,t=Math.random){const i=qP(t),n=(0,a.zG)(e.pageRange.pageRange.get(),o.g_((()=>YP[i]),(e=>XP(YP[i],e)))),r=aP(e.feed.feed).pipe(R.shareReplay({bufferSize:1,refCount:!0})),l=e.feed.feed.view(o.tS((e=>hn(e.id))));return s.Z.composeUnion({loadingState:()=>e.feedForm.state.view("supportedForms").view((e=>e.has("shortForm"))).view((e=>({supportsShortForm:e}))),emptyState:s.Z.fromSideEffect((t=>{"longFormFeedEmptyMount"!==t.kind?(0,c.L0)(t.kind):e.feed.onEmptyStateMount(e.checkingState.firstCheckingFinishedAndSduiEventsSettledTimedOut.get())}),p.of({content:n.emptyState})),successState:()=>p.of({content:n.successState,goBackFrom:o.YP}),nonEmptyState:s.Z.composeKnot({root:tM(e),lensesHeader:QP(e,l),lensView:s.Z.composeUnion({successState:s.Z.fromSideEffect((t=>{switch(t.kind){case"goBack":return e.feedLens.onToggleLens(t.goBackFrom);case"longFormFeedSuccessMount":return e.feed.onSuccessStateMount();default:return(0,c.L0)(t)}}),qt.a([l,e.feedLens.lenses]).pipe(O.U((([e,t])=>({content:Object.assign(Object.assign({},n.successState),(0,a.zG)(e,o.g_(a.gn,(e=>({description:(0,a.zG)(o.ij(t.get(e)),o.g_((()=>n.successState.description),(e=>`There are no more ${e.label.toLowerCase()} suggestions.`)))}))))),goBackFrom:e}))))),cardList:s.Z.composeKnot({cardList:oP(e,r)})},(()=>qt.a([r]).pipe(O.U((([e])=>(0,a.zG)(e,o.Gg((e=>e.items.length>0)))?"cardList":"successState")),A.x(),O.U((e=>({kind:e}))))))})},(()=>eM(e).view((e=>({kind:e})))))}function eM(e){return d.h.combine(e.feed.feed,e.feed.feedReset,e.checkingState.firstCheckingFinishedAndSduiEventsSettled,e.checkingState.firstCheckingFinishedAndSduiEventsSettledTimedOut,e.suggestionCount.state,((e,t,i,n,{allSuggestionsEmpty:r,someSuggestionsAddressed:s})=>{const a=!i&&!n;return o.Wi(e)||0===kn(e.value.collection)&&(a||t)?"loadingState":r?s?"successState":"emptyState":"nonEmptyState"}))}function tM(e){return s.Z.fromSideEffect((t=>{switch(t.kind){case"longFormFeedMount":return e.feed.onFeedMount();case"toggleShortFormFeed":return e.feedForm.onToggleFeedForm("shortForm");case"partialPageRangeHeaderMount":return e.pageRange.partialPageRangeHeaderMount();default:(0,c.L0)(t)}}),d.h.combine(e.suggestionCount.state.view("activeFeedSuggestionCount"),e.feedForm.state.view("supportedForms").view((e=>e.has("shortForm"))),e.pageRange.pageRange.view(),((e,t,i)=>({suggestionCount:e,canCollapseToShortForm:t,pageRange:i}))))}var iM=i(89069);function nM(e,t=Math.random){const i=qP(t),n=(0,a.zG)(e.revision.pageRange.pageRange.get(),o.g_((()=>YP[i]),(e=>XP(YP[i],e))));return s.Z.composeUnion({loadingState:()=>p.of(null),emptyState:s.Z.fromSideEffect((t=>{"shortFormFeedEmptyMount"!==t.kind?(0,c.L0)(t.kind):e.revision.feed.onEmptyStateMount(e.revision.checkingState.firstCheckingFinishedAndSduiEventsSettledTimedOut.get())}),p.of({emptyStateContent:n,useVerticalLayout:"standard"===e.revision.shortFormFeedMode})),successState:s.Z.fromSideEffect((t=>{"shortFormFeedEmptyMount"!==t.kind?(0,c.L0)(t.kind):e.revision.feed.onSuccessStateMount()}),p.of({emptyStateContent:n,useVerticalLayout:"standard"===e.revision.shortFormFeedMode})),nonEmptyState:rM(e)},(()=>sM(e).view((e=>({kind:e})))))}function rM(e){const t=d.h.create([]);return s.Z.fromSideEffect((i=>{switch(i.kind){case"shortFormCardSduiNotify":return i.actions.find((e=>"prevCard"===e.type||"nextCard"===e.type))&&t.set(i.actions.filter(iM.zx.Action.isTransitionAction)),eP(i.actions)&&e.revision.suggestionCount.onSuggestionAddressed(),e.revision.feed.processActions(i.actions,i.item,i.scope,i.sourceId);case"shortFormCardMount":return e.revision.feed.onItemMount(!0,i.item);case"shortFormFeedAnimationEnd":return t.set([]);case"shortFormFeedMount":return t.set([]),e.revision.feed.onFeedMount();case"toggleLongFormFeed":return e.revision.feedForm.onToggleFeedForm("longForm");case xt.i.Kind.actionsMenuMuteClick:case xt.i.Kind.actionsMenuReportIncorrectClick:case xt.i.Kind.actionsMenuReportOffensiveClick:case xt.i.Kind.addToDictionaryClick:case xt.i.Kind.suggestionAcceptClick:case xt.i.Kind.suggestionDismissClick:return e.notify(i);default:(0,c.L0)(i)}}),qt.a([(i=e.revision.feed.feed,i.pipe(_r.R(((e,t)=>(0,a.zG)(t,o.tS((e=>k.Yt(o.Kw)({feedId:o.G(e.id),item:Cn(e.collection),index:En(e.collection),size:o.G(kn(e.collection))}))),o.UI((({feedId:t,item:i,index:n,size:r})=>({feedId:t,item:i,isFirst:0===n,isLast:n===r-1,prevItem:(0,a.zG)(e,o.tS((e=>e.item.id===i.id?e.prevItem:o.G(e.item))))}))))),o.YP))).pipe(U.oA),e.revision.suggestionCount.state.view("activeFeedSuggestionCount"),e.revision.feedForm.state.view("supportedForms").view((e=>e.has("longForm"))),t,e.revision.feed.isWaitingForAlertsToBeApplied,e.revision.pageRange.pageRange]).pipe(O.U((([{item:e,prevItem:t,isFirst:i,isLast:n},r,s,o,l,c])=>({item:Object.assign(Object.assign({},e),{content:(0,a.zG)(e.content,tP(i,n))}),isFirst:i,isLast:n,prevItem:t,transitions:o,suggestionCount:r,canExpandToLongForm:s&&r>1,isWaitingForAlertsToBeApplied:l,pageRange:c})))));var i}function sM(e){return d.h.combine(e.revision.feed.feed,e.revision.feed.feedReset,e.revision.checkingState.firstCheckingFinishedAndSduiEventsSettled,e.revision.checkingState.firstCheckingFinishedAndSduiEventsSettledTimedOut,e.revision.suggestionCount.state.view("someSuggestionsAddressed"),((e,t,i,n,r)=>(0,a.zG)(e,o.g_((()=>"loadingState"),(e=>(0,a.zG)(Cn(e.collection),o.g_((()=>t?"loadingState":i||n?r?"successState":"emptyState":"loadingState"),(()=>"nonEmptyState"))))))))}const oM=()=>p.of(null);function aM(e){return s.Z.composeUnion({none:oM,shortFormFeed:s.Z.composeKnot({feed:(0,a.zG)(e.revision,o.UI((t=>({revision:t,notify:e.notify}))),o.g_((()=>oM),nM))}),longFormFeed:s.Z.composeKnot({feed:(0,a.zG)(e.revision,o.UI((t=>Object.assign(Object.assign({},t),{uphook:e.uphook}))),o.g_((()=>oM),JP))})},(()=>lM(e).view((e=>({kind:e})))))}function lM(e){return d.h.combine(e.routing.activeView,e.textEditor.state.view("hasBeenNonEmpty"),e.lifecycle.heightBehavior.view("kind"),(0,a.zG)(e.revision,o.g_((()=>d.h.create(null).view()),(e=>d.h.combine(e.feed.isAllSuggestionsFeedEnabled,e.feedForm.state.view("feedForm"),e.suggestionCount.state.view("allSuggestionsCount"),((e,t,i)=>({isAllSuggestionsFeedEnabled:e,feedForm:t,allSuggestionsCount:i})))))),((t,i,n,r)=>"home"===t.kind&&null!==r&&r.isAllSuggestionsFeedEnabled&&((0,a.zG)(i,o.Gg(a.yR))||"revision"===e.experience||r.allSuggestionsCount>0||"longForm"===r.feedForm&&"fitContainer"===n)?"shortForm"===r.feedForm?"shortFormFeed":"longForm"===r.feedForm?"longFormFeed":(0,c.L0)(r.feedForm):"none"))}const cM=["aiStudioAction","plagiarismAction","writingExpertAction","quickAction","followUpQuestion","toneAction","performanceScoreAction","humanWritingReportAction","skillAction"],dM=V.Zt(((e,t)=>{return e.kind===t.kind?0:(i=e.kind,new Set(cM.slice(cM.indexOf(i)+1))).has(t.kind)?-1:1;var i}));function uM(e){return s.Z.fromSideEffect((t=>e.notify(t)),d.h.combine(e.promptActions.state,e.assistant.state.view("genAIAvailability"),e.assistant.state.view("genAISession"),e.routing.activeView,e.promptMenu.state,(({contextualActions:e,toneAction:t,performanceScoreAction:i,plagiarismAction:n,skillActions:r,writingExpertAction:s,aiStudioBrandVoiceAction:l,humanWritingReportAction:c,playbooksAction:d},u,m,p,g)=>{const h=E.oA([d,"home"===p.kind?s:o.YP,"home"===p.kind?l:o.YP,t,n,i,c]).concat(r),f=(0,a.zG)(e,o.g_((()=>[]),(e=>e.actions))),b=(0,a.zG)(f.concat(h).map(ro.RegularAction.make),E.DY(V.Uz((e=>e.action))(dM)));return{loading:(0,a.zG)(e,o.g_((()=>(0,a.zG)(m,o.g_((()=>!1),le.isStartingWithoutError))),(e=>e.loading))),actions:b,hasMore:f.length>b.length,hasHistoryButton:!v._.isUnavailable(u),expanded:o.pC(g)}})))}function mM(e){return s.Z.fromSideEffect((t=>e.notify(t)),d.h.combine(e.promptActions.state,e.routing.activeView,e.lifecycle.size,e.assistant.state,(0,a.zG)(e.revision,o.g_((()=>d.h.create(null).view()),(e=>e.feedForm.state.view("feedForm")))),e.skill.translationDiscoverabilityTreatmentEnabled,e.skill.recentAppActionsEnabled,(({contextualActions:t,toneAction:i,performanceScoreAction:n,plagiarismAction:r,skillActions:s,writingExpertAction:l,aiStudioBrandVoiceAction:c,humanWritingReportAction:d,playbooksAction:u},m,p,{genAISession:g},h,f,v)=>{var b;const y="quickReply"===(null===(b=o.WG(g))||void 0===b?void 0:b.mode)||null!==o.WG(u)||"longForm"===h&&!pM(e.revision,o.pC(g),m,p)?3:2,x=(0,a.zG)(t,o.g_((()=>[]),(e=>e.actions))),k=E.oA([u,r,"home"===m.kind?l:o.YP,"home"===m.kind?c:o.YP,i,n,d]).concat(s),S=(0,a.zG)(x.concat(k).map(ro.RegularAction.make),E.DY(V.Uz((e=>e.action))(dM)),(e=>{var t;if("quickReply"===(null===(t=o.WG(g))||void 0===t?void 0:t.mode))return e;if(v){const t=function(e,t){var i;const n=t.at(0),r=null!==(i=null==n?void 0:n.dateLastAccessed)&&void 0!==i?i:0,s=6048e5;if(Date.now()-r<s){const t=e.filter((e=>e.action.id!==(null==n?void 0:n.id))),i=e.find((e=>e.action.id===(null==n?void 0:n.id)));if(void 0!==i)return[i,...t]}return e}(e,s);if(t!==e)return t}if(f){const t=function(e){const t=e.find((e=>"Translate with Grammarly"===e.action.searchLabel));if(void 0!==t){const i=e.filter((e=>"Translate with Grammarly"!==e.action.searchLabel));return[...i.slice(0,1),t,...i.slice(1)]}return e}(e);if(t!==e)return t}return e})),C=(0,a.zG)(S,E.ke(y));return{loading:(0,a.zG)(t,o.g_((()=>(0,a.zG)(g,o.g_((()=>!1),le.isStartingWithoutError))),(e=>e.loading))),maxActionsCount:y,actions:C,hasMore:S.length>C.length}})))}function pM(e,t,i,n){return(0,a.zG)(e,o.hX((e=>"home"===i.kind&&n&&n.width<350&&n.height>600||"home"===i.kind&&E.Eh(C.yv).equals(e.feedForm.requestedSupportedForms,["longForm"])&&!t)),o.pC)}function gM(e){return s.Z.composeUnion({none:()=>p.of(null),actionBar:hM(e),actionPanel:fM(e)},(()=>function(e){return d.h.combine(e.routing.activeView,e.assistant.state.view("genAISession"),e.lifecycle.size,function(e){return(0,a.zG)(e.revision,o.g_((()=>d.h.create(!0)),(t=>d.h.combine(lM(e),sM({revision:t,notify:e.notify}),eM(Object.assign(Object.assign({},t),{uphook:e.uphook})),((e,t,i)=>"none"===e||"shortFormFeed"===e&&("emptyState"===t||"successState"===t)||"longFormFeed"===e&&("emptyState"===i||"successState"===i))))))}(e),((t,i,n,r)=>{var s,l;if(!ei(t)||"thread"===t.kind&&"starting"===(null===(s=o.WG(i))||void 0===s?void 0:s.kind))return"none";if("revision"===e.experience)return pM(e.revision,o.pC(i),t,n)?"actionPanel":"actionBar";if(o.pC(e.revision)&&"home"===t.kind)return"quickReply"===(null===(l=o.WG(i))||void 0===l?void 0:l.mode)||pM(e.revision,o.pC(i),t,n)||r?"actionPanel":"actionBar";return(0,a.zG)(i,o.tS(le.toStarted),o.tS((e=>e.inProgressResult)),o.pC)?"none":"actionPanel"}))}(e).view((e=>({kind:e}))).pipe(G.e(0),ht.O({kind:"none"}))))}function hM(e){return s.Z.composeKnot({root:uM(e),header:s.Z.fromSideEffect((t=>e.notify(t.action.action)),d.h.combine(e.assistant.state.view("genAISession").view(o.tS((e=>e.selectedText))),e.promptActions.state.view("contextualActions"),((e,t)=>(0,a.zG)(k.gz(o.Kw)(e,t),o.hX((([e,t])=>"pending"===t.context.kind)),o.UI((([e])=>e)),o.wp((()=>(0,a.zG)(t,o.tS((e=>e.context.selection)),o.UI((e=>e.text))))),o.UI((e=>({selectedText:e}))))))),historyButton:WP(e)})}function fM(e){return s.Z.composeKnot({root:mM(e),header:vM(e),historyButton:WP(e)})}function vM(e){return s.Z.fromSideEffect((t=>e.notify(t.action)),d.h.combine(e.routing.activeView,e.promptActions.state.view("contextualActions"),e.assistant.state.view("genAISession").view(o.pC),e.assistant.state.view("genAISession").view(o.g_((()=>null),(e=>e.mode))),e.textEditor.state.view("textLength"),(t=e.revision,(0,a.zG)(t,o.g_((()=>d.h.create({allSuggestionsCount:0,someSuggestionsAddressed:!1,firstCheckingFinishedAndSduiEventsSettled:!0,firstCheckingFinishedAndSduiEventsSettledTimedOut:!1}).view()),(e=>d.h.combine(e.checkingState.firstCheckingFinishedAndSduiEventsSettled,e.checkingState.firstCheckingFinishedAndSduiEventsSettledTimedOut,e.suggestionCount.state,((e,t,{allSuggestionsCount:i,someSuggestionsAddressed:n})=>({firstCheckingFinishedAndSduiEventsSettled:e,firstCheckingFinishedAndSduiEventsSettledTimedOut:t,allSuggestionsCount:i,someSuggestionsAddressed:n}))))))),((e,t,i,n,r,{allSuggestionsCount:s,someSuggestionsAddressed:l,firstCheckingFinishedAndSduiEventsSettled:c,firstCheckingFinishedAndSduiEventsSettledTimedOut:d})=>{if(ei(e)&&i){const i=(0,a.zG)(r,o.Gg((e=>0===e)));return(0,a.zG)(t,o.UI((({context:e})=>e)),o.hX((e=>e.isBoundary&&o.pC(e.textRevision))),o.tS((({selection:e})=>e)),o.UI((e=>e.text)),o.g_((()=>"home"===e.kind&&(i||0===s&&(c||d)||"quickReply"===n)?{kind:"title",title:bM(n,i,s,l),subtitle:"Here are some ideas"}:{kind:"none"}),(e=>({kind:"selectionContext",selectedText:e}))))}return{kind:"none"}})));var t}function bM(e,t,i,n){return"quickReply"===e?"How do you want to reply?":0===i&&n?"What do you want to do next?":t||0!==i||n?"How do you want to get started?":"What do you want to do?"}function yM(e,t){return s.Z.composeOption(function(e){return s.Z.composeKnot({header:gM(e),fieldContainer:$P(e)})}(e),(()=>d.h.combine(e.lifecycle.heightBehavior,e.routing.activeView,((i,n)=>("genAI"===e.experience&&"home"===n.kind&&"fitContainer"===i.kind?"main":"footer")===t?o.G(void 0):o.YP))))}function xM(e){const t=e.assistant.state.view("detectedReferences");return s.Z.composeOption(function(e){return()=>e.assistant.state.view("detectedReferences").pipe(O.U(o.fS((0,a.a9)([]))),O.U((e=>({detectedReferences:e}))))}(e),(()=>t))}function kM(e){const t=e.assistant.state.view("genAISession").view((t=>(0,a.zG)(t,o.tS(le.toStarted),o.hX((()=>o.Wi(e.revision))),o.Gg((e=>e.voiceProfile.needsSetup)))));return s.Z.composeOption(s.Z.fromSideEffect((t=>e.notify(t)),null),(()=>t.view((e=>e?o.G(null):o.YP))))}function SM(e){return s.Z.composeKnot({suggestions:aM(e),voiceBanner:kM(e),documentOverview:OP(e),intent:TP(e),detectedReferences:xM(e),promptStudio:yM(e,"main")})}function CM(e,t,i){const n=e.assistant.state.view("genAISession").view((0,a.ls)(o.tS(le.toStarted),o.tS((e=>o.ij(e.results[i+1]))),o.hX(ce.x.isComplete),o.tS((e=>e.boundaryContextId)))),r=t.pipe(ai.M(n),O.U((([e,t])=>(0,a.zG)(e,o.hX((0,P.Kg)(ce.x.isComplete,ce.x.isInProgress)),o.tS((e=>e.boundaryContextId)),o.hX((e=>!!o.Wi(t)||e!==t.value)))))),l=r.pipe(O.U(o.tS((t=>e.assistant.getContextById(t))))),c=l.pipe(O.U((e=>(0,a.zG)(e,o.tS((e=>e.selection))))));return s.Z.composeOption(s.Z.fromSideEffect((t=>e.notify(t)),qt.a([l,e.assistant.state.view("genAISession").view((0,a.ls)(o.tS(le.toStarted),o.UI((({textRevision:e})=>e)))),e.assistant.state.view("genAISession").view((0,a.ls)(o.tS(le.toStarted),o.UI((({selectionContextStatus:e})=>e))))]).pipe(O.U((([e,t,i])=>k.Yt(o.Kw)({selection:(0,a.zG)(e,o.tS((({selection:e})=>e))),currentTextRevision:t,contextTextRevision:(0,a.zG)(e,o.UI((({textRevision:e})=>e))),selectionContextStatus:i}))),U.oA,O.U((({selection:e,currentTextRevision:t,contextTextRevision:i,selectionContextStatus:n})=>({selectedText:e.text,selectedRange:n===le.SelectionContextStatus.dynamic&&o.pC(i)&&t===i.value?e.range:void 0}))))),(()=>c))}function EM(e){return()=>e.assistant.state.view("genAISession").view(o.tS(le.toStarted)).view((0,a.ls)(o.tS((e=>e.inProgressResult)),o.g_((()=>({text:""})),(e=>({text:e.text})))))}function _M(e){return CM(e,e.assistant.state.view("genAISession").view(o.tS(le.toStarted)).view(o.tS((e=>e.inProgressResult))),-1)}function wM(e){const t=d.h.combine(e.assistant.state.view("genAISession"),e.routing.activeView,((e,t)=>(0,a.zG)(e,o.tS(le.toStarted),o.tS((e=>e.inProgressResult)),o.hX((()=>"thread"===t.kind)),o.UI((e=>({result:e}))))));return s.Z.composeOption(function(e){return s.Z.composeKnot({root:EM(e),header:_M(e)})}(e),(()=>t))}function IM(e,t){return s.Z.composeOption(s.Z.fromSideEffect((t=>e.notify(t)),e.userSurvey.state.pipe(O.U((e=>(0,a.zG)(e.activeSurvey,o.UI((t=>({survey:t,state:e})))))),U.oA,O.U((({survey:e,state:t})=>({survey:e,stage:t.stage,transitionStage:t.transitionStage,rating:t.rating,openAnswer:(0,a.zG)(t.openAnswer,o.fS((0,a.a9)(""))),ratingLabels:(0,a.zG)(t.activeSurvey,o.g_((0,a.a9)([]),(e=>e.ratingLabels))),errors:t.errors}))))),(()=>d.h.combine(e.userSurvey.state,t,e.routing.activeView,(({activeSurvey:e,stage:t},i,n)=>(0,a.zG)(e,o.hX((e=>"thread"===n.kind&&(0,a.zG)(i,D.FX(ce.x.Id.create(e.resultOrItemId)))&&t!==Hs.Stage.Type.Closed)))))))}var AM=i(53186);function FM(e,t){return s.Z.fromSideEffect((t=>e.notify(t)),t)}function PM(e,t,i){return s.Z.composeList(E.Ot,(()=>t.pipe(O.U((0,a.ls)(o.UI(E.Su(((e,t)=>({action:t,index:e})))),o.fS((()=>[])))))),(({action:t,index:n})=>jP(e,p.of(t),i,n)))}function MM(e,t){const i=function(e,t){return e.assistant.state.view((({genAIAvailability:e,genAISession:i})=>(0,a.zG)(i,o.tS(le.toStarted),o.UI((i=>{const n=v._.isPassive(e)||v._.isUnavailable(e),r=(0,a.zG)(i.activeContext.userPromptAction,o.tS((e=>(0,a.zG)(t.header.copiablePrompt,o.UI((t=>J.UserPromptActionValue.fromInput(e,t,o.YP,o.YP)))))));return{actions:(0,a.zG)(AM.nI(i.activeContext.availableActions.filter((0,P.Kg)(J.isFollowUpQuestionActionInput,J.isQuickActionInput))),o.hX((()=>!n)),o.UI(AM.UI(ro.RegularAction.make))),originalAction:r,disabled:n,result:t}}))))).pipe(U.oA)}(e,t),n=i.pipe(io.j("actions"));return s.Z.composeKnot({root:FM(e,i),actions:PM(e,n,"threadView")})}function OM(e,t){return s.Z.fromSideEffect((t=>e.notify(t)),e.assistant.state.pipe(m.w((e=>{const i=(0,a.zG)(t.header.copiablePrompt,o.g_((()=>({kind:OA.searchLabel,label:t.header.label,iconUrl:t.header.iconUrl})),(i=>({kind:OA.clickableSearchLabel,label:t.header.label,disabled:v._.isUnavailable(e.genAIAvailability),copiablePrompt:i}))));return ce.x.isComplete(t)&&function(e){return(0,a.zG)(e.replacementDelta,S.g_(a.yR,(e=>e.generic)),(e=>e.ops.some((e=>{var t;return lA.s.isInsert(e)&&!!(null===(t=e.attributes)||void 0===t?void 0:t[SA.knowledgeHubTerm])}))))}(t)&&t.timestamp+3e3>Date.now()?R.timer(t.timestamp+3e3-Date.now()).pipe(pt.h(i),ht.O({kind:OA.knowledgeHub})):p.of(i)}))))}function TM(e,t,i,n){return s.Z.composeKnot({root:s.Z.fromSideEffect((t=>e.notify(t)),e.assistant.state.view((({genAIAvailability:e,activeCards:n,genAISession:r,referencesVisibility:s,overrideCardVoice:l})=>{var c,d,u;return{disabled:v._.isUnavailable(e),result:t,isActive:(0,a.zG)(!!n.has(t.id)||0===n.size&&i&&(u=(0,a.zG)(r,o.tS(le.toStarted)),!(0,a.zG)(u,o.g_(a.jv,(e=>o.pC(e.inProgressResult)||o.pC(e.error)))))),isReferencesOpen:null!==(c=s.get(t.id))&&void 0!==c&&c,isMyVoice:(null!==(d=l.get(t.id))&&void 0!==d?d:(0,a.zG)(t.replacementDelta,S.g_((()=>ce.x.GeneratedTextVoice.generic),(e=>e.preferVoice))))===ce.x.GeneratedTextVoice.user}}))),header:OM(e,t),contextHeader:CM(e,p.of(o.G(t)),n)})}function RM(e,t){return s.Z.composeList(E.Ot,(()=>t.pipe(O.U((0,a.ls)(E.ke(50),E.Su(((e,t)=>({result:t,isLast:0===e,index:e}))),E.GY)))),(({result:t,isLast:i,index:n})=>function(e,t,i,n){return s.Z.composeUnion({promptResultComplete:TM(e,t,i,n),aiUsageNotification:MM(e,t)},(()=>p.of(ce.x.isAIUsageNotification(t)?{kind:"aiUsageNotification"}:{kind:"promptResultComplete"})))}(e,t,i,n)))}function BM(e,t){return s.Z.composeUnion({none:()=>p.of(null),loading:()=>p.of({root:{text:""}}),loaded:s.Z.composeKnot({results:RM(e,t.view(o.fS((()=>[]))))})},(()=>d.h.combine(t,e.assistant.state.view("genAISession").view(o.g_((()=>null),(e=>e.kind))),e.routing.activeView,((e,t,i)=>"thread"===i.kind?{kind:"starting"===t?"loading":o.pC(e)?"loaded":"none"}:{kind:"none"}))))}function UM(e){const t=e.assistant.state.view("genAISession").view((0,a.ls)(o.tS(le.toStarted),o.UI((e=>e.results)),o.tS(_.c2)));return s.Z.composeKnot({documentOverview:OP(e),intent:TP(e),resultList:BM(e,t),lastResultSurvey:IM(e,t.view(o.UI((0,a.ls)(_.YM,(e=>e.id))))),inProgressResult:wM(e),generationError:MP(e),detectedReferences:xM(e)})}const GM=()=>p.of(null);function NM(e){return s.Z.composeUnion({home:SM(e),thread:UM(e),error:MP(e),followUpPrompt:uP(e),legacyVoiceProfile:_P(e),voiceProfile:wP(e),feedbackForm:dP(e),skill:CP(e,!1),toneReport:s.Z.composeKnot({toneReport:EP(e)}),settings:kP(e),signedOut:SP(e),performanceScore:pP(e),plagiarism:s.Z.composeOption((0,a.zG)(e.revision,o.g_((()=>GM),(t=>hP({plagiarism:t.plagiarism,lifecycle:e.lifecycle,user:e.user,feed:t.feed,suggestionCount:t.suggestionCount,pageRange:t.pageRange,uphook:e.uphook})))),(()=>p.of(e.revision))),writingExpert:s.Z.composeOption((0,a.zG)(e.revision,o.g_((()=>GM),(t=>function(e){const t=aP(e.feed.feed).pipe(R.shareReplay({bufferSize:1,refCount:!0}));return s.Z.composeUnion({[ur.Kind.loadingEvaluationAndSuggestions]:()=>e.writingExpert.state.pipe(h.h(ur.isLoadingEvaluationAndSuggestions)),[ur.Kind.nonEmpty]:s.Z.composeKnot({root:s.Z.fromSideEffect((({kind:t})=>{if("writingExpertFeedMount"===t)return e.feed.onFeedMount();(0,a.Rz)(t)}),e.writingExpert.state.pipe(h.h(ur.isNonEmpty))),cardList:oP(e,t)}),[ur.Kind.nonEmptyLoadingEvaluation]:s.Z.composeKnot({root:s.Z.fromSideEffect((({kind:t})=>{if("writingExpertFeedMount"===t)return e.feed.onFeedMount();(0,a.Rz)(t)}),e.writingExpert.state.pipe(h.h(ur.isNonEmptyLoadingEvaluation))),cardList:oP(e,t)}),[ur.Kind.empty]:s.Z.fromSideEffect(FP(e),e.writingExpert.state.pipe(h.h(ur.isEmpty),O.U((e=>({sduiItem:e.sduiItem}))))),[ur.Kind.error]:s.Z.fromSideEffect(FP(e),e.writingExpert.state.pipe(h.h(ur.isError),O.U((e=>({sduiItem:e.sduiItem}))))),[ur.Kind.evaluationFinishedLoadingSuggestions]:()=>e.writingExpert.state.pipe(h.h(ur.isEvaluationFinishedLoadingSuggestions))},(()=>e.writingExpert.state.pipe(O.U((e=>({kind:e.kind}))))))}(Object.assign(Object.assign({},t),{lifecycle:e.lifecycle}))))),(()=>p.of(e.revision))),aiStudio:s.Z.composeOption((0,a.zG)(e.revision,o.g_((()=>GM),(t=>function(e){const t=aP(e.feed.feed).pipe(R.shareReplay({bufferSize:1,refCount:!0}));return s.Z.composeUnion({[Ln.Kind.loadingSuggestions]:()=>e.aiStudio.state.pipe(h.h(Ln.isLoadingSuggestions)),[Ln.Kind.nonEmpty]:s.Z.composeKnot({root:s.Z.fromSideEffect((({kind:t})=>{if("aiStudioFeedMount"===t)return e.feed.onFeedMount();(0,a.Rz)(t)}),e.aiStudio.state.pipe(h.h(Ln.isNonEmpty))),cardList:sP(e,t)}),[Ln.Kind.empty]:s.Z.fromSideEffect(lP(e),e.aiStudio.state.pipe(h.h(Ln.isEmpty),O.U((e=>({sduiItem:e.sduiItem}))))),[Ln.Kind.error]:s.Z.fromSideEffect(lP(e),e.aiStudio.state.pipe(h.h(Ln.isError),O.U((e=>({sduiItem:e.sduiItem})))))},(()=>e.aiStudio.state.pipe(O.U((e=>({kind:e.kind}))))))}(Object.assign(Object.assign({},t),{lifecycle:e.lifecycle,vms:e}))))),(()=>p.of(e.revision))),playbooks:s.Z.composeKnot({playbooks:cP(e)})},(()=>e.routing.activeView))}function LM(e){return s.Z.composeUnion({none:()=>p.of(null),skill:CP(e,!0),promptStudio:yM(e,"footer")},(()=>e.routing.activeView.view((e=>"skill"===e.kind?{kind:"skill"}:ei(e)||"followUpPrompt"===e.kind&&"string"===e.inputType?{kind:"promptStudio"}:{kind:"none"}))))}function DM(e){return s.Z.fromSideEffect((t=>{if("suggestionCountButtonClick"===t.kind)return e.routing.pop();(0,c.L0)(t.kind)}),d.h.combine(e.assistant.state.view("genAISession").view((0,a.ls)(o.tS(le.toStarted),o.tS((e=>e.inProgressResult)),o.pC)),function(e){return(0,a.zG)(e.revision,o.g_((()=>d.h.create(o.YP)),(e=>e.suggestionCount.state.view("allSuggestionsCount").view(o.G))))}(e),((e,t)=>(0,a.zG)(t,o.fS((()=>0)),(t=>({count:t,disabled:e,label:t>0?`Review ${(0,yt._6)(t,"suggestion","suggestions")}`:"Back to Home"}))))))}function jM(e){return s.Z.fromSideEffect((t=>e.notify(t.action.action)),e.routing.activeView.view("kind").view((t=>o.pC(e.settings)&&"settings"!==t?o.G(null):o.YP)))}function zM(e){return()=>d.h.combine(e.routing.activeView,e.skill.state,(0,a.zG)(e.toneDetector,o.g_((()=>d.h.create(o.YP)),(e=>e.state.view(o.G)))),d.h.create(e.playbooks),((e,t,i,n)=>VM(e,t,i,n).label))}function VM(e,t,i,n){switch(e.kind){case"home":case"thread":case"error":case"followUpPrompt":case"signedOut":case"plagiarism":return{label:o.YP,iconUrl:o.YP};case"legacyVoiceProfile":case"voiceProfile":return{label:o.G("My voice"),iconUrl:o.YP};case"feedbackForm":return{label:o.G("Share your thoughts"),iconUrl:o.YP};case"skill":return{label:(0,a.zG)(t,o.UI((e=>e.skill.displayName))),iconUrl:(0,a.zG)(t,o.UI((e=>e.skill.iconUrl)))};case"toneReport":return{label:(0,a.zG)(i,o.hX(ui.isLoaded),o.tS((e=>e.brandToneInfo)),o.tS((({institutionName:e})=>e)),o.UI((e=>`${e} Tone Detector`)),o.wp((()=>o.G("Tone insights")))),iconUrl:(0,a.zG)(i,o.hX(ui.isLoaded),o.tS((e=>e.brandToneInfo)),o.tS((e=>e.institutionLogo)))};case"settings":return{label:o.G("Settings"),iconUrl:o.YP};case"writingExpert":return{label:o.G("Increase your impact"),iconUrl:o.YP};case"performanceScore":return{label:o.G("Performance"),iconUrl:o.YP};case"aiStudio":return{label:o.G(n.getSelectedPlaybookLabel()),iconUrl:o.YP};case"playbooks":return{label:o.G(n.getPageTitle()),iconUrl:o.YP};default:(0,c.L0)(e)}}function KM(e){return s.Z.fromSideEffect((t=>e.notify(t)),d.h.combine(e.routing.activeView,e.skill.state,(0,a.zG)(e.toneDetector,o.g_((()=>d.h.create(o.YP)),(e=>e.state.view(o.G)))),d.h.create(e.playbooks),((e,t,i,n)=>(0,a.zG)(VM(e,t,i,n),(({iconUrl:t})=>({activeViewIconUrl:t,activeView:e}))))))}function ZM(e){return s.Z.fromSideEffect((t=>e.notify(t)),p.of(null))}function HM(e){const t=e.assistant.state.view((e=>(0,a.zG)(e.genAIAvailability,o.DT(v._.isActiveOrPassive),o.hX((()=>o.pC((0,a.zG)(e.genAISession,o.tS(le.toStarted))))))));return s.Z.composeOption(function(e,t,i){return s.Z.fromSideEffect((t=>e.notify(t)),(0,a.zG)(qt.a([t,i]),O.U((([e,t])=>({user:e,genAIAvailability:t})))))}(e,e.assistant.state.view("user").pipe(h.h(fe)),t.pipe(U.oA)),(()=>d.h.combine(e.assistant.state.view("user"),t,e.routing.activeView.view("kind"),((e,t,i)=>(0,a.zG)(t,o.hX((()=>fe(e)&&"voiceProfile"!==i&&"legacyVoiceProfile"!==i&&"feedbackForm"!==i&&"skill"!==i&&"settings"!==i&&"toneReport"!==i)))))))}function $M(e){return()=>e.user.isGrammarlyInstitutionMember.view((e=>({version:e?o.G(at):o.YP})))}function WM(e){return s.Z.composeKnot({left:YM(e),right:s.Z.composeKnot({credits:HM(e),voiceButton:qM(e),settingsButton:jM(e),closeButton:ZM(e)}),pageTitle:zM(e)})}function YM(e){const t=d.h.combine(e.assistant.state.view("genAISession"),e.routing.activeView,((t,i)=>(0,a.zG)(t,o.tS(le.toStarted),o.g_((()=>ii(i)?"backButton":"logoOnly"),(()=>{if("error"===i.kind)return"logoOnly";if("signedOut"===i.kind)return"logoOnly";if("home"===i.kind||"thread"===i.kind){if("home"===i.kind)return"logoOnly";if("thread"===i.kind)return o.pC(e.revision)?"suggestionCount":"logoOnly";(0,c.L0)(i)}else{if("followUpPrompt"===i.kind)return"backButton";if(ii(i))return"backButton";(0,c.L0)(i)}})))));return s.Z.composeUnion({logoOnly:$M(e),suggestionCount:s.Z.composeKnot({button:DM(e)}),backButton:KM(e)},(()=>t.pipe(ht.O("logoOnly"),O.U((e=>({kind:e}))))))}function qM(e){return s.Z.fromSideEffect((t=>e.notify(t.action.action)),d.h.combine(e.assistant.state.view("user"),e.assistant.state.view("genAISession"),e.assistant.state.view("genAIAvailability"),e.routing.activeView,((e,t,i,n)=>(0,a.zG)(t,o.tS(le.toStarted),o.hX((()=>fe(e)&&!v._.isUnavailable(i)&&ei(n))),o.UI((()=>null))))))}function XM(e){performance.mark(n.assistantGetStart);const t=r.memo((function(){performance.mark(n.assistantComponentStart);const t=r.useRef(yo(e));performance.mark(n.assistantViewModelsCreated),r.useEffect((()=>()=>t.current.dispose()));const i=s.UI.mount((o=t.current,s.UI.Knot.make(s.UI.Grid.make((({slots:e})=>r.createElement(Ko.Provider,{value:{notifyUnmount:e=>o.notify(e)}},r.createElement(oa.N.Provider,{value:o.theme.theme},e.assistant)))),{assistant:$F})),function(e){return s.Z.composeKnot({assistant:s.Z.composeKnot({root:XF(e),content:NM(e),header:WM(e),footer:LM(e),notifications:YF(e),onboarding:(t=e.onboarding,s.Z.fromSideEffect((e=>t.notify(e)),t.onboardingStep.view((e=>({step:e}))))),a11yNotification:WF(e)})});var t}(t.current));var o;return performance.mark(n.assistantComponentEnd),i}));return performance.mark(n.assistantGetEnd),t}},10098:(e,t,i)=>{i.d(t,{N:()=>o});var n=i(92379),r=i(13391),s=i(35701);const o=n.createContext(r.h.create(s.u))},13301:(e,t,i)=>{i.d(t,{e:()=>r});var n=i(35701);class r{constructor(e){this._theme=e,this.theme=this._theme.view((e=>Object.assign(Object.assign({},n.u),e)))}}},10325:(e,t,i)=>{i.d(t,{T:()=>n});var n,r=i(45178);!function(e){let t;!function(e){e.initial="initial",e.initialBTS="initialBTS",e.history="history",e.prompts="prompts",e.review="review",e.rewrite="rewrite",e.knowledgeHub="knowledgeHub",e.references="references"}(t=e.StepName||(e.StepName={})),function(e){e.isAssistantOnboardingStep=function(t){switch(t){case e.prompts:case e.review:case e.knowledgeHub:case e.references:case e.history:return!0;case e.initial:case e.initialBTS:case e.rewrite:return!1;default:return(0,r.L0)(t)}},e.isTooltipOnboardingStep=function(t){switch(t){case e.prompts:case e.review:case e.rewrite:case e.knowledgeHub:case e.references:case e.history:return!0;case e.initial:case e.initialBTS:return!1;default:return(0,r.L0)(t)}}}(t=e.StepName||(e.StepName={}))}(n||(n={}))},61250:(e,t,i)=>{i.d(t,{l:()=>n});var n,r=i(45178);!function(e){let t;!function(e){e.close="close",e.tryItOut="tryItOut",e.mount="mount"}(t=e.Kind||(e.Kind={})),e.is=function(e){return t=>t.kind===e}}(n||(n={})),(0,r.L0)(void 0)},9239:(e,t,i)=>{i.d(t,{Z:()=>n});var n,r=i(12518),s=i(58303),o=i(86399),a=i(90023),l=i(11633),c=i(93663);!function(e){const t=(0,c.$d)()(["initial","initialBTS","prompts","review","rewrite","knowledgeHub","references","history"]),i=(0,c.$d)()(["extension","editor","llamaMac","llamaWin"]);function n(e,t){return`${e}|${t}`}function d(e,t,i){return`${e}|${t}|${i}`}function u(e){return s.pC(y(e))}function m(e){return s.pC(x(e))}const p=new l.Dy("CompletedStepName",(e=>"string"==typeof e&&u(e)),((e,t)=>"string"==typeof e&&u(e)?l.Vp(e):l.Rn(e,t)),l.yR),g=new l.Dy("LastSeenStepName",(e=>"string"==typeof e&&m(e)),((e,t)=>"string"==typeof e&&m(e)?l.Vp(e):l.Rn(e,t)),l.yR),h=l.OT(l.r$({completed:l.Bk(p),lastSeen:l.Bk(g)}));let f,v,b;function y(e){return(0,a.zG)(s.G(e.split("|")),s.hX((e=>2===e.length)),s.hX((e=>t.includes(e[0])&&i.includes(e[1]))))}function x(e){return(0,a.zG)(s.G(e.split("|")),s.hX((e=>3===e.length)),s.hX((e=>t.includes(e[0])&&i.includes(e[1]))),s.DZ((e=>(0,a.zG)(parseInt(e[2],10),(t=>Number.isNaN(t)?s.YP:s.G([e[0],e[1],t]))))))}function k(e,t,i){var n,r,s,o;return{extension:{completed:t.some((t=>t[0]===e&&"extension"===t[1])),lastSeen:null===(n=i.find((t=>t[0]===e&&"extension"===t[1])))||void 0===n?void 0:n[2]},editor:{completed:t.some((t=>t[0]===e&&"editor"===t[1])),lastSeen:null===(r=i.find((t=>t[0]===e&&"editor"===t[1])))||void 0===r?void 0:r[2]},llamaMac:{completed:t.some((t=>t[0]===e&&"llamaMac"===t[1])),lastSeen:null===(s=i.find((t=>t[0]===e&&"llamaMac"===t[1])))||void 0===s?void 0:s[2]},llamaWin:{completed:t.some((t=>t[0]===e&&"llamaWin"===t[1])),lastSeen:null===(o=i.find((t=>t[0]===e&&"llamaWin"===t[1])))||void 0===o?void 0:o[2]}}}e.emptyClientStep={completed:!1,lastSeen:void 0},function(e){function t(e){return t=>e(t.extension)||e(t.editor)||e(t.llamaMac)||e(t.llamaWin)}e.anyClient=t,e.anyClientCompleted=t((e=>e.completed))}(f=e.Step||(e.Step={})),e.emptyStep={extension:e.emptyClientStep,llamaMac:e.emptyClientStep,llamaWin:e.emptyClientStep,editor:e.emptyClientStep},e.codec=new l.Dy("UpstreamOnboarding",(e=>h.is(e)),((e,t)=>(0,a.zG)(h.validate(e,t),r.UI((e=>{const t=(0,a.zG)(e.completed||[],o.UI(y),o.oA),i=(0,a.zG)(e.lastSeen||[],o.UI(x),o.oA);return{initial:k("initial",t,i),initialBTS:k("initialBTS",t,i),prompts:k("prompts",t,i),review:k("review",t,i),rewrite:k("rewrite",t,i),knowledgeHub:k("knowledgeHub",t,i),references:k("references",t,i),history:k("history",t,i)}})))),(e=>({completed:(0,a.zG)(Object.entries(e),o.tS((([e,t])=>function(e,t){return(0,a.zG)(Object.entries(t),o.tS((([t,i])=>i.completed?[n(e,t)]:[])))}(e,t)))),lastSeen:(0,a.zG)(Object.entries(e),o.tS((([e,t])=>function(e,t){return(0,a.zG)(Object.entries(t),o.tS((([t,i])=>i.lastSeen?[d(e,t,i.lastSeen)]:[])))}(e,t))))}))),e.decode=function(t,i=e.State.empty){return(0,a.zG)(decodeURIComponent(t),(i=>{try{const t=JSON.parse(i);return e.codec.decode(t)}catch(e){return r.t$(`Cannot decode raw onboarding state: ${t}.`)}}),r.fS((()=>i)))},e.encode=function(t){return encodeURIComponent(JSON.stringify(e.codec.encode(t)))},function(t){t.empty={initial:e.emptyStep,initialBTS:e.emptyStep,prompts:e.emptyStep,review:e.emptyStep,rewrite:e.emptyStep,knowledgeHub:e.emptyStep,references:e.emptyStep,history:e.emptyStep},t.toClientState=function(e,t){return{initial:e.initial[t],initialBTS:e.initialBTS[t],prompts:e.prompts[t],review:e.review[t],rewrite:e.rewrite[t],knowledgeHub:e.knowledgeHub[t],references:e.references[t],history:e.history[t]}},t.patch=function(e,t){return i=>({initial:Object.assign(Object.assign({},i.initial),{[t]:e.initial}),initialBTS:Object.assign(Object.assign({},i.initialBTS),{[t]:e.initialBTS}),prompts:Object.assign(Object.assign({},i.prompts),{[t]:e.prompts}),review:Object.assign(Object.assign({},i.review),{[t]:e.review}),rewrite:Object.assign(Object.assign({},i.rewrite),{[t]:e.rewrite}),knowledgeHub:Object.assign(Object.assign({},i.knowledgeHub),{[t]:e.knowledgeHub}),references:Object.assign(Object.assign({},i.references),{[t]:e.references}),history:Object.assign(Object.assign({},i.history),{[t]:e.history})})}}(v=e.State||(e.State={})),function(t){t.empty={initial:e.emptyClientStep,initialBTS:e.emptyClientStep,prompts:e.emptyClientStep,review:e.emptyClientStep,rewrite:e.emptyClientStep,knowledgeHub:e.emptyClientStep,references:e.emptyClientStep,history:e.emptyClientStep}}(b=e.ClientState||(e.ClientState={}))}(n||(n={}))},93139:(e,t,i)=>{i.d(t,{T:()=>ye});var n=i(92379),r=i(55661),s=i(13391),o=i(63532),a=i(94032),l=i(54553),c=i(35701),d=i(10098),u=i(23783),m=i(59226),p=i(93868),g=i(65605),h=i(16705),f=i(31574),v=i(57832);const b=({name:e,style:t,onClick:i})=>n.createElement(g.z,{variant:"tertiary",style:[y,t],onClick:i,compact:!0,size:"medium",theme:"light",name:e},n.createElement(f.JO.Close,null)),y={icon:Object.assign(Object.assign({},(0,v.fx)(1.5)),{stroke:m.I.Background.Neutral.Default})};var x=i(27114),k=i(10325),S=i(61250),C=i(43059),E=i(48906),_=i(35770);const w=({className:e})=>n.createElement("span",Object.assign({},(0,E.Sh)(I,e)),"New"),I=u.ux.style({color:m.I.Text.Base.Default,fontWeight:700,fontSize:u.ux.rem(.75),lineHeight:u.ux.rem(1),justifyContent:"center",alignItems:"center",background:`linear-gradient(226.37deg, ${_.Z.YellowGreen} 0%, ${_.Z.LightGreen} 100%)`,borderRadius:u.ux.rem(C.HP),padding:`${u.ux.rem(p.yC)} ${u.ux.rem(p.x)}`,textTransform:"uppercase",width:"fit-content",cursor:"default"});var A=i(30508),F=i(91320),P=i(33536);const M=n.forwardRef((function({placement:e,style:t,arrowColor:i},r){return n.createElement("div",{ref:r,style:{width:33}},n.createElement("svg",{width:33,height:12,viewBox:"0 0 33 12.5",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:Object.assign(Object.assign(Object.assign({position:"absolute"},t),{transform:`${(null==t?void 0:t.transform)||""} rotate(${O(e)}deg)`.trimStart()}),T(e))},n.createElement("path",{d:"M0.5 3.41877e-07C3.5 3.41877e-07 29.5 3.41877e-07 32.5 3.41877e-07C28.5 3.41877e-07 26.4111 0.903505 24.1814 3.69994L17.5562 11.4728C16.957 12.1757 15.8652 12.1757 15.2661 11.4728L8.64084 3.69994C6.41113 0.903505 4.5 3.41877e-07 0.5 3.41877e-07Z",fill:i||"white"})))}));function O(e){return(null==e?void 0:e.startsWith("right"))?90:(null==e?void 0:e.startsWith("bottom"))?180:(null==e?void 0:e.startsWith("left"))?270:0}function T(e){return(null==e?void 0:e.startsWith("bottom"))?{top:-12}:(null==e?void 0:e.startsWith("top"))?{bottom:-12}:(null==e?void 0:e.startsWith("right"))?{transformOrigin:"top left",top:-16.5,left:0}:(null==e?void 0:e.startsWith("left"))?{transformOrigin:"top right",top:-16.5,right:0}:{}}const R=(0,E.xb)((({reference:e,placement:t,offset:i,boundaryAreaPadding:r,className:s,arrowColor:o,children:a})=>{const[l,c]=n.useState(null),[d,u]=n.useState(null),m=(0,P.s)(),{styles:p,attributes:g,state:h}=(0,A.D)(e,l,{placement:t,modifiers:[{name:"offset",options:{offset:[0,12+(null!=i?i:0)]}},{name:"arrow",options:{element:d,padding:12}},{name:"preventOverflow",options:{padding:null!=r?r:5}},m]});return n.createElement("div",Object.assign({dir:"ltr",ref:c,style:p.popper},g.popper,(0,E.Sh)(U,s)),n.createElement(M,{ref:u,style:p.arrow,placement:null==h?void 0:h.placement,arrowColor:o}),a)})),B=e=>u.ux.color(F.NeutralGray40).toRGBA().fade(e).toString(),U=u.ux.style({filter:`drop-shadow(0px 0px 0.5px ${F.NeutralGray40}) drop-shadow(0px 0px 2px ${B(.5)}) drop-shadow(0px 1px 6px ${B(.25)})`,borderRadius:u.ux.rem(C.xB+C.fe)}),G=u.ux.rem(C.xB+C.fe),N={width:u.ux.rem(25.875),background:m.I.Background.Base.Default},L={display:"flex",flexDirection:"column",gap:u.ux.rem(p.F2),padding:`${u.ux.rem(p.mh)} ${u.ux.rem(p.x0)} ${u.ux.rem(p.sD)} ${u.ux.rem(p.sD)}`,color:m.I.Text.Base.Default},D={display:"flex",flexDirection:"row",alignItems:"center",gap:u.ux.rem(p.x),fontWeight:"bold",fontSize:u.ux.rem(1),lineHeight:u.ux.rem(1.5)},j={fontSize:u.ux.rem(.875),lineHeight:u.ux.rem(1.375)},z={display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",borderBottomLeftRadius:G,borderBottomRightRadius:G,padding:`${u.ux.rem(p.qp)} ${u.ux.rem(p.sD)} ${u.ux.rem(p.qp)} ${u.ux.rem(p.sD)}`,backgroundColor:m.I.Background.Base.Subdued,color:m.I.Text.Base.Subdued,fontSize:u.ux.rem(.875),lineHeight:u.ux.rem(1.3125),$nest:{a:{color:"inherit"}}},V={width:u.ux.rem(14),lineHeight:u.ux.rem(1),fontSize:u.ux.rem(.75)},K=u.ux.style(N),Z=u.ux.style(L),H=u.ux.style(D),$=u.ux.style(j),W=u.ux.style(z),Y=u.ux.style(V),q=u.ux.style({display:"flex",flexDirection:"row",alignItems:"flex-end"}),X=u.ux.style({display:"inline",fontWeight:600}),Q=(e=k.T.StepName.initial)=>l.UI.Grid.make((({slots:t,view:i,notify:r})=>{const{onMount:s}=(0,x.F)(o.b((t=>r({kind:S.l.Kind.mount,step:e,element:t})())));return n.createElement(R,{className:K,reference:i("reference"),placement:i("placement"),offset:i("offset"),boundaryAreaPadding:i("boundaryAreaPadding"),arrowColor:m.I.Background.Base.Subdued},n.createElement("div",{ref:s},t.content),n.createElement("div",{className:W},n.createElement("div",{className:Y},t.footerText),n.createElement("div",{className:q},n.createElement(g.z,{variant:"tertiary",onClick:r({kind:S.l.Kind.close,step:e}),style:ie,name:"skip"},"Skip"),n.createElement(g.z,{onClick:r({kind:S.l.Kind.tryItOut,step:e}),style:ne,name:"tryItOut"},"Try it out"))))})),J=l.UI.Node.make((({notify:e})=>n.createElement(n.Fragment,null,n.createElement(b,{style:re,onClick:e({kind:S.l.Kind.close,step:k.T.StepName.initial}),name:"onboardingClose"}),n.createElement("div",{className:Z},n.createElement(w,null),n.createElement("div",{className:H},n.createElement("div",null,"Write faster with generative AI")),n.createElement("div",{className:$},"Brainstorm, write, and rewrite with generative AI assistance at your fingertips."))))),ee=l.UI.Node.make((()=>n.createElement(n.Fragment,null,"If you use Grammarly's generative AI services,"," ",n.createElement(h.d,{href:"https://grammarly.com/terms",className:X},"additional terms")," ","apply."))),te=l.UI.Knot.make(Q(),{content:J,footerText:ee}),ie={default:{marginRight:u.ux.rem(.5),fontSize:u.ux.rem(.875)}},ne={default:{fontSize:u.ux.rem(.875),fontWeight:"bold"}},re={default:{position:"absolute",top:u.ux.rem(p.x),right:u.ux.rem(p.x)}},se=l.UI.Node.make((({notify:e})=>n.createElement(n.Fragment,null,n.createElement(b,{style:ae,onClick:e({kind:S.l.Kind.close,step:k.T.StepName.initialBTS}),name:"onboardingClose"}),n.createElement("div",{className:Z},n.createElement(w,null),n.createElement("div",{className:H},n.createElement("div",null,"Write better papers faster (for free!)")),n.createElement("div",{className:$},"Start with a brainstorm, then get instant feedback, revisions, and citations to ace your assignment."))))),oe=l.UI.Knot.make(Q(k.T.StepName.initialBTS),{content:se,footerText:l.UI.Node.empty}),ae={default:{position:"absolute",top:u.ux.rem(p.x),right:u.ux.rem(p.x)}};var le=i(90023),ce=i(24909),de=i(10883),ue=i(59179),me=i(99876);const pe={[k.T.StepName.prompts]:{title:"Start with a prompt",description:e=>e?`Choose a suggested prompt, or type your own to get started. You’ll get ${Number(e).toLocaleString()} each month.`:"Choose a suggested prompt, or type your own to get started."},[k.T.StepName.review]:{title:"How does this sound?",description:"Adjust it to your liking with additional prompts. Don’t forget to check for any inaccuracies. "},[k.T.StepName.rewrite]:{title:"Want help rewriting?",description:"Select your text to rewrite it with GrammarlyGO."},[k.T.StepName.knowledgeHub]:{title:"Using organizational language?",description:"Prompt GrammarlyGO using terms and project names from Knowledge Share to automatically insert organizational context."},[k.T.StepName.references]:{title:"GrammarlyGO now incorporates your organizational knowledge",description:"Review the references for accuracy and relevance and regenerate the response without any references that seem irrelevant or outdated."},[k.T.StepName.history]:{title:"Return to recent history",description:"Pick up where you left off with your latest prompts."}},ge=l.UI.Node.make((({state:e,view:t,notify:i})=>{const{onMount:r}=(0,x.F)((0,le.ls)(de.M(t("name")),ue.U((([e,t])=>({element:e,stepName:t}))),o.b((({element:e,stepName:t})=>i({kind:S.l.Kind.mount,step:t,element:e})()))));return n.createElement(ce.F.Fragment,null,e.pipe(ue.U((({name:e,placement:t,offset:s,reference:o,boundaryAreaPadding:a,promptsAllocated:l})=>n.createElement(me.J2,{key:e,className:u.ux.style({width:fe(e)}),reference:o,placement:t,offset:s,containerPadding:a,onClose:i({kind:S.l.Kind.close,step:e}),title:pe[e].title,body:e===k.T.StepName.prompts?pe[e].description(l):pe[e].description,onMount:r})))))})),he=l.UI.Union.asOption(ge);function fe(e){switch(e){case k.T.StepName.knowledgeHub:return u.ux.rem(16);case k.T.StepName.references:return u.ux.rem(17.8);default:return u.ux.rem(13.75)}}const ve=l.UI.Union.make("kind",{none:l.UI.Node.empty,initial:te,initialBTS:oe,tooltip:he}),be=l.UI.Grid.make((({slots:e,view:t})=>{const i=n.useMemo((()=>s.h.create(c.u)),[]);return r.P.useSubscriptionTo(t("theme").pipe(o.b(a.wW(i)))),n.createElement(d.N.Provider,{value:i},e.onboarding)})),ye=l.UI.Knot.make(be,{onboarding:ve})},33360:(e,t,i)=>{i.d(t,{A:()=>b});var n=i(58303),r=i(90023),s=i(45178),o=i(84714),a=i(54553),l=i(10325),c=i(23841);const d=e=>a.Z.fromSideEffect((t=>e.notify(t)),e.activeStep.pipe(c.oA)),u=e=>{const t=d(e);return a.Z.composeKnot({root:t,content:t,footerText:t})},m=e=>{const t=d(e);return a.Z.composeKnot({root:t,content:t,footerText:t})};var p=i(59179),g=i(90572),h=i(10883),f=i(26903);function v(e){return a.Z.composeOption(function(e){return a.Z.fromSideEffect((t=>e.notify(t)),e.activeStep.pipe(c.oA,g.h(f.X.isTooltipOnboardingStep),h.M(e.promptsAllocated.pipe(p.U(n.FS))),p.U((([e,t])=>Object.assign(Object.assign({},e),{promptsAllocated:t})))))}(e),(()=>e.activeStep.pipe(p.U(n.hX(f.X.isTooltipOnboardingStep)))))}function b(e){return a.Z.composeKnot({root:()=>e.theme.theme.view((e=>({theme:e}))),onboarding:a.Z.composeUnion({none:()=>o.of(null),initial:u(e.onboarding),initialBTS:m(e.onboarding),tooltip:v(e.onboarding)},(()=>e.onboarding.activeStep.view(y).view((e=>({kind:e})))))})}function y(e){return(0,r.zG)(e,n.hX((e=>e.show)),n.g_((()=>"none"),(e=>{switch(e.name){case l.T.StepName.initial:return"initial";case l.T.StepName.initialBTS:return"initialBTS";case l.T.StepName.prompts:case l.T.StepName.review:case l.T.StepName.rewrite:case l.T.StepName.knowledgeHub:case l.T.StepName.references:case l.T.StepName.history:return"tooltip";default:return(0,s.L0)(e.name)}})))}},96531:(e,t,i)=>{i.d(t,{Q:()=>L});var n,r=i(58303),s=i(90023),o=i(32073),a=i(13391),l=i(90572),c=i(64271),d=i(98123),u=i(35701),m=i(13301),p=i(86399),g=i(45178),h=i(61625),f=i(954),v=i(78129),b=i(59179),y=i(23841),x=i(10883),k=i(20161),S=i(37108),C=i(49601),E=i(63532),_=i(29479),w=i(36344),I=i(2084),A=i(10739),F=i(43442),P=i(10325),M=i(61250);function O(e,t,i,n,r=1e3){return e.pipe(l.h(M.l.is(M.l.Kind.mount)),l.h((e=>i(e.step))),k.w((({step:e})=>t.pipe(b.U(I.FX(e)),k.w((e=>e?n.pipe(_.h(Date.now())):w.E)),l.h((e=>Date.now()-e>=r)),_.h(e)))))}!function(e){e.completeInitialOrRewriteStepOnSessionInit=({session:e,stepsSeenOnThisSession:t})=>e.pipe(f.O(r.YP),v.G(),b.U((([e,t])=>r.Wi(e)&&r.pC(t)?r.G(t):r.YP)),y.oA,x.M(t),k.w((([e,t])=>(0,s.zG)([t.has(P.T.StepName.initial)?r.G(P.T.StepName.initial):r.YP,t.has(P.T.StepName.initialBTS)?r.G(P.T.StepName.initialBTS):r.YP,F.s.isRewriteOrQuickRewrite(e.value.mode)?r.G(P.T.StepName.rewrite):r.YP],p.oA)))),e.completeReviewStepOnSecondResultReceived=({session:e,activeStep:t})=>e.pipe(b.U((0,s.ls)(r.hX((e=>"started"===e.kind)),r.g_((()=>0),(e=>e.resultCount)))),v.G(),l.h((([e,t])=>1===e&&2===t)),x.M(t),b.U((([e,t])=>(0,s.zG)(t,r.hX((e=>e===P.T.StepName.review))))),y.oA),e.completeActiveAssistantStepOnSessionEnd=({session:e,activeStep:t,visibleForMs:i,onboardingUIActions:n})=>O(n,t.pipe(S.Q(C.E)),P.T.StepName.isAssistantOnboardingStep,e.pipe(v.G(),l.h((([e,t])=>r.pC(e)&&r.Wi(t)))),i),e.completeStepOnCloseClick=({onboardingUIActions:e,trackingService:t})=>e.pipe(l.h(M.l.is(M.l.Kind.close)),b.U((e=>(e.step===P.T.StepName.initial&&t.trackOnboardingPopupSkip(),e.step===P.T.StepName.initialBTS&&t.trackBTSOnboardingPopupSkip(),e.step)))),e.completeInitialStepOnTryItOutClick=({onboardingUIActions:e,trackingService:t})=>e.pipe(l.h(M.l.is(M.l.Kind.tryItOut)),b.U((e=>(e.step===P.T.StepName.initial&&t.trackOnboardingPopupNext(),e.step===P.T.StepName.initialBTS&&t.trackBTSOnboardingPopupNext(),e.step)))),e.completeReviewStepOnResultInteraction=({assistantUIActions:e})=>e.pipe(l.h(d.i.isResultAction),l.h((e=>A.x.isStandardCompletedResult(e.result))),b.U((()=>P.T.StepName.review))),e.completeHistoryStepOnHistoryRestore=({assistantUIActions:e})=>e.pipe(l.h(d.i.is(d.i.Kind.restoreHistoryButtonClick)),b.U((()=>P.T.StepName.history))),e.completeAssistantStepsOnUserActions=({assistantUIActions:e,activeStep:t})=>e.pipe(l.h((0,h.Kg)(d.i.is(d.i.Kind.actionBrickClick),d.i.is(d.i.Kind.promptSubmitButtonClick),d.i.is(d.i.Kind.promptFieldKeyPressEnter),d.i.is(d.i.Kind.headerVoiceButtonClick),d.i.is(d.i.Kind.setVoiceButtonClick),d.i.is(d.i.Kind.openFeedbackFormButtonClick))),x.M(t),b.U((([e,t])=>(0,s.zG)(t,r.hX(P.T.StepName.isAssistantOnboardingStep)))),y.oA),e.completeInitialStepOnDispose=({onboardingUIActions:e,activeStep:t,disposed:i,visibleForMs:n})=>O(e,t,(e=>e===P.T.StepName.initial||e===P.T.StepName.initialBTS),i,n);const t=e=>t=>i=>t(i).pipe(E.b((t=>{var n;return null===(n=i.logger)||void 0===n?void 0:n.debug(`Onboarding - ${e} - step to complete: ${t}.`)})));e.defaultCompletionSources=[t("session init")(e.completeInitialOrRewriteStepOnSessionInit),t("second result received")(e.completeReviewStepOnSecondResultReceived),t("session end")(e.completeActiveAssistantStepOnSessionEnd),t("user closed step")(e.completeStepOnCloseClick),t("user clicked try-it-out")(e.completeInitialStepOnTryItOutClick),t("user interacted with results")(e.completeReviewStepOnResultInteraction),t("user interacted with assistant")(e.completeAssistantStepsOnUserActions),t("user restored history")(e.completeHistoryStepOnHistoryRestore),t("feature disposed")(e.completeInitialStepOnDispose)]}(n||(n={}));var T=i(58897),R=i(1331);class B{constructor(e,t){this._capiService=e,this._logger=t}trackOnboardingPopupView(){var e;null===(e=this._logger)||void 0===e||e.debug("Tracking onboarding pop-up view."),this._trackUxInteraction({kind:"onboardingPopup",userAction:T.Z.Onboarding.UserAction.view})}trackOnboardingPopupSkip(){var e;null===(e=this._logger)||void 0===e||e.debug("Tracking onboarding pop-up skip."),this._trackUxInteraction({kind:"onboardingPopup",userAction:T.Z.Onboarding.UserAction.skip})}trackOnboardingPopupNext(){var e;null===(e=this._logger)||void 0===e||e.debug("Tracking onboarding pop-up next."),this._trackUxInteraction({kind:"onboardingPopup",userAction:T.Z.Onboarding.UserAction.next})}trackBTSOnboardingPopupView(){var e;null===(e=this._logger)||void 0===e||e.debug("Tracking BTS onboarding pop-up view."),this._trackUxInteraction({kind:"BTSonboardingPopup",userAction:T.Z.Onboarding.UserAction.view})}trackBTSOnboardingPopupSkip(){var e;null===(e=this._logger)||void 0===e||e.debug("Tracking BTS onboarding pop-up skip."),this._trackUxInteraction({kind:"BTSonboardingPopup",userAction:T.Z.Onboarding.UserAction.skip})}trackBTSOnboardingPopupNext(){var e;null===(e=this._logger)||void 0===e||e.debug("Tracking BTS onboarding pop-up next."),this._trackUxInteraction({kind:"BTSonboardingPopup",userAction:T.Z.Onboarding.UserAction.next})}trackOnboardingPromptsTooltipView(){var e;null===(e=this._logger)||void 0===e||e.debug("Tracking onboarding prompts tooltip view."),this._trackUxInteraction({kind:"onboardingPromptsTooltip",userAction:T.Z.Onboarding.UserAction.view})}trackOnboardingReviewTooltipView(){var e;null===(e=this._logger)||void 0===e||e.debug("Tracking onboarding review tooltip view."),this._trackUxInteraction({kind:"onboardingReviewTooltip",userAction:T.Z.Onboarding.UserAction.view})}trackOnboardingRewriteTooltipView(){var e;null===(e=this._logger)||void 0===e||e.debug("Tracking onboarding rewrite tooltip view."),this._trackUxInteraction({kind:"onboardingRewriteTooltip",userAction:T.Z.Onboarding.UserAction.view})}trackOnboardingKnowledgeHubTooltipView(){var e;null===(e=this._logger)||void 0===e||e.debug("Tracking onboarding knowledge-hub tooltip view."),this._trackUxInteraction({kind:"onboardingKnowledgeHubTooltip",userAction:T.Z.Onboarding.UserAction.view})}trackOnboardingReferencesTooltipView(){var e;null===(e=this._logger)||void 0===e||e.debug("Tracking onboarding references tooltip view."),this._trackUxInteraction({kind:"onboardingReferencesTooltip",userAction:T.Z.Onboarding.UserAction.view})}trackOnboardingHistoryTooltipView(){var e;null===(e=this._logger)||void 0===e||e.debug("Tracking onboarding history tooltip view."),this._trackUxInteraction({kind:"onboardingHistoryTooltip",userAction:T.Z.Onboarding.UserAction.view})}_trackUxInteraction(e,t,i,n={}){var r;const s=T.Z.getComponentId(e,t,i,n),o=T.Z.getUserAction(e);null===(r=this._logger)||void 0===r||r.debug("Sending `user_action` to CAPI.",{componentId:s,userAction:o,uxInteraction:e,contextId:t}),(0,R.t)("sendUserAction",this._capiService.user_action({componentId:s,userAction:o}),this._logger)}}var U=i(26903),G=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};class N extends U.o{constructor(e,t){super(e),this._onDispose=t}dispose(){super.dispose(),this._onDispose()}}function L(e){var{assistantUIActions:t,capiService:i,completeOnboardingStep:p,stepCompletionSources:h,disposed:f,theme:v,logger:b}=e,y=G(e,["assistantUIActions","capiService","completeOnboardingStep","stepCompletionSources","disposed","theme","logger"]);const x=new o.w0,k=new B(i,b),S=new N(Object.assign(Object.assign({},y),{assistantMountActions:t.pipe(l.h(d.i.is(d.i.Kind.mount))),assistantUnmountActions:t.pipe(l.h(d.i.is(d.i.Kind.unmount)))}),(()=>x.unsubscribe())),C=c.T(...(null!=h?h:n.defaultCompletionSources).map((e=>e({onboardingUIActions:S.uiActions,assistantUIActions:t,activeStep:S.activeStep.view(r.UI((e=>e.name))),stepsSeenOnThisSession:S.stepsSeenOnThisSession,session:y.session,trackingService:k,disposed:f,logger:b}))));return x.add(C.subscribe((e=>{(0,s.zG)(S.activeStep.get(),r.Gg((t=>t.name===e)))&&p(e),S.hideStepIfActive(e)}))),x.add(function(e,t){return e.pipe(l.h(M.l.is(M.l.Kind.mount)),E.b((e=>{switch(e.step){case P.T.StepName.initial:return t.trackOnboardingPopupView();case P.T.StepName.initialBTS:return t.trackBTSOnboardingPopupView();case P.T.StepName.prompts:return t.trackOnboardingPromptsTooltipView();case P.T.StepName.review:return t.trackOnboardingReviewTooltipView();case P.T.StepName.rewrite:return t.trackOnboardingRewriteTooltipView();case P.T.StepName.knowledgeHub:return t.trackOnboardingKnowledgeHubTooltipView();case P.T.StepName.references:return t.trackOnboardingReferencesTooltipView();case P.T.StepName.history:return t.trackOnboardingHistoryTooltipView();default:return(0,g.L0)(e.step)}})))}(S.uiActions,k).subscribe()),{onboarding:S,theme:new m.e(null!=v?v:a.h.create(u.u))}}},26903:(e,t,i)=>{i.d(t,{X:()=>n,o:()=>C});var n,r=i(58303),s=i(90023),o=i(32073),a=i(74822),l=i(45178),c=i(13391),d=i(94032),u=i(23841),m=i(59179),p=i(954),g=i(78129),h=i(90572),f=i(84308),v=i(24666),b=i(10883),y=i(3199),x=i(74412),k=i(10325),S=i(9239);!function(e){e.isTooltipOnboardingStep=function(e){return k.T.StepName.isTooltipOnboardingStep(e.name)}}(n||(n={}));class C{constructor(e){var t,i,n,y,C,w;this._params=e,this._subs=new o.w0,this._assistantElements=c.h.create({}),this._externalElements=c.h.create({}),this._hideAssistantTooltips=c.h.create(!1),this._nextCandidateStep=c.h.create(r.YP),this.stepsSeenOnThisSession=c.h.create(new Set),this._uiActions=new a.x,this._activeStep=c.h.create(r.YP),this.uiActions=this._uiActions.asObservable(),this.activeStep=this._activeStep.view(),this.promptsAllocated=this._params.promptsAllocated,this._subs.add(c.h.combine(this._nextCandidateStep,this._assistantElements,this._externalElements,this._hideAssistantTooltips,((e,t,i,n)=>(0,s.zG)(e,r.tS((e=>function(e,t,i,n){switch(e){case k.T.StepName.initial:return(0,s.zG)(r.ij(i[x.n.initialPopupAnchor]),r.UI((e=>({name:k.T.StepName.initial,reference:e.reference,placement:e.placement,offset:e.offset,boundaryAreaPadding:e.boundaryAreaPadding,show:!0}))));case k.T.StepName.initialBTS:return(0,s.zG)(r.ij(i[x.n.initialBTSPopupAnchor]),r.UI((e=>({name:k.T.StepName.initialBTS,reference:e.reference,placement:e.placement,offset:e.offset,boundaryAreaPadding:e.boundaryAreaPadding,show:!0}))));case k.T.StepName.rewrite:return(0,s.zG)(r.ij(i[x.n.rewriteTooltipAnchor]),r.UI((e=>({name:k.T.StepName.rewrite,reference:e.reference,placement:e.placement,offset:e.offset,boundaryAreaPadding:e.boundaryAreaPadding,show:!0}))));case k.T.StepName.prompts:return(0,s.zG)(r.ij(t[x.e.initialActionsList]),r.UI((e=>({name:k.T.StepName.prompts,reference:e.reference,placement:e.placement,offset:e.offset,boundaryAreaPadding:e.boundaryAreaPadding,show:!n}))));case k.T.StepName.review:return(0,s.zG)(r.ij(t[x.e.followUpActionsList]),r.UI((e=>({name:k.T.StepName.review,reference:e.reference,placement:e.placement,offset:e.offset,boundaryAreaPadding:e.boundaryAreaPadding,show:!n}))));case k.T.StepName.knowledgeHub:return(0,s.zG)(r.ij(t[x.e.promptInput]),r.UI((e=>({name:k.T.StepName.knowledgeHub,reference:e.reference,placement:e.placement,offset:e.offset,boundaryAreaPadding:e.boundaryAreaPadding,show:!n}))));case k.T.StepName.references:return(0,s.zG)(r.ij(t[x.e.referencesList]),r.UI((e=>({name:k.T.StepName.references,reference:e.reference,placement:e.placement,offset:e.offset,boundaryAreaPadding:e.boundaryAreaPadding,show:!n}))));case k.T.StepName.history:return(0,s.zG)(r.ij(t[x.e.historyButton]),r.UI((e=>({name:k.T.StepName.history,reference:e.reference,placement:e.placement,offset:e.offset,boundaryAreaPadding:e.boundaryAreaPadding,show:!n}))));default:return(0,l.L0)(e)}}(e,t,i,n)))))).subscribe(d.wW(this._activeStep))),this._subs.add((t=this.activeStep,i=this._params.upstreamOnboardingState,n=this._params.session,y=this._params.textStats,C=this._params.forceDisabledOnboardingSteps,w=this._params.client,f.a([n,i,y.pipe(_()),n.pipe(m.U(r.pC),v.x(),b.M(i),m.U((([e,t])=>e?r.G(t):r.YP)))]).pipe(m.U((([e,i,n,o])=>{if(r.Wi(e)){const e=!(0,s.zG)(t.get(),r.UI((e=>e.name===k.T.StepName.initial)),r.fS(s.jv))&&!C.has(k.T.StepName.initialBTS)&&!i.initialBTS[w].completed&&void 0===i.initialBTS[w].lastSeen,o=!C.has(k.T.StepName.initial)&&!i.initial[w].completed&&void 0===i.initial[w].lastSeen&&!i.initialBTS[w].completed&&void 0===i.initialBTS[w].lastSeen,a=!C.has(k.T.StepName.rewrite)&&!i.rewrite[w].completed&&(i.initial[w].completed||i.initialBTS[w].completed)&&n>=30;return e?r.G(k.T.StepName.initialBTS):o?r.G(k.T.StepName.initial):a?r.G(k.T.StepName.rewrite):r.YP}return S.Z.Step.anyClientCompleted(i.prompts)||C.has(k.T.StepName.prompts)?S.Z.Step.anyClientCompleted(i.review)||C.has(k.T.StepName.review)?S.Z.Step.anyClientCompleted(i.history)||C.has(k.T.StepName.history)||!E(o)?S.Z.Step.anyClientCompleted(i.knowledgeHub)||C.has(k.T.StepName.knowledgeHub)||!E(o)?S.Z.Step.anyClientCompleted(i.references)||C.has(k.T.StepName.references)||!E(o)?r.YP:r.G(k.T.StepName.references):r.G(k.T.StepName.knowledgeHub):r.G(k.T.StepName.history):r.G(k.T.StepName.review):r.G(k.T.StepName.prompts)})))).subscribe(d.wW(this._nextCandidateStep))),this._subs.add(this._params.assistantMountActions.subscribe((({name:e,element:t})=>this._assistantElements.modify((i=>Object.assign(Object.assign({},i),{[e]:{reference:t,placement:e===x.e.historyButton?"bottom":"left"}})))))),this._subs.add(this._params.assistantUnmountActions.subscribe((({name:e})=>this._assistantElements.modify((t=>Object.assign(Object.assign({},t),{[e]:void 0})))))),this._subs.add(this._params.externalElements.subscribe(d.wW(this._externalElements))),this._subs.add(this._params.hideAssistantOnboardingTooltips.subscribe(d.wW(this._hideAssistantTooltips))),this._subs.add(this.activeStep.pipe(u.oA).subscribe((e=>this.stepsSeenOnThisSession.modify((t=>new Set([...t,e.name])))))),this._subs.add(this._params.session.pipe(m.U(r.pC),p.O(!1),g.G(),h.h((([e,t])=>e&&!t))).subscribe((()=>this._assistantElements.set({}))))}hideStepIfActive(e){this._activeStep.modify((t=>(0,s.zG)(t,r.Gg((t=>t.name===e)),(e=>e?r.YP:t))))}notify(e){this._uiActions.next(e)}dispose(){this._subs.unsubscribe()}}function E(e){return(0,s.zG)(e,r.g_(s.jv,(({prompts:e,review:t})=>{const i={prompts:S.Z.Step.anyClientCompleted(e),review:S.Z.Step.anyClientCompleted(t)};return Object.values(i).every(s.yR)})))}function _(){return(0,s.ls)(u.oA,m.U((e=>e.wordCount)),p.O(0),g.G(),y.R(((e,[t,i])=>(0,s.zG)(Math.abs(i-t),(t=>t<=2?e+t:e))),0),p.O(0),v.x())}},27422:(e,t,i)=>{var n;i.d(t,{x:()=>n}),function(e){let t,i;!function(e){e.ok="ok",e.satisfied="satisfied",e.dissatisfied="dissatisfied"}(t=e.Mood||(e.Mood={})),function(e){e.resultCard="resultCard",e.quickReplyInitialActions="quickReplyInitialActions",e.intentCard="intentCard"}(i=e.Source||(e.Source={}))}(n||(n={}))},87951:(e,t,i)=>{i.d(t,{s:()=>n});var n,r=i(58303);!function(e){let t;!function(e){e.create=e=>e}(t=e.Id||(e.Id={})),e.create=function(t){return Object.assign(Object.assign({},t),{id:e.Id.create(t.id),url:r.ij(t.url),contextText:r.YP})}}(n||(n={}))},19473:(e,t,i)=>{function n(e){return"alertAdded"===e.kind}function r(e){return{kind:"alertAdded",alertId:e}}function s(e){return"alertRemoved"===e.kind}function o(e,t){return{kind:"alertRemoved",alertId:e,reason:t}}i.d(t,{BG:()=>n,Tm:()=>r,nq:()=>s,qQ:()=>o})},6096:(e,t,i)=>{function n(e){return"sduiItemAdd"===e.kind}function r(e,t){return{kind:"sduiItemAdd",sduiRootId:e,sdui:t}}function s(e){return"sduiItemUpdate"===e.kind}function o(e,t){return{kind:"sduiItemUpdate",sduiRootId:e,sdui:t}}function a(e){return"sduiItemRemove"===e.kind}function l(e){return{kind:"sduiItemRemove",sduiRootId:e}}function c(e){return"sduiReset"===e.kind}function d(){return{kind:"sduiReset"}}i.d(t,{FE:()=>o,K5:()=>r,Sq:()=>d,Ul:()=>l,Y9:()=>s,Zb:()=>c,tC:()=>n,zi:()=>a});(0,i(61625).Kg)(n,s,a,c)},61106:(e,t,i)=>{i.d(t,{Ch:()=>r,MD:()=>s});var n=i(29393);function r(e){const t=n.kb.sha256(e);return btoa(String.fromCharCode(...t))}function s(e){return function(e){const t=new Array(e.length);for(let i=0;i<e.length;i++)t[i]=e[i].toString(16).padStart(2,"0");return t.join("")}(n.kb.sha256(e))}},29393:(e,t,i)=>{i.d(t,{kb:()=>s});const n=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function r(e,t,i,r,s){let o,a,l,c,d,u,m,p,g,h,f,v,b;for(;s>=64;){for(o=t[0],a=t[1],l=t[2],c=t[3],d=t[4],u=t[5],m=t[6],p=t[7],h=0;h<16;h++)f=r+4*h,e[h]=(255&i[f])<<24|(255&i[f+1])<<16|(255&i[f+2])<<8|255&i[f+3];for(h=16;h<64;h++)g=e[h-2],v=(g>>>17|g<<15)^(g>>>19|g<<13)^g>>>10,g=e[h-15],b=(g>>>7|g<<25)^(g>>>18|g<<14)^g>>>3,e[h]=(v+e[h-7]|0)+(b+e[h-16]|0);for(h=0;h<64;h++)v=(((d>>>6|d<<26)^(d>>>11|d<<21)^(d>>>25|d<<7))+(d&u^~d&m)|0)+(p+(n[h]+e[h]|0)|0)|0,b=((o>>>2|o<<30)^(o>>>13|o<<19)^(o>>>22|o<<10))+(o&a^o&l^a&l)|0,p=m,m=u,u=d,d=c+v|0,c=l,l=a,a=o,o=v+b|0;t[0]+=o,t[1]+=a,t[2]+=l,t[3]+=c,t[4]+=d,t[5]+=u,t[6]+=m,t[7]+=p,r+=64,s-=64}return r}class s{constructor(){this.digestLength=32,this.blockSize=64,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this.finished=!1,this.reset()}static sha256(e){const t=(new s).update((new TextEncoder).encode(e)),i=t.digest();return t.clean(),i}reset(){return this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225,this._bufferLength=0,this._bytesHashed=0,this.finished=!1,this}clean(){for(let e=0;e<this._buffer.length;e++)this._buffer[e]=0;for(let e=0;e<this._temp.length;e++)this._temp[e]=0;this.reset()}update(e,t=e.length){if(this.finished)throw new Error("SHA256: can't update because hash was finished.");let i=0;if(this._bytesHashed+=t,this._bufferLength>0){for(;this._bufferLength<64&&t>0;)this._buffer[this._bufferLength++]=e[i++],t--;64===this._bufferLength&&(r(this._temp,this._state,this._buffer,0,64),this._bufferLength=0)}for(t>=64&&(i=r(this._temp,this._state,e,i,t),t%=64);t>0;)this._buffer[this._bufferLength++]=e[i++],t--;return this}finish(e){if(!this.finished){const e=this._bytesHashed,t=this._bufferLength,i=e/536870912|0,n=e<<3,s=e%64<56?64:128;this._buffer[t]=128;for(let e=t+1;e<s-8;e++)this._buffer[e]=0;this._buffer[s-8]=i>>>24&255,this._buffer[s-7]=i>>>16&255,this._buffer[s-6]=i>>>8&255,this._buffer[s-5]=i>>>0&255,this._buffer[s-4]=n>>>24&255,this._buffer[s-3]=n>>>16&255,this._buffer[s-2]=n>>>8&255,this._buffer[s-1]=n>>>0&255,r(this._temp,this._state,this._buffer,0,s),this.finished=!0}for(let t=0;t<8;t++)e[4*t+0]=this._state[t]>>>24&255,e[4*t+1]=this._state[t]>>>16&255,e[4*t+2]=this._state[t]>>>8&255,e[4*t+3]=this._state[t]>>>0&255;return this}digest(){const e=new Uint8Array(this.digestLength);return this.finish(e),e}saveState(e){for(let t=0;t<this._state.length;t++)e[t]=this._state[t]}restoreState(e,t){for(let t=0;t<this._state.length;t++)this._state[t]=e[t];this._bytesHashed=t,this.finished=!1,this._bufferLength=0}}},37058:(e,t,i)=>{i.d(t,{DY:()=>n});const n=1e4},97399:(e,t,i)=>{i.d(t,{l:()=>n});var n,r=i(54946),s=i(41833),o=i(47765),a=i(12533),l=i(17824),c=i(37159),d=i(96705),u=i(72897),m=i(92379),p=i(58303),g=i(62552),h=i(66006),f=i(23841),v=i(20161),b=i(64271),y=i(64570),x=i(44071),k=i(90572),S=i(84714),C=i(94032),E=i(29479),_=i(954),w=i(59179),I=i(84308),A=i(10883),F=i(47311),P=i(79256),M=i(10933),O=i(72111);!function(e){var t;!function(e){e.nextLevel=function(e,t){return{rect:e,level:t+1}}}(e.State||(e.State={})),function(e){e.empty={top:0,bottom:0}}(e.Padding||(e.Padding={})),function(e){e.root="root",e.inherit="inherit"}(t=e.ContainerType||(e.ContainerType={})),e.withViewportContainer=function(e,n){return function(I){(0,l._)(F,I);var A=(0,u._)(F);function F(){var e;return(0,s._)(this,F),e=A.apply(this,arguments),(0,a._)((0,r._)(e),"_viewportEl",new g.X(p.YP)),(0,a._)((0,r._)(e),"_onMount",(function(t){e._viewportEl.next(p.ij(t)),e.props.onMount&&t&&e.props.onMount(t)})),e}return(0,o._)(F,[{key:"render",value:function(){var r=this.props,s=r.name,o=r.children,a=this._viewportEl.pipe(f.oA,v.w((function(e){return b.T(y.Qr,x.R(e,"transitionend").pipe(k.h((function(t){return t.target===e}))),S.of(!0).pipe(v.w(C.b2.rafScheduler))).pipe(E.h(e),_.O(e),w.U(h.UL.fromEl))}))),l=n.type===t.root?i:M;return m.createElement(e,(0,d._)((0,c._)({},this.props),{onMount:this._onMount,name:s}),m.createElement(l,{viewport:a,name:s},o))}}]),F}(m.Component)};var i=e.RootVirtualContainer=function(e){var t=e.viewport,i=e.viewportPadding,r=void 0===i?S.of(n.Padding.empty):i,s=e.name,o=e.children,a=m.useContext(n.Context);return m.createElement(U.Provider,{key:R(s),value:I.a(t,r,T).pipe(A.M(a.pipe(w.U((function(e){return e.level}))),n.State.nextLevel),F.shareReplay({bufferSize:1,refCount:!0}))},o)},M=e.InheritVirtualContainer=function(e){var t=e.viewport,i=e.viewportPadding,r=void 0===i?S.of(h.UL.empty):i,s=e.name,o=e.children,a=m.useContext(n.Context);return m.createElement(U.Provider,{key:R(s),value:I.a(a.pipe(w.U((function(e){return e.rect}))),I.a(t||a.pipe(w.U((function(e){return e.rect}))),r,T),h.UL.intersection).pipe(w.U(p.fS((function(){return O.C8.Logging.getLogger("InheritVirtualContainer").warn("Got an empty rect for inherit viewport",{name:s}),h.UL.empty}))),A.M(a.pipe(w.U((function(e){return e.level}))),n.State.nextLevel),F.shareReplay({bufferSize:1,refCount:!0}))},o)},B=P.P((function(){return y.Qr.pipe(E.h(document.body),_.O(document.body),w.U(h.UL.fromEl),w.U((function(e){return{rect:e,level:0}})))})).pipe(F.shareReplay({bufferSize:1,refCount:!0})),U=e.Context=m.createContext(B)}(n||(n={}));var T=function(e,t){return{top:e.top+t.top,bottom:e.bottom-t.bottom,height:e.height-t.top-t.bottom,left:e.left,right:e.right,width:e.width}},R=function(e){return"viewportProvider".concat((0,M._A)(e))}},45178:(e,t,i)=>{i.d(t,{L0:()=>o,vE:()=>s});const n=function(e="(nomessage)"){Error.call(this,e),"captureStackTrace"in Error?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name=this.constructor.name};n.prototype=Object.create(Error.prototype);class r extends n{constructor(e){super("Matching not exhaustive"+(e?`: unexpected value ${JSON.stringify(e)}`:""))}}function s(e){throw new r(e)}function o(e){return e}},61625:(e,t,i)=>{i.d(t,{HP:()=>a,Kg:()=>s,RN:()=>o,W9:()=>r});var n=i(84108);function r(...e){return t=>e.every((e=>e(t)))}function s(...e){return t=>e.some((e=>e(t)))}const o=(e,t)=>i=>i?e:t;function a(e,t){const i=new n.z(50);return{[e.name]:function(...n){const r=t?t.apply(this,n):n[0],s=i.get(r);if(!s){const t=e.apply(this,n);return i.put(r,t),t}return s}}[e.name]}},66738:(e,t,i)=>{i.d(t,{$T:()=>p,Eh:()=>C,G:()=>v,G0:()=>l,KX:()=>y,Lx:()=>u,Od:()=>g,Sq:()=>s,ZN:()=>S,cS:()=>h,e5:()=>c,hX:()=>a,nI:()=>E,nq:()=>m,ri:()=>o,t9:()=>x,u4:()=>d,yW:()=>b});var n=i(21147),r=i(61179),s=function(e){return new Set(e)},o=function(e){return new Set([e])};function a(e){return function(t){for(var i,n=t.values(),r=new Set;!(i=n.next()).done;){var s=i.value;e(s)&&r.add(s)}return r}}function l(e){var t=x(e);return function(i,n){if(void 0===n){var r=l(e);return function(e){return r(i,e)}}if(f(i))return n;if(f(n))return i;var s=new Set(i);return n.forEach((function(e){t(e,s)||s.add(e)})),s}}function c(e){var t=x(e);return function(i,n){if(void 0===n){var r=c(e);return function(e){return r(e,i)}}return a((function(e){return!t(e,n)}))(i)}}function d(e){var t=k(e);return function(e,i){return function(n){return t(n).reduce(i,e)}}}function u(e,t){var i=k(e);return function(e){return function(n){return i(n).reduce((function(i,n){return t.concat(i,e(n))}),t.empty)}}}var m=function(e){var t=k(e);return function(e,i){return function(n){return t(n).reduceRight((function(e,t){return i(t,e)}),e)}}};function p(e){var t=x(e);return function(e){return function(i){if(t(e)(i))return i;var n=new Set(i);return n.add(e),n}}}var g=function(e){return function(t){return function(i){return a((function(i){return!e.equals(t,i)}))(i)}}};var h=new Set,f=function(e){return 0===e.size},v=function(e){return function(t){for(var i,n=t.values(),r=!1;!r&&!(i=n.next()).done;)r=e(i.value);return r}};function b(e){return(0,r.ff)(v((0,r.ff)(e)))}function y(e){var t=x(e);return function(i,n){if(void 0===n){var r=y(e);return function(e){return r(e,i)}}return b((function(e){return t(e,n)}))(i)}}function x(e){return function(t,i){if(void 0===i){var n=x(e);return function(e){return n(t,e)}}for(var r,s=i.values(),o=!1;!o&&!(r=s.next()).done;)o=e.equals(t,r.value);return o}}var k=function(e){return function(t){var i=[];return t.forEach((function(e){return i.push(e)})),i.sort(e.compare)}};function S(e){return{show:function(t){var i=[];return t.forEach((function(t){i.push(e.show(t))})),"new Set([".concat(i.sort().join(", "),"])")}}}function C(e){var t=y(e);return(0,n.f7)((function(e,i){return t(e,i)&&t(i,e)}))}var E=function(e){return function(t){for(var i=t.length,n=new Set,r=x(e),s=0;s<i;s++){var o=t[s];r(o,n)||n.add(o)}return n}}},40929:(e,t,i)=>{i.d(t,{I:()=>l});var n=i(92379),r=i(98365),s=i(7851),o=i(36166);const a=[];function l(e,t){const{onClose:i,shouldCloseOnBlur:l,isOpen:c,isDismissable:d=!1,isKeyboardDismissDisabled:u=!1,shouldCloseOnInteractOutside:m}=e;n.useEffect((()=>(c&&a.push(t),()=>{const e=a.indexOf(t);e>=0&&a.splice(e,1)})),[c,t]);const p=()=>{a[a.length-1]===t&&i&&i()};(0,s.F)({ref:t,onInteractOutside:d?e=>{e instanceof Event&&(e=>{m&&!m(e.target,e)||(a[a.length-1]===t&&(e.stopPropagation(),e.preventDefault()),p())})(e)}:void 0,onInteractOutsideStart:e=>{e instanceof Event&&(e=>{m&&!m(e.target,e)||a[a.length-1]===t&&(e.stopPropagation(),e.preventDefault())})(e)}});const{focusWithinProps:g}=(0,o.L)({isDisabled:!l,onBlurWithin:e=>{e.relatedTarget&&!(0,r.cW)(e.relatedTarget)&&(m&&!m(e.relatedTarget,e instanceof Event?e:void 0)||null==i||i())}});return{overlayProps:Object.assign({onKeyDown:e=>{"Escape"!==e.key||u||(e.stopPropagation(),e.preventDefault(),p())}},g),underlayProps:{onPointerDown:e=>{e.target===e.currentTarget&&e.preventDefault()}}}}},55960:(e,t,i)=>{i.d(t,{c:()=>r});var n=i(92379);const r=(0,i(8578).I)("color",(({title:e,titleId:t,desc:i,descId:r,...s})=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true","data-icon":"InterfaceCopy",stroke:"transparent","aria-labelledby":t,"aria-describedby":r,...s},i?n.createElement("desc",{id:r},i):null,e?n.createElement("title",{id:t},e):null,n.createElement("path",{stroke:"#646B81",strokeLinecap:"round",strokeLinejoin:"round",d:"M7.053 10.842v1.908c0 .69.56 1.25 1.25 1.25h4.447c.69 0 1.25-.56 1.25-1.25V8.303c0-.69-.56-1.25-1.25-1.25h-1.908M8.947 3.25v4.447c0 .69-.56 1.25-1.25 1.25H3.25c-.69 0-1.25-.56-1.25-1.25V3.25C2 2.56 2.56 2 3.25 2h4.447c.69 0 1.25.56 1.25 1.25"}))))},17477:(e,t,i)=>{i.d(t,{p:()=>r});var n=i(92379);const r=(0,i(8578).I)("color",(({title:e,titleId:t,desc:i,descId:r,...s})=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true","data-icon":"InterfaceDropdownArrowDown",stroke:"transparent","aria-labelledby":t,"aria-describedby":r,...s},i?n.createElement("desc",{id:r},i):null,e?n.createElement("title",{id:t},e):null,n.createElement("path",{fill:"#646B81",stroke:"#646B81",strokeWidth:2,d:"m7 7 1 1.333L9 7z"}))))},38747:(e,t,i)=>{i.d(t,{n:()=>r});var n=i(92379);const r=(0,i(8578).I)("color",(({title:e,titleId:t,desc:i,descId:r,...s})=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true","data-icon":"InterfaceLeft",stroke:"transparent","aria-labelledby":t,"aria-describedby":r,...s},i?n.createElement("desc",{id:r},i):null,e?n.createElement("title",{id:t},e):null,n.createElement("path",{stroke:"#646B81",strokeLinecap:"round",d:"M11 2 5 8l6 6"}))))},91691:(e,t,i)=>{i.d(t,{D:()=>r});var n=i(92379);const r=(0,i(8578).I)("color",(({title:e,titleId:t,desc:i,descId:r,...s})=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true","data-icon":"InterfaceMoreVertical",stroke:"transparent","aria-labelledby":t,"aria-describedby":r,...s},i?n.createElement("desc",{id:r},i):null,e?n.createElement("title",{id:t},e):null,n.createElement("path",{fill:"#646B81",d:"M9.2 8a1.2 1.2 0 1 1-2.4 0 1.2 1.2 0 0 1 2.4 0M9.2 12.8a1.2 1.2 0 1 1-2.4 0 1.2 1.2 0 0 1 2.4 0M9.2 3.2a1.2 1.2 0 1 1-2.4 0 1.2 1.2 0 0 1 2.4 0"}))))},91511:(e,t,i)=>{i.d(t,{o:()=>r});var n=i(92379);const r=(0,i(8578).I)("color",(({title:e,titleId:t,desc:i,descId:r,...s})=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true","data-icon":"InterfaceMore",stroke:"transparent","aria-labelledby":t,"aria-describedby":r,...s},i?n.createElement("desc",{id:r},i):null,e?n.createElement("title",{id:t},e):null,n.createElement("path",{fill:"#646B81",d:"M8.001 6.8a1.2 1.2 0 1 1 0 2.4 1.2 1.2 0 0 1 0-2.4M12.803 6.8a1.2 1.2 0 1 1 0 2.4 1.2 1.2 0 0 1 0-2.4M3.2 6.8a1.2 1.2 0 1 1 0 2.4 1.2 1.2 0 0 1 0-2.4"}))))},40081:(e,t,i)=>{i.d(t,{j:()=>r});var n=i(92379);const r=(0,i(8578).I)("nocolor",(({title:e,titleId:t,desc:i,descId:r,...s})=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true","data-icon":"InterfaceOk",stroke:"transparent","aria-labelledby":t,"aria-describedby":r,...s},i?n.createElement("desc",{id:r},i):null,e?n.createElement("title",{id:t},e):null,n.createElement("path",{fill:"#05735A",fillRule:"evenodd",d:"M8 14A6 6 0 1 0 8 2a6 6 0 0 0 0 12m3.498-7.44a.75.75 0 1 0-.996-1.12L6.5 8.996l-1.002-.89a.75.75 0 0 0-.996 1.12L6.5 11.004z",clipRule:"evenodd"}))))},67380:(e,t,i)=>{i.d(t,{a:()=>r});var n=i(92379);const r=(0,i(8578).I)("color",(({title:e,titleId:t,desc:i,descId:r,...s})=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true","data-icon":"InterfaceReload",stroke:"transparent","aria-labelledby":t,"aria-describedby":r,...s},i?n.createElement("desc",{id:r},i):null,e?n.createElement("title",{id:t},e):null,n.createElement("path",{stroke:"#646B81",d:"M5.818 2.429A5.92 5.92 0 0 0 2 8a6 6 0 0 0 3.857 5.606m4.286-11.177C12.398 3.29 14 5.44 14 8a5.97 5.97 0 0 1-3.824 5.606M2.546 2h3.272v3.273M13.455 14h-3.273v-3.273"}))))},44586:(e,t,i)=>{i.d(t,{M:()=>r});var n=i(92379);const r=(0,i(8578).I)("color",(({title:e,titleId:t,desc:i,descId:r,...s})=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true","data-icon":"InterfaceRight",stroke:"transparent","aria-labelledby":t,"aria-describedby":r,...s},i?n.createElement("desc",{id:r},i):null,e?n.createElement("title",{id:t},e):null,n.createElement("path",{stroke:"#646B81",strokeLinecap:"round",d:"m5 2 6 6-6 6"}))))},11834:(e,t,i)=>{i.d(t,{D:()=>r});var n=i(92379);const r=(0,i(8578).I)("color",(({title:e,titleId:t,desc:i,descId:r,...s})=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true","data-icon":"InterfaceSearch",stroke:"transparent","aria-labelledby":t,"aria-describedby":r,...s},i?n.createElement("desc",{id:r},i):null,e?n.createElement("title",{id:t},e):null,n.createElement("path",{stroke:"#646B81",strokeLinecap:"round",d:"M9.784 9.784 14 14m-2.919-7.46A4.54 4.54 0 1 1 2 6.54a4.54 4.54 0 0 1 9.081 0Z"}))))},75212:(e,t,i)=>{i.d(t,{F:()=>r});var n=i(92379);const r=(0,i(8578).I)("nocolor",(({title:e,titleId:t,desc:i,descId:r,...s})=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true","data-icon":"InterfaceWarning",stroke:"transparent","aria-labelledby":t,"aria-describedby":r,...s},i?n.createElement("desc",{id:r},i):null,e?n.createElement("title",{id:t},e):null,n.createElement("path",{fill:"#D67400",fillRule:"evenodd",d:"M6.94 2.629a1.21 1.21 0 0 1 2.12 0l4.774 8.485c.472.838-.118 1.886-1.06 1.886H3.226c-.943 0-1.533-1.048-1.061-1.886zM8 5a.75.75 0 0 1 .75.75v2.5a.75.75 0 0 1-1.5 0v-2.5A.75.75 0 0 1 8 5m0 6.5A.75.75 0 1 0 8 10a.75.75 0 0 0 0 1.5",clipRule:"evenodd"}))))},3462:(e,t,i)=>{i.d(t,{p:()=>r});var n=i(92379);const r=(0,i(8578).I)("nocolor",(({title:e,titleId:t,desc:i,descId:r,...s})=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:32,height:32,fill:"none",viewBox:"0 0 32 32","aria-hidden":"true","data-icon":"LogoLogomarkMonochromeDefault",stroke:"transparent","aria-labelledby":t,"aria-describedby":r,...s},i?n.createElement("desc",{id:r},i):null,e?n.createElement("title",{id:t},e):null,n.createElement("path",{fill:"var(--color-background-base-inverse)",d:"M0 16C0 7.163 7.162 0 16.001 0s16 7.163 16 16c0 7.732-5.482 14.183-12.773 15.676-1.042.213-2.121.324-3.222.324H0z"}),n.createElement("path",{fill:"var(--color-background-base-default)",d:"m19.876 14.484-1.788 2.94h6.02c-.93 5.116-6.62 8.599-12.304 5.653a6.7 6.7 0 0 1-2.861-2.834c-3.27-6.226 1.197-12.49 7.093-12.49a8.19 8.19 0 0 1 6.2 2.839l1.58-2.6a11.08 11.08 0 0 0-8.566-3.148c-5.562.384-10.071 4.994-10.342 10.56-.309 6.393 4.8 11.688 11.124 11.688s11.14-4.999 11.14-11.14c0-.5-.038-.989-.1-1.468z"}))))},53268:(e,t,i)=>{i.d(t,{d:()=>s});var n=i(92379),r=i(29335);function s(e){let[t,i]=(0,r.z)(e.isOpen,e.defaultOpen||!1,e.onOpenChange);const s=(0,n.useCallback)((()=>{i(!0)}),[i]),o=(0,n.useCallback)((()=>{i(!1)}),[i]),a=(0,n.useCallback)((()=>{i(!t)}),[i,t]);return{isOpen:t,setOpen:i,open:s,close:o,toggle:a}}},29335:(e,t,i)=>{i.d(t,{z:()=>r});var n=i(92379);function r(e,t,i){let[r,s]=(0,n.useState)(e||t),o=(0,n.useRef)(void 0!==e),a=void 0!==e;(0,n.useEffect)((()=>{o.current;o.current=a}),[a]);let l=a?e:r,c=(0,n.useCallback)(((e,...t)=>{let n=(e,...t)=>{i&&(Object.is(l,e)||i(e,...t)),a||(l=e)};if("function"==typeof e){0,s(((i,...r)=>{let s=e(a?l:i,...r);return n(s,...t),a?i:s}))}else a||s(e),n(e,...t)}),[a,l,i]);return[l,c]}},90187:(e,t,i)=>{i.d(t,{O:()=>n});const n=i(92379).createContext({register:()=>{}});n.displayName="PressResponderContext"},85651:(e,t,i)=>{i.d(t,{aV:()=>m});var n=i(92379);const r=(0,n.createContext)({});function s(){var e;return null!==(e=(0,n.useContext)(r))&&void 0!==e?e:{}}var o=i(90187);function a({children:e}){let t=(0,n.useMemo)((()=>({register:()=>{}})),[]);return n.createElement(o.O.Provider,{value:t},e)}var l=i(98365),c=i(95295),d=i(9499);const u=n.createContext(null);function m(e){let t=(0,d.Av)(),{portalContainer:i=(t?null:document.body),isExiting:r}=e,[o,m]=(0,n.useState)(!1),p=(0,n.useMemo)((()=>({contain:o,setContain:m})),[o,m]),{getContainer:g}=s();if(!e.portalContainer&&g&&(i=g()),!i)return null;let h=e.children;return e.disableFocusManagement||(h=n.createElement(l.MT,{restoreFocus:!0,contain:(e.shouldContainFocus||o)&&!r},h)),h=n.createElement(u.Provider,{value:p},n.createElement(a,null,h)),c.createPortal(h,i)}}}]);