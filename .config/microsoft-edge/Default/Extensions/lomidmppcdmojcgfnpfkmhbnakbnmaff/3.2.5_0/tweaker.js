const last={refresh:0},icon=document.createElement("img");icon.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACCElEQVR4Ad2XgWbDYBDHy9jAKDBmKNhsa7usactgMoxVqSxfB2B7g/UNljVGMVuZbcxIp5YkIH2DPkIfoY+QR8hynaN6kZw0anacQO7+v+8u3/ddcv/Cqo4YV21tAk/ZuuzLlqpKpppPl8zV7maJXHHNet9WlfD9IMplR5iSrRb44o72PJ8AYJYAQIgpazEVW7vBIAYEG4C9GCDlB1MAPgQjCT+YD4AuW0IlScrDlp56BXpR2egdB5uP9aDwcR6Uhq2kPD7dIfelAQTzVqF1FgFyRilAX+9VgsRctqYTAAhmQoziANC3X5XYKkQCMCCgh30OAPie2YipQluZAyjqEJAEIdtigCEcAGgHr5VGSYUACkHFWQCMKsCRPZdEykcFIwSWPQ3A1stpJEDNESamwCqMoxLsfl6MctQS4dHzTyeRAPR47h52yJf89vsl18nL2RuuxF8UB18dBOwGKr46CKjCzvuZT8VXCCG7QkWxtBDS95VUdYUH80UqCNjzfAgqLjvCj95uTIPbCucDPgQVj75FmQazHB+CimcCUYNekqTUi+E8QcUzhIirxMFXM1h7OOJe5Zm2A8XJ3cFsWwoI3B1UnA+BA0laq1jtzv6gOaXifAio5rInZiFn4BTFh0Bx/t8SH2TKgZBt4eFEnL0ZMJiUb8OnF/p4BtUtTnbNhle12zrOgH/OfgDMuAxQtLPe6QAAAABJRU5ErkJggg==",icon.onload=update;const port=chrome.runtime.connect();function update(){const e=Array.from(document.querySelectorAll("mat-sidenav-content mat-icon + * + .navItemBadge")),t=e.map((e=>e.parentNode.parentNode.parentNode.ariaLabel.replace(" unread",""))).join(", ");document.title="Voice"+(t?" - "+t:"");const o=e.map((e=>1*e.innerText)).reduce(((e,t)=>e+t),0);if(last.count!=o){const e=document.createElement("canvas");e.height=e.width=32;const t=e.getContext("2d");t.drawImage(icon,0,0,32,32),t.font=(o<100?"20px":"17px")+' "Google Sans", "Helvetica Neue", sans-serif',t.fillStyle="#202124",t.strokeStyle="#e0f2f1",t.lineWidth=3,t.miterLimit=2,t.lineJoin="round";const n=31-t.measureText(o).width;t.strokeText(o,n,30),t.fillText(o,n,30),t.fillText(o,n,30);const a=document.createElement("link");a.type="image/x-icon",a.rel="shortcut icon",a.href=e.toDataURL(),document.head.replaceChild(a,document.querySelector("link[type=image\\/x-icon]"))}last.count=o;const n=document.querySelector(".gv_root .gmat-list-item-active .navItemBadge"),a=document.querySelectorAll(".gmat-subtitle-2").length;n&&Number(n.innerText)!=a&&last.refresh<100?(console.log(last.refresh),++last.refresh>99&&Date.now()-(localStorage.refreshed||0)>6e5&&(console.log(Date.now(),localStorage.refreshed||0,Date.now()-(localStorage.refreshed||0)),localStorage.refreshed=Date.now(),document.location.reload())):last.refresh=0,port.postMessage(Date.now())}port.onMessage.addListener(update);