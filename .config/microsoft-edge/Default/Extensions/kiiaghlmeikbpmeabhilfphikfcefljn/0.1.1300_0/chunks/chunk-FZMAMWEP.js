import{a as oe,b as ct,c as ie,d as se,e as le,f as V,g as lt,h as Pt,i as ue,j as _e,k as pe,l as de,m as fe,o as v}from"./chunk-W54VV7FS.js";import{a as rt,b as at}from"./chunk-67GETEJS.js";import{b as x}from"./chunk-25CN3A5B.js";import{a as re,b as ae,c as me,d as Ee,e as ge,f as Se}from"./chunk-Z6KOSB5X.js";import{a as Rt}from"./chunk-IQFNOK3G.js";import{a as he}from"./chunk-RDRL4ZUL.js";import{a as G,b as ht}from"./chunk-BCG2KUGW.js";import{b as ee,c as Tt,d as ne}from"./chunk-35WHJZQO.js";import{c as st,e as M,g as ce,p as Te}from"./chunk-TXXCCNWI.js";import{a as gn}from"./chunk-O4TFJKJQ.js";import{m as T,r as Qt,s as E,t as X,w as te}from"./chunk-CHZKSFGE.js";import{b as mn}from"./chunk-KNMLYUAT.js";import{a as En}from"./chunk-CC7YXNN4.js";import{a as A,d as K}from"./chunk-JLZNCAMO.js";import{a as fn}from"./chunk-HQ4MM2EX.js";import{z as St}from"./chunk-T5WNPH4X.js";import{a as w,c as B}from"./chunk-IUWVXOWN.js";import{b as it,c as I,d as gt}from"./chunk-HPNQXUCM.js";import{k as dn}from"./chunk-53OM6ECF.js";import{d as pn,e as p}from"./chunk-3GYLW4KZ.js";var un=p(dn());B();var zt={};pn(zt,{amazon:()=>$t,bestbuy:()=>Zt,google:()=>Kt,petco:()=>he,target:()=>Vt,zappos:()=>Yt});var g=p(I()),Ht=p(gt()),Xt=p(fn());B();K();K();function ut(e,t){if(!e||!t)return e;let n=e,o=Array.isArray(t)?t:[t];for(let i of o){let{pattern:r,flags:a=""}=i,c=n.match(new RegExp(r,a));if(c){n=c[0];break}}return n}function Re(e){return(Array.isArray(e)?e:[e]).find(n=>document.getElementById(n))}function C(e,t=document){return(Array.isArray(e)?e:[e]).find(o=>t.querySelector(o))}function Pe(e,t){return(Array.isArray(e)?e:[e]).find(o=>t.getAttribute(o))}async function Ie(e){let t=E("pc_amz_pdp_get_asin_by_css_selector"),n=t?r=>!document.querySelector(r):r=>!document.getElementById(r),o=t?e.PDP_ELEMENTS_TO_WAIT_ON_SELECTORS:e.PDP_ELEMENT_IDS_TO_WAIT_ON,i=0;for(;o.some(n)&&i<100;)await A(50),++i}function Sn(e){let t=Re(e.PDP_ASIN_ELEMENT_IDS),n=document.getElementById(t);if(n)return{element:n,asin:n.value}}function Tn(e){let t=C(e.PDP_ASIN_LINK_SELECTOR_LIST),n=document.querySelector(t);if(n&&n.href)for(let o of e.PDP_ASIN_LINK_REGEXP_LIST){let{pattern:i,flags:r=""}=o,a=new RegExp(i,r).exec(n.href);if(a)return{element:n,asin:a[1]||a[0]}}}function hn(e,t,n){let o=n;for(let i of t)if(e[i]){o=i;break}return o&&e[o]}function Rn(e){let t=C(e.PDP_ASIN_CSS_SELECTOR_LIST),n=document.querySelector(t);if(n){let o=It(n,e.PDP_ASIN_CSS_SELECTOR_ATTRIBUTE_LIST)||Ct(n,e.PDP_ASIN_CSS_SELECTOR_CUSTOM_PROPERTY_LIST,e.PDP_ASIN_REGEXP_LIST);if(o)return{element:n,asin:o}}}function Ce(e){return E("pc_amz_pdp_get_asin_by_css_selector")?Tn(e)||Rn(e):Sn(e)}function It(e,t){let n=Pe(t,e);return e.getAttribute(n)}function Ct(e,t,n){let o=hn(e,t,"innerText");if(o)return ut(o,n)}function ye(e,t){let n=C(t.CART_ITEM_ASIN_CSS_SELECTOR_LIST,e),o=e.querySelector(n)||e;return It(o,t.AMAZON_CART_ITEM_ASIN_ATTRIBUTE_LIST)||Ct(o,t.CART_ITEM_ASIN_CUSTOM_PROPERTY_LIST,t.CART_ITEM_ASIN_REGEXP_LIST)}function be(e,t){let n=C(t.CHECKOUT_ITEM_ASIN_CSS_SELECTOR_LIST,e),o=e.querySelector(n)||e,i=It(o,t.CHECKOUT_ITEM_ASIN_ATTRIBUTE_LIST);return i||(i=Ct(o,t.CHECKOUT_ITEM_ASIN_CUSTOM_PROPERTY_LIST,t.CHECKOUT_ITEM_ASIN_REGEXP_LIST)),i.split("|")[0]}var yt=p(I());var Ae=e=>{let t=document.location.search,n=yt.default.get(t.match(/smid=([^&]+)/),"[1]")||yt.default.get(t.match(/m=([^&]+)/),"[1]");return n&&(e.sellerId=n),at("resetNotification"),at("setInputData",{inputData:e}),rt("asin",e).then(o=>{o&&o.runId&&at("setRunId",{runId:o.runId})})};var U=e=>rt("getConquestConfig",e);function bt(e){let t=e.tagName.toLowerCase();return e.id&&(t+="#"+e.id),e.className&&(t+=e.className.replace(/ /g,".")),t}function _t(e,t){return!e||e===document.body?!1:bt(e).match(t)?!0:_t(e.parentElement,t)}var we=p(I());function At(e){let t=we.default.find(e.PRODUCT_ARRIVAL_SELECTORS);return t?t.innerText:null}var Oe=p(I());function wt(e){let t=document.querySelectorAll(e.ATC_SELECTOR);return Oe.default.map(t,n=>({name:n.name,value:n.value}))}function O(e,t){let n=e.exec(t);return n&&n.length?n[1]:null}function Y(e,t){let n=document.querySelector(t.HIDDEN_BASE_PRICE_SELECTOR),o=n&&n.getAttribute("value"),i=document.querySelector(`[data-asin="${e}"]`),r=i&&i.getAttribute("data-asin-price"),a=document.querySelector(t.HIDDEN_OURPRICE_PRICE_SELECTOR),c=a&&a.innerText,s=document.querySelector(t.HIDDEN_PRICE_SCRIPT_SELECTOR),_=s&&O(new RegExp(`a:"${e}",bp:(\\d+\\.\\d{0,2}),`),s.innerText),l=o||r||c||_;if(l)return G(parseFloat(l.replace("$","")).toFixed(2))}var Me=p(it()),q=p(I());K();var Le=p(I()),Pn="#addToCart input[type=hidden]",In=["#a-autoid-0-announce",".change-quantity-button",'.ProductShowcase__showcase__c0Nex [data-click-type="ADDTOCART"]',"#submitOrderButtonId-announce"],Cn="[data-a-carousel-options]",yn=".a-carousel-heading",bn=".a-carousel-row .a-carousel-card",An=".a-color-price",wn="[data-asin]",On="data-asin",Ln="[data-p13n-asin-metadata]",Nn="data-p13n-asin-metadata",vn=[".p13n-sc-truncated[title]","a[title]"],kn=[".a-carousel-photo img","img[data-a-dynamic-image]"],Dn=["#SalesRank b > a",".prodDetTable a"],xn=[".prodDetTable","#detail-bullets_feature_div .content ul"],Mn=["#landingImage","#imgTagWrapperId img",".image img","#imageBlock [data-a-dynamic-image]"],Un="data-a-dynamic-image",Fn="#merchant-info",Gn=".nav-search-dropdown option[selected]",qn="#nav-subnav .nav-b",Hn='[id^="gb_atc_"]',Bn=".ProductShowcase__showcase__c0Nex",Xn="[data-click-type='ADDTOCART']",$n=3500,Wn=599,Zn="#pantryStoreMessage_feature_div",Kn="#nav-subnav",Vn="#ourprice_shippingmessage .a-color-secondary",Yn="#a-popover-shippingDetailsDisplayContent",zn=/ships from and sold by prime pantry/i,jn=/FREE shipping on all Prime Pantry orders over \$\d+/i,Jn=/or get.*shipping on this item for \$[\d\.]+/i,Qn=/get free shipping/i,to=/on this item for \$([\d\.]+)/i,eo="#deliveryBlockMessage",no="data-csa-c-delivery-price",oo=["#primeExclusivePricingMessage","#primeSavingsUpsellCaption_feature_div"],io=["#buyDealSection .offer-price","#priceblock_saleprice","#priceblock_ourprice",".a-accordion-active #addToCart .header-price","#unqualifiedBuyBox .a-color-price","#buyBoxAccordion #newAccordionRow_1 .a-price>span:not(.a-offscreen)","#apex_desktop .priceToPay>span:not(.a-offscreen)","#apex_mobile .priceToPay>span:not(.a-offscreen)","#ppd .apexPriceToPay span:not(.a-offscreen)","#ppd .a-text-price span:not(.a-offscreen)","#ppd .a-price span:not(.a-offscreen)","#apex_desktop_pwBuyBoxAccordionRow .apexPriceToPay span:not(.a-offscreen)","#apex_desktop_newAccordionRow .apexPriceToPay span:not(.a-offscreen)",'[data-feature-name="corePrice_mobile"] .apexPriceToPay span:not(.a-offscreen)',"#new-button-price","#priceblock_dealprice:not(.a-hidden)","#newBuyBoxPrice"],ro=["#newAccordionRow #apex_offerDisplay_desktop .a-price span:not(.a-offscreen)","#newAccordionRow #apex_offerDisplay_mobile_feature_div .a-price span:not(.a-offscreen)"],ao=["#delivery-message .a-text-bold","#delivery-message > b"],co=["#priceblock_dealprice:not(.a-hidden)","#apex_desktop_primeSavingsUpsellAccordionRow #corePrice_desktop .apexPriceToPay span:not(.a-offscreen)","#corePrice_mobile_feature_div .apexPriceToPay span:not(.a-offscreen)"],so=/As a Prime member, this deal is exclusively for you./i,lo=["#LDBuybox","#dealsAccordionRow"],uo=["#dealsx_percent_message","#deal_availability",'[id^="deal_status_progress"]'],_o=["#buyBoxAccordion #newAccordionRow_1 .a-price>span:not(.a-offscreen)"],po=[{pattern:"lightning\\s+deal",flags:"i"}],fo=[{pattern:"100%\\s*claimed",flags:"i"}],mo=".a-price-whole",Eo=".a-price-fraction",go=[".priceToPay .a-price-whole",".priceToPay .a-price-fraction",".a-price .a-price-whole",".a-price .a-price-fraction"],So="#attach-base-product-price",To="#priceblock_ourprice",ho='#new-toggle-buybox script[type="text/javascript"]',Ro="#moreBuyingChoices_feature_div span.a-size-small > a",Po="span.promoPriceBlockMessage_OneTimePurchase .a-color-success",Io=['[data-feature-name="promoPriceBlockMessage"] .promoPriceBlockMessage > div','[data-csa-c-coupon="true"] .a-color-success','[data-csa-c-savings="true"] .a-color-success'],Co=[{pattern:"Buy any \\d+, Save",flags:"i"},{pattern:"Buy \\$\\d+(\\.|,) (Get|get) \\$\\d+ Amazon (promo )?(Credit|credit)",flags:"i"},{pattern:"off of every \\d+ items",flags:"i"},{pattern:"Subscribe (&|and) Save",flags:"i"},{pattern:"if you qualify",flags:"i"},{pattern:"^(?!(.|\\n)*?coupon)",flags:"i"}],yo=[],bo=/[$](?<dollars>[0-9]+)[.]?(?<cents>[0-9][0-9])?/,Ao=/(?<percent>[0-9]+)[%]/,wo=/Subscribe & Save orders only/i,Oo=/You save an additional/i,Lo="#prime-member-promotions-discount",No=["#priceblock_ourprice","#newBuyBoxPrice","#addToCart #price"],vo="#pmp-detailpage-member-amount-off",ko=["#prime-member-promotions-discount","#priceblock_benefitprice"],Do=["#sc-subtotal-label-activecart"],xo=["#activeCartViewForm [data-asin]"],Mo=[".sc-list-item-content .a-price>span:not(.a-offscreen)",".sc-list-item-content .sc-product-price>span:not(.a-offscreen)",".sc-list-item-content .sc-product-price"],Uo=[".sc-coupon-wrapper .a-color-base"],Fo=["data-asin"],Go=[".sc-product-link"],qo=[".sc-list-item-content .sc-apex-cart-price",".sc-list-item-content .a-price",".sc-list-item-content .sc-product-price>span:not(.a-offscreen)",".sc-list-item-content .sc-product-price"],Ho=[],Bo=[],Xo=[],$o=[".priceToPay .a-price-whole",".priceToPay .a-price-fraction",".a-price .a-price-whole",".a-price .a-price-fraction"],Wo=[".a-price-whole"],Zo=[".a-price-fraction"],Ko=['[name="dupOrderCheckArgs"]',"[data-testid^=Item_asin]"],Vo=[{pattern:".+?(?= discount applied)"}],Yo=[".a-color-price span",".a-price span","span.lineitem-price-text"],zo=[".lineitem-seller-section a"],jo=[],Jo=["value"],Qo=[],ti=[],ei=[".priceToPay .a-price-whole",".priceToPay .a-price-fraction",".a-price .a-price-whole",".a-price .a-price-fraction"],ni=[".a-price-whole"],oi=[".a-price-fraction"],ii=["#actionPanel","#rightCol","#ppd-right"],ri=["amazon\\.com$"],ai=["(dp|gp|d).*[0-9A-Z]{10}"],ci=["/checkout","/cart"],si=["/cart","(dp|gp)/item-dispatch"],li=["/checkout"],ui=["(dp|gp)/buy/.*/handlers/display\\.html","/checkout"],_i=["#price_feature_div","#pmpux_feature_div","#adoptedData","#MediaMatrix","#coursewarePrice","#ask_feature_div","#averageCustomerReviews_feature_div"],pi=[],di=[{pattern:"\\$[0-9.,]+"}],fi=[{pattern:"\\$[0-9.,]+"}],mi=["ASIN","title"],Ei=["#ASIN","#title"],gi=["ASIN"],Si=['link[rel~="canonical"]'],Ti=[{pattern:"/dp/(.{10})"}],hi=["#ASIN"],Ri=["value"],Pi=[],Ii=[],Ci={ATC_SELECTOR:Pn,ALL_BUYING_OPT_SELECTORS:In,PRODUCT_CAROUSEL_SELECTOR:Cn,PRODUCT_CAROUSEL_HEADING_SELECTOR:yn,PRDOUCT_CAROUSEL_CARDS_SELECTOR:bn,PRODUCT_PRICE_SELECTOR:An,PRODUCT_ASIN_ELEM_SELECTOR:wn,PRODUCT_ASIN_ELEM_ATTR:On,PRODUCT_ASIN_META_SELECTOR:Ln,PRODUCT_ASIN_META_ATTR:Nn,PRDOUCT_TITLE_SELECTORS:vn,PRODUCT_IMAGE_SELECTORS:kn,PRODUCT_FEEDBACK_SELECTORS:Dn,PRODUCT_INFO_SELECTORS:xn,PRODUCT_MAIN_IMAGE_SELECTORS:Mn,PRODUCT_MAIN_IMAGE_ATTRIBUTE:Un,PRODUCT_SELLER_SELECTOR:Fn,PRODUCT_ARRIVAL_SELECTORS:ao,PRODUCT_CATEGORY_SELECTED_ELEMENT_SELECTOR:Gn,PRODUCT_CATEGORY_ELEMENT_SELECTOR:qn,PRODUCT_DEAL_EL_SELECTOR:Hn,STORE_PRODUCT_SELECTOR:Bn,STORE_PRODUCT_ATC_SELECTOR:Xn,FREE_SHIPPING_THRESHOLD_PANTRY:$n,DEFAULT_PANTRY_SHIPPING_RATE:Wn,FREE_SHIPPING_MSG_SELECTOR:Zn,SHIPPING_NAVBAR_SELECTOR:Kn,DEFAULT_SHIPPING_SELECTOR:Vn,POPOVER_SHIPPING_DETAILS_SELECTOR:Yn,SOLD_BY_PRIME_PANTRY_REGEX:zn,PANTRY_FREE_SHIPPING_THRESHOLD_REGEX:jn,PAID_SHIPPING_REGEX:Jn,GET_FREE_SHIPPING_REGEX:Qn,SHIPPING_COST_REGEX:to,RIGHT_PANEL_SHIPPING_EL_SELECTOR:eo,RIGHT_PANEL_SHIPPING_ATTR:no,BASE_PRICE_SELECTORS:io,PRIME_PRICE_SELECTORS:co,PRIME_EXCLUSIVE_PRICE_ELEMENT_SELECTORS:oo,NON_PRIME_DEALS_PRICE_SELECTORS:ro,PDP_ALT_PRICE_SELECTORS:go,PDP_PRICE_FRACTIONED_DOLLARS_SELECTOR:mo,PDP_PRICE_FRACTIONED_CENTS_SELECTOR:Eo,HIDDEN_BASE_PRICE_SELECTOR:So,HIDDEN_OURPRICE_PRICE_SELECTOR:To,HIDDEN_PRICE_SCRIPT_SELECTOR:ho,MORE_BUYING_OPTIONS_PRICE_SELECTOR:Ro,IS_ELIGIBLE_FOR_PRIME_DEAL_REGEX:so,INSERT_PC_AFTER_ELEMENTS:_i,LIGHTNING_DEALS_SELECTORS:lo,LIGHTNING_DEALS_CLAIMED_SELECTORS:uo,LIGHTNING_DEALS_REGULAR_PRICE_SELECTORS:_o,LIGHTNING_DEALS_TEXT_REGEX:po,LIGHTNING_DEALS_CLAIMED_TEXT_REGEX:fo,AMAZON_ONE_TIME_COUPON_SELECTOR:Po,AMAZON_COUPON_SELECTORS:Io,AMAZON_AMOUNT_REGEX:bo,AMAZON_PERCENT_REGEX:Ao,AMAZON_SUBSCRIBE_AND_SAVE_REGEX:wo,AMAZON_PRIME_MONEY_REGEX:Oo,COUPON_OFFERS_TO_IGNORE_REGEXP_LIST:Co,COUPON_OFFERS_EXCEPTION_REGEXP_LIST:yo,PRIME_DISCOUNT_SELECTOR:Lo,PRIME_PERCENT_DISCOUNT_SELECTORS:No,PRIME_MEMBER_AMOUNT_OFF_SELECTOR:vo,PRIME_FIXED_DISCOUNT_SELECTORS:ko,AMAZON_CART_NUMBER_OF_ITEMS_SELECTOR_LIST:Do,AMAZON_CART_ITEMS_SELECTOR_LIST:xo,AMAZON_CART_ITEM_PRICE_SELECTOR_LIST:Mo,AMAZON_CART_ITEM_COUPON_SELECTOR_LIST:Uo,AMAZON_CART_ITEM_ASIN_ATTRIBUTE_LIST:Fo,AMAZON_CART_PRODUCT_LINK_LIST:Go,AMAZON_CART_ITEM_NOTIF_PLACEMENT_SELECTOR_LIST:qo,CART_ITEM_ASIN_CSS_SELECTOR_LIST:Ho,CART_ITEM_ASIN_CUSTOM_PROPERTY_LIST:Bo,CART_ITEM_ASIN_REGEXP_LIST:Xo,CART_ALT_PRICE_SELECTORS:$o,CART_PRICE_FRACTIONED_DOLLARS_SELECTOR_LIST:Wo,CART_PRICE_FRACTIONED_CENTS_SELECTOR_LIST:Zo,AMAZON_CHECKOUT_ITEMS_SELECTOR_LIST:Ko,AMAZON_CHECKOUT_DISCOUNT_REGEX_LIST:Vo,AMAZON_CHECKOUT_PRICE_SELECTOR_LIST:Yo,CHECKOUT_MERCHANT_ID_SELECTOR_LIST:zo,CHECKOUT_ITEM_ASIN_CSS_SELECTOR_LIST:jo,CHECKOUT_ITEM_ASIN_ATTRIBUTE_LIST:Jo,CHECKOUT_ITEM_ASIN_CUSTOM_PROPERTY_LIST:Qo,CHECKOUT_ITEM_ASIN_REGEXP_LIST:ti,CHECKOUT_ALT_PRICE_SELECTORS:ei,CHECKOUT_PRICE_FRACTIONED_DOLLARS_SELECTOR_LIST:ni,CHECKOUT_PRICE_FRACTIONED_CENTS_SELECTOR_LIST:oi,AMAZON_PRODUCT_PAGE_OBSERVED_SELECTORS:ii,HOSTNAME_REGEXES:ri,PDP_REGEXES:ai,PDP_URL_EXCLUSIONS:ci,CART_PAGE_REGEXES:si,CART_URL_EXCLUSIONS:li,CHECKOUT_PAGE_REGEXES:ui,PDP_PRICE_REGEXP_LIST:pi,CART_ITEM_PRICE_REGEXP_LIST:di,CHECKOUT_ITEM_PRICE_REGEXP_LIST:fi,PDP_ELEMENT_IDS_TO_WAIT_ON:mi,PDP_ELEMENTS_TO_WAIT_ON_SELECTORS:Ei,PDP_ASIN_ELEMENT_IDS:gi,PDP_ASIN_LINK_SELECTOR_LIST:Si,PDP_ASIN_LINK_REGEXP_LIST:Ti,PDP_ASIN_CSS_SELECTOR_LIST:hi,PDP_ASIN_REGEXP_LIST:Ii,PDP_ASIN_CSS_SELECTOR_ATTRIBUTE_LIST:Ri,PDP_ASIN_CSS_SELECTOR_CUSTOM_PROPERTY_LIST:Pi};function $(e){return Le.default.assign({},Ci,e)}B();var yi=1e6;function z(e){return e<yi}function bi(e){try{let t=e.split(".").map(i=>i&&i.replace(/[^0-9]/gi,"")),n=parseInt(t[0]||0),o=parseInt(t[1]||0);return n*100+o}catch(t){w("*** failed to convert price to cents ***",t)}return 0}function L(e,t={}){if(!e)return;if(e.toLowerCase().indexOf("free")!==-1)return 0;let n=e.match(/(?:used\s&\s)?new/i),o=e.match(/from (\$[^\+]*)/i);if(n&&!o)return 0;let i;return o&&o.length&&o[1]?i=o[1]:i=ut(e,t.customPriceRegExp),E("pc_amz_parse_whole_price_to_cents")?bi(i):parseInt(i.replace(/[^0-9]/gi,""))}function k(e,t,n){let o;if(t){let i=document.querySelectorAll(e);if(i.length!==1)return 0;o=i[0]}else o=typeof e=="string"?document.querySelector(e):e;if(o){let i=L(o.innerText,n);if(z(i))return i}return 0}function W(e="",t,n=document){let o=n.querySelector(`${e} ${t.dollars}`),i=n.querySelector(`${e} ${t.cents}`);if(o&&i){let r=parseInt(o.innerText.replace(/[^0-9]/gi,""))*100+parseInt(i.innerText.replace(/[^0-9]/gi,""));if(z(r))return r}return null}function j(e,t=document){return t.querySelectorAll(e).length>0}var Ne=p(I());function F(e,t){let n=document.querySelector(e),o=Ne.default.get(n,"innerText");return t.exec(o)}function pt(e){let{percent:t}=e.groups;return parseInt(t)}function J(e){let{dollars:t,cents:n}=e.groups;return n?parseInt(t)*100+parseInt(n):parseInt(t)*100}function Ai(e){let{percent:t}=e.groups;return parseInt(t)}function wi(e){let{dollars:t,cents:n=0}=e.groups;return parseInt(t)*100+parseInt(n)}function Oi(e,t){let{price:n,selector:o}=e,i=t.AMAZON_ONE_TIME_COUPON_SELECTOR,r=t.AMAZON_PERCENT_REGEX,a=F(i,r);if(!a)return null;let c=Ai(a),s=Math.floor(n*(100-c)/100),_=n-s;return{...e,discount:_,discountPercent:c,selector:{...o,coupon:i}}}function Li(e,t){let n=t.AMAZON_ONE_TIME_COUPON_SELECTOR,o=t.AMAZON_AMOUNT_REGEX,i=F(n,o);if(!i)return null;let{selector:r}=e,a=wi(i);return{...e,discount:a,selector:{...r,coupon:n}}}function Ot(e,t){let{discount:n}=e;return n?e:Oi(e,t)||Li(e,t)||e}var ve=p(it()),Q=p(I());B();var Ni=2;function vi(e,t){if(!e||!t)return!1;let n=t.COUPON_OFFERS_EXCEPTION_REGEXP_LIST;return Q.default.get(n,"length")?n.some(({pattern:o,flags:i})=>new RegExp(o,i).exec(e)):!1}function ki(e,t){if(Q.default.get(e,"offsetHeight",0)<=0)return!0;let n=Q.default.get(e,"innerText");return vi(n,t)?!1:t.COUPON_OFFERS_TO_IGNORE_REGEXP_LIST.some(({pattern:i,flags:r})=>new RegExp(i,r).exec(n))}async function Lt(e,t){let n=0;try{if(!e||!t)return 0;let o=t.AMAZON_COUPON_SELECTORS;await ve.default.all(o.map(async a=>await x(a,1e3)));let i=[];for(let a of o){let c=document.querySelectorAll(a);if(Q.default.find(c,s=>s.offsetHeight>0)){i=c;break}}let r=0;for(let a of i){if(ki(a,t))continue;let c=a.innerText,s=t.AMAZON_PERCENT_REGEX.exec(c),_=t.AMAZON_AMOUNT_REGEX.exec(c),l=0;if(s){let d=pt(s);l=Math.floor(e/100*d)}else _&&(l=J(_));if(l>0&&(n+=l,r++,r>=Ni))break}}catch(o){w(["*** coupon discount error *** ",o])}return n}var ke=p(I());function Di(e,t){let n=e.PRIME_FIXED_DISCOUNT_SELECTORS;for(let o=0;o<n.length;o++){let i=n[o],r=F(i,e.AMAZON_AMOUNT_REGEX),a=F(e.PRIME_MEMBER_AMOUNT_OFF_SELECTOR,e.AMAZON_PRIME_MONEY_REGEX);if(r){let c=J(r);if(a){let s;return ke.default.forEach(e.PRIME_PRICE_SELECTORS,_=>{s||(s=k(_,!0,t))}),{discount:c,price:s,selector:i}}return{price:c,selector:i}}}return null}function xi(e){let t=e.PRIME_PERCENT_DISCOUNT_SELECTORS;for(let n=0;n<t.length;n++){let o=t[n],i=F(o,e.AMAZON_AMOUNT_REGEX),r=F(e.PRIME_DISCOUNT_SELECTOR,e.AMAZON_PERCENT_REGEX);if(i&&r){let a=pt(r),c=J(i),s=Math.floor(c*(1-a*.01)),_=c-s;return{price:c,discount:_,discountPercent:a,selector:o}}}return null}async function De(e,t){return await x(e.PRIME_DISCOUNT_SELECTOR,2e3),xi(e)||Di(e,t)}var h=$();async function Mi(e){await Me.default.all(h.LIGHTNING_DEALS_SELECTORS.map(async o=>await x(o,1500)));let t,n;for(let o of h.LIGHTNING_DEALS_SELECTORS){let i=q.default.get(document.querySelector(o),"innerText");if(i){t=i;break}}for(let o of h.LIGHTNING_DEALS_CLAIMED_SELECTORS){let i=q.default.get(document.querySelector(o),"innerText");if(i){n=i;break}}if(h.LIGHTNING_DEALS_TEXT_REGEX.some(({pattern:o,flags:i=""})=>new RegExp(o,i).test(t)))if(h.LIGHTNING_DEALS_CLAIMED_TEXT_REGEX.some(({pattern:o,flags:i=""})=>new RegExp(o,i).test(n))){let o=h.LIGHTNING_DEALS_REGULAR_PRICE_SELECTORS;for(let i of o){let r=W(i,{dollars:h.PDP_PRICE_FRACTIONED_DOLLARS_SELECTOR,cents:h.PDP_PRICE_FRACTIONED_CENTS_SELECTOR});if(r||(r=k(i,!0,e)),r)return r}}else{let o=t.match(/\$([\d\.]+)/)||[];return o.length&&G(o[1])}}function Ui(e){let t=h.BASE_PRICE_SELECTORS;if((document.body.outerHTML.match(h.IS_ELIGIBLE_FOR_PRIME_DEAL_REGEX)||e)&&(t.unshift(h.PRIME_PRICE_SELECTORS),t=q.default.flatten(t)),q.default.some(h.PRIME_EXCLUSIVE_PRICE_ELEMENT_SELECTORS,i=>document.querySelector(i))&&!e){let i=h.NON_PRIME_DEALS_PRICE_SELECTORS;t.unshift(i),t=q.default.flatten(t)}return t}async function xe(e,t){let n=T.get(["settings","prime"]),o=Ui(n),i;E("enable_lightning_deal_pricing")&&n&&(i=await Mi(t));let r=j(h.PDP_ALT_PRICE_SELECTORS),a={dollars:h.PDP_PRICE_FRACTIONED_DOLLARS_SELECTOR,cents:h.PDP_PRICE_FRACTIONED_CENTS_SELECTOR};q.default.forEach(o,_=>{i||(r?i=W(_,a):i=k(_,!0,t))}),i||(i=Y(e,h));let c=await Lt(i,h);if(n){let _=await De(h,t);if(_)return _.discount+=c,Ot(_,h)}return Ot({price:i,discount:c},h)}async function Ue(e,t,n,o){h=e;let i=await xe(void 0,o);for(;!i&&t>0;)await A(100),i=await xe(n,o),--t;return i}function dt(e){let t=document.querySelector(e.PRODUCT_SELLER_SELECTOR);return t?t.innerText:null}function Fi(e){let t=document.querySelector(e.FREE_SHIPPING_MSG_SELECTOR);if(t&&t.innerText&&e.PANTRY_FREE_SHIPPING_THRESHOLD_REGEX.test(t.innerText)){let n=O(/\$(\d+)/,t.innerText.trim());return parseInt(n)*100}return e.FREE_SHIPPING_THRESHOLD_PANTRY}function ft(e,t){let n=document.querySelector(t.SHIPPING_NAVBAR_SELECTOR),o=n&&n.getAttribute("data-category"),i=document.querySelector(t.PRODUCT_SELLER_SELECTOR),r=i&&i.innerText,a=/pantry/i.test(o)||t.SOLD_BY_PRIME_PANTRY_REGEX.test(r),c=T.get(["settings","prime"]),s=Fi(t),_=document.querySelector(t.POPOVER_SHIPPING_DETAILS_SELECTOR),l=document.querySelector(`${t.RIGHT_PANEL_SHIPPING_EL_SELECTOR} [${t.RIGHT_PANEL_SHIPPING_ATTR}]`);if(c&&a&&e>=s)return 0;if(a)return t.DEFAULT_PANTRY_SHIPPING_RATE;if(l){let d=l.getAttribute(t.RIGHT_PANEL_SHIPPING_ATTR),m=O(/\$(\d+[.]?\d*)/,d);if(m)return Math.round(parseFloat(m).toFixed(2)*100)}else if(_){let d=_.innerText;if(t.GET_FREE_SHIPPING_REGEX.test(d)&&t.PAID_SHIPPING_REGEX.test(d)){let m=O(t.SHIPPING_COST_REGEX,d);if(m)return Math.round(parseFloat(m).toFixed(2)*100)}}return k(t.DEFAULT_SHIPPING_SELECTOR)}var qe=p(it()),tt=p(I());K();function Fe(e,t){let n;return tt.default.forEach(e,o=>{n||(n=k(o,!0))}),n}async function Gi(e,t,n){let o=Fe(e,t);for(;!o&&n>0;)await A(100),o=Fe(e,t),--n;return o}function Ge(e,t){let n;return tt.default.forEach(e,o=>{if(n)return;let i=document.querySelectorAll(o);i.length&&(t?i.length===1&&(n=i[0].innerText.trim()):n=i[0].innerText.trim())}),n}async function qi(e,t,n){let o=Ge(e,t);for(;!o&&n>0;)await A(100),o=Ge(e,t),--n;return o}async function Hi(e){let t;return e.type==="price"?t=await Gi(e.selectors,e.oneSelector,e.retries):t=await qi(e.selectors,e.retries),{key:e.key,data:t}}async function Nt(e){let t={},n=tt.default.map(e,i=>Hi(i)),o=await qe.default.all(n);return tt.default.forEach(o,i=>{i&&(t[i.key]=i.data)}),t}var We=p(I());var Xe=p(St()),$e=p(I());var Be=p(St()),f=p(I());B();var He=p(St());var D=p(M()),vt=class extends He.Component{componentDidMount(){X("page","offerAvailableElsewhereTooltip",{view:"quoteCompleteNotification",type:"notificationHover"})}render(){return lt()?(0,D.jsx)(pe,{content:this.props.blocksContent,onCloseTooltip:this.props.onCloseTooltip,viewProductPage:this.props.viewProductPage,classes:"retail-pc-available-elsewhere-blocks"}):(0,D.jsxs)(se,{onCloseTooltip:this.props.onCloseTooltip,classes:"offer-when-unavailable-details",children:[(0,D.jsxs)("div",{className:"comparison",onClick:()=>this.props.viewProductPage(),children:[(0,D.jsx)("h2",{children:"This item may be in stock on another site."}),(0,D.jsx)("br",{}),(0,D.jsx)("span",{className:"text",children:"Go to Capital One Shopping to view availability on other sites. Please note, pricing may vary significantly."})]}),(0,D.jsx)("button",{className:"button-style primary-btn-large",onClick:()=>this.props.viewProductPage(),children:"Continue to Capital One Shopping"})]})}},kt=vt;var y=p(M()),xt="product-page-annotation-addtl-content",Dt=class extends Be.Component{constructor(...t){super(...t),this.state={showSavingsDetails:!1,watching:!1},this.runIdSavingsAlertSent=new Set}async setBlocksNotifications(){if(!lt())return;let t=this.getRun(),{hasSavings:n,bestOfferWhenUnavailable:o}=t?.savingsData||{};if(!this.state.blocksSavingsNotif&&n&&!this.isFetchingBlockSavingsNotif){this.isFetchingBlockSavingsNotif=!0;try{let i=await Pt("retail-pc-savings-popover");i&&this.setState({blocksSavingsNotif:i})}finally{this.isFetchingBlockSavingsNotif=!1}}else if(!this.state.blocksAvailableElsewhereNotif&&o&&!this.isFetchingBlocksAvailableElsewhereNotif){this.isFetchingBlocksAvailableElsewhereNotif=!0;try{let i=await Pt("retail-pc-offer-available-elsewhere");i&&this.setState({blocksAvailableElsewhereNotif:i})}finally{this.isFetchingBlocksAvailableElsewhereNotif=!1}}}componentDidMount(){this.setBlocksNotifications()}componentDidUpdate(t){let n=t.notification,o=this.props.notification;(n?.run?.status!=="complete"&&o?.run?.status==="complete"||!n?.firstResultWithSavings&&o?.firstResultWithSavings||!n?.estimateRun&&this.props.notification?.estimateRun)&&this.setBlocksNotifications()}componentWillReceiveProps(t){f.default.get(this.props,"notification.run.status")==="complete"&&f.default.get(t,"notification.run.status")!=="complete"&&this.setState({watching:!1,preventInitialShow:!1})}clearHideSavingsDetailsTimeout(){this.hideSavingsDetailsTimeout&&clearTimeout(this.hideSavingsDetailsTimeout)}getSavingsData(t,{isCurrentRun:n=!1}={}){if(!t)return{hasSavings:!1};let o=f.default.find(f.default.get(t,"results"),{heroOffer:!0});if(!o)return{hasSavings:!1};let i,r,a,c=!f.default.get(t,"originResult.pricing.total");return n&&o.origin&&c?i=f.default.get(t,"results[1]"):o.origin||(r=ue(o),a=f.default.get(o,"pricing.afterRewardTotal")<f.default.get(t,"originResult.pricing.total")?f.default.get(o,"pricing.reward.amount"):null),{hasSavings:!!(r||a),savings:r,reward:a,bestResult:o,bestOfferWhenUnavailable:i}}getRun(){let t=f.default.get(this.props,"notification.run"),n=E("pc_quick_notif"),o=E("pc_first_result_with_savings");if(!n&&!o||f.default.get(t,"status")==="complete")return{...t,savingsData:this.getSavingsData(t,{isCurrentRun:!0})};if(o){let i=f.default.get(this.props,"notification.firstResultWithSavings");if(i){f.default.set(i.resultWithSavings,"meta.recommendedResult",!0),f.default.set(i.resultWithSavings,"heroOffer",!0);let r={runId:i.runId,status:"complete",originResult:i.originResult,results:[i.resultWithSavings,i.originResult],isFirstResultWithSavings:!0},a=this.getSavingsData(r);if(a.hasSavings)return w("*** first result with savings ***",r),{...r,savingsData:a}}}else if(n){let i=f.default.get(this.props,"notification.estimateRun"),r=this.getSavingsData(i);if(r.hasSavings)return{...i,savingsData:r}}}getBestDealDisplayType(){let t;return E("retail_pc_transparent_pricing_variant_a")?t=V.transparentPricingVariantA:E("retail_pc_transparent_pricing_variant_b")?t=V.transparentPricingVariantB:E("retail_pc_transparent_pricing_variant_c")?t=V.transparentPricingVariantC:t=V.standardPricing,t}render(){if(f.default.get(this.props,"notification.ignoreRun"))return null;let n=this.getRun(),o=f.default.get(n,"status")==="complete",{hasSavings:i,savings:r,reward:a,bestResult:c,bestOfferWhenUnavailable:s}=n?.savingsData||{},_=f.default.get(this.props,"notification.wirelessPriceComparison"),l=E("w_ext_price_comparison_treatment")&&_&&!!_.valid,d=`${o?`${i||s||l?"savings":"no-savings"}`:"searching"}`,m=E("notif_rounded_border")?"rounded-btn":"",b=this.state.showSavingsDetails,R=this.state.showSavingsDetails;!this.state.preventInitialShow&&o&&(r&&r>=1e3||l)&&(R=!0);let N=this.props?.pageType;if(N){let _n=n?.isFirstResultWithSavings?"-first-result-savings":"";N=`${N}${_n}`}this.runIdSavingsAlertSent=_e(f.default.get(n,"runId"),this.runIdSavingsAlertSent,o,i,N);let P=s,Jt=E("retail_pc_savings_full_logo_bau");return(0,y.jsx)("div",{className:`product-page-annotation ${b?"tooltip-open":""}`,children:(0,y.jsxs)("div",{className:`savings-button ${d} ${m}`,onClick:()=>{!(i||s)&&l?this.visitWirelessDevicePage(_.link):this.viewProductPage(P?"availableElsewhereButton":"savingsButton")},onMouseEnter:this.onEnterSavingsButton.bind(this),onMouseLeave:this.onLeaveSavingsButton.bind(this),children:[(0,y.jsx)(ae,{}),o?o&&i?(0,y.jsx)(ge,{savings:r,reward:a}):o&&P?(0,y.jsx)(Se,{result:s}):o&&l?(0,y.jsx)(me,{data:_}):(0,y.jsx)(Ee,{}):(0,y.jsx)(re,{}),this.props.isFloatingNotif&&o&&i&&R?(0,y.jsx)(ie,{containerNamespace:xt,children:(0,y.jsx)(fe,{run:n,bestResult:c,viewProductPage:this.viewProductPage.bind(this),onCloseTooltip:()=>this.hideSavingsDetails(),blocksContent:this.state.blocksSavingsNotif,bestDealDisplayType:this.getBestDealDisplayType(),showFullShoppingLogoBAU:Jt})}):o&&i&&R?(0,y.jsx)(de,{bestResult:c,run:n,onCloseTooltip:()=>{this.hideSavingsDetails()},viewProductPage:this.viewProductPage.bind(this),blocksContent:this.state.blocksSavingsNotif,bestDealDisplayType:this.getBestDealDisplayType(),showFullShoppingLogoBAU:Jt}):o&&P&&R?(0,y.jsx)(kt,{onCloseTooltip:()=>this.hideSavingsDetails(),viewProductPage:this.viewProductPage.bind(this,"continue"),blocksContent:this.state.blocksAvailableElsewhereNotif}):o&&l&&R?(0,y.jsx)(le,{data:_,onCloseTooltip:()=>this.hideSavingsDetails()}):null]})})}onEnterSavingsButton(){this.clearHideSavingsDetailsTimeout(),this.showSavingsDetails()}onLeaveSavingsButton(){this.props.isFloatingNotif||(this.hideSavingsDetailsTimeout=setTimeout(()=>this.hideSavingsDetails(),500))}hideSavingsDetails(){this.setState({showSavingsDetails:!1,preventInitialShow:!0})}showSavingsDetails(){this.setState({showSavingsDetails:!0})}getRunDataForViewProductPage(t){let n=E("pc_quick_notif"),o=E("pc_first_result_with_savings"),i,r=this.props?.pageType;return f.default.get(t,"status")==="complete"?i=f.default.get(t,"runId"):o?(i=f.default.get(this.props,"notification.firstResultWithSavings").runId,r&&(r=`${r}-first-result-savings`)):n&&(i=f.default.get(this.props,"notification.estimateRun.parentRunId")),{runId:i,pageType:r}}viewProductPage(t){let n=f.default.get(this.props,"notification.run"),o=f.default.find(f.default.get(n,"results"),{heroOffer:!0}),i=f.default.get(this.props,"notification.communityDeal.deal"),r=f.default.get(i,"url"),{runId:a,pageType:c}=this.getRunDataForViewProductPage(n)||{};X("trackClick","viewProductPage","",{view:"quoteCompleteNotification",savings:f.default.get(o,"savings"),pageLocation:"annotation",productId:f.default.get(i,"wbid"),productUrl:r,label:String(t),quoteId:a,pageType:c}),r&&a&&Rt(`${ce}${r}?extReq=true${a?`&run=${a}`:""}`)}visitWirelessDevicePage(t){t&&Rt(t)}componentWillUnmount(){this.clearHideSavingsDetailsTimeout()}},Mt=st({notification:["notification"]},Dt);var Ft=p(M()),Ut=class extends Xe.Component{constructor(...t){super(...t),this.state={}}render(){let t=this.props.notification||{},n=$e.default.get(t,"run.runId");return Qt()&&n&&X("page","disableNotifPcTest",{quoteId:n,view:"productPageAnnotation",type:"test"}),(0,Ft.jsx)("div",{className:n?`wb-run run-${n}`:"",children:(0,Ft.jsx)(Mt,{...this.props})})}},Gt=st({notification:["notification"]},Ut);var Ze=p(M());function qt({insertAfter:e,pageType:t}){let n=T.get("settings"),o=We.default.get(n,"notificationPreferences");if(o&&o.notificationStyle==="button"||!E("show_price_comparison"))return!1;let i=E("price_comparison_floating_notif");Te({appName:"offers",cssUrl:"offers.css",positionOnTop:!1,additionalClass:"__annotation",insertAfter:e,app:(0,Ze.jsx)(Gt,{pageType:t,isFloatingNotif:i}),...i&&{additionalContent:{namespace:xt,positionOnTop:!0}},disableTopPositioningObserver:!0},()=>{ne()})}var Ke=!1,Ve=!1,u=$();async function Bi(){let e=await U({domain:"amazon.com"});u=$(e&&e.config||{})}function Xi(){let e=u.ALL_BUYING_OPT_SELECTORS.slice();return e.push(u.ATC_SELECTOR),!!g.default.some(e,t=>document.querySelector(t))}function $i(e){let{asin:t}=e;t&&(T.set("currentASIN",t),Ke||(Ke=!0,qt({insertAfter:u.INSERT_PC_AFTER_ELEMENTS,pageType:ct.productPage})),Ae(e))}function Wi(e){let t;return g.default.forEach(e,n=>{if(t)return;let o=document.querySelector(n);o&&o.innerText&&(t=o.innerText)}),t}function Zi(){let e=[],t=document.querySelectorAll(u.PRODUCT_CAROUSEL_SELECTOR);return g.default.forEach(t,n=>{let o=n.querySelector(u.PRODUCT_CAROUSEL_HEADING_SELECTOR).innerText.replace("(What's this?)","").trim().toLowerCase();if(o!=="related video shorts"){let i=n.querySelectorAll(u.PRDOUCT_CAROUSEL_CARDS_SELECTOR);g.default.forEach(i,r=>{try{let a=L(r.querySelector(u.PRODUCT_PRICE_SELECTOR).innerText),c,s=r.querySelector(u.PRODUCT_ASIN_ELEM_SELECTOR);s?c=s.getAttribute(u.PRODUCT_ASIN_ELEM_ATTR):(s=r.querySelector(u.PRODUCT_ASIN_META_SELECTOR),s&&(c=JSON.parse(s.getAttribute(u.PRODUCT_ASIN_META_ATTR)).asin));let _,l=g.default.find(u.PRDOUCT_TITLE_SELECTORS,R=>r.querySelector(R));l&&(_=l.getAttribute("title"));let d=`http://www.amazon.com/dp/${c}`,m,b=g.default.find(u.PRODUCT_IMAGE_SELECTORS,R=>r.querySelector(R));b&&(m=b.src,b.alt&&(_=b.alt)),c&&a&&e.push({title:_,url:d,image:m,price:a,asin:c,source:o})}catch{}})}}),e}function Ki(e,t){try{if(!e){let l=document.querySelector(u.MORE_BUYING_OPTIONS_PRICE_SELECTOR);l&&(e=L(l.innerText.split("$")[1]))}let n=g.default.find(u.PRODUCT_FEEDBACK_SELECTORS,l=>document.querySelectorAll(l)),o=(0,g.default)(n).map(l=>{let d=l.parentElement,m=d.innerText;for(;m.indexOf("#")===-1&&d!==document.body;)d=d.parentElement,m=d.innerText;return{rank:parseInt(O(/#([0-9]+)/,m)),text:m,url:l.href}}).filter(l=>l&&l.url&&l.url.indexOf("bestsellers")!==-1&&l.url.indexOf("_last")!==-1).sort((l,d)=>l.rank-d.rank).value(),i=(0,g.default)(u.PRODUCT_INFO_SELECTORS).map(l=>document.querySelector(l)).filter().value(),r,a;if(i.length){let l=i[0].innerText;r=(0,g.default)(l.split(`
`)).map(d=>{let m=d.split(/\\t|:/);if(m.length>=2){let b=m[0],R=m.splice(1).join(" ").trim();return R.match(/((january|february|march|april|may|june|august|september|october|november|december)\s[0-9]+,\s[0-9]+)/i)&&(a=R),{name:b,value:R}}}).filter().value()}let c={},s=document.querySelector(u.PRODUCT_CATEGORY_SELECTED_ELEMENT_SELECTOR);if(s){let l=s.value;c.link=`https://www.amazon.com/s/ref=nb_sb_noss_2?${l}`,c.text=s.innerText}else s=document.querySelector(u.PRODUCT_CATEGORY_ELEMENT_SELECTOR),s&&(c.link=s.href,c.text=s.innerText);let _=Zi();return{price:e,rankings:o,asin:t,introduced:a,productInfo:r,category:c,products:_}}catch{}}function Vi(e,t){try{let n=O(/data = ({.*});/,e);if(n&&(n=JSON.parse(n)),n&&n.colorToAsin&&g.default.keys(n.colorToAsin).length){let o;if(g.default.forEach(n.colorToAsin,(i,r)=>{i.asin===t&&(o=r)}),o){let i=O(/data\["colorImages"\] = ({.*});/,e);if(i){i=JSON.parse(i);let r=i[o],a=g.default.find(r,{variant:"MAIN"});return g.default.get(a,"large")||g.default.get(r,"[0].large")}}}else if(n=O(/'colorImages':(.*)/,e),n&&(n=n.replace("{ 'initial':",""),n=n.substr(0,n.length-2),n=JSON.parse(n),n))return g.default.get(n,"[0].large")}catch{return null}}function Yi(e){let t=document.documentElement.innerHTML,n=Vi(t,e);return n||(g.default.forEach(u.PRODUCT_MAIN_IMAGE_SELECTORS,o=>{if(n)return;let i=document.querySelector(o);if(i){let r=i.getAttribute(u.PRODUCT_MAIN_IMAGE_ATTRIBUTE);if(r)try{let a=JSON.parse(r);if(a){let c=g.default.keys(a);n=c[c.length-1]}}catch{}!n&&i.src&&(n=i.src)}}),n)}function Ye(e,t){t||(t=Wi(["#title","h1"]));let n=Yi(e),o=`http://www.amazon.com/dp/${e}?psc=1`;return{title:t,image:n,url:o,vendor:"amazon.com"}}function ze(e=0){return oe(e,u.CUT_OFF_PRICE_FOR_PRICE_RUN_IN_CENTS)?(Tt(),T.set("currentASIN",null),!0):!1}async function zi(e,t){let n=T.get("currentASIN");if(e&&n!==e){if(T.set("currentASIN",e),!Ve||!t){let o,i,r,a,c,s,_,l=At(u);if(t){let b=T.get("siteAPIData");c=wt(u);let R=g.default.get(b,"siteData.runParsers.productPage");if(R){let P=await Nt(R);P&&(o=P.price||Y(e,u),s=Ye(e,P.title),i=P.shipping||ft(o,u),a=P.seller||dt(u))}else({price:o,discount:r}=await Ue(u,1,e,{customPriceRegExp:u.PDP_PRICE_REGEXP_LIST})),i=ft(o,u),a=dt(u),s=Ye(e);if(document.querySelector("#partialStateBuybox .unselectedDims"))return}let d=document.querySelector(u.PRODUCT_DEAL_EL_SELECTOR);d&&(_=d.id.replace("gb_atc_",""));let m=Ki(o,e);if(ze(o))return;r=r||0,$i({asin:e,price:o,discount:r,shipping:i,seller:a,atcData:c,product:s,feedback:m,dealId:_,arrivalDate:l})}}else Ve=!1}function ji(e){let t=document.getElementById("~/notifications/common-buy-box")||document.getElementById("addToCart");if(t){let l=t.innerText,d=document.getElementById("#abbWrapper");d&&(l=l.replace(d.innerText,""));let m=document.querySelector(`[href="/gp/offer-listing/${e}/ref=dp_olp_new?ie=UTF8&condition=new"]`);if(l&&l.match(/amazon digital services llc|pre-order: add to cart|add to rental|buy and get code/i)&&!m)return!0}let n=document.getElementById("productTitle"),o=n?n.innerText:null;if(o&&o.match(/gift\s?card|\[digital\scode\]|key\scard|pc\sdownload|protection\splan/i))return!0;let i=document.getElementById("nav-subnav"),r=i?i.innerText:"",a=/xbox|nintendo|playstation|ps4/i;if(o&&o.match(/\bbundle/i)&&!o.match(a)&&!r.match(/video\sgames/i))return!0;let c=document.querySelector(".a-active .mediaTab_title"),s=c?c.innerText:null;if(s&&s.match(/access\scode|pamphlet/i))return!0;let _=["#dv-buybox-play","#dv-action-box","#bundle_feature_div h2"];return!!g.default.find(_,l=>document.querySelector(l))}function Ji(e){let t=new RegExp(/wl-movie|dmusic_wishlist|dv-buybox-play/i);return _t(e,t)}async function Qi(){await Ie(u);function e(){let{element:t,asin:n}=Ce(u),o=T.get("currentASIN");if(n&&n!==o){if(ee(),ji(n)||Ji(t)){Tt(),T.set("currentASIN",null);return}T.set("currentASIN",null),zi(n,!0)}}g.default.forEach(u.AMAZON_PRODUCT_PAGE_OBSERVED_SELECTORS,t=>{let n=document.querySelector(t);n&&new MutationObserver(e).observe(n,{childList:!0,subtree:!0})}),e()}async function Bt(e,t=500,n=30){if(!e||Array.isArray(e)&&!e.length)return;let o=C(e),i=0;for(;!o&&(++i,!(i>=n));)await A(t),o=C(e);return o}function je(e,t){v(e,{...t,disablePriceRun:()=>ze(t.price)})}async function tr(e){let t=await Bt(u.AMAZON_CART_NUMBER_OF_ITEMS_SELECTOR_LIST,100,100),n=await Bt(u.AMAZON_CART_ITEMS_SELECTOR_LIST,100,100);if(n){if(E("pc_amz_cart_items_wait")){let o=1;try{let c=document.querySelector(t);if(c){let s=c.textContent.replace(/[^0-9]/g,"");s&&(o=parseInt(s))}}catch{}let i=100,r=100,a=0;for(;document.querySelectorAll(n).length<o&&(await A(i),++a,!(a>=r)););}g.default.forEach(document.querySelectorAll(n),o=>{let i=C(u.AMAZON_CART_ITEM_NOTIF_PLACEMENT_SELECTOR_LIST,o),r=o.querySelector(i);if(r){let a=C(u.AMAZON_CART_ITEM_PRICE_SELECTOR_LIST,o),c=o.querySelector(a),s;if(c)if(j(u.CART_ALT_PRICE_SELECTORS,c)){let P={dollars:C(u.CART_PRICE_FRACTIONED_DOLLARS_SELECTOR_LIST,c),cents:C(u.CART_PRICE_FRACTIONED_CENTS_SELECTOR_LIST,c)};s=W(void 0,P,c)}else{let P=L(g.default.get(c,"innerText"),{customPriceRegExp:u.CART_ITEM_PRICE_REGEXP_LIST});s=P&&z(P)?P:null}let _=C(u.AMAZON_CART_ITEM_COUPON_SELECTOR_LIST,o),l=o.querySelector(_),d=0;if(s&&l){let N=u.AMAZON_PERCENT_REGEX.test(l.innerText);if(d=L(l.innerText)||0,N){let P=Math.floor(s*(1-d*.01));d=s-P}}let m=C(u.AMAZON_CART_PRODUCT_LINK_LIST,o),b=o.querySelector(m),R;if(b){let N=b.href?.split("?")[1],P=Xt.default.parse(N);R=g.default.get(P,"smid")}je({additionalClass:"cart-page open-right",insertAfterElement:r},{asin:ye(o,u),discount:d,sellerId:R,price:s,runCollectionId:e,pageType:ct.cartPage})}})}}async function er(e){await A(1e3);let t=await Bt(u.AMAZON_CHECKOUT_ITEMS_SELECTOR_LIST);t&&g.default.forEach(document.querySelectorAll(t),n=>{let o=n.previousElementSibling,i;for(let c of u.AMAZON_CHECKOUT_PRICE_SELECTOR_LIST){let s=o.querySelector(c);if(s){if(j(u.CHECKOUT_ALT_PRICE_SELECTORS,s)){let l={dollars:C(u.CHECKOUT_PRICE_FRACTIONED_DOLLARS_SELECTOR_LIST,s),cents:C(u.CHECKOUT_PRICE_FRACTIONED_CENTS_SELECTOR_LIST,s)};i=W(void 0,l,s)}else{let l=L(s.innerText,{customPriceRegExp:u.CHECKOUT_ITEM_PRICE_REGEXP_LIST});i=l&&z(l)?l:null}break}}let r;try{let c=C(u.CHECKOUT_MERCHANT_ID_SELECTOR_LIST,o),s=o.querySelector(c);if(s){let _=s.href?.split("?")[1],l=Xt.default.parse(_);r=g.default.get(l,"seller")}r||(r=n.getAttribute("value").split("|")[3])}catch(c){w([c])}let a=/(dp|gp)\/buy\/.*\/handlers\/display.html/.test(window.location.href);je({additionalClass:`checkout-page ${a?"margin-left":""}`,insertAfterElement:n},{asin:be(n,u),originMerchantId:r,discount:0,sellerId:r,price:i,runCollectionId:e,pageType:ct.checkoutPage})})}function mt(e,t=!1,n=[]){let o=t?window.location.hostname:window.location.href;return n.length&&n.some(i=>o.includes(i))?!1:(g.default.isArray(e)?e:[e]).some(i=>o.match(new RegExp(i)))}async function $t(){let e=!1;for(await Bi();!Xi();)await A(25);if(mt(u.HOSTNAME_REGEXES,!0)){let t=T.get("settings"),n=g.default.get(t,"notificationPreferences.notificationWhere");if(mt(u.PDP_REGEXES,!1,u.PDP_URL_EXCLUSIONS)){let i=!0;n&&(i=n.indexOf("productPage")!==-1),i&&(T.set("trigger","productPage"),await Qi(),e=!0)}else mt(u.CART_PAGE_REGEXES,!1,u.CART_URL_EXCLUSIONS)?tr(Ht.default.v4()):mt(u.CHECKOUT_PAGE_REGEXES)&&er(Ht.default.v4())}return{active:e}}var H=p(I()),Qe=p(gt());function Wt(e){let t;return H.default.forEach(e,n=>{if(t)return;let o=document.querySelector(n);o&&o.innerText&&(t=o.innerText)}),t}function Je(e){let t=`[property="og:${e}"]`,n=document.querySelector(t);return n?n.content:null}async function nr(){try{let e=Je("title"),t=Je("image"),n=(0,H.default)(document.querySelectorAll('[type="application/ld+json"]')).map(l=>JSON.parse(l.innerText)).find(l=>l["@type"]==="Product"),o=()=>{let d=H.default.get(n,"offers.offers",[]).find(m=>m.itemCondition==="http://schema.org/NewCondition");return ht(H.default.get(d,"price"))},r=Wt([".priceView-price .priceView-customer-price span"]);r=r?ht(r):o();let a=Wt(["#sku-value"])||n.sku,c=n.gtin13,s=e.split(" - ")[0],_=Wt(["#model-value"])||n.model;return{title:e,image:t,price:r,sku:a,gtin:c,brand:s,mpn:_,url:window.location.href,vendor:"bestbuy.com",wbpid:`bestbuy.com_${a}`}}catch{return null}}async function or(){let e=await nr(),t="bestbuy.com";H.default.get(e,"gtin")&&v({additionalClass:"bestbuy-product-page",insertAfterElement:document.querySelector(".pricing-price")},{waitForFullRun:!0,offersFrom:!0,originVendor:t,input:{product:e,unpricedResults:[{vendor:t,product:e,atc:{method:"POST",url:"https://www.bestbuy.com/cart/api/v1/addToCart",headers:[{name:"origin",value:"https://www.bestbuy.com"},{name:"accept-encoding",value:"gzip, deflate, br"},{name:"accept-language",value:"en-US,en;q=0.9"},{name:"user-agent",value:"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/63.0.3239.132 Safari/537.36"},{name:"content-type",value:"application/json; charset=UTF-8"},{name:"accept",value:"application/json"},{name:"referer",value:window.location.href},{name:"cookie",value:""}],postData:{mimeType:"application/json; charset=UTF-8",text:`{"items":[{"skuId":"${e.sku}"}]}`},data:{raw:`{"items":[{"skuId":"${e.sku}"}]}`}},details:{},meta:{graphLink:!0},id:Qe.default.v4()}]},cutOffPriceForPriceRunsInCents:H.default.get(await U({domain:t}),"config.CUT_OFF_PRICE_FOR_PRICE_RUN_IN_CENTS")})}function Zt(){if(!E("ext_other_origins_bestbuy"))return;let e=!1;return window.location.href.match(/site\/.*\.p\?.*skuId=/i)&&(T.set("trigger","productPage"),window.addEventListener("DOMContentLoaded",()=>or()),e=!0),{active:e}}var en=p(it()),nn=p(En()),Et=p(I());async function ir(e){let n=await(await fetch(`https://www.google.com/shopping/product/${e}/specs`)).text();return{gtins:nn.default.load(n)('span:contains("GTIN") + span').text().split(", ")}}async function tn(){let e;if(location.pathname.match(/\/shopping\/product\//)){let t=location.pathname.match(/\/product\/(\d+)/),n=document.querySelector("#product-basic-info");t&&n&&(e=[{gpid:t&&t[1]?t[1]:null,product:{title:n.querySelector("#product-name").innerText,price:L(n.querySelector("#summary-prices .price").innerText)*100},el:n}])}else if(location.href.match(/google\.com\/search.*&tbm=shop/)){let t=document.querySelectorAll(".sh-dlr__list-result"),n=document.querySelectorAll(".sh-dgr__grid-result");t&&t.length?e=Et.default.map(t,o=>{let r=o.querySelector(".sh-dlr__thumbnail a").href.match(/\/product\/(\d+)/);return{gpid:r&&r[1]?r[1]:null,product:{title:o.querySelector('a[data-what="1"]').innerText,price:L(o.querySelector("span").innerText)},el:o}}):n&&n.length&&(e=Et.default.map(n,o=>{let r=o.querySelector(".sh-dgr__thumbnail a").href.match(/\/product\/(\d+)/);return{gpid:r&&r[1]?r[1]:null,product:{title:o.querySelector('a[data-what="1"]').innerText,price:L(o.querySelector("span").innerText)},el:o}}))}e&&rr(e)}async function rr(e){en.default.map(Et.default.take(e,3),async t=>{if(t.gpid){let n=await ir(t.gpid);v({additionalClass:"gs-list-page",insertAfterElement:t.el.querySelector(".sh-dgr__content > :last-child")||t.el.querySelector("#summary-container > div > :last-child")||t.el.querySelector(".sh-dlr__thumbnail > :last-child > :last-child")},{simulateResize:!0,offersFrom:!0,input:{product:{gtin:n.gtins[0],...t.product}}})}})}function Kt(){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>tn()):tn()}var S=p(I());B();K();var et=p(I());function ar(){let e=document.body.innerHTML.match(/"\{.*\\"__PRELOADED_QUERIES__\\":.*\{.*\}.*\}"/g),t;if(e&&e.length)try{let i=JSON.parse(e[0]);t=JSON.parse(i)}catch{}if(!t)return;let n=et.default.get(t,"__PRELOADED_QUERIES__.queries",[]),o;for(let i of n)if(et.default.get(i,"[0][0]","")==="@web/domain-product/get-pdp-v1"){o=et.default.get(i,"[0][1].pricing_store_id");break}return o}var on=async(e,t)=>{if(!t)return;let n=await te("getTargetProduct",{services:e,tcin:t,pricingStoreId:ar()});return et.default.get(n,"data.product")};function an(){let e=S.default.get(document,"body.innerHTML")&&document.body.innerHTML.match(/"\{.*\\"services\\":.*\{.*\}.*\}"/g),t;if(e&&e.length)try{let n=JSON.parse(e[0]);t=JSON.parse(n)}catch{}return t}function cr(){return document.querySelector("title")&&(document.getElementById("specAndDescript")||an())}function nt(e){let t="";return S.default.forEach(e,n=>{let o=document.querySelectorAll(n);for(let i=0;i<o.length;i++){let r=o[i];r&&r.innerText&&(t+=`${r.innerText}
`)}}),t}function rn(e){let t=`[property="og:${e}"]`,n=document.querySelector(t);return n?n.content:null}async function sr(e){let t={};try{let n=await on(an(),e);if(!n)return t;let o;if(n.children){for(let r of n.children)if(r.tcin===e){o=r;break}n.children.length&&!o&&(o=n.children[0])}else o=n;t.gtin=S.default.get(o,"item.primary_barcode"),t.mpn=S.default.get(o,"item.dpci");let i=S.default.get(o,"price.current_retail");i&&(t.price=G(new String(i))),t.brand=S.default.get(o,"item.primary_brand.name")}catch(n){w(n)}return t}function lr(){let e,t=nt(["#specAndDescript"]).match(/TCIN.*:\s*(.*)\n/);t&&t.length&&(e=t[1].replace(/TCIN.*:\s*/,""));let n=(0,S.default)(document.querySelectorAll('div[id="root"] + script')).map(c=>{if(c&&c.innerText&&S.default.includes(c.innerText,"__PRELOADED_STATE__"))return JSON.parse(c.innerText.match(/\{.*\}/)[0].replace("new Set([])",'"new Set([])"'))}).get("[0]"),o=S.default.get(n,"product.selectedTcin"),i=S.default.get(n,"product.productDetails.item.parentTcin"),r=document.querySelector('meta[property="og:title"]')?document.querySelector('meta[property="og:title"]').getAttribute("content"):"",a=S.default.get(window.location.href.match(/preselect=\d+/),"[0]")||S.default.get(window.location.href.match(/\/A-\d+/),"[0]");return a=a.replace("preselect=","").replace("#","").replace("/A-",""),{selectedSku:o,parentSku:i,productTitle:r,skuInUrl:a,pageTcin:e}}function ur(e,t){let{selectedSku:n,parentSku:o,productTitle:i,skuInUrl:r}=t,a,c=S.default.get(e,"[0].@graph[0].sku"),s=S.default.get(e,"[0].@graph[0].name");return c===n||c===o||r===c||s===i?a=S.default.get(e,"[0].@graph[0]"):(a=S.default.chain(e).get("[0]@graph[0].@graph").filter(_=>_["@type"]==="Product").find({sku:n}).value(),a=a||S.default.chain(e).get("[0]@graph[0].@graph").filter(_=>_["@type"]==="Product").find({sku:o}).value()),!a&&c&&(a=S.default.get(e,"[0].@graph[0]")),a.brand=S.default.get(e,"[0].@graph[0].brand"),a}async function _r(e){let t=['.h-margin-b-tiny [data-test="product-price"]','.h-margin-b-default [data-test="product-price"]'],n=0;for(let o of t){await x(o,1e3);let i=nt([o]).trim();if(n=i?G(i):0,n)break}return n||(n=S.default.get(e,"price")),n}function pr(e){let t,n=nt(["#specAndDescript"]).match(/UPC:\s*(\d+)/);return n&&n.length?t=n[1]:t=e.gtin,t&&t.padStart(14,"0")}function dr(e){let t,n=nt(['[data-test="shopAllBrandLink"]']);return n&&n.length?t=n.replace("Shop all","").trim():t=S.default.get(e,"brand"),t}function fr(e){let t,n=nt(["#specAndDescript"]).match(/Item Number.*:\s*(.*)\n/);return n&&n.length?t=n[1].replace(/Item Number.*:\s*/,""):t=S.default.get(e,"mpn"),t}async function mr(){try{let e=rn("title"),t=rn("image"),n=t?t.indexOf("//")===0?`https:${t}`:t:void 0,o=(0,S.default)(document.querySelectorAll('[type="application/ld+json"]')).map(m=>JSON.parse(m.innerText)).value(),i=lr(),r=i.pageTcin||i.skuInUrl,a=o.length?ur(o,i):await sr(r),c=await _r(a)||0,s=r||S.default.get(a,"sku"),_=pr(a),l=dr(a),d=fr(a);return{title:e,image:n,price:c,sku:s,gtin:_,brand:l,mpn:d,url:window.location.href,vendor:"target.com",wbpid:`target.com_${s}`,shipping:c<3500?599:0}}catch(e){return w(e),null}}function Er(){return{graphLink:!0,simpleOriginPricing:!0}}async function gr(){let e=await mr(),t="target.com",n=Er();S.default.get(e,"gtin")&&v({additionalClass:"target-product-page open-right",insertAfterElement:document.querySelector('[data-test="ratingFeedbackContainer"]'),removeExistingApp:!0},{waitForFullRun:!0,offersFrom:!0,originVendor:t,input:{product:e,meta:n},cutOffPriceForPriceRunsInCents:S.default.get(await U({domain:t}),"config.CUT_OFF_PRICE_FOR_PRICE_RUN_IN_CENTS")})}function Sr(){window.location.href.match(/\/p\//i)&&(T.set("trigger","productPage"),setTimeout(gr,500))}async function Vt(){if(!E("ext_other_origins_target"))return;let e=0;for(;!cr()&&e<200;)await A(25),e++;if(e>=200)return;let t=S.default.debounce(Sr,1e3);t();let n=!1,o=[document.querySelector("title")];document.querySelector("#specAndDescript")&&o.unshift(document.querySelector("#specAndDescript"));let i=new MutationObserver(t);return S.default.forEach(o,r=>{i.observe(r,{attributes:!0,characterData:!0,childList:!0,subtree:!0,attributeOldValue:!0,characterDataOldValue:!0})}),{active:n}}function Yt(){}var sn=p(gn()),Z=p(I()),ln=p(gt()),ot=p(mn());async function cn(e,t){if(await(0,ot.runRules)(e,t.productPageParseRules,{inputSchema:"/engines/input/conquest/state",outputSchema:"/engines/output/conquest/state"}),![e.product.mpn&&e.product.brand,e.product.asin,e.product.gtin,e.product.sku].some(o=>o!=null&&o!=""))throw new Error("CE was unable to find one of the following product identifiers: (asin, gtin, sku or (mpn/brand))");if(!e.product.price)throw new Error("CE was unable to retrieve the origin product price");Z.default.forEach(t.runOptions.input.unpricedResults,o=>{o.product=e.product,o.id=ln.default.v4()}),t.runOptions.input.product=e.product;let n;Z.default.forEach(t.buttonOptions.insertAfterElement,o=>{if(n=e.document.querySelector(o),n)return!1}),t.buttonOptions.insertAfterElement=n,Z.default.set(t.runOptions.input,"meta.conquestOrigin",!0),v(t.buttonOptions,{...t.runOptions,cutOffPriceForPriceRunsInCents:t.CUT_OFF_PRICE_FOR_PRICE_RUN_IN_CENTS})}async function jt(e){let t=await U({domain:e});if(!t)return;let n=t.config,o=ot.engineValidator.validate(n,ot.engineValidator.schemas["/engines/input/conquest"]);if(!o.valid)throw new Error("Rules schema validation failed",o.errors);let i={url:window.location.href,document,jQuery:sn.default,product:{url:window.location.href,vendor:n.url}};if(!Z.default.map(n.featureFlags,E).every(s=>s)){console.log("CE not in feature groups");return}let a=!1,c=new RegExp(n.productPagePattern,Z.default.get(n,"productPagePatternFlags",""));return window.location.href.match(c)&&(console.log("CE product page matches, queueing up runConquest"),a=!0,T.set("trigger","productPage"),document.readyState!=="loading"?cn(i,n):document.addEventListener("DOMContentLoaded",()=>{cn(i,n)},{once:!0})),{active:a}}async function Tr(){let e=un.default.getDomain(window.location.href);try{let t=await jt(e);if(t)return t}catch(t){w("Error",t.message)}try{let t=zt[e.replace(".com","")];if(t)return t()}catch{}}export{Tr as a};
